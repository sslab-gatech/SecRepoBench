// Check if the character is EOF or not valid as an unsigned char,
// and return it unchanged if so. If locale support is enabled and
// a valid locale object is available, convert the character to its
// lowercase equivalent using the locale-aware function. Otherwise,
// use the standard tolower function to perform the conversion.