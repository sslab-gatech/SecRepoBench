static void
clear_all_old(mrb_state *mrb, mrb_gc *gc)
{
  mrb_assert(is_generational(gc));
  if (gc->full) {
    /* finish the half baked GC */
    incremental_gc_finish(mrb, gc);
  }
  // If the garbage collector is not performing a full collection,
  // sweep dead objects and reset live objects to white, including old objects.
  // Temporarily disable generational mode during this process and then restore it.
  // The gray objects are reset to white after the sweep.
  // <MASK>
  gc->atomic_gray_list = gc->gray_list = NULL;
}