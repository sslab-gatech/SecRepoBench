// Converts a string to a double-precision floating-point number,
// handling different formats and invalid cases.
// - It skips leading whitespace characters.
// - Checks for hexadecimal format and processes it as an integer.
// - Handles underscores between digits for readability.
// - Can raise an error if invalid characters are found in `badcheck` mode.
// - Uses a buffer to manage the conversion process, ensuring it doesn't overflow.
// - Handles null-byte characters and trims the string accordingly.