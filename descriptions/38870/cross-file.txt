// Here are some relevant code fragments from other files of the repo:

// the below code fragment can be found in:
// code/Common/ZipArchiveIOSystem.cpp
inline void ReplaceAll(std::string &data, const std::string &before, const std::string &after) {
    size_t pos = data.find(before);
    while (pos != std::string::npos) {
        data.replace(pos, before.size(), after);
        pos = data.find(before, pos + after.size());
    }
}

// the below code fragment can be found in:
// code/Common/ZipArchiveIOSystem.cpp
void ZipArchiveIOSystem::Implement::getFileList(std::vector<std::string> &rFileList) {
    MapArchive();
    rFileList.clear();

    for (const auto &file : m_ArchiveMap) {
        rFileList.push_back(file.first);
    }
}

// the below code fragment can be found in:
// code/Common/ZipArchiveIOSystem.cpp
bool ZipArchiveIOSystem::Implement::isOpen() const {
    return (m_ZipFileHandle != nullptr);
}

// the below code fragment can be found in:
// code/Common/ZipArchiveIOSystem.cpp
ZipArchiveIOSystem::Implement::~Implement() {
    if (m_ZipFileHandle != nullptr) {
        unzClose(m_ZipFileHandle);
    }
}

// the below code fragment can be found in:
// code/Common/ZipArchiveIOSystem.cpp
IOStream *ZipArchiveIOSystem::Implement::OpenFile(std::string &filename) {
    MapArchive();

    SimplifyFilename(filename);

    // Find in the map
    ZipFileInfoMap::const_iterator zip_it = m_ArchiveMap.find(filename);
    if (zip_it == m_ArchiveMap.cend())
        return nullptr;

    const ZipFileInfo &zip_file = (*zip_it).second;
    return zip_file.Extract(m_ZipFileHandle);
}

