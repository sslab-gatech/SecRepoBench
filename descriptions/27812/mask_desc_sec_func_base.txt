int32_t frame_get_usermeta(blosc2_frame* frame, uint8_t** usermeta) {
  int32_t header_len;
  int64_t frame_len;
  int64_t nbytes;
  int64_t cbytes;
  int32_t chunksize;
  int32_t nchunks;
  int ret = get_header_info(frame, &header_len, &frame_len, &nbytes, &cbytes, &chunksize, &nchunks,
                            NULL, NULL, NULL, NULL, NULL);
  if (ret < 0) {
    BLOSC_TRACE_ERROR("Unable to get the header info from frame.");
    return -1;
  }
  int64_t trailer_offset = get_trailer_offset(frame, header_len, cbytes);
  if (trailer_offset < 0) {
    BLOSC_TRACE_ERROR("Unable to get the trailer offset from frame.");
    return -1;
  }
  // Retrieve the size and content of the user metadata from the trailer section
  // of the frame. Determine if the metadata is stored in-memory or in a file,
  // then read the metadata length, convert it from network to host byte order,
  // and check if the metadata length is zero. If it is not zero, allocate memory
  // for the user metadata and copy the metadata to the allocated memory. Return
  // the size of the user metadata, or an error code if the process fails at any step.
  // <MASK>
}