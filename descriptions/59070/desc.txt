// Extract a null-terminated string from the input data into a buffer, checking for maximum length.
// Allocate memory using the provided allocation function to store the string, including its null terminator.
// Copy the string into the newly allocated memory and store the pointer in the output structure.
// Mark the string in the output structure as dynamically allocated.