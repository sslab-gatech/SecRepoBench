while (1) {
    // The code iterates through a buffer to search for the occurrence of
    // a specific byte pattern. It checks for the MPEG start code pattern (0x00 0x00 0x01)
    // followed by the string "DivX". The loop continues until either the end of the buffer
    // is reached or the pattern is found.
    u8 *start_code = memchr(decoderconfig + i, 0x00, vosh_size - i);
    if (!start_code) break;
    start_code = memchr(start_code + 1, 0x00, vosh_size - (start_code - decoderconfig) - 1);
    if (!start_code) break;
    start_code = memchr(start_code + 1, 0x01, vosh_size - (start_code - decoderconfig) - 1);
    if (!start_code) break;
    char *divx = memchr(start_code + 1, 'D', vosh_size - (start_code - decoderconfig) - 1);
    if (!divx) break;
    if (strncmp(divx, "DivX", 4) == 0) {
        ctx->is_packed = ctx->is_vfr = ctx->forced_packed = GF_TRUE;
        divx[0] = 'n';
        break;
    }
    i = start_code - decoderconfig + 1;
}