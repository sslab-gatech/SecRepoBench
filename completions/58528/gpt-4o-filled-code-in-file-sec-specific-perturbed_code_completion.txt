for (int cand_list_idx = 0; cand_list_idx < 3; cand_list_idx++) {
            int cand_list = cand_lists[cand_list_idx];
            for (refindex = 0; refindex < s->rps[cand_list].nb_refs; refindex++) {
                rpl_tmp.list[rpl_tmp.nb_refs] = s->rps[cand_list].list[refindex];
                rpl_tmp.ref[rpl_tmp.nb_refs] = s->rps[cand_list].ref[refindex];
                rpl_tmp.isLongTerm[rpl_tmp.nb_refs] = (cand_list == LT_CURR);
                rpl_tmp.nb_refs++;
            }
        }
        if (s->ps.pps->pps_curr_pic_ref_enabled_flag) {
            rpl_tmp.list[rpl_tmp.nb_refs] = s->ref->poc;
            rpl_tmp.ref[rpl_tmp.nb_refs] = s->ref;
            rpl_tmp.isLongTerm[rpl_tmp.nb_refs] = 0;
            rpl_tmp.nb_refs++;
        }