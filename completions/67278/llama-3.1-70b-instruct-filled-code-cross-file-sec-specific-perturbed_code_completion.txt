if (gf_bs_available(bs) < 7) break;
u8 header = gf_bs_read_u8(bs);
if ((header & 0xC0)!= 0x80) break;
u8 sample_rate_index = (header >> 2) & 0x0F;
if (sample_rate_index >= 13) break;
numframes++;
if (sample_rate_index == 0) {
    nb_skip++;
    gf_bs_skip_bytes(bs, 1);
} else {
    u32 frame_len = gf_bs_read_u16(bs);
    if (gf_bs_available(bs) < frame_len) break;
    gf_bs_skip_bytes(bs, frame_len);
}