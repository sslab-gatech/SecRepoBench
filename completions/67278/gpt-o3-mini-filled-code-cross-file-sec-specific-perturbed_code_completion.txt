if (gf_bs_eof(bs))
    break;

// Ensure there are at least 8 bits to read a sync marker
if (gf_bs_bits_left(bs) < 8)
    break;
u32 sync_marker = gf_bs_read_int(bs, 8);
if (sync_marker != 0x56) {  // Assuming 0x56 is the expected sync byte
    // Skip one byte and count as a skipped frame
    nb_skip++;
    continue;
}

// Ensure there are enough bits for sample rate index (4 bits) and channel config (4 bits)
if (gf_bs_bits_left(bs) < 8)
    break;
u32 sample_rate_idx = gf_bs_read_int(bs, 4);
u32 channel_config = gf_bs_read_int(bs, 4);

// Validate sample rate index. Only allow indices 0 through 11.
if (sample_rate_idx >= 12) {
    nb_skip++;
    continue;
}

// (Optional) Use channel_config or further parse the LATM frame here if needed.

// Increase the count of successfully parsed frames.
numframes++;