u32 frame_size;
u32 sample_rate_idx;
if (gf_m4a_get_config(bs, &acfg) != GF_OK) {
    break;
}
sample_rate_idx = acfg.base_sr_index;
if (sample_rate_idx >= 16) {
    nb_skip += gf_bs_get_position(bs);
    break;
}
frame_size = gf_m4a_get_frame_size(&acfg);
if (frame_size > size - gf_bs_get_position(bs)) {
    nb_skip += gf_bs_get_position(bs);
    break;
}
gf_bs_skip_bytes(bs, frame_size);
numframes++;