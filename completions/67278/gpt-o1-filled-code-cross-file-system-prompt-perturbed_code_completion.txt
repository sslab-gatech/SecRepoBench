u32 start_pos;
		GF_Err e;
		while (1) {
			start_pos = gf_bs_get_position(bs);

			/* Attempt to parse a LATM header from the current position */
			e = gf_m4a_latm_parse_config(bs, &acfg);
			if (e != GF_OK) {
				/* If parsing fails, skip a byte and try again */
				nb_skip++;
				gf_bs_set_position(bs, start_pos + 8);
				if (gf_bs_get_position(bs) >= (size << 3)) break;
				continue;
			}

			/* Check if the sample rate index is valid */
			if (acfg.decSpecific.samplingFrequencyIndex >= 12) {
				/* Invalid sample rate index, stop probing */
				break;
			}

			/* We successfully parsed one LATM frame */
			numframes++;
			if (numframes >= 2) {
				/* If we got at least 2 frames, we consider the stream supported */
				break;
			}

			/* Skip the frame payload and continue probing */
			e = gf_m4a_latm_skip_frame(bs, &acfg);
			if (e != GF_OK || gf_bs_eos(bs)) {
				break;
			}
		}