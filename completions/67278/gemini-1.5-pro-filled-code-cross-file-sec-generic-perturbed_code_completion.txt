GF_Err e = gf_m4a_parse_config(&acfg, bs, 0);
		if (e) {
			if (e==GF_EOS) break;
			nb_skip += gf_bs_get_bit_offset(bs) / 8;
			gf_bs_seek(bs, 0);
			gf_bs_align(bs);
			gf_bs_skip_bytes(bs, 1);
			if (gf_bs_available(bs)<=0) break;
			continue;
		}
		if (!acfg.base_object_type || (acfg.base_object_type>GF_M4A_AAC_LC && acfg.base_object_type<GF_M4A_ER_AAC_LC) ) {
			nb_skip += gf_bs_get_bit_offset(bs) / 8;
			break;
		}

		if ((acfg.sampling_frequency_index>11) || !acfg.sampling_frequency) {
			nb_skip += gf_bs_get_bit_offset(bs) / 8;
			break;
		}
		numframes++;
		if (numframes>4) break;

		u32 frame_size = gf_m4a_get_frame_size(&acfg, bs);
		if (!frame_size || frame_size > gf_bs_available(bs))
			break;

		gf_bs_skip_bytes(bs, frame_size);
		if (gf_bs_available(bs)<=0) break;