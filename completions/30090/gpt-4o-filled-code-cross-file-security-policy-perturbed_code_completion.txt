if (skip == map_size) {
        flb_warn("[parser] time_key '%s' not found", time_key);
        time_lookup = 0;
    }
    else {
        if (v->type == MSGPACK_OBJECT_STR) {
            len = v->via.str.size;
            if (len >= sizeof(tmp)) {
                len = sizeof(tmp) - 1;
            }
            memcpy(tmp, v->via.str.ptr, len);
            tmp[len] = '\0';

            ret = flb_parser_time_lookup(tmp, len, parser, &tm, &tmfrac, &time_lookup);
            if (ret == -1) {
                flb_warn("[parser] Invalid time format %s", tmp);
                time_lookup = 0;
            }
        }
        else {
            flb_warn("[parser] time_key '%s' is not a string", time_key);
            time_lookup = 0;
        }
    }