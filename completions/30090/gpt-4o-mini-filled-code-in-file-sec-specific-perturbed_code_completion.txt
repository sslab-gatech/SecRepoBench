if (skip != -1) {
        // Ensure the value is valid and not NULL
        if (v->via.str.ptr == NULL) {
            flb_free(mp_buf);
            *out_buf = NULL;
            msgpack_unpacked_destroy(&result);
            return -1;
        }

        // Attempt to parse the time string
        char time_str[64]; // Buffer to hold the time string
        size_t time_str_len = v->via.str.size < sizeof(time_str) ? v->via.str.size : sizeof(time_str) - 1;
        memcpy(time_str, v->via.str.ptr, time_str_len);
        time_str[time_str_len] = '\0'; // Null-terminate the string

        // Convert the time string to a timestamp
        struct tm tm_time;
        if (strptime(time_str, parser->time_fmt, &tm_time) == NULL) {
            // Log a warning if time parsing fails
            flb_error("Failed to parse time string: %s", time_str);
            time_lookup = 0; // Set timestamp to zero
        } else {
            time_lookup = mktime(&tm_time);
            tmfrac = 0; // Reset fractional seconds if not used
        }
    }