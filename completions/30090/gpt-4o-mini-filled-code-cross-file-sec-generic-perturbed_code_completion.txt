if (skip == -1) {
        flb_free(mp_buf);
        *out_buf = NULL;
        msgpack_unpacked_destroy(&result);
        return -1;
    }

    /* Ensure the key-value pair is valid */
    if (v->type != MSGPACK_OBJECT_STR) {
        flb_free(mp_buf);
        *out_buf = NULL;
        msgpack_unpacked_destroy(&result);
        return -1;
    }

    /* Attempt to parse the time string */
    char *time_str = (char *)v->via.str.ptr;
    struct tm tm_time;
    if (strptime(time_str, parser->time_fmt, &tm_time) == NULL) {
        flb_warn("[flb_parser_json_do] Failed to parse time string: %s", time_str);
        time_lookup = 0; // Set to zero if parsing fails
    } else {
        time_lookup = mktime(&tm_time);
        tmfrac = (double)(tm_time.tm_sec % 1); // Capture fractional seconds if needed
    }