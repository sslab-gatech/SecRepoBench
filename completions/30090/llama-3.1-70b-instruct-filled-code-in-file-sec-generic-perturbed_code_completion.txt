if (skip!= map_size) {
    if (v->type == MSGPACK_OBJECT_STR) {
        strncpy(tmp, v->via.str.ptr, v->via.str.size);
        tmp[v->via.str.size] = '\0';

        if (strptime(tmp, parser->time_fmt, &tm) == NULL) {
            flb_warn("time parsing failed for time_key '%s' with value '%s'", time_key, tmp);
            time_lookup = 0;
        } else {
            time_lookup = mktime(&tm);
        }
    } else {
        flb_warn("time_key '%s' has non-string value", time_key);
        time_lookup = 0;
    }
} else {
    time_lookup = 0;
}