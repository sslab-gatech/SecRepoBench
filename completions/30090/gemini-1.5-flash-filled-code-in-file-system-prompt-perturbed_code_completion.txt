if (skip != map_size) {
        if (v->type == MSGPACK_OBJECT_STR) {
            len = v->via.str.size;
            if (strptime(v->via.str.ptr, parser->time_fmt, &tm) == NULL) {
                flb_plg_error(parser->p, "invalid time format '%s'", v->via.str.ptr);
                time_lookup = 0;
            }
            else {
                time_lookup = mktime(&tm);
                tmfrac = modf(atof(v->via.str.ptr), &time_lookup);
            }
        }
        else if (v->type == MSGPACK_OBJECT_POSITIVE_INTEGER) {
            time_lookup = v->via.u64;
        }
        else if (v->type == MSGPACK_OBJECT_NEGATIVE_INTEGER) {
            time_lookup = v->via.i64;
        }
        else {
            flb_plg_error(parser->p, "invalid time format");
            time_lookup = 0;
        }
    }
    else {
        time_lookup = 0;
    }