if (index == skip) {
    continue;
}
k = &map.via.map.ptr[index].key;
v = &map.via.map.ptr[index].val;

if (k->type != MSGPACK_OBJECT_STR || v->type != MSGPACK_OBJECT_STR) {
    continue;
}

if (flb_time_str2time(v->via.str.ptr, v->via.str.size, &tm) != 0) {
    flb_error("Failed to parse time string: %s", v->via.str.ptr);
    time_lookup = 0;
    tmfrac = 0;
} else {
    time_lookup = mktime(&tm);
    tmfrac = tm.tm_sec + (tm.tm_usec / 1000000.0);
}