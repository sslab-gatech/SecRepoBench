if (k == NULL || v == NULL) {
    /* No time_key field found, set it to zero */
    time_lookup = 0;
    tmfrac = 0;
}
else {
    if (v->type != MSGPACK_OBJECT_STR) {
        flb_warn("[parser] time key '%s' is not a string", time_key);
        time_lookup = 0;
        tmfrac = 0;
    }
    else {
        /* Convert string value to time */
        ret = flb_parser_time_lookup(v->via.str.ptr, v->via.str.size,
                                   parser->time_fmt, parser->time_fmt_len,
                                   parser->time_fmt_year, parser->time_fmt_month,
                                   parser->time_fmt_day, NULL,
                                   &time_lookup, &tmfrac);
        if (ret == -1) {
            flb_warn("[parser] time string format error '%s'", parser->time_fmt);
            time_lookup = 0;
            tmfrac = 0;
        }
    }
}