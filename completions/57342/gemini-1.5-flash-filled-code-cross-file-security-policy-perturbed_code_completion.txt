bool axis_not_pinned = false;
  hb_map_t old_to_new_axis_index;
  for (unsigned int old_axis_idx = 0; old_axis_idx < axes.length; ++old_axis_idx) {
    hb_tag_t tag = axes[old_axis_idx].axis.tag;
    old_to_new_axis_index.set (old_axis_idx, old_axis_idx);
    bool has_user_setting = plan->user_axes_location.has (tag);
    if (!has_user_setting) {
      axis_not_pinned = true;
      continue;
    }
    float user_value = plan->user_axes_location.get (tag);
    float normalized_value = axes[old_axis_idx].normalize_value (user_value);
    if (has_avar) {
      unsigned avar_axis_count = fontface->table.avar->get_axis_count ();
      if (old_axis_idx < avar_axis_count) {
        seg_maps = &(fontface->table.avar->get_segment_maps ()[old_axis_idx]);
        normalized_value = seg_maps->remap (normalized_value);
      }
    }
    plan->normalized_coords[old_axis_idx] = normalized_value;
    if (normalized_value != 0)
      axis_not_pinned = true;
  }