for (unsigned int i = 0; i < axes.length; i++) {
  const OT::AxisRecord &axis = axes[i];
  unsigned int old_index = i;
  hb_tag_t tag = axis.get_axis_tag ();
  plan->old_index_to_tag_map.set (old_index, tag);

  if (!plan->user_axes_location.has (tag)) {
    axis_not_pinned = true;
    plan->index_map.set (old_index, old_index);
    continue;
  }

  float normalized_value = plan->user_axes_location.get (tag);
  if (has_avar) {
    if (seg_maps) {
      seg_maps->remap (tag, &normalized_value);
    } else {
      seg_maps = &face->table.avar->get_segment_map (tag);
    }
  }

  plan->normalized_coords[i] = normalized_value;
  plan->axes_location.set (tag, normalized_value);
  if (normalized_value!= 0) {
    plan->not_pinned_at_default = true;
  }
}