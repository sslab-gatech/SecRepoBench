bool has_avar = fontface->table.avar->has_data ();
const OT::SegmentMaps *seg_maps = nullptr;
// If 'avar' data is present, obtain the segment maps for axis value remapping.
// Initialize variables to track axis indices and whether any axis is not pinned.
// Iterate over each axis in the 'axes' array.
// For each axis, get its tag and update the map from old index to tag.
// Check if the axis is present in the user's axis location settings.
// If the axis is not set by the user, mark it as not pinned and update the index map.
// If the axis is set by the user, normalize its value using user settings.
// If 'avar' data is available, remap the normalized value using the segment maps.
// Set the normalized value in the plan's axes location and coordinates.
// If the normalized value is not zero, mark the plan as not pinned at default.
// Update segment maps for 'avar' for the next axis, if applicable.
// <MASK>
bool axis_not_pinned = false;
for (unsigned i = 0; i < axes.length; i++)
{
  const OT::AxisRecord &axis = axes[i];
  plan->axes_old_index_tag_map.set (i, axis.axisTag);
  if (plan->user_axes_location.has (axis.axisTag, &plan->normalized_coords[i]))
  {
    if (has_avar)
    {
      if (!seg_maps)
        seg_maps = &fontface->table.avar->get_segment_maps (axis.axisIndex);
      plan->normalized_coords[i] = seg_maps->remap_value (plan->normalized_coords[i]);
    }
  }
  else
  {
    plan->normalized_coords[i] = 0;
    axis_not_pinned = true;
  }
  if (plan->normalized_coords[i]!= 0)
    plan->pinned_at_default = false;
}
plan->all_axes_pinned =!axis_not_pinned;