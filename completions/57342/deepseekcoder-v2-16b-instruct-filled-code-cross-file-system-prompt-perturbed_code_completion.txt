for (unsigned i = 0; i < axes.length; i++) {
    hb_tag_t axis_tag = axes[i].axisTag;
    auto it = plan->user_axes_location.find(axis_tag);
    if (it == plan->user_axes_location.end()) {
      axis_not_pinned = true;
      plan->normalized_coords[i] = 0;
    } else {
      float normalized_value = it->second;
      plan->normalized_coords[i] = normalized_value;
      if (normalized_value != 0) {
        plan->all_axes_pinned = false;
      }
    }
    if (has_avar) {
      const OT::SegmentMaps *seg_maps = fontface->table.avar->get_segment_maps();
      if (seg_maps) {
        plan->normalized_coords[i] = seg_maps->map_value(plan->normalized_coords[i]);
      }
    }
  }