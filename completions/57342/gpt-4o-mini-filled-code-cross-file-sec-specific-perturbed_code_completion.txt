for (unsigned axis_index = 0; axis_index < axes.length; axis_index++)
  {
    const OT::AxisRecord &axis = axes[axis_index];
    if (plan->user_axes_location.has(axis.tag))
    {
      // Normalize the user value for the axis
      float user_value = plan->user_axes_location.get(axis.tag);
      float normalized_value = user_value; // Apply normalization logic if needed

      // If 'avar' data is present, remap the normalized value
      if (has_avar && seg_maps)
      {
        // Perform remapping using segment maps
        normalized_value = seg_maps->remap(axis_index, normalized_value);
      }

      // Set the normalized value in the plan's axes location
      plan->normalized_coords[axis_index] = static_cast<int>(normalized_value);
      if (normalized_value != 0)
        axis_not_pinned = true; // Mark as not pinned if the value is not zero
    }
    else
    {
      // Axis is not set by the user, mark it as pinned
      plan->normalized_coords[axis_index] = axis.get_default();
    }
  }