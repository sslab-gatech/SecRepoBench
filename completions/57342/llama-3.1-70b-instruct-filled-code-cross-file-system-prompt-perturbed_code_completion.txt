for (unsigned i = 0; i < axes.length; i++) {
  const OT::AxisRecord &axis = axes[i];
  plan->old_to_tag_map.set (i, axis.axisTag);
  bool axis_set_by_user = plan->user_axes_location.has (axis.axisTag);
  if (!axis_set_by_user) {
    axis_not_pinned = true;
    plan->old_to_new_map.set (i, i);
  } else {
    float normalized_value = plan->user_axes_location.get (axis.axisTag);
    if (has_avar) {
      if (!seg_maps) {
        seg_maps = &fontface->table.avar->get_segment_maps (axis.axisTag);
        if (!seg_maps)
          seg_maps = &fontface->table.avar->get_segment_maps (HB_OT_TAG_DEFAULT);
      }
      if (seg_maps)
        normalized_value = seg_maps->remap (normalized_value);
    }
    plan->normalized_coords[i] = normalized_value;
    if (normalized_value!= 0)
      plan->pinned_at_default = false;
  }
}