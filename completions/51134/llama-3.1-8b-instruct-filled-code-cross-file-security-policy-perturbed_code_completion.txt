default: {
  // Compare the current character in the input string with the current condition character.
  // If they match, increment the position in the input string and advance to the next condition character.
  // Handle multibyte UTF-8 characters if the option is set, ensuring the entire character sequence matches.
  // If the input character matches within a group, mark that the character was found in the group.
  // If the character does not match and is not within a group, return 0 to indicate the condition failed.
  // Continue processing the condition string or group until the end of the string or group.
  if (st < str.size() && (opts & aeUTF8) && (str[st] & 0xc0) == 0x80) {
    // handle multibyte UTF-8 character
    size_t len = 0;
    while (st + len < str.size() && (str[st + len] & 0xc0) == 0x80)
      ++len;
    if (p == c.conds + MAXCONDLEN_1) {
      // handle long condition
      if (c.opts & aeLONGCOND) {
        size_t remaining = str.size() - st - len;
        if (remaining > MAXCONDLEN_1) {
          // there is more conditions than fit in fixed space, so its
          // a long condition
          c.opts |= aeLONGCOND;
          size_t remaining = str.size() - st - len;
          c.c.l.conds2 = new char[1 + remaining];
          memcpy(c.c.l.conds2, str.data() + st + len, remaining);
          c.c.l.conds2[remaining] = 0;
        }
      }
    }
    // check if the current character matches the condition character
    if (*p == str[st]) {
      ingroup = true;
      ++st;
      while ((opts & aeUTF8) && st < str.size() && (str[st] & 0xc0) == 0x80)
        ++st;
      if (st < str.size()) {
        ++p;
        if (*p == '\0') {
          return 1;
        }
      }
    } else {
      // if the character does not match, return 0 to indicate the condition failed
      if (!ingroup) {
        return 0;
      }
    }
  } else {
    // check if the current character matches the condition character
    if (*p == str[st]) {
      ingroup = true;
      ++st;
      if (st < str.size()) {
        ++p;
        if (*p == '\0') {
          return 1;
        }
      }
    } else {
      // if the character does not match, return 0 to indicate the condition failed
      if (!ingroup) {
        return 0;
      }
    }
  }
}