if (st < str.size() && *p == str[st]) {
          // Match found, move to the next character in the input string
          ++st;
          while ((opts & aeUTF8) && st < str.size() && (str[st] & 0xc0) == 0x80)
            ++st;
          p = nextchar(p);
          if (pos != std::string::npos) {
            ingroup = true;  // Mark that the character is in the group
          }
        } else if (pos != std::string::npos) {
          // No match within the group
          p = nextchar(p);
        } else {
          // No match outside of a group
          return 0;
        }