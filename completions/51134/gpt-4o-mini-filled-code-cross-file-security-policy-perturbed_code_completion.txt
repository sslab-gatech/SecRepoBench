if (st < str.size() && *p == str[st]) {
          ingroup = true;
          ++st;
          p = nextchar(p);
          continue;
        } else {
          if (!ingroup) {
            return 0;  // character does not match and is not in group
          }
        }