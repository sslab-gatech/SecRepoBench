if (pos == std::string::npos) {
          if (*p == str[st]) {
            ingroup = true;
          } else {
            return 0;
          }
        } else {
          if (*p == str[pos]) {
            ingroup = true;
          }
        }
        p = nextchar(p);
        if (pos != std::string::npos) {
          ++pos;
          while ((opts & aeUTF8) && pos < str.size() && (str[pos] & 0xc0) == 0x80)
            ++pos;
        }
        break;
      }
    }