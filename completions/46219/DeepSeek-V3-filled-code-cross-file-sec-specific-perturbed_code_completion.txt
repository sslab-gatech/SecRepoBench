const StringInfo
    *profile;

  const char
    *property;

  if (image == (const Image *) NULL)
    return((const char *) NULL);
  if (image->debug != MagickFalse)
    (void) LogMagickEvent(TraceEvent,GetMagickModule(),"%s",image->filename);
  property=(const char *) NULL;
  profile=GetImageProfile(image,"icc");
  if (profile == (const StringInfo *) NULL)
    profile=GetImageProfile(image,"icm");
  if (profile != (const StringInfo *) NULL)
    {
#if defined(MAGICKCORE_LCMS_DELEGATE)
      cmsHPROFILE
        icc_profile;

      if (profile->length > 16)
        {
          icc_profile=cmsOpenProfileFromMem(profile->datum,profile->length);
          if (icc_profile != (cmsHPROFILE) NULL)
            {
              char
                description[MagickPathExtent],
                manufacturer[MagickPathExtent],
                model[MagickPathExtent],
                copyright[MagickPathExtent];

              (void) FormatLocaleString(description,MagickPathExtent,"%s",
                cmsTakeProductDesc(icc_profile));
              (void) SetImageProperty(image,"icc:description",description,
                exception);
              (void) FormatLocaleString(manufacturer,MagickPathExtent,"%s",
                cmsTakeManufacturer(icc_profile));
              (void) SetImageProperty(image,"icc:manufacturer",manufacturer,
                exception);
              (void) FormatLocaleString(model,MagickPathExtent,"%s",
                cmsTakeModel(icc_profile));
              (void) SetImageProperty(image,"icc:model",model,exception);
              (void) FormatLocaleString(copyright,MagickPathExtent,"%s",
                cmsTakeCopyright(icc_profile));
              (void) SetImageProperty(image,"icc:copyright",copyright,
                exception);
              cmsCloseProfile(icc_profile);
            }
        }
#endif
      property=GetImageProperty(image,key,exception);
    }
  return(property);