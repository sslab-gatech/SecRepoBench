// <MASK>
const char *icc_profile = GetImageProperty(image, "icc", exception_info);
if (icc_profile != NULL) {
    size_t icc_profile_length = strlen(icc_profile);
    if (icc_profile_length >= 128) {
        #if defined(LCMS)
        cmsHPROFILE icc_handle = cmsOpenProfileFromMem(icc_profile, icc_profile_length);
        if (icc_handle != NULL) {
            char *description = cmsGetProfileInfoASCII(icc_handle, cmsInfoDescription, "en", "US", NULL, 0);
            if (description != NULL) {
                SetImageProperty(image, "icc:description", description);
                description = (char *) RelinquishMagickMemory(description);
            }
            char *manufacturer = cmsGetProfileInfoASCII(icc_handle, cmsInfoManufacturer, "en", "US", NULL, 0);
            if (manufacturer != NULL) {
                SetImageProperty(image, "icc:manufacturer", manufacturer);
                manufacturer = (char *) RelinquishMagickMemory(manufacturer);
            }
            char *model = cmsGetProfileInfoASCII(icc_handle, cmsInfoModel, "en", "US", NULL, 0);
            if (model != NULL) {
                SetImageProperty(image, "icc:model", model);
                model = (char *) RelinquishMagickMemory(model);
            }
            char *copyright = cmsGetProfileInfoASCII(icc_handle, cmsInfoCopyright, "en", "US", NULL, 0);
            if (copyright != NULL) {
                SetImageProperty(image, "icc:copyright", copyright);
                copyright = (char *) RelinquishMagickMemory(copyright);
            }
            cmsCloseProfile(icc_handle);
        }
        #endif
    }
}