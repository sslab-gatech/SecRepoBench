const char
  *profile;

size_t
  length;

StringInfo
  *profile_info;

profile=GetImageProperty(image,"icc",exception_info);
if (profile == (const char *) NULL)
  profile=GetImageProperty(image,"icm",exception_info);
if (profile == (const char *) NULL)
  return((const char *) NULL);
profile_info=StringToStringInfo(profile);
if (profile_info == (StringInfo *) NULL)
  return((const char *) NULL);
length=GetStringInfoLength(profile_info);
if (length < 128)
  {
    profile_info=DestroyStringInfo(profile_info);
    return((const char *) NULL);
  }
#if defined(MAGICKCORE_LCMS_DELEGATE)
{
  cmsHPROFILE
    icc_profile;

  icc_profile=cmsOpenProfileFromMem(GetStringInfoDatum(profile_info),
    (cmsUInt32Number) length);
  if (icc_profile != (cmsHPROFILE) NULL)
    {
      char
        *name;

      name=(char *) NULL;
      (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoDescription,
        "en","US",&name,0);
      if (name != (char *) NULL)
        (void) SetImageProperty(image,"icc:description",name,exception_info);
      name=(char *) NULL;
      (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoManufacturer,
        "en","US",&name,0);
      if (name != (char *) NULL)
        (void) SetImageProperty(image,"icc:manufacturer",name,exception_info);
      name=(char *) NULL;
      (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoModel,"en",
        "US",&name,0);
      if (name != (char *) NULL)
        (void) SetImageProperty(image,"icc:model",name,exception_info);
      name=(char *) NULL;
      (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoCopyright,
        "en","US",&name,0);
      if (name != (char *) NULL)
        (void) SetImageProperty(image,"icc:copyright",name,exception_info);
      (void) cmsCloseProfile(icc_profile);
    }
}
#endif
profile_info=DestroyStringInfo(profile_info);
return(GetImageProperty(image,key,exception_info));