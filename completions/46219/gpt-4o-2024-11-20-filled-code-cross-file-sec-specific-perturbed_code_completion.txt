const StringInfo
    *profile;

  const char
    *property;

  MagickBooleanType
    status;

  profile=GetImageProfile(image,"icc");
  if (profile == (StringInfo *) NULL)
    profile=GetImageProfile(image,"icm");
  if (profile == (StringInfo *) NULL)
    return((const char *) NULL);

  if (GetStringInfoLength(profile) < 128)
    return((const char *) NULL);

#if defined(MAGICKCORE_LCMS_DELEGATE)
  {
    cmsHPROFILE
      icc_profile;

    icc_profile=cmsOpenProfileFromMemTHR(GetStringInfoDatum(profile),
      (cmsUInt32Number) GetStringInfoLength(profile));
    if (icc_profile == (cmsHPROFILE) NULL)
      return((const char *) NULL);

    if (LocaleCompare(key,"description") == 0)
      property=cmsTakeProductDesc(icc_profile);
    else if (LocaleCompare(key,"manufacturer") == 0)
      property=cmsTakeManufacturer(icc_profile);
    else if (LocaleCompare(key,"model") == 0)
      property=cmsTakeModel(icc_profile);
    else if (LocaleCompare(key,"copyright") == 0)
      property=cmsTakeCopyright(icc_profile);
    else
      property=(const char *) NULL;

    if (property != (const char *) NULL)
      {
        status=SetImageProperty((Image *) image,key,property,exception_info);
        cmsFreeProfile(icc_profile);
        return(status != MagickFalse ? GetImageProperty(image,key,exception_info) : (const char *) NULL);
      }
    cmsFreeProfile(icc_profile);
  }
#endif
  return((const char *) NULL);