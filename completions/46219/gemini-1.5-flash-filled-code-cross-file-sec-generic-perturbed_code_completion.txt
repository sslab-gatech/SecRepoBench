const char
    *profile;

  size_t
    length;

  unsigned char
    *pixels;

  if (image == (Image *) NULL)
    return((const char *) NULL);
  profile=GetImageProperty(image,"icc",exception_info);
  if (profile == (const char *) NULL)
    profile=GetImageProperty(image,"icm",exception_info);
  if (profile == (const char *) NULL)
    return((const char *) NULL);
  length=strlen(profile);
  if (length == 0)
    return((const char *) NULL);
  pixels=DecodeImage(length,profile,exception_info);
  if (pixels == (unsigned char *) NULL)
    return((const char *) NULL);
#ifdef USE_LCMS2
  {
    cmsHPROFILE
      icc_profile;

    icc_profile=cmsOpenProfileFromMem(pixels,length);
    if (icc_profile == (cmsHPROFILE) NULL)
      {
        RelinquishMagickMemory(pixels);
        return((const char *) NULL);
      }
    {
      char
        value[MagickPathExtent];

      const char
        *property;

      /* Description */
      property=cmsGetProfileDescription(icc_profile);
      if (property != (const char *) NULL)
        {
          (void) FormatLocaleString(value,MagickPathExtent,"%s",property);
          (void) SetImageProperty(image,"description",value,exception_info);
        }
      /* Manufacturer */
      property=cmsGetProfileCopyright(icc_profile);
      if (property != (const char *) NULL)
        {
          (void) FormatLocaleString(value,MagickPathExtent,"%s",property);
          (void) SetImageProperty(image,"copyright",value,exception_info);
        }
      /* Model */
      property=cmsGetProfileManufacturer(icc_profile);
      if (property != (const char *) NULL)
        {
          (void) FormatLocaleString(value,MagickPathExtent,"%s",property);
          (void) SetImageProperty(image,"model",value,exception_info);
        }
      cmsCloseProfile(icc_profile);
    }
  }
#endif
  RelinquishMagickMemory(pixels);
  return(GetImageProperty(image,key,exception_info));