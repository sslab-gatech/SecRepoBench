const char *icc_profile = NULL;
const char *icc_key = NULL;

// Check if the ICC profile is available in the image
icc_profile = GetImageProperty(image, "icc", exception_info);
if (icc_profile == NULL)
  icc_profile = GetImageProperty(image, "icm", exception_info);

// Check if the ICC profile is valid
if (icc_profile!= NULL && strlen(icc_profile) < 128)
  return NULL;

// Open the ICC profile using LCMS
cmsHPROFILE hProfile = cmsOpenProfileFromMem((cmsUInt8Number *)icc_profile, strlen(icc_profile));
if (hProfile == NULL)
  return NULL;

// Extract profile information
cmsInfoType infoType;
char info[256];

// Description
infoType = cmsInfoDescription;
cmsGetProfileInfo(hProfile, infoType, "en", "US", info);
SetImageProperty(image, "icc-description", info, exception_info);

// Manufacturer
infoType = cmsInfoManufacturer;
cmsGetProfileInfo(hProfile, infoType, "en", "US", info);
SetImageProperty(image, "icc-manufacturer", info, exception_info);

// Model
infoType = cmsInfoModel;
cmsGetProfileInfo(hProfile, infoType, "en", "US", info);
SetImageProperty(image, "icc-model", info, exception_info);

// Copyright
infoType = cmsInfoCopyright;
cmsGetProfileInfo(hProfile, infoType, "en", "US", info);
SetImageProperty(image, "icc-copyright", info, exception_info);

// Close the ICC profile
cmsCloseProfile(hProfile);

// Return the value of the specified key
icc_key = GetImageProperty(image, key, exception_info);
return icc_key;