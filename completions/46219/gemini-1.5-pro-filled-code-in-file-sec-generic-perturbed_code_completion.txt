const StringInfo
    *profile;

  cmsHPROFILE
    icc_profile;

  cmsUInt32Number
    profile_length;

  char
    *description;


  profile=GetImageProfile(image,"icc");
  if (profile == (StringInfo *) NULL)
    profile=GetImageProfile(image,"icm");
  if (profile == (StringInfo *) NULL)
    return((const char *) NULL);
  profile_length=(cmsUInt32Number) GetStringInfoLength(profile);
  if (profile_length < 128)
    return((const char *) NULL);
#if defined(MAGICKCORE_LCMS_DELEGATE)
  icc_profile=cmsOpenProfileFromMem(GetStringInfoDatum(profile),profile_length);
  if (icc_profile != (cmsHPROFILE *) NULL)
    {
      if (property == (const char *) NULL)
        {
          (void) cmsCloseProfile(icc_profile);
          return((const char *) NULL);
        }
      description=(char *) NULL;
      if (~MagickPathExtent >= 1)
        description=(char *) AcquireQuantumMemory(MagickPathExtent,
          sizeof(*description));
      if (description != (char *) NULL)
        {
          (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoDescription,
            "en","US",description,MagickPathExtent);
          (void) SetImageProperty((Image *) image,"icc:description",
            (const char *) description,exception_info);
          description=DestroyString(description);
        }
      description=(char *) NULL;
      if (~MagickPathExtent >= 1)
        description=(char *) AcquireQuantumMemory(MagickPathExtent,
          sizeof(*description));
      if (description != (char *) NULL)
        {
          (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoManufacturer,
            "en","US",description,MagickPathExtent);
          (void) SetImageProperty((Image *) image,"icc:manufacturer",
            (const char *) description,exception_info);
          description=DestroyString(description);
        }
      description=(char *) NULL;
      if (~MagickPathExtent >= 1)
        description=(char *) AcquireQuantumMemory(MagickPathExtent,
          sizeof(*description));
      if (description != (char *) NULL)
        {
          (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoModel,"en",
            "US",description,MagickPathExtent);
          (void) SetImageProperty((Image *) image,"icc:model",
            (const char *) description,exception_info);
          description=DestroyString(description);
        }
      description=(char *) NULL;
      if (~MagickPathExtent >= 1)
        description=(char *) AcquireQuantumMemory(MagickPathExtent,
          sizeof(*description));
      if (description != (char *) NULL)
        {
          (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoCopyright,"en",
            "US",description,MagickPathExtent);
          (void) SetImageProperty((Image *) image,"icc:copyright",
            (const char *) description,exception_info);
          description=DestroyString(description);
        }
      (void) cmsCloseProfile(icc_profile);
    }
#endif
  return(GetImageProperty(image,key,exception_info));