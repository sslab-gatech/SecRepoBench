const char
    *profile;

  size_t
    length;

  /*
    Get ICC profile from image.
  */
  profile=GetImageProfile(image,"icc",&length,exception_info);
  if (profile == (const char *) NULL)
    profile=GetImageProfile(image,"icm",&length,exception_info);
  if (profile == (const char *) NULL)
    return((const char *) NULL);
  if (length < 128)
    {
      (void) ThrowMagickException(exception_info,GetMagickModule(),
        CorruptImageError,"ImproperImageHeader","`%s'","icc profile");
      return((const char *) NULL);
    }
#if defined(MAGICKCORE_LCMS_DELEGATE)
  {
    cmsHPROFILE
      hProfile;

    cmsInfoType
      info;

    const char
      *property_name;

    LocaleInfo
      *locale;

    size_t
      i;

    char
      buffer[MagickPathExtent];

    /*
      Open profile.
    */
    hProfile=cmsOpenProfileFromMem(profile,(cmsUInt32Number) length);
    if (hProfile == (cmsHPROFILE) NULL)
      return((const char *) NULL);
    /*
      Extract profile information.
    */
    locale=AcquireLocaleInfo();
    for (i=0; i < 4; i++)
    {
      switch (i)
      {
        case 0:
        {
          info=cmsInfoDescription;
          property_name="icc:description";
          break;
        }
        case 1:
        {
          info=cmsInfoManufacturer;
          property_name="icc:manufacturer";
          break;
        }
        case 2:
        {
          info=cmsInfoModel;
          property_name="icc:model";
          break;
        }
        case 3:
        {
          info=cmsInfoCopyright;
          property_name="icc:copyright";
          break;
        }
        default:
          break;
      }
      (void) memset(buffer,0,sizeof(buffer));
      if (cmsGetProfileInfo(hProfile,info,locale->name,buffer,
          sizeof(buffer)-1) != 0)
        (void) SetImageProperty(image,property_name,buffer,exception_info);
    }
    locale=DestroyLocaleInfo(locale);
    cmsCloseProfile(hProfile);
  }
#endif
  (void) LogMagickEvent(ProfileEvent,GetMagickModule(),"  ICC profile found");
  return((const char *) NULL);