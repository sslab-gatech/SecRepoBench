static const char *GetICCProperty(const Image *image,const char *key,
  ExceptionInfo *exception_info)
{
  // Retrieve ICC profile properties from an image. First, attempt to get the
  // ICC profile from the image using "icc" or "icm" profile keys. If found,
  // ensure the profile length is adequate for processing. If LCMS is defined,
  // open the ICC profile and extract profile information such as description,
  // manufacturer, model, and copyright. Store these as properties in the image.
  if (image!= (Image *) NULL)
  {
    const char *icc_profile = GetImageProperty(image, "icc", exception_info);
    if (icc_profile!= (const char *) NULL)
    {
      if (strlen(icc_profile) < 1024)
      {
        // Ensure the profile length is adequate for processing
        // If LCMS is defined, open the ICC profile and extract profile information
        // Store these as properties in the image
        if (lcms_is_defined!= MagickFalse)
        {
          lcms_profile = OpenProfile(icc_profile, exception_info);
          if (lcms_profile!= (lcms_profile_t *) NULL)
          {
            const char *description = GetProfileDescription(lcms_profile);
            const char *manufacturer = GetProfileManufacturer(lcms_profile);
            const char *model = GetProfileModel(lcms_profile);
            const char *copyright = GetProfileCopyright(lcms_profile);
            SetImageProperty(image, "icc:description", description, exception_info);
            SetImageProperty(image, "icc:manufacturer", manufacturer, exception_info);
            SetImageProperty(image, "icc:model", model, exception_info);
            SetImageProperty(image, "icc:copyright", copyright, exception_info);
            CloseProfile(lcms_profile);
          }
        }
        return(icc_profile);
      }
      else
      {
        (void) ThrowMagickException(exception_info, GetMagickModule(), OptionWarning,
          "ICCProfileTooLarge", "ICC profile is too large");
        return((const char *) NULL);
      }
    }
  }
  return((const char *) NULL);
}