static const char *GetICCProperty(const Image *image,const char *key,
  ExceptionInfo *exception_info)
{
  // Retrieve ICC profile properties from an image. First, attempt to get the
  // ICC profile from the image using "icc" or "icm" profile keys. If found,
  // ensure the profile length is adequate for processing. If LCMS is defined,
  // open the ICC profile and extract profile information such as description,
  // manufacturer, model, and copyright. Store these as properties in the image.
  if (image!= (Image *) NULL)
  {
    const char
      *icc_profile;

    icc_profile=GetImageProperty(image,"icc",exception_info);
    if (icc_profile!= (const char *) NULL)
    {
      if (strlen(icc_profile) < 16)
        return((const char *) NULL);
      if (LCMS!= (const void *) NULL)
      {
        lcms_profile=LCMS_open_profile(icc_profile,LCMS_PROFILE_FLAG_NONE);
        if (lcms_profile!= (lcms_profile_t *) NULL)
        {
          lcms_profile_info=LCMS_get_profile_info(lcms_profile);
          if (lcms_profile_info!= (lcms_profile_info_t *) NULL)
          {
            (void) SetImageProperty(image,"icc-description",lcms_profile_info->description);
            (void) SetImageProperty(image,"icc-manufacturer",lcms_profile_info->manufacturer);
            (void) SetImageProperty(image,"icc-model",lcms_profile_info->model);
            (void) SetImageProperty(image,"icc-copyright",lcms_profile_info->copyright);
            LCMS_close_profile(lcms_profile);
          }
        }
      }
    }
  }
  return(GetImageProperty(image,key,exception_info));
}