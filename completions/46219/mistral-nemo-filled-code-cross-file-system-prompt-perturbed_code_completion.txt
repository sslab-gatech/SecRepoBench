ICCProfile
    *icc_profile;

  if (image->properties == (void *) NULL)
    image->properties=NewSplayTree(CompareSplayTreeString,RelinquishMagickMemory,
      DestroyPropertyNode);
  if (image->properties == (SplayTreeInfo *) NULL)
    {
      (void) ThrowMagickException(exception,GetMagickModule(),MemoryError,
        "UnableToSetProperty","%s",key);
      return((const char *) NULL);
    }
  if (IsPathDirectory(icc_profile_path) != 0)
    {
      (void) ThrowMagickException(exception,GetMagickModule(),OptionError,
        "InvalidArgument","'%s': %s",icc_profile_path,"Not a file");
      return((const char *) NULL);
    }
  icc_profile=ReadICCProfile(icc_profile_path,exception);
  if (icc_profile == (ICCProfile *) NULL)
    return((const char *) NULL);
  if (SetImageRegistry(ICCProfileRegistryType,key,icc_profile,exception) == MagickFalse)
    {
      icc_profile=(ICCProfile *) DestroyICCProfile(icc_profile);
      return((const char *) NULL);
    }
  return((const char *) NULL);