#if !defined(MAGICKCORE_LCMS_DELEGATE)
  MAGICK_UNUSED(key);
  MAGICK_UNUSED(exception_info);
  /*
    If LCMS is not available, we cannot extract ICC/ICM properties. 
    Simply return NULL here.
  */
  return (const char *) NULL;
#else
  /*
    Attempt to retrieve the requested ICC (or ICM) profile from the image. 
    If found, and large enough, open it via LCMS and extract a few 
    commonly-used properties. Then store them in the image, and finally 
    return the requested property.
  */
  if ((LocaleNCompare(key,"icc:",4) != 0) && (LocaleNCompare(key,"icm:",4) != 0))
    return (const char *) NULL;

  {
    const StringInfo
      *profile;

    profile = GetImageProfile(image, (key[0] == 'i' ? "icc" : "icm"));
    if (profile == (StringInfo *) NULL)
      return (const char *) NULL;
    if (GetStringInfoLength(profile) < 4) /* Not enough data to be safe */
      return (const char *) NULL;

    {
      cmsHPROFILE
        icc_profile;

#if !defined(LCMS_VERSION) || (LCMS_VERSION < 2000)
      /* Define old LCMS version guard if needed */
#define cmsUInt32Number  DWORD
#endif

      icc_profile = cmsOpenProfileFromMem(GetStringInfoDatum(profile),
        (cmsUInt32Number) GetStringInfoLength(profile));
      if (icc_profile != (cmsHPROFILE) NULL)
        {
          /* Extract a few well-known ICC tags and store them */
          char info[MagickPathExtent];

          (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoDescription,"en","US",
            info,sizeof(info));
          if (*info != '\0')
            (void) SetImageProperty((Image *) image,"icc:description",info,
              exception_info);

          (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoManufacturer,"en","US",
            info,sizeof(info));
          if (*info != '\0')
            (void) SetImageProperty((Image *) image,"icc:manufacturer",info,
              exception_info);

          (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoModel,"en","US",
            info,sizeof(info));
          if (*info != '\0')
            (void) SetImageProperty((Image *) image,"icc:model",info,
              exception_info);

          (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoCopyright,"en","US",
            info,sizeof(info));
          if (*info != '\0')
            (void) SetImageProperty((Image *) image,"icc:copyright",info,
              exception_info);

          (void) cmsCloseProfile(icc_profile);
        }
    }
  }
  /* Return the property from the image, now that it's potentially been set */
  return GetImageProperty(image, key, exception_info);
#endif