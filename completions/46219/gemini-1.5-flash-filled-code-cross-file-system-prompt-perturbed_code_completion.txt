const char
    *profile;

  size_t
    length;

  profile=GetImageProperty(image,"icc",exception_info);
  if (profile == (const char *) NULL)
    profile=GetImageProperty(image,"icm",exception_info);
  if (profile == (const char *) NULL)
    return(NULL);
  length=strlen(profile);
  if (length == 0)
    return(NULL);
#ifdef USE_LCMS2
  {
    cmsHPROFILE
      icc_profile;

    cmsHPROFILE
      profile_handle;

    char
      *property;

    const char
      *value;

    icc_profile=cmsOpenProfileFromMem(profile,(size_t) length);
    if (icc_profile == (cmsHPROFILE) NULL)
      return(NULL);
    profile_handle=icc_profile;
    value=cmsGetProfileCopyright(profile_handle);
    if (value != (const char *) NULL)
      (void) SetImageProperty(image,"copyright",value,exception_info);
    value=cmsGetProfileDescription(profile_handle);
    if (value != (const char *) NULL)
      (void) SetImageProperty(image,"description",value,exception_info);
    value=cmsGetProfileManufacturer(profile_handle);
    if (value != (const char *) NULL)
      (void) SetImageProperty(image,"manufacturer",value,exception_info);
    value=cmsGetProfileModel(profile_handle);
    if (value != (const char *) NULL)
      (void) SetImageProperty(image,"model",value,exception_info);
    property=AcquireString(profile);
    (void) SetImageProperty(image,"icc",property,exception_info);
    property=DestroyString(property);
    cmsCloseProfile(profile_handle);
  }
#endif
  return(profile);