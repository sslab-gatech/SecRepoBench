LCMS *lcm;
  ICC *icc;
  char *description, *manufacturer, *model, *copyright;

  if (strcmp(key, "icc") == 0 || strcmp(key, "icm") == 0) {
    ICCProfile *profile = GetImageProfile(image, key, exception);
    if (profile == NULL) {
      return (const char *) NULL;
    }

    if (LCMS_isValid(profile) == 0) {
      (void) ThrowMagickException(exception, GetMagickModule(), OptionError,
        "InvalidICCProfile", "Profile length is inadequate for processing");
      return (const char *) NULL;
    }

    lcm = LCMS_init();
    if (lcm == NULL) {
      (void) ThrowMagickException(exception, GetMagickModule(), ResourceLimitError,
        "MemoryAllocationFailed", "%s", "LCMS_init");
      return (const char *) NULL;
    }

    icc = LCMS_profileFromMem(lcm, (unsigned char *) profile, profile->length);
    if (icc == NULL) {
      (void) ThrowMagickException(exception, GetMagickModule(), ResourceLimitError,
        "MemoryAllocationFailed", "%s", "LCMS_profileFromMem");
      LCMS_cleanup(lcm);
      return (const char *) NULL;
    }

    description = LCMS_getProfileDescription(icc);
    manufacturer = LCMS_getProfileManufacturer(icc);
    model = LCMS_getProfileModel(icc);
    copyright = LCMS_getProfileCopyright(icc);

    if (description != NULL) {
      SetImageProperty(image, "description", description, exception);
    }
    if (manufacturer != NULL) {
      SetImageProperty(image, "manufacturer", manufacturer, exception);
    }
    if (model != NULL) {
      SetImageProperty(image, "model", model, exception);
    }
    if (copyright != NULL) {
      SetImageProperty(image, "copyright", copyright, exception);
    }

    LCMS_profileDestroy(icc);
    LCMS_cleanup(lcm);
  }

  return (const char *) NULL;
}