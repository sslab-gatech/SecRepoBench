#if defined(MAGICKCORE_LCMS_DELEGATE)
          const StringInfo
            *profile;

          cmsHPROFILE
            icc_profile;

          cmsUInt32Number
            profile_length;

          profile=GetImageProfile(image,"icc");
          if (profile == (StringInfo *) NULL)
            profile=GetImageProfile(image,"icm");
          if (profile == (StringInfo *) NULL)
            return((const char *) NULL);
          profile_length = (cmsUInt32Number) GetStringInfoLength(profile);
          if (profile_length < 128)
            return((const char *) NULL);
          icc_profile=cmsOpenProfileFromMem(GetStringInfoDatum(profile),
            profile_length);
          if (icc_profile != (cmsHPROFILE *) NULL)
            {
              char
                info[MagickPathExtent];

#if defined(LCMS_VERSION) && (LCMS_VERSION >= 2000)
              if (cmsGetProfileInfoASCII(icc_profile,cmsInfoDescription,"en",
                  "US",info,MagickPathExtent) != 0)
                (void) SetImageProperty((Image *) image,key,(const char *)
                  info,exception_info);
              if (cmsGetProfileInfoASCII(icc_profile,cmsInfoManufacturer,"en",
                  "US",info,MagickPathExtent) != 0)
                (void) SetImageProperty((Image *) image,"icc:manufacturer",
                  (const char *) info,exception_info);
              if (cmsGetProfileInfoASCII(icc_profile,cmsInfoModel,"en","US",
                  info,MagickPathExtent) != 0)
                (void) SetImageProperty((Image *) image,"icc:model",
                  (const char *) info,exception_info);
              if (cmsGetProfileInfoASCII(icc_profile,cmsInfoCopyright,"en",
                  "US",info,MagickPathExtent) != 0)
                (void) SetImageProperty((Image *) image,"icc:copyright",
                  (const char *) info,exception_info);
#else
              (void) CopyMagickString(info,cmsTakeProductName(icc_profile),
                MagickPathExtent);
              (void) SetImageProperty((Image *) image,key,(const char *) info,
                exception_info);
#endif
              (void) cmsCloseProfile(icc_profile);
            }
          break;
#endif