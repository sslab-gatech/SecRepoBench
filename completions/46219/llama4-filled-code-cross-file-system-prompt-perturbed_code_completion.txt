const char
  *icc_profile;

size_t
  icc_profile_length;

if ((image == (Image *) NULL) || (key == (const char *) NULL))
  {
    (void) ThrowMagickException(exception_info,GetMagickModule(),OptionWarning,
      "NoImageForProperty","\"icc\"","GetICCProperty");
    return((const char *) NULL);
  }
icc_profile=(const char *) GetImageProfile(image,"icc",&icc_profile_length,
  exception_info);
if (icc_profile == (const char *) NULL)
  icc_profile=(const char *) GetImageProfile(image,"icm",&icc_profile_length,
    exception_info);
if (icc_profile == (const char *) NULL)
  return((const char *) NULL);
if (icc_profile_length < 4)
  {
    (void) ThrowMagickException(exception_info,GetMagickModule(),OptionWarning,
      "NoICCProfile","\"icc\"","GetICCProperty");
    return((const char *) NULL);
  }
#if defined(MAGICKCORE_LCMS_SUPPORT)
{
  cmsHPROFILE
    icc;

  cmsUInt32Number
    info;

  const char
    *name;

  if (image->debug != MagickFalse)
    (void) LogMagickEvent(TraceEvent,GetMagickModule(),"ICC Profile: %.*s",
      (int) icc_profile_length,icc_profile);
  icc=cmsOpenProfileFromMem((void *) icc_profile,icc_profile_length,NULL);
  if (icc == (cmsHPROFILE) NULL)
    {
      (void) ThrowMagickException(exception_info,GetMagickModule(),OptionWarning,
        "NoICCProfile","\"icc\"","GetICCProperty");
      return((const char *) NULL);
    }
  info=cmsGetProfileInfo(icc,cmsInfoDescription,&name,NULL,NULL,NULL);
  if (info == 0)
    {
      (void) cmsCloseProfile(icc);
      (void) ThrowMagickException(exception_info,GetMagickModule(),OptionWarning,
        "UnableToReadICCProfile","\"%s\"",key);
      return((const char *) NULL);
    }
  (void) SetImageProperty(image,"icc:description",(const char *) name,
    exception_info);
  (void) cmsCloseProfile(icc);
}
#endif
return(GetImageProperty(image,key,exception_info));