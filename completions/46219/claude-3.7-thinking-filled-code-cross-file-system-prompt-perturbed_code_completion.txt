const StringInfo
    *profile;
  
  if (image == (Image *) NULL)
    return((const char *) NULL);
    
  profile=GetImageProfile(image,"icc");
  if (profile == (StringInfo *) NULL)
    profile=GetImageProfile(image,"icm");
    
  if (profile == (StringInfo *) NULL)
    return((const char *) NULL);
    
  if (GetStringInfoLength(profile) < 128)
    return((const char *) NULL);
  
  const char *property=GetImageProperty(image,key,exception_info);
  if (property != (const char *) NULL)
    return(property);
    
#if defined(MAGICKCORE_LCMS_DELEGATE)
  {
    cmsHPROFILE
      icc_profile;
    
    Image
      *clone_image;
      
    char
      info[MagickPathExtent];
    
    icc_profile=cmsOpenProfileFromMem(GetStringInfoDatum(profile),
      (cmsUInt32Number) GetStringInfoLength(profile));
    
    if (icc_profile == (cmsHPROFILE) NULL)
      return((const char *) NULL);
    
    clone_image=CloneImage(image,0,0,MagickTrue,exception_info);
    if (clone_image == (Image *) NULL)
    {
      cmsCloseProfile(icc_profile);
      return((const char *) NULL);
    }
    
    (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoDescription,"en","US",info, 
      MagickPathExtent);
    (void) SetImageProperty(clone_image,"icc:description",info,exception_info);
    
    (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoManufacturer,"en","US",info,
      MagickPathExtent);
    (void) SetImageProperty(clone_image,"icc:manufacturer",info,exception_info);
    
    (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoModel,"en","US",info,
      MagickPathExtent);
    (void) SetImageProperty(clone_image,"icc:model",info,exception_info);
    
    (void) cmsGetProfileInfoASCII(icc_profile,cmsInfoCopyright,"en","US",info,
      MagickPathExtent);
    (void) SetImageProperty(clone_image,"icc:copyright",info,exception_info);
    
    cmsCloseProfile(icc_profile);
    
    property=GetImageProperty(clone_image,key,exception_info);
    
    (void) SetImageRegistry(ImageRegistryType,"icc",clone_image,exception_info);
    clone_image=DestroyImage(clone_image);
    
    return(property);
  }
#else
  return((const char *) NULL);
#endif