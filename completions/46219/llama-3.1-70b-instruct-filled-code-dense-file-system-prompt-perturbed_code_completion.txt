const char
  *icc_profile,
  *value;

StringInfo
  *profile;

size_t
  length;

profile=GetImageProfile(image,"icc");
if (profile == (StringInfo *) NULL)
  profile=GetImageProfile(image,"icm");
if (profile == (StringInfo *) NULL)
  return((const char *) NULL);
length=GetStringInfoLength(profile);
if (length < 128)
  return((const char *) NULL);
icc_profile=(const char *) AcquireQuantumMemory(length+1,sizeof(*icc_profile));
(void) CopyMagickString(icc_profile,(char *) GetStringInfoDatum(profile),length+1);
#if defined(LCMS)
{
  cmsHPROFILE
    hProfile;

  cmsInfoType
    info_type;

  hProfile=cmsOpenProfileFromMem((void *) icc_profile,length,"r");
  if (hProfile == (cmsHPROFILE) NULL)
    {
      icc_profile=DestroyString(icc_profile);
      return((const char *) NULL);
    }
  info_type=cmsGetHeaderFlags(hProfile);
  if ((info_type & cmsINFO_TEXT_DESCRIPTION)!= 0)
    {
      value=(const char *) cmsReadTag(hProfile,cmsSigProfileDescription);
      if (value!= (const char *) NULL)
        {
          (void) SetImageProperty(image,"icc:description",(const char *) value,
            exception);
          value=DestroyString((char *) value);
        }
    }
  if ((info_type & cmsINFO_TEXT_MODEL)!= 0)
    {
      value=(const char *) cmsReadTag(hProfile,cmsSigDeviceModelDesc);
      if (value!= (const char *) NULL)
        {
          (void) SetImageProperty(image,"icc:model",(const char *) value,
            exception);
          value=DestroyString((char *) value);
        }
    }
  if ((info_type & cmsINFO_TEXT_COPYRIGHT)!= 0)
    {
      value=(const char *) cmsReadTag(hProfile,cmsSigCopyright);
      if (value!= (const char *) NULL)
        {
          (void) SetImageProperty(image,"icc:copyright",(const char *) value,
            exception);
          value=DestroyString((char *) value);
        }
    }
  cmsCloseProfile(hProfile);
}
#endif
icc_profile=DestroyString(icc_profile);
return(GetImageProperty(image,key,exception));