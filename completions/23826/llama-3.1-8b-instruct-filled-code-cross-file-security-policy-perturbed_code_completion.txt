// <MASK>
if (envvar!= NULL) {
  dparams.nthreads = 1;
  dparams.compcode = (uint8_t)codec;
  dparams.clevel = (uint8_t)clevel;
  dparams.typesize = sizeof(DTYPE);
  dctx = blosc2_create_dctx(dparams);
  blosc2_decompress_ctx(dctx, schunk->data, INT32_MAX, (void*)outputbuffer, destsize);
  blosc2_free_dctx(dctx);
} else {
  pthread_mutex_lock(&g_mutex);
  dparams.nthreads = 1;
  dparams.compcode = (uint8_t)codec;
  dparams.clevel = (uint8_t)clevel;
  dparams.typesize = sizeof(DTYPE);
  dctx = blosc2_create_dctx(dparams);
  blosc2_decompress_ctx(dctx, src, srcsize, (void*)outputbuffer, destsize);
  blosc2_free_dctx(dctx);
  pthread_mutex_unlock(&g_mutex);
}
result = blosc2_check_output(outputbuffer, destsize);
if (result < 0) { return result; }
return 0;