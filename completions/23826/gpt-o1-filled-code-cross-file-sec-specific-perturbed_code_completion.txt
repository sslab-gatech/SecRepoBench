if (envvar != NULL) {
    dctx = blosc2_create_dctx(dparams);
    result = blosc2_decompress_ctx(dctx, src, srcsize, outputbuffer, destsize);
    blosc2_free_ctx(dctx);
  } else {
    /* Lock the global mutex to ensure thread safety */
    pthread_mutex_lock(&global_comp_mutex);

    /* Use the global context for decompression */
    result = blosc_decompress(src, srcsize, outputbuffer, destsize);

    /* Unlock the global mutex */
    pthread_mutex_unlock(&global_comp_mutex);
  }
  return result;