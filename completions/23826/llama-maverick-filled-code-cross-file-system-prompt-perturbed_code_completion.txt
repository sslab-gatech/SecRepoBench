if (envvar != NULL && strncmp(envvar, "TRUE", 4) == 0) {
  dctx = blosc2_create_dctx(dparams);
  result = blosc2_decompress_ctx(dctx, src, srcsize, outputbuffer, destsize);
  blosc2_free_ctx(dctx);
} else {
  blosc_lock_acquire();
  result = blosc2_decompress_ctx(g_dctx, src, srcsize, outputbuffer, destsize);
  blosc_lock_release();
}