if (envvar != NULL) {
  dctx = blosc2_create_dctx(dparams);
  dctx->nthreads = g_nthreads;
  result = blosc2_decompress_ctx(dctx, src, srcsize, outputbuffer, destsize);
  blosc2_free_ctx(dctx);
  return result;
}

pthread_mutex_lock(&global_comp_mutex);
result = blosc2_decompress_ctx(g_global_context, src, srcsize, outputbuffer, destsize);
pthread_mutex_unlock(&global_comp_mutex);
return result;