coefficients=(double *) AcquireMagickMemory(number_coordinates*sizeof(*coefficients));
if (coefficients == (double *) NULL)
  {
    (void) ThrowMagickException(bezierinfo->exception,GetMagickModule(),
      ResourceLimitError,"MemoryAllocationFailed","`%s'","");
    return(MagickFalse);
  }
control_points=quantum+1;
points=(PointInfo *) AcquireMagickMemory(control_points*sizeof(*points));
if (points == (PointInfo *) NULL)
  {
    coefficients=(double *) RelinquishMagickMemory(coefficients);
    (void) ThrowMagickException(bezierinfo->exception,GetMagickModule(),
      ResourceLimitError,"MemoryAllocationFailed","`%s'","");
    return(MagickFalse);
  }
if (bezierinfo->offset+control_points+1 > *bezierinfo->number_primitive_info)
  {
    size_t
      number_points;

    /*
      Resize primitive_info.
    */
    number_points=bezierinfo->offset+control_points+1;
    if (number_points > MAGICK_SSIZE_MAX)
      {
        points=(PointInfo *) RelinquishMagickMemory(points);
        coefficients=(double *) RelinquishMagickMemory(coefficients);
        (void) ThrowMagickException(bezierinfo->exception,GetMagickModule(),
          ResourceLimitError,"MemoryAllocationFailed","`%s'","");
        return(MagickFalse);
      }
    *bezierinfo->primitive_info=(PrimitiveInfo *) ResizeMagickMemory(
      *bezierinfo->primitive_info,number_points*
      sizeof(**bezierinfo->primitive_info));
    if (*bezierinfo->primitive_info == (PrimitiveInfo *) NULL)
      {
        points=(PointInfo *) RelinquishMagickMemory(points);
        coefficients=(double *) RelinquishMagickMemory(coefficients);
        *bezierinfo->number_primitive_info=0;
        (void) ThrowMagickException(bezierinfo->exception,GetMagickModule(),
          ResourceLimitError,"MemoryAllocationFailed","`%s'","");
        return(MagickFalse);
      }
    *bezierinfo->number_primitive_info=number_points;
  }