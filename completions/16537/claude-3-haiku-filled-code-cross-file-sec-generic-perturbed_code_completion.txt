// Allocate memory for coefficients and points based on the number of coordinates and a quantum value.
control_points = quantum + 1;
coefficients = (double *) AcquireMagickMemory(sizeof(*coefficients) * number_coordinates);
points = (PointInfo *) AcquireMagickMemory(sizeof(*points) * control_points);

if (coefficients == NULL || points == NULL) {
  (void) ThrowMagickException(bezierinfo->exception, GetMagickModule(),
                              ResourceLimitError, "MemoryAllocationFailed", "`%s'", "");
  if (coefficients != NULL) {
    coefficients = (double *) RelinquishMagickMemory(coefficients);
  }
  if (points != NULL) {
    points = (PointInfo *) RelinquishMagickMemory(points);
  }
  return MagickFalse;
}

if (CheckPrimitiveExtent(bezierinfo, control_points) == MagickFalse) {
  coefficients = (double *) RelinquishMagickMemory(coefficients);
  points = (PointInfo *) RelinquishMagickMemory(points);
  return MagickFalse;
}