// Allocate memory for coefficients and points based on the number of coordinates and a quantum value.
control_points = quantum + 1;
coefficients = (double *) AcquireMagickMemory(sizeof(*coefficients) * number_coordinates);
if (coefficients == NULL) {
  (void) ThrowMagickException(bezierinfo->exception, GetMagickModule(),
                              ResourceLimitError, "MemoryAllocationFailed", "`%s'", "");
  return MagickFalse;
}
points = (PointInfo *) AcquireMagickMemory(sizeof(*points) * control_points);
if (points == NULL) {
  coefficients = (double *) RelinquishMagickMemory(coefficients);
  (void) ThrowMagickException(bezierinfo->exception, GetMagickModule(),
                              ResourceLimitError, "MemoryAllocationFailed", "`%s'", "");
  return MagickFalse;
}

// Calculate the number of control points to be used for Bezier curve computation.
if (control_points > number_coordinates) {
  control_points = number_coordinates;
}