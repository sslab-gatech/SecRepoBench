// Allocate memory for coefficients and points based on the number of coordinates and a quantum value.
control_points = number_coordinates;
coefficients = (double *) AcquireMagickMemory(sizeof(*coefficients) * number_coordinates);
if (coefficients == NULL)
{
  (void) ThrowMagickException(bezierinfo->exception, GetMagickModule(),
    ResourceLimitError, "MemoryAllocationFailed", "`%s'", "");
  return MagickFalse;
}

points = (PointInfo *) AcquireMagickMemory(sizeof(*points) * control_points);
if (points == NULL)
{
  coefficients = (double *) RelinquishMagickMemory(coefficients);
  (void) ThrowMagickException(bezierinfo->exception, GetMagickModule(),
    ResourceLimitError, "MemoryAllocationFailed", "`%s'", "");
  return MagickFalse;
}

// Calculate the number of control points to be used for Bezier curve computation.
// Ensure that the primitive extent can accommodate the computed control points.
if (CheckPrimitiveExtent(bezierinfo, control_points) == MagickFalse)
{
  points = (PointInfo *) RelinquishMagickMemory(points);
  coefficients = (double *) RelinquishMagickMemory(coefficients);
  return MagickFalse;
}