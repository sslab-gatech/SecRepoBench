// Adjust the precision to prevent buffer overflow while formatting a float.
// Depending on the original format ('g'), it modifies precision based on the
// exponent value 'e'. If the format is 'g', increases precision by (e - 1).
if (originalformat == 'g') {
  prec += (e - 1);
}
// Ensure the precision does not exceed the remaining buffer space
if (prec > (buf_remaining - (e + 2))) {
  prec = buf_remaining - (e + 2);
}