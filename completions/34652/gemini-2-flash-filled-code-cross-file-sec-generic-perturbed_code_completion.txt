if (originalformat == 'g') {
        prec += (e - 1);
      }

      // Check if the precision is negative, and if so, set it to zero.
      if (prec < 0) {
        prec = 0;
      }

      // Adjust the precision to prevent buffer overflow while formatting a float.
      if (prec > (buf_remaining - FLT_MIN_BUF_SIZE)) {
        prec = buf_remaining - FLT_MIN_BUF_SIZE;
      }