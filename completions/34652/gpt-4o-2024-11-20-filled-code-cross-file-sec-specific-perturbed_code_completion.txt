// Adjust the precision to prevent buffer overflow while formatting a float.
      if (prec > buf_remaining - 2) { // Reserve space for decimal point and null terminator
        prec = buf_remaining - 2;
        if (prec < 0) {
          prec = 0; // Ensure precision is not negative
        }
      }