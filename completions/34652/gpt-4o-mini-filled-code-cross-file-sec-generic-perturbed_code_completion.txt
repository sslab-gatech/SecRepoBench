if (fmt == 'g') {
        prec += (e - 1);
      }
      if (prec > num_digits) {
        prec = num_digits;
      }