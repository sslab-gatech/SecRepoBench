// Adjust the precision to prevent buffer overflow while formatting a float.
  // Depending on the original format type, it modifies precision based on the
  // exponent value 'e'. If the format is 'g', increases precision by (e - 1).
  if (fmt == 'g') {
    prec += (e - 1);
  }
  if (prec > (buf_remaining - FLT_MIN_BUF_SIZE)) {
    prec = buf_remaining - FLT_MIN_BUF_SIZE;
    if (fmt == 'g') {
      prec++;
    }
  }