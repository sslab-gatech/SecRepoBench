if (!iterator)
    {
      c->addUINT32 (0); /* start */
      c->addUINT32 (0); /* count */
      return_trace (true);
    }

    unsigned int minGlyph = 0xFFFFFFFFu;
    unsigned int maxGlyph = 0;
    while (iterator.move_to_next ())
    {
      unsigned int g = iterator.get_glyph ();
      minGlyph = MIN (minGlyph, g);
      maxGlyph = MAX (maxGlyph, g);
    }

    unsigned int count = maxGlyph - minGlyph + 1;

    c->addUINT32 (minGlyph);
    c->add (iterator.get_class (), count);

    iterator.reset ();
    while (iterator.move_to_next ())
    {
      unsigned int g = iterator.get_glyph ();
      c->access (minGlyph).set_class (g - minGlyph, iterator.get_class ());
    }

    return_trace (true);