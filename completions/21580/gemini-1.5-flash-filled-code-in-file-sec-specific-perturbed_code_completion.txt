if (!iterator)
    {
      startGlyph = 0;
      classValue.len = 0;
      return true;
    }

    hb_codepoint_t glyph_min = (*iterator).first;
    hb_codepoint_t glyph_max = + iterator
			       | hb_map (hb_first)
                               | hb_reduce (hb_max, 0u);

    unsigned int glyph_count = glyph_max - glyph_min + 1;
    startGlyph = glyph_min;
    if (unlikely (!classValue.serialize (c, glyph_count))) return_trace (false);

    for (const auto& p : iterator)
      classValue[p.first - startGlyph] = p.second;

    return true;