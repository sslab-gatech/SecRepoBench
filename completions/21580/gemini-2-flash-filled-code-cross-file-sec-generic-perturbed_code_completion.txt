if (!iterator)
    {
      if (unlikely (!c->serialize ((hb_codepoint_t) 0))) return_trace (false);
      if (unlikely (!c->serialize ((hb_codepoint_t) 0))) return_trace (false);
      return_trace (true);
    }

    hb_codepoint_t min_glyph = iterator.min ();
    hb_codepoint_t max_glyph = iterator.max ();
    unsigned glyph_count = max_glyph - min_glyph + 1;

    if (unlikely (!c->serialize (min_glyph))) return_trace (false);
    if (unlikely (!c->serialize ((hb_codepoint_t) glyph_count))) return_trace (false);

    for (; iterator; ++iterator)
    {
      hb_codepoint_t glyph_index = iterator.key () - min_glyph;
      hb_codepoint_t class_value = iterator.value ();
      if (unlikely (!c->serialize (class_value))) return_trace (false);
    }

    return_trace (true);