if (!iterator)
    {
      if (unlikely (!c->extend_min (2))) return_trace (false);
      c->u16 (0);
      c->u16 (0);
      return_trace (true);
    }

    unsigned min_glyph = iterator->first;
    unsigned max_glyph = min_glyph;
    unsigned count = 0;

    do
    {
      unsigned glyph = iterator->second;
      min_glyph = hb_min (min_glyph, glyph);
      max_glyph = hb_max (max_glyph, glyph);
      count++;
    } while (++iterator);

    if (unlikely (!c->extend_min (2 + count))) return_trace (false);

    c->u16 (min_glyph);
    c->u16 (max_glyph - min_glyph + 1);

    iterator.reset ();
    unsigned i = 0;
    do
    {
      unsigned glyph = iterator->second;
      c->u16 (glyph - min_glyph);
      i++;
    } while (++iterator);

    assert (i == count);
    return_trace (true);