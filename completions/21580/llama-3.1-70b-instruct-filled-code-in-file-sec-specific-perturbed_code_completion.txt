if (unlikely (!glyphs))
{
  classValue.len = 0;
  return_trace (true);
}

// Determine the minimum and maximum glyph indices from the iterator to calculate the glyph count.
// Set the starting glyph index to the minimum glyph index.
// Serialize the class value using the serialization context and the calculated glyph count.
// Iterate over the glyph-class pairs in the iterator, and assign the class value to each glyph index relative to the starting glyph index.
// Return true to indicate successful serialization.

hb_codepoint_t glyph_min = (*it).first;
hb_codepoint_t glyph_max = + it
                           | hb_map (hb_first)
                           | hb_reduce (hb_max, 0u);

classValue.len = glyph_max - glyph_min + 1;
if (unlikely (!c->allocate_size<HBUINT16> (classValue.len))) return_trace (false);

startGlyph = glyph_min;
unsigned int count = 0;
for (const auto gid_klass_pair : it)
{
  hb_codepoint_t gid = gid_klass_pair.first;
  unsigned klass = gid_klass_pair.second;
  classValue[count++] = klass;
}