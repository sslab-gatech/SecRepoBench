if (!iterator)
{
  startGlyphID = 0;
  glyphCount = 0;
  return_trace (true);
}

hb_codepoint_t minGlyph = HB_CODEPOINT_MAX;
hb_codepoint_t maxGlyph = 0;

for (const auto &_ : +iterator)
{
  minGlyph = hb_min (minGlyph, _.first);
  maxGlyph = hb_max (maxGlyph, _.first);
}

unsigned int count = maxGlyph - minGlyph + 1;

startGlyphID = minGlyph;
glyphCount = count;

HBUINT8 *values = c->allocate_array<HBUINT8> (count);
if (unlikely (!values)) return_trace (false);
memset (values, 0, count * sizeof(HBUINT8));

for (const auto &_ : +iterator)
{
  hb_codepoint_t glyph = _.first;
  unsigned int klass = _.second;
  values[glyph - minGlyph] = klass;
}

return_trace (true);