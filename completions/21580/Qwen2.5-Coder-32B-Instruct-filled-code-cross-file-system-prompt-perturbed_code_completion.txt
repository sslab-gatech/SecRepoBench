if (!iterator) {
    startGlyphIndex = 0;
    classValueLength = 0;
    return_trace (true);
}

hb_codepoint_t minGlyphIndex = HB_SET_VALUE_INVALID;
hb_codepoint_t maxGlyphIndex = HB_SET_VALUE_INVALID;

for (auto _ : + iterator) {
    hb_codepoint_t glyphIndex = iterator.get_glyph();
    if (minGlyphIndex == HB_SET_VALUE_INVALID || glyphIndex < minGlyphIndex) {
        minGlyphIndex = glyphIndex;
    }
    if (maxGlyphIndex == HB_SET_VALUE_INVALID || glyphIndex > maxGlyphIndex) {
        maxGlyphIndex = glyphIndex;
    }
}

unsigned glyphCount = maxGlyphIndex - minGlyphIndex + 1;
startGlyphIndex = minGlyphIndex;
classValueLength = glyphCount;

if (unlikely (!c->extend_min (classValueLength))) return_trace (false);

for (unsigned i = 0; i < glyphCount; i++) {
    classValueArray[i] = 0; // Default class value
}

for (auto _ : + iterator) {
    hb_codepoint_t glyphIndex = iterator.get_glyph();
    unsigned classValue = iterator.get_class();
    classValueArray[glyphIndex - minGlyphIndex] = classValue;
}

return_trace (true);