if (unlikely (!iterator))
{
  startGlyph = 0;
  classValue.len = 0;
  return_trace (true);
}

hb_codepoint_t glyph_min = (*iterator).first;
hb_codepoint_t glyph_max = glyph_min;
for (const auto& _ : iterator) glyph_max = hb_max (glyph_max, _.first);

unsigned int glyph_count = glyph_max - glyph_min + 1;
startGlyph = glyph_min;

if (unlikely (!c->extend (classValue, glyph_count))) return_trace (false);

for (const auto& gid_klass_pair : iterator)
  classValue[gid_klass_pair.first - glyph_min] = gid_klass_pair.second;

return_trace (true);