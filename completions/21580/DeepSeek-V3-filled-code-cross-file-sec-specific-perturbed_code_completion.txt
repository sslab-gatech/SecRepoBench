if (!iterator) {
      this->startGlyph = 0;
      this->values.len = 0;
      return_trace (true);
    }

    unsigned min_glyph = (unsigned) -1;
    unsigned max_glyph = 0;
    for (const auto& pair : iterator) {
      unsigned g = pair.first;
      if (g < min_glyph) min_glyph = g;
      if (g > max_glyph) max_glyph = g;
    }

    unsigned glyph_count = max_glyph - min_glyph + 1;
    this->startGlyph = min_glyph;

    if (unlikely (!this->values.serialize (c, glyph_count))) return_trace (false);

    unsigned i = 0;
    for (const auto& pair : iterator) {
      unsigned g = pair.first;
      while (g > min_glyph + i) {
        this->values[i] = 0;
        i++;
      }
      this->values[i] = pair.second;
      i++;
    }

    return_trace (true);