if (!iterator) {
      this->startGlyph = 0;
      this->values.len = 0;
      return_trace (true);
    }

    unsigned min_glyph = (unsigned) -1;
    unsigned max_glyph = 0;
    for (const auto& pair : +iterator) {
      unsigned glyph = pair.first;
      if (glyph < min_glyph) min_glyph = glyph;
      if (glyph > max_glyph) max_glyph = glyph;
    }

    unsigned glyph_count = max_glyph - min_glyph + 1;
    this->startGlyph = min_glyph;

    if (unlikely (!this->values.serialize (c, glyph_count))) {
      return_trace (false);
    }

    for (const auto& pair : +iterator) {
      unsigned glyph = pair.first;
      unsigned value = pair.second;
      this->values[glyph - min_glyph] = value;
    }

    return_trace (true);