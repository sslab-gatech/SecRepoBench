if (iterator == nullptr) {
        c->set_start_glyph_index(0);
        c->set_class_value_length(0);
        return true;
    }

    unsigned int min_glyph_index = iterator->min_glyph_index();
    unsigned int max_glyph_index = iterator->max_glyph_index();
    unsigned int glyph_count = max_glyph_index - min_glyph_index + 1;

    c->set_start_glyph_index(min_glyph_index);

    if (!c->serialize_class_value(glyph_count)) return_trace(false);

    for (unsigned int i = min_glyph_index; i <= max_glyph_index; ++i) {
        unsigned int class_value = iterator->get_class_value(i);
        c->set_class_value(i - min_glyph_index, class_value);
    }

    return true;