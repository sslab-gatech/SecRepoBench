if (!iterator)
    {
      if (unlikely (!c->extend_min ((hb_uint16_t) 0))) return_trace (false);
      if (unlikely (!c->extend_min ((hb_uint16_t) 0))) return_trace (false);
      return_trace (true);
    }

    hb_codepoint_t min_glyph = iterator.first ();
    hb_codepoint_t max_glyph = iterator.last ();
    unsigned glyph_count = max_glyph - min_glyph + 1;

    hb_codepoint_t start_glyph_index = min_glyph;

    if (unlikely (!c->extend_min ((hb_uint16_t) glyph_count))) return_trace (false);
    if (unlikely (!c->extend_min ((hb_uint16_t) start_glyph_index))) return_trace (false);

    for (auto pair : iterator)
    {
      hb_codepoint_t glyph_index = pair.first;
      unsigned class_value = pair.second;
      unsigned offset = glyph_index - start_glyph_index;

      if (unlikely (!c->extend_min ((hb_uint8_t) class_value))) return_trace (false);
    }

    return_trace (true);