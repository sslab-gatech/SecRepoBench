if (iterator == nullptr) {
  this->start_glyph_index = 0;
  this->class_value_length = 0;
  return_trace (true);
}

auto glyphs = +hb_iter (iterator)
  | hb_map (hb_first)
  ;
auto min_max = hb_get_minmax (glyphs);
this->start_glyph_index = min_max.min;
unsigned glyph_count = min_max.max - min_max.min + 1;
if (unlikely (!c->extend_min (*this, glyph_count))) return_trace (false);
if (unlikely (!serialize_class_value (c, glyph_count))) return_trace (false);

for (auto _ : iterator) {
  hb_codepoint_t glyph_index = _.first - this->start_glyph_index;
  this->class_value[glyph_index] = _.second;
}
return_trace (true);