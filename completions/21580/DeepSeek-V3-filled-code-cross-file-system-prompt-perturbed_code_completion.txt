if (!iterator)
    {
      startGlyph = 0;
      len = 0;
      return_trace (true);
    }

    unsigned min_g = (unsigned) -1;
    unsigned max_g = 0;
    for (const auto& _ : +iterator)
    {
      unsigned g = _.first;
      min_g = hb_min (min_g, g);
      max_g = hb_max (max_g, g);
    }
    unsigned num_glyphs = max_g - min_g + 1;

    startGlyph = min_g;
    len = num_glyphs;
    if (!get_class_value ().serialize (c, num_glyphs)) return_trace (false);

    for (const auto& _ : +iterator)
    {
      unsigned g = _.first;
      unsigned v = _.second;
      get_class_value ()[g - min_g] = v;
    }

    return_trace (true);