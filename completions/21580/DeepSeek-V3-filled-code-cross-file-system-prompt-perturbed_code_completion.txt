if (!iterator) {
      startGlyph = 0;
      classValueLen = 0;
      return_trace (true);
    }

    hb_codepoint_t min_glyph = HB_SET_VALUE_INVALID;
    hb_codepoint_t max_glyph = HB_SET_VALUE_INVALID;
    for (auto g : + iterator) {
      if (g.first < min_glyph) min_glyph = g.first;
      if (g.first > max_glyph) max_glyph = g.first;
    }
    unsigned glyphCount = max_glyph - min_glyph + 1;
    startGlyph = min_glyph;

    if (!classValue.serialize (c, glyphCount)) return_trace (false);

    for (auto _ : + iterator) {
      unsigned idx = _.first - min_glyph;
      classValue[idx] = _.second;
    }

    return_trace (true);