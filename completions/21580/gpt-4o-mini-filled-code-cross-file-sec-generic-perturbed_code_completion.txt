if (iterator == NULL) {
        c->starting_glyph_index = 0;
        c->class_value_length = 0;
        return true;
    }

    int min_glyph_index = iterator.get_min_glyph_index();
    int max_glyph_index = iterator.get_max_glyph_index();
    int glyph_count = max_glyph_index - min_glyph_index + 1;

    c->starting_glyph_index = min_glyph_index;

    if (!c->serialize_class_value(glyph_count)) return false;

    for (int glyph_index = min_glyph_index; glyph_index <= max_glyph_index; ++glyph_index) {
        int class_value = iterator.get_class_value(glyph_index);
        c->assign_class_value(glyph_index - min_glyph_index, class_value);
    }

    return true;