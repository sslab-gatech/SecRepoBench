if (iterator.is_null())
    {
      c->serialize_uint32(0); // starting glyph index
      c->serialize_uint32(0); // class value length
      return true;
    }

    unsigned int min_glyph_index = iterator.min_glyph_index();
    unsigned int max_glyph_index = iterator.max_glyph_index();
    unsigned int glyph_count = max_glyph_index - min_glyph_index + 1;

    c->serialize_uint32(min_glyph_index); // starting glyph index
    c->serialize_uint32(glyph_count);     // class value length

    for (auto it = iterator.begin(); it != iterator.end(); ++it)
    {
      unsigned int glyph_index = it->first - min_glyph_index;
      unsigned int class_value = it->second;
      c->serialize_uint32(glyph_index);
      c->serialize_uint32(class_value);
    }

    return true;