if (iterator.is_null())
    {
      c->serialize_uint16(0); // starting glyph index
      c->serialize_uint16(0); // class value length
      return true;
    }

    unsigned min_glyph = iterator.min_glyph();
    unsigned max_glyph = iterator.max_glyph();
    unsigned glyph_count = max_glyph - min_glyph + 1;

    c->serialize_uint16(min_glyph); // starting glyph index
    c->serialize_uint16(glyph_count); // class value length

    for (auto it = iterator; it; ++it)
    {
      unsigned glyph_index = it.glyph_index() - min_glyph;
      c->serialize_uint16(glyph_index);
      c->serialize_uint16(it.class_value());
    }

    return true;