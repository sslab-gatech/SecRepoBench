if (iterator == nullptr) {
      c->set_glyph_index (0);
      c->set_class_value_length (0);
      return_trace (true);
    }

    unsigned int min_glyph_index = iterator->min_glyph_index ();
    unsigned int max_glyph_index = iterator->max_glyph_index ();
    unsigned int glyph_count = max_glyph_index - min_glyph_index + 1;

    c->set_glyph_index (min_glyph_index);
    if (unlikely (!c->serialize_class_value (glyph_count))) return_trace (false);

    for (iterator->first (); iterator->valid (); iterator->next ()) {
      unsigned int glyph_index = iterator->glyph_index ();
      unsigned int class_value = iterator->class_value ();
      c->set_class_value (glyph_index - min_glyph_index, class_value);
    }

    return_trace (true);