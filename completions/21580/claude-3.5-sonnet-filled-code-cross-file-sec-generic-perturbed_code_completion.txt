if (!iterator) {
  startGlyphID = 0;
  classValueArray.len = 0;
  return_trace (true);
}

hb_codepoint_t minGlyph = HB_SET_VALUE_INVALID;
hb_codepoint_t maxGlyph = 0;
for (const auto& item : iterator) {
  minGlyph = hb_min(minGlyph, item.first);
  maxGlyph = hb_max(maxGlyph, item.first);
}

startGlyphID = minGlyph;
unsigned int glyphCount = maxGlyph - minGlyph + 1;

if (unlikely (!classValueArray.serialize (c, glyphCount)))
  return_trace (false);

for (const auto& item : iterator)
  classValueArray[item.first - minGlyph] = item.second;

return_trace (true);