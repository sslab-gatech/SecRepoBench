// <MASK>
bool serialize (hb_serialize_context_t *c,
                  Iterator iterator)
  {
    // If the iterator is null, set the starting glyph index and class value length to zero, and return true.
    if (!iterator) {
      c->set_starting_glyph_index (0);
      c->set_class_value_length (0);
      return true;
    }

    // Determine the minimum and maximum glyph indices from the iterator to calculate the glyph count.
    hb_codepoint_t min_glyph_index = iterator->min_glyph_index ();
    hb_codepoint_t max_glyph_index = iterator->max_glyph_index ();
    unsigned glyph_count = max_glyph_index - min_glyph_index + 1;

    // Set the starting glyph index to the minimum glyph index.
    c->set_starting_glyph_index (min_glyph_index);

    // Serialize the class value using the serialization context and the calculated glyph count.
    if (!c->serialize_class_value (glyph_count)) return_trace (false);

    // Iterate over the glyph-class pairs in the iterator, and assign the class value to each glyph index relative to the starting glyph index.
    for (Iterator it = iterator; it; ++it) {
      hb_codepoint_t glyph_index = it->glyph_index ();
      hb_codepoint_t class_value = it->class_value ();
      c->assign_class_value (glyph_index - min_glyph_index, class_value);
    }

    return_trace (true);
  }