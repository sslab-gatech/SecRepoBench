if (!iterator)
    {
      if (unlikely (!c->extend_min (2))) return_trace (false);
      c->addUINT16 (0); /* start */
      c->addUINT16 (0); /* count */
      return_trace (true);
    }

    unsigned int minGlyph = 0xFFFFFFFFU;
    unsigned int maxGlyph = 0;
    while (iterator.move_to_next ())
    {
      unsigned int glyph = iterator.get_glyph ();
      if (glyph < minGlyph) minGlyph = glyph;
      if (glyph > maxGlyph) maxGlyph = glyph;
    }

    unsigned int count = maxGlyph - minGlyph + 1;

    if (unlikely (!c->extend_min (2 + count))) return_trace (false);

    c->addUINT16 (minGlyph);
    c->addUINT16 (count);

    unsigned int i = 0;
    iterator.reset ();
    while (iterator.move_to_next ())
    {
      unsigned int glyph = iterator.get_glyph ();
      c->add (iterator.get_class (), glyph - minGlyph);
      i++;
    }

    return_trace (true);