if ((*p == '{') || (*p == '['))
            {
              char
                *k;

              level++;
              q=subexpression;
              p++;
              for (k=subexpression; (size_t) (q-k) < (MagickPathExtent-1) && *p != '\0'; )
              {
                if (*p == '{' || (*p == '['))
                  level++;
                else if (*p == '}' || (*p == ']'))
                {
                  level--;
                  if (level == 0)
                    break;
                }
                *q++=(*p++);
              }
              *q='\0';
              if ((size_t) (q-subexpression) >= (MagickPathExtent-1)) {
                (void) ThrowMagickException(exception,GetMagickModule(),OptionError,
                  "SubexpressionTooLong","`%s'",expression);
                return(0.0);
              }
              alpha=FxEvaluateSubexpression(fx_info,pixchannel,x,y,subexpression,
                &depth,&beta,exception);
              point.x=alpha;
              if (*p != '\0')
                p++;
              if (*p == ',')
                {
                  p++;
                  q=subexpression;
                  for (k=subexpression; (size_t) (q-k) < (MagickPathExtent-1) && *p != '\0'; )
                  {
                    if (*p == '{' || (*p == '['))
                      level++;
                    else if (*p == '}' || (*p == ']'))
                    {
                      level--;
                      if (level == 0)
                        break;
                    }
                    *q++=(*p++);
                  }
                  *q='\0';
                  if ((size_t) (q-subexpression) >= (MagickPathExtent-1)) {
                    (void) ThrowMagickException(exception,GetMagickModule(),OptionError,
                      "SubexpressionTooLong","`%s'",expression);
                    return(0.0);
                  }
                  alpha=FxEvaluateSubexpression(fx_info,pixchannel,x,y,
                    subexpression,&depth,&beta,exception);
                  point.y=alpha;
                  if (*p != '\0')
                    p++;
                }
            }