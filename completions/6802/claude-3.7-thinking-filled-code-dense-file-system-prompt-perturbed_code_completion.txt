p++;
if ((*p == '[') || (*p == '{'))
{
  char bracket = *p;
  char closing_bracket = (bracket == '[') ? ']' : '}';
  level++;
  q = subexpression;
  for (p++; *p != '\0'; )
  {
    if (*p == bracket)
      level++;
    else
      if (*p == closing_bracket)
        {
          level--;
          if (level == 0)
            break;
        }
    *q++=(*p++);
  }
  *q='\0';
  alpha=FxEvaluateSubexpression(fx_info,pixchannel,x,y,subexpression,
    &depth,&beta,exception);
  point.x=alpha;
  point.y=beta;
  p++;
}
if (*p == '.')
  p++;