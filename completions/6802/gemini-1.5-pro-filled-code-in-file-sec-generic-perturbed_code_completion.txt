char
    *r;

          level=0;
          q=subexpression;
          for (r=(char *) (p+1); *r != '\0'; )
          {
            if (*r == '[' || *r == '{')
              level++;
            else
              if (*r == ']' || *r == '}')
                {
                  level--;
                  if (level == 0)
                    break;
                }
            *q++=(*r++);
          }
          *q='\0';
          if (strlen(subexpression) != 0) {
            alpha=FxEvaluateSubexpression(fx_info,channel,x,y,subexpression,
              &depth,&beta,exception);
            point.x=alpha;
            point.y=beta;
          }
          p=r+1;