if (*p == '{' || *p == '[')
          {
            char
              end_char = (*p == '{') ? '}' : ']';

            level++;
            q = subexpression;
            for (p++; *p != '\0'; p++)
            {
              if (*p == *q)
                level++;
              else if (*p == end_char)
              {
                level--;
                if (level == 0)
                  break;
              }
              *q++ = *p;
            }
            *q = '\0';
            alpha = FxEvaluateSubexpression(fx_info, pixchannel, x, y, subexpression, &depth, &beta, exception);
            point.x = alpha;
            point.y = beta;
            p++;
          }