char
  *q;

double
  alpha,
  beta;

size_t
  depth;

if (*p == 'p')
  {
    p++;
    if (*p == '{')
      {
        level++;
        q=subexpression;
        for (p++; *p != '\0'; )
        {
          if (*p == '{')
            level++;
          else
            if (*p == '}')
              {
                level--;
                if (level == 0)
                  break;
              }
          if (q - subexpression < MagickPathExtent - 1)  // Check for buffer overflow
            *q++=(*p);
          p++;
          if (*p == '\0') break;  // Check for null terminator
        }
        *q='\0';
        alpha=FxEvaluateSubexpression(fx_info,pixchannel,x,y,subexpression,
          &depth,&beta,exception);
        point.x=alpha;
        point.y=beta;
        p++;
      }
    else
      if (*p == '[')
        {
          level++;
          q=subexpression;
          for (p++; *p != '\0'; )
          {
            if (*p == '[')
              level++;
            else
              if (*p == ']')
                {
                  level--;
                  if (level == 0)
                    break;
                }
            if (q - subexpression < MagickPathExtent - 1)  // Check for buffer overflow
              *q++=(*p);
            p++;
            if (*p == '\0') break;  // Check for null terminator
          }
          *q='\0';
          alpha=FxEvaluateSubexpression(fx_info,pixchannel,x,y,subexpression,
            &depth,&beta,exception);
          point.x=alpha;
          point.y=beta;
          p++;
        }
  }