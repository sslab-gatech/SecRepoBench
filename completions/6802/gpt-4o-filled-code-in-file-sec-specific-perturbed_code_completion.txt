// Extract a subexpression enclosed in curly braces '{}' or square brackets '[]' from the input expression.
          if (*p == '{' || *p == '[') {
            char *subexpr = subexpression;
            char open_brace = *p;
            char close_brace = (open_brace == '{') ? '}' : ']';
            level = 1;
            for (p++; *p != '\0' && level > 0; p++) {
              if (*p == open_brace)
                level++;
              else if (*p == close_brace)
                level--;
              if (level > 0)
                *subexpr++ = *p;
            }
            *subexpr = '\0';
            alpha = FxEvaluateSubexpression(fx_info, pixchannel, x, y, subexpression, &depth, &beta, exception);
            point.x = alpha;
            point.y = beta;
          }
          // Update the expression pointer 'p' to continue processing the rest of the expression.
          while (*p != '\0' && *p != '.')
            p++;