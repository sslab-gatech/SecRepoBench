if (*p == '{' || *p == '[')
          {
            char closing_char = (*p == '{') ? '}' : ']';
            level++;
            q = subexpression;
            for (p++; *p != '\0'; p++)
            {
              if (*p == *subexpression)
                level++;
              else if (*p == closing_char)
              {
                level--;
                if (level == 0)
                  break;
              }
              *q++ = *p;
            }
            *q = '\0';
            if (*p == closing_char)
              p++;
            alpha = FxEvaluateSubexpression(fx_info, pixchannel, x, y, subexpression, &depth, &beta, exception);
            point.x = alpha;
            point.y = beta;
          }