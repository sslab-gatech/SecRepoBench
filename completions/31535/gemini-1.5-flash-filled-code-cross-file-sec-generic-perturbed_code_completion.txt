if (off_pos > frame->len) {
      BLOSC_TRACE_ERROR("Offset position exceeds frame length.");
      return NULL;
    }
    uint8_t* coffsets = (uint8_t*)malloc((size_t)off_pos);
    if (coffsets == NULL) {
      BLOSC_TRACE_ERROR("Memory allocation failed.");
      return NULL;
    }
    memcpy(coffsets, frame->cframe, (size_t)off_pos);
    if (compressed_chunk_size != NULL) {
      *compressed_chunk_size = (int32_t)off_pos;
    }
    frame->coffsets = coffsets;
    return coffsets;