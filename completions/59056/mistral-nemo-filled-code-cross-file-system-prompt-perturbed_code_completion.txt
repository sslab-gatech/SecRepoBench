if (isTopLevel) {
    elements.insert(std::make_pair(str, element));
} else {
    if (n == nullptr) {
        ParseError("unexpected end of file");
    } else {
        elements.insert(std::make_pair(str, element));
    }
}