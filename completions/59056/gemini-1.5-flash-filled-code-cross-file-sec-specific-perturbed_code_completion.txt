{
            if (isTopLevel) {
                elements.insert(std::make_pair(str, element));
            } else {
                delete_Element(element);
                ParseError("unexpected end of file");
            }
        } else {
            elements.insert(std::make_pair(str, element));
        }
        n = parser.AdvanceToNextToken();
        if (n == nullptr) {
            break;
        }
    }

    if (!isTopLevel) {
        TokenPtr t = parser.CurrentToken();
        if (t->Type() != TokenType_CLOSE_BRACKET) {
            ParseError("expected close bracket",t);
        }
    }