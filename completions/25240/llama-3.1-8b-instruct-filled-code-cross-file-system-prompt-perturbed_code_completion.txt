case 'k': {
    if (IsLineEnd(*m_DataIt)) {
        m_DataIt = skipLine<DataArrayIt>(m_DataIt, m_DataItEnd, m_uiLine);
        continue;
    }

    std::string strKey = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    if (strKey.empty()) {
        m_DataIt = skipLine<DataArrayIt>(m_DataIt, m_DataItEnd, m_uiLine);
        continue;
    }

    if (strKey == "newmtl") {
        // Create a new material
        std::string strMatName = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
        if (strMatName.empty()) {
            m_DataIt = skipLine<DataArrayIt>(m_DataIt, m_DataItEnd, m_uiLine);
            continue;
        }

        int mat_index = getMaterialIndex(strMatName);
        if (mat_index == -1) {
            mat_index = m_pModel->m_MaterialLib.size();
            m_pModel->m_MaterialLib.push_back(strMatName);
        }

        m_pModel->m_pCurrentMaterial = new ObjFile::Material();
        m_pModel->m_pCurrentMaterial->MaterialName = strMatName;
        m_pModel->m_pCurrentMaterial->MaterialIndex = mat_index;

        m_pModel->m_pCurrentMesh->m_uiMaterialIndex = mat_index;
        m_pModel->m_pCurrentMesh->m_pMaterial = m_pModel->m_pCurrentMaterial;
    } else if (strKey == "Ka") {
        // Ambient color
        getColorRGBA(m_pModel->m_pCurrentMaterial->Ambient);
    } else if (strKey == "Kd") {
        // Diffuse color
        getColorRGBA(m_pModel->m_pCurrentMaterial->Diffuse);
    } else if (strKey == "Ks") {
        // Specular color
        getColorRGBA(m_pModel->m_pCurrentMaterial->Specular);
    } else if (strKey == "Ke") {
        // Emissive color
        getColorRGBA(m_pModel->m_pCurrentMaterial->Emissive);
    } else if (strKey == "Tf") {
        // Transmission color
        getColorRGBA(m_pModel->m_pCurrentMaterial->Transmission);
    } else if (strKey == "Ns") {
        // Specular exponent
        float value;
        if (!getValue<float>(m_DataIt, m_DataItEnd, value)) {
            m_DataIt = skipLine<DataArrayIt>(m_DataIt, m_DataItEnd, m_uiLine);
            continue;
        }
        m_pModel->m_pCurrentMaterial->SpecularExponent = value;
    } else if (strKey == "Ni") {
        // Index of Refraction (IOR)
        float value;
        if (!getValue<float>(m_DataIt, m_DataItEnd, value)) {
            m_DataIt = skipLine<DataArrayIt>(m_DataIt, m_DataItEnd, m_uiLine);
            continue;
        }
        m_pModel->m_pCurrentMaterial->IOR = value;
    } else if (strKey == "d") {
        // Transparency
        float value;
        if (!getValue<float>(m_DataIt, m_DataItEnd, value)) {
            m_DataIt = skipLine<DataArrayIt>(m_DataIt, m_DataItEnd, m_uiLine);
            continue;
        }
        m_pModel->m_pCurrentMaterial->Transparency = value;
    } else if (strKey == "Tr") {
        // Alpha value
        float value;
        if (!getValue<float>(m_DataIt, m_DataItEnd, value)) {
            m_DataIt = skipLine<DataArrayIt>(m_DataIt, m_DataItEnd, m_uiLine);
            continue;
        }
        m_pModel->m_pCurrentMaterial->Alpha = value;
    } else if (strKey == "illum") {
        // Illumination model
        int value;
        if (!getValue<int>(m_DataIt, m_DataItEnd, value)) {
            m_DataIt = skipLine<DataArrayIt>(m_DataIt, m_DataItEnd, m_uiLine);
            continue;
        }
        m_pModel->m_pCurrentMaterial->IlluminationModel = value;
    } else if (strKey == "map_Ka") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Kd") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_bump") {
        // Bump texture
        m_pModel->m_pCurrentMaterial->BumpTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_d") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ks") {
        // Specular texture
        m_pModel->m_pCurrentMaterial->SpecularTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ns") {
        // Specular texture
        m_pModel->m_pCurrentMaterial->SpecularTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_bump") {
        // Bump texture
        m_pModel->m_pCurrentMaterial->BumpTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_d") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ke") {
        // Emissive texture
        m_pModel->m_pCurrentMaterial->EmissiveTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ns") {
        // Specular texture
        m_pModel->m_pCurrentMaterial->SpecularTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_d") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Bump") {
        // Bump texture
        m_pModel->m_pCurrentMaterial->BumpTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ka") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Kd") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ks") {
        // Specular texture
        m_pModel->m_pCurrentMaterial->SpecularTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ns") {
        // Specular texture
        m_pModel->m_pCurrentMaterial->SpecularTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_d") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Bump") {
        // Bump texture
        m_pModel->m_pCurrentMaterial->BumpTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ke") {
        // Emissive texture
        m_pModel->m_pCurrentMaterial->EmissiveTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_d") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ka") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Kd") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ks") {
        // Specular texture
        m_pModel->m_pCurrentMaterial->SpecularTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ns") {
        // Specular texture
        m_pModel->m_pCurrentMaterial->SpecularTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_d") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Bump") {
        // Bump texture
        m_pModel->m_pCurrentMaterial->BumpTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ke") {
        // Emissive texture
        m_pModel->m_pCurrentMaterial->EmissiveTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_d") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ka") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Kd") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ks") {
        // Specular texture
        m_pModel->m_pCurrentMaterial->SpecularTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ns") {
        // Specular texture
        m_pModel->m_pCurrentMaterial->SpecularTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_d") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Bump") {
        // Bump texture
        m_pModel->m_pCurrentMaterial->BumpTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ke") {
        // Emissive texture
        m_pModel->m_pCurrentMaterial->EmissiveTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_d") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ka") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Kd") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ks") {
        // Specular texture
        m_pModel->m_pCurrentMaterial->SpecularTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ns") {
        // Specular texture
        m_pModel->m_pCurrentMaterial->SpecularTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_d") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Bump") {
        // Bump texture
        m_pModel->m_pCurrentMaterial->BumpTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_Ke") {
        // Emissive texture
        m_pModel->m_pCurrentMaterial->EmissiveTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey == "map_d") {
        // Diffuse texture
        m_pModel->m_pCurrentMaterial->DiffuseTexture = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    } else if (strKey ==