m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
                if (m_DataIt == m_DataItEnd) {
                    return;
                }

                // Parse the material properties
                if (*m_DataIt == 'N') { // New material definition
                    m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
                    if (m_DataIt == m_DataItEnd) {
                        return;
                    }
                    std::string materialName(&(*m_DataIt));
                    m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
                    if (m_DataIt == m_DataItEnd) {
                        return;
                    }
                    if (*m_DataIt == 'n') { // Newmtl
                        m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
                        if (m_DataIt == m_DataItEnd) {
                            return;
                        }
                        std::string newmtlName(&(*m_DataIt));
                        m_pModel->m_pCurrentMaterial = new ObjFile::Material;
                        m_pModel->m_pCurrentMaterial->MaterialName = newmtlName;
                    }
                } else if (*m_DataIt == 'K') { // Color definitions
                    m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
                    if (m_DataIt == m_DataItEnd) {
                        return;
                    }
                    if (*m_DataIt == 'a') { // Ka (ambient color)
                        getColorRGBA(m_pModel->m_pCurrentMaterial->AmbientColor);
                    } else if (*m_DataIt == 'd') { // Kd (diffuse color)
                        getColorRGBA(m_pModel->m_pCurrentMaterial->DiffuseColor);
                    } else if (*m_DataIt == 's') { // Ks (specular color)
                        getColorRGBA(m_pModel->m_pCurrentMaterial->SpecularColor);
                    } else if (*m_DataIt == 'e') { // Ke (emissive color)
                        getColorRGBA(m_pModel->m_pCurrentMaterial->EmissiveColor);
                    } else if (*m_DataIt == 't') { // Kt (transmission filter color)
                        getColorRGBA(m_pModel->m_pCurrentMaterial->TransmissionColor);
                    }
                } else if (*m_DataIt == 'T') { // Transparency and Alpha
                    m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
                    if (m_DataIt == m_DataItEnd) {
                        return;
                    }
                    if (*m_DataIt == 'f') { // Tr (transparency)
                        m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
                        if (m_DataIt == m_DataItEnd) {
                            return;
                        }
                        m_pModel->m_pCurrentMaterial->TransparencyFactor = atof(&(*m_DataIt));
                    } else if (*m_DataIt == 'r') { // d (alpha)
                        m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
                        if (m_DataIt == m_DataItEnd) {
                            return;
                        }
                        m_pModel->m_pCurrentMaterial->DiffuseColor.a = atof(&(*m_DataIt));
                    }
                } else if (*m_DataIt == 'i') { // Illumination model and IOR
                    m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
                    if (m_DataIt == m_DataItEnd) {
                        return;
                    }
                    m_pModel->m_pCurrentMaterial->Illum = atoi(&(*m_DataIt));
                } else if (*m_DataIt == 'N') { // Specular exponent and IOR
                    m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
                    if (m_DataIt == m_DataItEnd) {
                        return;
                    }
                    if (*m_DataIt == 's') { // Ns (specular exponent)
                        m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
                        if (m_DataIt == m_DataItEnd) {
                            return;
                        }
                        m_pModel->m_pCurrentMaterial->Shininess = atof(&(*m_DataIt));
                    } else if (*m_DataIt == 'i') { // Ni (index of refraction)
                        m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
                        if (m_DataIt == m_DataItEnd) {
                            return;
                        }
                        m_pModel->m_pCurrentMaterial->IOR = atof(&(*m_DataIt));
                    }
                } else if (*m_DataIt == 'm') { // Material
                    m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
                    if (m_DataIt == m_DataItEnd) {
                        return;
                    }
                    if (*m_DataIt == 'a') { // map_Ka (ambient texture)
                        parseTexture("map_Ka", m_pModel->m_pCurrentMaterial->map_Ka);
                    } else if (*m_DataIt == 'd') { // map_Kd (diffuse texture)
                        parseTexture("map_Kd", m_pModel->m_pCurrentMaterial->map_Kd);
                    } else if (*m_DataIt == 's') { // map_Ks (specular texture)
                        parseTexture("map_Ks", m_pModel->m_pCurrentMaterial->map_Ks);
                    } else if (*m_DataIt == 'e') { // map_Ke (emissive texture)
                        parseTexture("map_Ke", m_pModel->m_pCurrentMaterial->map_Ke);
                    } else if (*m_DataIt == 'b') { // map_Bump (bump texture)
                        parseTexture("map_Bump", m_pModel->m_pCurrentMaterial->map_Bump);
                    } else if (*m_DataIt == 't') { // map_d (alpha texture)
                        parseTexture("map_d", m_pModel->m_pCurrentMaterial->map_d);
                    }
                }
                break;