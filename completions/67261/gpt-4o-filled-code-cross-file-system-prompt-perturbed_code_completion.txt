u32 res_size;
	char *dst = NULL;

	// Convert the input data into a UTF string using its byte order mark (BOM).
	dst = gf_text_get_utf8_bom(data, buffer_length, &res_size);
	if (!dst) return NULL;

	// Strip leading whitespace characters, including spaces, newlines, and tabs, from the processed data.
	while (res_size && ((*dst == ' ') || (*dst == '\n') || (*dst == '\t'))) {
		dst++;
		res_size--;
	}

	// Define a macro to facilitate returning a MIME type and freeing allocated memory when a format is identified.
	#define PROBE_OK(_score, _mime) { \
		if (score) *score = _score; \
		if (dst) gf_free(dst); \
		return _mime; \
	}