char *dst = NULL;
	u32 res_size = buffer_length;
	u32 uni_type = gf_text_get_utf_type(NULL, data, res_size, &dst, &res_size);

	if (uni_type>1) {
		const u16 *sptr;
		char szUTF[1024];
		u32 read = MIN(res_size, 1023);
		memcpy(szUTF, dst, read);
		szUTF[read]=0;
		sptr = (const u16 *)szUTF;
		/*read = (u32) */gf_utf8_wcstombs(szUTF, read, &sptr);
		data = szUTF;
		res_size = read;
	}
	while (res_size && strchr("\n\r\t ", (char) data[0])) {
		data++;
		res_size--;
	}

#define PROBE_OK(_score, _mime) if (score) *score = _score; if (dst) gf_free(dst); return _mime