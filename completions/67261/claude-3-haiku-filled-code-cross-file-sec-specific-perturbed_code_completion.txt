// <MASK>
// Allocate memory for the processed data
dst = gf_malloc(buffer_length + 1);
if (!dst) {
    return NULL;
}
memcpy(dst, data, buffer_length);
dst[buffer_length] = 0;
res_size = buffer_length;

// Convert the input data into a UTF string using its byte order mark (BOM)
if (buffer_length >= 2) {
    if ((data[0] == 0xFF && data[1] == 0xFE) || (data[0] == 0xFE && data[1] == 0xFF)) {
        // UTF-16 BOM detected, convert to UTF-8
        u32 len;
        char *tmp = gf_utf16_to_utf8(dst, res_size, &len);
        gf_free(dst);
        dst = tmp;
        res_size = len;
    }
}

// Strip leading whitespace characters, including spaces, newlines, and tabs, from the processed data
while (res_size && (*dst == ' ' || *dst == '\n' || *dst == '\r' || *dst == '\t')) {
    dst++;
    res_size--;
}