char *dst = NULL;
	u32 res_size = buffer_length;
	const u8 *data_without_bom = gf_utf8_bom_skip(data, &res_size);

	if (!data_without_bom || !res_size) return NULL;

	data = data_without_bom;

	dst = (char*)gf_malloc(sizeof(char) * (res_size+1));
	if (!dst) return NULL;
	memcpy(dst, data, res_size);
	dst[res_size] = 0;

	while (strchr(" \t\r\n", dst[0])) {
		memmove(dst, dst+1, res_size);
		res_size--;
	}

#define PROBE_OK(score_val, mime_type) {*score = score_val; if (dst) gf_free(dst); return mime_type;}