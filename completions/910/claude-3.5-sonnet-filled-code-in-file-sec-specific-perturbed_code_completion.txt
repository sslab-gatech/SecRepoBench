if (!io->Seek(io, Offset)) {
    cmsSignalError(Icc->ContextID, cmsERROR_FILE, "Seek error; probably corrupted file");
    goto Error;
}

if (!_cmsReadUInt32Number(io, &BaseType)) {
    cmsSignalError(Icc->ContextID, cmsERROR_READ, "Read error; probably corrupted file");
    goto Error;
}

TagDescriptor = _cmsGetTagDescriptor(Icc->ContextID, tagSignature);
if (TagDescriptor == NULL) {
    cmsSignalError(Icc->ContextID, cmsERROR_UNKNOWN_EXTENSION, "Unknown tag '%x'", tagSignature);
    goto Error;
}

if (!IsTypeSupported(TagDescriptor, BaseType)) {
    char TypeString[5], SigString[5];
    _cmsTagSignature2String(TypeString, (cmsTagSignature) BaseType);
    _cmsTagSignature2String(SigString, tagSignature);
    cmsSignalError(Icc->ContextID, cmsERROR_UNKNOWN_EXTENSION, "Unsupported type '%s' for tag '%s'", TypeString, SigString);
    goto Error;
}

TagSize -= sizeof(cmsTagTypeSignature);