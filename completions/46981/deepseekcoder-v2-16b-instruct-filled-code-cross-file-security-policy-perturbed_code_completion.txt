_image->columns,1,
                        exception);

                    if (q == (Quantum *) NULL)
                      break;

                    for (x=0; x < (ssize_t) image->columns; x++)
                    {
                      if (magn_methx == 1)
                        {
                          *q++=*pixels++;
                          continue;
                        }

                      if (magn_methx == 2)
                        {
                          *q++=ScaleQuantumToShort(*pixels++);
                          *q++=ScaleQuantumToShort(*pixels++);
                          continue;
                        }

                      if (magn_methx == 3)
                        {
                          *q++=ScaleQuantumToShort(*pixels++);
                          *q++=ScaleQuantumToShort(*pixels++);
                          *q++=ScaleQuantumToShort(*pixels++);
                          continue;
                        }

                      if (magn_methx == 4)
                        {
                          *q++=ScaleQuantumToShort(*pixels++);
                          *q++=ScaleQuantumToShort(*pixels++);
                          *q++=ScaleQuantumToShort(*pixels++);
                          *q++=ScaleQuantumToShort(*pixels++);
                          continue;
                        }

                      if (magn_methx == 5)
                        {
                          *q++=ScaleQuantumToShort(*pixels++);
                          *q++=ScaleQuantumToShort(*pixels++);
                          *q++=ScaleQuantumToShort(*pixels++);
                          *q++=ScaleQuantumToShort(*pixels++);
                          *q++=ScaleQuantumToShort(*pixels++);
                          continue;
                        }
                    }

                    if (SyncAuthenticPixels(large_image,exception) == MagickFalse)
                      break;
                  }
                }

                if (prev != (Quantum *) NULL)
                  prev=(Quantum *) RelinquishMagickMemory(prev);
                if (next != (Quantum *) NULL)
                  next=(Quantum *) RelinquishMagickMemory(next);

                image=DestroyImageList(image);
                image=large_image;
              }
          }

        if (image->columns == 0 || image->rows == 0)
          {
            image=DestroyImageList(image);
            ThrowReaderException(CorruptImageError,"ImproperImageHeader");
          }

        mng_data->image=image;
      }

    if (mng_data->image == (Image *) NULL)
      {
        if (logging != MagickFalse)
          (void) LogMagickEvent(CoderEvent,GetMagickModule(),
            "  No image data");

        image=DestroyImageList(image);
        return((Image *) NULL);
      }

    if (mng_data->mng_type == 1)
      {
        if (logging != MagickFalse)
          (void) LogMagickEvent(CoderEvent,GetMagickModule(),
            "  Processing MNG object");

        crop_box=mng_data->object_clip[object_id];
        if (crop_box.left < 0)
          crop_box.left=0;
        if (crop_box.top < 0)
          crop_box.top=0;
        if (crop_box.right > image->columns)
          crop_box.right=image->columns;
        if (crop_box.bottom > image->rows)
          crop_box.bottom=image->rows;

        if (crop_box.left >= crop_box.right || crop_box.top >= crop_box.bottom)
          {
            if (logging != MagickFalse)
              (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                "  Skipping empty object");

            continue;
          }

        if (mng_data->frozen[object_id])
          {
            if (logging != MagickFalse)
              (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                "  Skipping frozen object");

            continue;
          }

        if (mng_data->invisible[object_id])
          {
            if (logging != MagickFalse)
              (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                "  Skipping invisible object");

            continue;
          }

        if (mng_data->mng_type == 1)
          {
            if (logging != MagickFalse)
              (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                "  Processing MNG object");

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_id;
              }

            if (mng_data->object_id != object_id)
              {
                if (logging != MagickFalse)
                  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                    "  Processing MNG object %d",object_id);

                mng_data->object_id=object_