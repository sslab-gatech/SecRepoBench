q);
                        SetPixelGreen(current_image,ScaleShortToQuantum(
                          GetPixelGreen(current_image,q)),q);
                        SetPixelBlue(current_image,ScaleShortToQuantum(
                          GetPixelBlue(current_image,q)),q);
                        SetPixelAlpha(current_image,ScaleShortToQuantum(
                          GetPixelAlpha(current_image,q)),q);
                        q+=GetPixelChannels(current_image);
                     }

                     if (SyncAuthenticPixels(current_image,exception) == MagickFalse)
                       break;
                   }
                }
#endif
              if (logging != MagickFalse)
                (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                  "    Rescale pixels to Quantum");

              if (mng_info->magn_methx == 1 && mng_info->magn_methy == 1)
                {
                  if (logging != MagickFalse)
                    (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                      "    Rescale pixels to Quantum");

                  for (y=0; y < (ssize_t) current_image->rows; y++)
                  {
                    q=GetAuthenticPixels(current_image,0,y,current_image->columns,1,
                      exception);
                    if (q == (Quantum *) NULL)
                      break;

                    for (x=(ssize_t) current_image->columns-1; x >= 0; x--)
                    {
                      SetPixelRed(current_image,ScaleShortToQuantum(
                        GetPixelRed(current_image,q)),q);
                      SetPixelGreen(current_image,ScaleShortToQuantum(
                        GetPixelGreen(current_image,q)),q);
                      SetPixelBlue(current_image,ScaleShortToQuantum(
                        GetPixelBlue(current_image,q)),q);
                      SetPixelAlpha(current_image,ScaleShortToQuantum(
                        GetPixelAlpha(current_image,q)),q);
                      q+=GetPixelChannels(current_image);
                    }

                    if (SyncAuthenticPixels(current_image,exception) == MagickFalse)
                      break;
                  }
                }
              if (logging != MagickFalse)
                (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                  "    Rescale pixels to Quantum");

              if (mng_info->magn_methx == 1 && mng_info->magn_methy == 1)
                {
                  if (logging != MagickFalse)
                    (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                      "    Rescale pixels to Quantum");

                  for (y=0; y < (ssize_t) current_image->rows; y++)
                  {
                    q=GetAuthenticPixels(current_image,0,y,current_image->columns,1,
                      exception);
                    if (q == (Quantum *) NULL)
                      break;

                    for (x=(ssize_t) current_image->columns-1; x >= 0; x--)
                    {
                      SetPixelRed(current_image,ScaleShortToQuantum(
                        GetPixelRed(current_image,q)),q);
                      SetPixelGreen(current_image,ScaleShortToQuantum(
                        GetPixelGreen(current_image,q)),q);
                      SetPixelBlue(current_image,ScaleShortToQuantum(
                        GetPixelBlue(current_image,q)),q);
                      SetPixelAlpha(current_image,ScaleShortToQuantum(
                        GetPixelAlpha(current_image,q)),q);
                      q+=GetPixelChannels(current_image);
                    }

                    if (SyncAuthenticPixels(current_image,exception) == MagickFalse)
                      break;
                  }
                }
              if (logging != MagickFalse)
                (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                  "    Rescale pixels to Quantum");

              if (mng_info->magn_methx == 1 && mng_info->magn_methy == 1)
                {
                  if (logging != MagickFalse)
                    (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                      "    Rescale pixels to Quantum");

                  for (y=0; y < (ssize_t) current_image->rows; y++)
                  {
                    q=GetAuthenticPixels(current_image,0,y,current_image->columns,1,
                      exception);
                    if (q == (Quantum *) NULL)
                      break;

                    for (x=(ssize_t) current_image->columns-1; x >= 0; x--)
                    {
                      SetPixelRed(current_image,ScaleShortToQuantum(
                        GetPixelRed(current_image,q)),q);
                      SetPixelGreen(current_image,ScaleShortToQuantum(
                        GetPixelGreen(current_image,q)),q);
                      SetPixelBlue(current_image,ScaleShortToQuantum(
                        GetPixelBlue(current_image,q)),q);
                      SetPixelAlpha(current_image,ScaleShortToQuantum(
                        GetPixelAlpha(current_image,q)),q);
                      q+=GetPixelChannels(current_image);
                    }

                    if (SyncAuthenticPixels(current_image,exception) == MagickFalse)
                      break;
                  }
                }
              if (logging != MagickFalse)
                (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                  "    Rescale pixels to Quantum");

              if (mng_info->magn_methx == 1 && mng_info->magn_methy == 1)
                {
                  if (logging != MagickFalse)
                    (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                      "    Rescale pixels to Quantum");

                  for (y=0; y < (ssize_t) current_image->rows; y++)
                  {
                    q=GetAuthenticPixels(current_image,0,y,current_image->columns,1,
                      exception);
                    if (q == (Quantum *) NULL)
                      break;

                    for (x=(ssize_t) current_image->columns-1; x >= 0; x--)
                    {
                      SetPixelRed(current_image,ScaleShortToQuantum(
                        GetPixelRed(current_image,q)),q);
                      SetPixelGreen(current_image,ScaleShortToQuantum(
                        GetPixelGreen(current_image,q)),q);
                      SetPixelBlue(current_image,ScaleShortToQuantum(
                        GetPixelBlue(current_image,q)),q);
                      SetPixelAlpha(current_image,ScaleShortToQuantum(
                        GetPixelAlpha(current_image,q)),q);
                      q+=GetPixelChannels(current_image);
                    }

                    if (SyncAuthenticPixels(current_image,exception) == MagickFalse)
                      break;
                  }
                }
              if (logging != MagickFalse)
                (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                  "    Rescale pixels to Quantum");

              if (mng_info->magn_methx == 1 && mng_info->magn_methy == 1)
                {
                  if (logging != MagickFalse)
                    (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                      "    Rescale pixels to Quantum");

                  for (y=0; y < (ssize_t) current_image->rows; y++)
                  {
                    q=GetAuthenticPixels(current_image,0,y,current_image->columns,1,
                      exception);
                    if (q == (Quantum *) NULL)
                      break;

                    for (x=(ssize_t) current_image->columns-1; x >= 0; x--)
                    {
                      SetPixelRed(current_image,ScaleShortToQuantum(
                        GetPixelRed(current_image,q)),q);
                      SetPixelGreen(current_image,ScaleShortToQuantum(
                        GetPixelGreen(current_image,q)),q);
                      SetPixelBlue(current_image,ScaleShortToQuantum(
                        GetPixelBlue(current_image,q)),q);
                      SetPixelAlpha(current_image,ScaleShortToQuantum(
                        GetPixelAlpha(current_image,q)),q);
                      q+=GetPixelChannels(current_image);
                    }

                    if (SyncAuthenticPixels(current_image,exception) == MagickFalse)
                      break;
                  }
                }
              if (logging != MagickFalse)
                (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                  "    Rescale pixels to Quantum");

              if (mng_info->magn_methx == 1 && mng_info->magn_methy == 1)
                {
                  if (logging != MagickFalse)
                    (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                      "    Rescale pixels to Quantum");

                  for (y=0; y < (ssize_t) current_image->rows; y++)
                  {
                    q=GetAuthenticPixels(current_image,0,y,current_image->columns,1,
                      exception);
                    if (q == (Quantum *) NULL)
                      break;

                    for (x=(ssize_t) current_image->columns-1; x >= 0; x--)
                    {
                      SetPixelRed(current_image,ScaleShortToQuantum(
                        GetPixelRed(current_image,q)),q);
                      SetPixelGreen(current_image,ScaleShortToQuantum(
                        GetPixelGreen(current_image,q)),q);
                      SetPixelBlue(current_image,ScaleShortToQuantum(
                        GetPixelBlue(current_image,q)),q);
                      SetPixelAlpha(current_image,ScaleShortToQuantum(
                        GetPixelAlpha(current_image,q)),q);
                      q+=GetPixelChannels(current_image);
                    }

                    if (SyncAuthenticPixels(current_image,exception) == MagickFalse)
                      break;
                  }
                }
              if (logging != MagickFalse)
                (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                  "    Rescale pixels to Quantum");

              if (mng_info->magn_methx == 1 && mng_info->magn_methy == 1)
                {
                  if (logging != MagickFalse)
                    (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                      "    Rescale pixels to Quantum");

                  for (y=0; y < (ssize_t) current_image->rows; y++)
                  {
                    q=GetAuthenticPixels(current_image,0,y,current_image->columns,1,
                      exception);
                    if (q == (Quantum *) NULL)
                      break;

                    for (x=(ssize_t) current_image->columns-1; x >= 0; x--)
                    {
                      SetPixelRed(current_image,ScaleShortToQuantum(
                        GetPixelRed(current_image,q)),q);
                      SetPixelGreen(current_image,ScaleShortToQuantum(
                        GetPixelGreen(current_image,q)),q);
                      SetPixelBlue(current_image,ScaleShortToQuantum(
                        GetPixelBlue(current_image,q)),q);
                      SetPixelAlpha(current_image,ScaleShortToQuantum(
                        GetPixelAlpha(current_image,q)),q);
                      q+=GetPixelChannels(current_image);
                    }

                    if (SyncAuthenticPixels(current_image,exception) == MagickFalse)
                      break;
                  }
                }
              if (logging != MagickFalse)
                (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                  "    Rescale pixels to Quantum");

              if (mng_info->magn_methx == 1 && mng_info->magn_methy == 1)
                {
                  if (logging != MagickFalse)
                    (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                      "    Rescale pixels to Quantum");

                  for (y=0; y < (ssize_t) current_image->rows; y++)
                  {
                    q=GetAuthenticPixels(current_image,0,y,current_image->columns,1,
                      exception);
                    if (q == (Quantum *) NULL)
                      break;

                    for (x=(ssize_t) current_image->columns-1; x >= 0; x--)
                    {
                      SetPixelRed(current_image,ScaleShortToQuantum(
                        GetPixelRed(current_image,q)),q);
                      SetPixelGreen(current_image,ScaleShortToQuantum(
                        GetPixelGreen(current_image,q)),q);
                      SetPixelBlue(current_image,ScaleShortToQuantum(
                        GetPixelBlue(current_image,q)),q);
                      SetPixelAlpha(current_image,ScaleShortToQuantum(
                        GetPixelAlpha(current_image,q)),q);
                      q+=GetPixelChannels(current_image);
                    }

                    if (SyncAuthenticPixels(current_image,exception) == MagickFalse)
                      break;
                  }
                }
              if (logging != MagickFalse)
                (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                  "    Rescale pixels to Quantum");

              if (mng_info->magn_methx == 1 && mng_info->magn_methy == 1)
                {
                  if (logging != MagickFalse)
                    (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                      "    Rescale pixels to Quantum");

                  for (y=0; y < (ssize_t) current_image->rows; y++)
                  {
                    q=GetAuthenticPixels(current_image,0,y,current_image->columns,1,
                      exception);
                    if (q == (Quantum *) NULL)
                      break;

                    for (x=(ssize_t) current_image->columns-1; x >= 0; x--)
                    {
                      SetPixelRed(current_image,ScaleShortToQuantum(
                        GetPixelRed(current_image,q)),q);
                      SetPixelGreen(current_image,ScaleShortToQuantum(
                        GetPixelGreen(current_image,q)),q);
                      SetPixelBlue(current_image,ScaleShortToQuantum(
                        GetPixelBlue(current_image,q)),q);
                      SetPixelAlpha(current_image,ScaleShortToQuantum(
                        GetPixelAlpha(current_image,q)),q);
                      q+=GetPixelChannels(current_image);
                    }

                    if (SyncAuthenticPixels(current_image,exception) == MagickFalse)
                      break;
                  }
                }
              if (logging != MagickFalse)
                (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                  "    Rescale pixels to Quantum");

              if (mng_info->magn_methx == 1 && mng_info->magn_methy == 1)
                {
                  if (logging != MagickFalse)
                    (void) LogMagickEvent(CoderEvent,GetMagickModule(),
                      "    Rescale pixels to Quantum");

                  for (y=0; y < (ssize_t) current_image->rows; y++)
                  {
                    q=GetAuthenticPixels(current_image,0,y,current_image->columns,1,
                      exception);
                    if (q == (Quantum *) NULL)
                      break;

                    for (x=(ss