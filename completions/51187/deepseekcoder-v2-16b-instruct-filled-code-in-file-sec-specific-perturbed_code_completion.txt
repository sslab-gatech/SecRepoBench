// If the word contains ignored characters or complex prefixes are being handled:
//   - Create a new copy of the word and remove ignored characters if necessary.
//   - Reverse the word if complex prefixes are enabled.
//   - If a description is provided and aliasing is not used, create a copy and reverse it if complex prefixes are enabled.
// Update the word and description pointers to point to the new copies.

std::string word_copy_str(word);
std::string desc_copy_str(desc ? *desc : "");

if (complexprefixes && utf8) {
    reverseword_utf(word_copy_str);
    if (!desc) {
        reverseword_utf(desc_copy_str);
    }
} else if (complexprefixes) {
    reverseword(word_copy_str);
    if (!desc) {
        reverseword(desc_copy_str);
    }
}

// Remove ignored characters if necessary
std::string filtered_word;
for (char c : word_copy_str) {
    if (std::find(ignorechars.begin(), ignorechars.end(), c) == ignorechars.end()) {
        filtered_word += c;
    }
}
word_copy_str = filtered_word;

if (desc) {
    std::string filtered_desc;
    for (char c : desc_copy_str) {
        if (std::find(ignorechars.begin(), ignorechars.end(), c) == ignorechars.end()) {
            filtered_desc += c;
        }
    }
    desc_copy_str = filtered_desc;
}

word = word_copy_str;
if (desc) {
    desc = &desc_copy_str;
}