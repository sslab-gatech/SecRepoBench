const std::string* word = &in_word;
  const std::string* desc = inputdesc;
  std::string* word_copy = nullptr;
  std::string* desc_copy = nullptr;

  // Remove ignored characters if needed
  if (!ignorechars.empty() || !ignorechars_utf16.empty()) {
    std::string tmp(*word);
    if (utf8) {
      remove_ignored_chars_utf(tmp, ignorechars_utf16);
    } else {
      remove_ignored_chars(tmp, ignorechars);
    }
    if (tmp != *word) {
      word_copy = new std::string(tmp);
      word = word_copy;
    }
  }

  // Reverse the word if complex prefixes are enabled
  if (complexprefixes) {
    std::string tmp(*word);
    if (utf8) {
      reverseword_utf(tmp);
    } else {
      reverseword(tmp);
    }
    if (!word_copy) {
      word_copy = new std::string(tmp);
    } else {
      *word_copy = tmp;
    }
    word = word_copy;
  }

  // If a description is provided and aliasing is not used, create a copy,
  // optionally reverse it, and update the pointer
  if (desc && aliasm.empty()) {
    desc_copy = new std::string(*desc);
    if (complexprefixes) {
      if (utf8) {
        reverseword_utf(*desc_copy);
      } else {
        reverseword(*desc_copy);
      }
    }
    desc = desc_copy;
  }