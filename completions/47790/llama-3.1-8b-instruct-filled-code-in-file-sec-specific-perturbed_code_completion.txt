void collect_glyph_to_sid_map (hb_map_t *mapping, unsigned int num_glyphs) const
{
  for (unsigned int i = 0; i < ranges.length; i++)
  {
    hb_codepoint_t first = ranges[i].first;
    hb_codepoint_t nLeft = ranges[i].nLeft;
    for (hb_codepoint_t glyph = 1; glyph <= num_glyphs; glyph++)
    {
      if (glyph <= nLeft)
      {
	hb_codepoint_t sid = first + glyph - 1;
	mapping->set (glyph, sid);
      }
      else
      {
	break;
      }
    }
  }
}