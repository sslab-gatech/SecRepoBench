// Iterate over the ranges to map glyphs to SIDs.
    hb_codepoint_t glyph_id = 0;
    for (unsigned int i = 0; i < range_count; i++)
    {
      hb_codepoint_t start_sid = get_glyph(glyph_id, glyph_count);
      unsigned int num_sids = get_glyph(start_sid + 1, glyph_count) - start_sid;

      for (unsigned int j = 0; j < num_sids; j++)
      {
        mapping->set(glyph_id, start_sid + j);
        glyph_id++;
        if (glyph_id >= glyph_count)
          break;
      }

      if (glyph_id >= glyph_count)
        break;
    }