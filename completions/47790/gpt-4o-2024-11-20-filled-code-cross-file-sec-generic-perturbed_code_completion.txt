{
  unsigned int glyph_id = 0;

  for (const auto& range : ranges)
  {
    hb_codepoint_t sid_start = range.start_sid;
    unsigned int sid_count = range.count;

    for (unsigned int i = 0; i < sid_count; i++)
    {
      if (glyph_id >= glyph_count)
        return;

      hb_codepoint_t sid = sid_start + i;
      hb_map_set(mapping, glyph_id, sid);
      glyph_id++;
    }
  }
}