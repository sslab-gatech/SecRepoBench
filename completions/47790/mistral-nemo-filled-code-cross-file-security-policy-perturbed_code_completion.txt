for (unsigned int sid = 0; sid < glyph_count; ++sid) {
  hb_codepoint_t glyph = get_glyph(sid, glyph_count);
  if (glyph != 0 && glyph < glyph_count) {
    hb_map_t::add(mapping, glyph, glyph_to_sid(glyph));
  }
}