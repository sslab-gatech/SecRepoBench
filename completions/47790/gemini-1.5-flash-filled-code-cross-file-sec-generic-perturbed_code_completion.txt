unsigned int glyph = 0;
for (auto const& range : ranges) {
    unsigned int start_sid = range.first;
    unsigned int count = range.second;
    for (unsigned int i = 0; i < count; ++i) {
        if (glyph >= glyph_count) {
            break;
        }
        mapping->set_value(glyph, start_sid + i);
        glyph++;
    }
}