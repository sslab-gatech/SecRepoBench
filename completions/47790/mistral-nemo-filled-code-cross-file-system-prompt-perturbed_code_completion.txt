for (unsigned int i = 0; i < glyph_count; ++i) {
  unsigned int sid = get_starting_sid(i);
  unsigned int count = get_consecutive_sids(i);
  for (unsigned int j = 0; j < count; ++j, ++sid) {
    hb_map_set(mapping, i, sid);
  }
}