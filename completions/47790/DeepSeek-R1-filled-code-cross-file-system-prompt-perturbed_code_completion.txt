{
  unsigned int glyph = 0;
  for (auto &range : charset->get_ranges ())
  {
    hb_codepoint_t start_sid = range.first;
    unsigned int count = range.second;
    for (unsigned int i = 0; i < count; i++)
    {
      if (glyph >= glyph_count)
        break;
      mapping->set (glyph++, start_sid + i);
    }
    if (glyph >= glyph_count)
      break;
  }
}