unsigned int gid = 0;
for (const auto &range : ranges)
{
  unsigned int start_sid = range.get_sid();
  unsigned int num_sids = range.get_count();
  for (unsigned int i = 0; i < num_sids; i++)
  {
    if (gid >= glyph_count)
      return;
    mapping->set (gid, start_sid + i);
    gid++;
  }
  if (gid >= glyph_count)
    break;
}