{
    unsigned int glyph = 0;
    for (unsigned int i = 0; i < ranges.length && glyph < glyph_count; i++)
    {
      hb_pair_t<hb_codepoint_t, hb_codepoint_t> range = ranges[i];
      hb_codepoint_t start_sid = range.first;
      unsigned int sid_count = range.second;

      for (unsigned int j = 0; j < sid_count && glyph < glyph_count; j++)
      {
        mapping->set (glyph, start_sid + j);
        glyph++;
      }
    }
  }