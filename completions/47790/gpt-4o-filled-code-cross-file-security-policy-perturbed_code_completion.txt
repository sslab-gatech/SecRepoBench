{
  unsigned int glyph_id = 0;
  for (const auto& range : ranges)
  {
    hb_codepoint_t sid = range.start_sid;
    unsigned int count = range.count;

    if (glyph_id >= glyph_count)
      break;

    for (unsigned int i = 0; i < count && glyph_id < glyph_count; ++i, ++glyph_id)
    {
      hb_map_set(mapping, glyph_id, sid + i);
    }
  }
}