if (glyph_count == 0) return;

unsigned int glyph_id = 0;
for (const auto &range : glyph_to_sid_ranges_) {
  unsigned int sid = range.sid_first;
  unsigned int count = range.glyph_count;
  for (unsigned int i = 0; i < count && glyph_id < glyph_count; i++, glyph_id++, sid++) {
    hb_map_set (mapping, glyph_id, sid);
  }
  if (glyph_id >= glyph_count) break;
}