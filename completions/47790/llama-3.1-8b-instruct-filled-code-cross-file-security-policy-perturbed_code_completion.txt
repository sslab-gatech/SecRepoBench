for (unsigned int i = 0; i < glyph_count; ++i) {
  if (i >= glyph_count) break; // Prevent accessing memory beyond the allocated buffer
  unsigned int sid = mapping->ranges[i].start_sid;
  unsigned int count = mapping->ranges[i].count;
  for (unsigned int j = 0; j < count; ++j) {
    hb_map_t *entry = &mapping->entries[sid + j];
    entry->glyph = i;
  }
}