{
  unsigned int glyph = 0;
  for (unsigned int i = 0; i < sid_ranges.length && glyph < glyph_count; ++i)
  {
    unsigned int first = sid_ranges.ranges[i].first;
    unsigned int n = sid_ranges.ranges[i].last + 1;
    unsigned int sid = sid_ranges.ranges[i].sid;

    if (unlikely (first + n < first))
      break;

    for (unsigned int j = 0; j < n && glyph < glyph_count; ++j)
    {
      hb_map_set (mapping, glyph, sid + j);
      glyph++;
    }
  }
}