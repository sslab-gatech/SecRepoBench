{
  unsigned int glyph_id = 0;
  for (unsigned int i = 0; i < ranges.size() && glyph_id < glyph_count; i++)
  {
    hb_codepoint_t start_sid = ranges[i].start_sid;
    unsigned int num_sids = ranges[i].length;

    for (unsigned int j = 0; j < num_sids && glyph_id < glyph_count; j++, glyph_id++)
    {
      hb_map_set(mapping, glyph_id, start_sid + j);
    }
  }
}