ickBooleanType DrawImagePrimitive(Image *image,
  const DrawInfo *draw_info,const PrimitiveInfo *primitive_info,
  ExceptionInfo *exception)
{
  MagickBooleanType
    status;

  status=MagickFalse;
  switch (primitive_info->primitive)
  {
    case ArcPrimitive:
      status=DrawArc(image,draw_info,primitive_info,exception);
      break;
    case BezierPrimitive:
      status=DrawBezier(image,draw_info,primitive_info,exception);
      break;
    case CirclePrimitive:
      status=DrawCircle(image,draw_info,primitive_info,exception);
      break;
    case EllipsePrimitive:
      status=DrawEllipse(image,draw_info,primitive_info,exception);
      break;
    case LinePrimitive:
      status=DrawLine(image,draw_info,primitive_info,exception);
      break;
    case PathPrimitive:
      status=DrawPath(image,draw_info,primitive_info,exception);
      break;
    case PointPrimitive:
      status=DrawPoint(image,draw_info,primitive_info,exception);
      break;
    case PolygonPrimitive:
      status=DrawPolygon(image,draw_info,primitive_info,exception);
      break;
    case PolylinePrimitive:
      status=DrawPolyline(image,draw_info,primitive_info,exception);
      break;
    case RectanglePrimitive:
      status=DrawRectangle(image,draw_info,primitive_info,exception);
      break;
    case RoundRectanglePrimitive:
      status=DrawRoundRectangle(image,draw_info,primitive_info,exception);
      break;
    case TextPrimitive:
      status=DrawText(image,draw_info,primitive_info,exception);
      break;
    case ArcPrimitive:
    case BezierPrimitive:
    case CirclePrimitive:
    case EllipsePrimitive:
    case LinePrimitive:
    case PathPrimitive:
    case PointPrimitive:
    case PolygonPrimitive:
    case PolylinePrimitive:
    case RectanglePrimitive:
    case RoundRectanglePrimitive:
    case TextPrimitive:
      break;
    default:
      ThrowMagickException(exception,GetMagickModule(),DrawError,
        "UnrecognizedDrawingPrimitive","`%s'",primitive_info->primitive);
      break;
  }
  return(status);
}

MagickExport MagickBooleanType DrawImage(Image *image,const DrawInfo *draw_info,
  ExceptionInfo *exception)
{
  MagickBooleanType
    status;

  PrimitiveInfo
    *primitive_info;

  size_t
    number_primitive;

  status=MagickTrue;
  if (image->debug != MagickFalse)
    (void) LogMagickEvent(TraceEvent,GetMagickModule(),"%s",image->filename);
  assert(draw_info != (const DrawInfo *) NULL);
  assert(draw_info->signature == MagickCoreSignature);
  if (draw_info->primitive != (char *) NULL)
    {
      number_primitive=TracePath(NULL,draw_info->primitive,exception);
      if (number_primitive == 0)
        return(MagickFalse);
      primitive_info=(PrimitiveInfo *) AcquireQuantumMemory(number_primitive+1,
        sizeof(*primitive_info));
      if (primitive_info == (PrimitiveInfo *) NULL)
        return(MagickFalse);
      (void) ResetMagickMemory(primitive_info,0,number_primitive*
        sizeof(*primitive_info));
      number_primitive=TracePath(primitive_info,draw_info->primitive,exception);
      if (number_primitive == 0)
        return(MagickFalse);
      primitive_info[number_primitive].primitive=UndefinedPrimitive;
      status=DrawPrimitive(image,draw_info,primitive_info,exception);
      primitive_info=(PrimitiveInfo *) RelinquishMagickMemory(primitive_info);
    }
  else
    {
      if (draw_info->viewbox.width == 0.0)
        draw_info->viewbox.width=image->columns;
      if (draw_info->viewbox.height == 0.0)
        draw_info->viewbox.height=image->rows;
      number_primitive=TracePath(NULL,draw_info->text,exception);
      if (number_primitive == 0)
        return(MagickFalse);
      primitive_info=(PrimitiveInfo *) AcquireQuantumMemory(number_primitive+1,
        sizeof(*primitive_info));
      if (primitive_info == (PrimitiveInfo *) NULL)
        return(MagickFalse);
      (void) ResetMagickMemory(primitive_info,0,number_primitive*
        sizeof(*primitive_info));
      number_primitive=TracePath(primitive_info,draw_info->text,exception);
      if (number_primitive == 0)
        return(MagickFalse);
      primitive_info[number_primitive].primitive=UndefinedPrimitive;
      status=DrawPrimitive(image,draw_info,primitive_info,exception);
      primitive_info=(PrimitiveInfo *) RelinquishMagickMemory(primitive_info);
    }
  return(status);
}

/*
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
%                                                                             %
%                                                                             %
%   D r a w P a t h                                                           %
%                                                                             %
%                                                                             %
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%  DrawPath() draws a graphic path on your image.  The path may be represented
%  as a string or filename.  Precede the filename with an "at" sign (@) and the
%  contents of the file are drawn on the image.  You can affect how text is
%  drawn by setting one or more members of the draw info structure.
%
%  The format of the DrawPath method is:
%
%      MagickBooleanType DrawPath(Image *image,const DrawInfo *draw_info,
%        const PrimitiveInfo *primitive_info,ExceptionInfo *exception)
%
%  A description of each parameter follows:
%
%    o image: the image.
%
%    o draw_info: the draw info.
%
%    o primitive_info: Specifies a pointer to a PrimitiveInfo structure.
%
%    o exception: return any errors or warnings in this structure.
%
*/
MagickExport MagickBooleanType DrawPath(Image *image,const DrawInfo *draw_info,
  const PrimitiveInfo *primitive_info,ExceptionInfo *exception)
{
  MagickBooleanType
    status;

  PrimitiveInfo
    *path_info;

  size_t
    number_path;

  status=MagickTrue;
  if (image->debug != MagickFalse)
    (void) LogMagickEvent(TraceEvent,GetMagickModule(),"%s",image->filename);
  assert(draw_info != (const DrawInfo *) NULL);
  assert(draw_info->signature == MagickCoreSignature);
  if (draw_info->primitive != (char *) NULL)
    {
      number_path=TracePath(NULL,draw_info->primitive,exception);
      if (number_path == 0)
        return(MagickFalse);
      path_info=(PrimitiveInfo *) AcquireQuantumMemory(number_path+1,
        sizeof(*path_info));
      if (path_info == (PrimitiveInfo *) NULL)
        return(MagickFalse);
      (void) ResetMagickMemory(path_info,0,number_path*sizeof(*path_info));
      number_path=TracePath(path_info,draw_info->primitive,exception);
      if (number_path == 0)
        return(MagickFalse);
      path_info[number_path].primitive=UndefinedPrimitive;
      status=DrawPrimitive(image,draw_info,path_info,exception);
      path_info=(PrimitiveInfo *) RelinquishMagickMemory(path_info);
    }
  else
    {
      if (draw_info->viewbox.width == 0.0)
        draw_info->viewbox.width=image->columns;
      if (draw_info->viewbox.height == 0.0)
        draw_info->viewbox.height=image->rows;
      number_path=TracePath(NULL,draw_info->text,exception);
      if (number_path == 0)
        return(MagickFalse);
      path_info=(PrimitiveInfo *) AcquireQuantumMemory(number_path+1,
        sizeof(*path_info));
      if (path_info == (PrimitiveInfo *) NULL)
        return(MagickFalse);
      (void) ResetMagickMemory(path_info,0,number_path*sizeof(*path_info));
      number_path=TracePath(path_info,draw_info->text,exception);
      if (number_path == 0)
        return(MagickFalse);
      path_info[number_path].primitive=UndefinedPrimitive;
      status=DrawPrimitive(image,draw_info,path_info,exception);
      path_info=(PrimitiveInfo *) RelinquishMagickMemory(path_info);
    }
  return(status);
}

/*
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
%                                                                             %
%                                                                             %
%   D r a w P r i m i t i v e                                                 %
%                                                                             %
%                                                                             %
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%  DrawPrimitive() draws a graphic primitive on your image.  The primitive
%  may be represented as a string or filename.  Precede the filename with an
%  "at" sign (@) and the contents of the file are drawn on the image.  You
%  can affect how text is drawn by setting one or more members of the draw
%  info structure.
%
%  The format of the DrawPrimitive method is:
%
%      MagickBooleanType DrawPrimitive(Image *image,const DrawInfo *draw_info,
%        const PrimitiveInfo *primitive_info,ExceptionInfo *exception)
%
%  A description of each parameter follows:
%
%    o image: the image.
%
%    o draw_info: the draw info.
%
%    o primitive_info: Specifies a pointer to a PrimitiveInfo structure.
%
%    o exception: return any errors or warnings in this structure.
%
*/
MagickExport MagickBooleanType DrawPrimitive(Image *image,const DrawInfo *draw_info,
  const PrimitiveInfo *primitive_info,ExceptionInfo *exception)
{
  MagickBooleanType
    status;

  status=MagickFalse;
  switch (primitive_info->primitive)
  {
    case ArcPrimitive:
      status=DrawArc(image,draw_info,primitive_info,exception);
      break;
    case BezierPrimitive:
      status=DrawBezier(image,draw_info,primitive_info,exception);
      break;
    case CirclePrimitive:
      status=DrawCircle(image,draw_info,primitive_info,exception);
      break;
    case EllipsePrimitive:
      status=DrawEllipse(image,draw_info,primitive_info,exception);
      break;
    case LinePrimitive:
      status=DrawLine(image,draw_info,primitive_info,exception);
      break;
    case PathPrimitive:
      status=DrawPath(image,draw_info,primitive_info,exception);
      break;
    case PointPrimitive:
      status=DrawPoint(image,draw_info,primitive_info,exception);
      break;
    case PolygonPrimitive:
      status=DrawPolygon(image,draw_info,primitive_info,exception);
      break;
    case PolylinePrimitive:
      status=DrawPolyline(image,draw_info,primitive_info,exception);
      break;
    case RectanglePrimitive:
      status=DrawRectangle(image,draw_info,primitive_info,exception);
      break;
    case RoundRectanglePrimitive:
      status=DrawRoundRectangle(image,draw_info,primitive_info,exception);
      break;
    case TextPrimitive:
      status=DrawText(image,draw_info,primitive_info,exception);
      break;
    case ArcPrimitive:
    case BezierPrimitive:
    case CirclePrimitive:
    case EllipsePrimitive:
    case LinePrimitive:
    case PathPrimitive:
    case PointPrimitive:
    case PolygonPrimitive:
    case PolylinePrimitive:
    case RectanglePrimitive:
    case RoundRectanglePrimitive:
    case TextPrimitive:
      break;
    default:
      ThrowMagickException(exception,GetMagickModule(),DrawError,
        "UnrecognizedDrawingPrimitive","`%s'",primitive_info->primitive);
      break;
  }
  return(status);
}

/*
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
%                                                                             %
%                                                                             %
%   D r a w P o l y g o n                                                     %
%                                                                             %
%                                                                             %
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%  DrawPolygon() draws a graphic polygon on your