// Initialize the number of stops to zero and set the stops pointer to NULL.
stopcount = 0;
stops = (StopInfo *) NULL;

// Allocate memory for graphic context, which is an array of DrawInfo pointers.
graphic_context = (DrawInfo **) AcquireQuantumMemory((size_t) (n+1),
  sizeof(*graphic_context));
if (graphic_context == (DrawInfo **) NULL)
  {
    primitive = DestroyString(primitive);
    ThrowBinaryException(ResourceLimitError,"MemoryAllocationFailed",
      image->filename);
  }

// Set the initial number of points for primitives and allocate memory for primitive information storage.
number_points = 2047;
primitive_info = (PrimitiveInfo *) AcquireQuantumMemory(number_points,
  sizeof(*primitive_info));
if (primitive_info == (PrimitiveInfo *) NULL)
  {
    primitive = DestroyString(primitive);
    for ( ; n >= 0; n--)
      graphic_context[n] = DestroyDrawInfo(graphic_context[n]);
    graphic_context = (DrawInfo **) RelinquishMagickMemory(graphic_context);
    ThrowBinaryException(ResourceLimitError,"MemoryAllocationFailed",
      image->filename);
  }