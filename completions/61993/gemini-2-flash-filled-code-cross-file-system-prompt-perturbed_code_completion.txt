size_t new_len;
								char *new_buf = php_stream_get_line(csv_stream, NULL, 0, &new_len);
								if (!new_buf) {
									if (csv_stream) {
										/* stream ended prematurely */
										memcpy(tptr, hunk_begin, bptr - hunk_begin);
										tptr += (bptr - hunk_begin);
									} else {
										/* str_getcsv() with unterminated enclosure */
										if (bptr > buf) {
											bptr--;
										}
										memcpy(tptr, hunk_begin, bptr - hunk_begin);
										tptr += (bptr - hunk_begin);
									}
									goto quit_loop_2;
								}