if (!csv_stream) {
	/* No stream available, so we cannot get more data for the unterminated enclosure */
	if (tptr > temp && *(tptr - 1) == '\0') {
		/* Remove the potential stray null terminator */
		tptr--;
	}
	goto quit_loop_2;
} else {
	/* Attempt to read next line from the stream */
	char *new_buf;
	size_t new_len;

	new_buf = php_stream_get_line(csv_stream, NULL, 0, &new_len);
	if (!new_buf) {
		/* Failed to read a new line, handle as unterminated enclosure */
		if (tptr > temp && *(tptr - 1) == '\0') {
			tptr--;
		}
		goto quit_loop_2;
	}
}