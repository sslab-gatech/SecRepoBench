if (!csv_stream) {
	/* In non-stream context, we cannot fetch additional data.
	   Adjust position pointer if needed and exit the loop */
	if (tptr > temp && *(tptr - 1) == '\0') {
		tptr--;
	}
	goto quit_loop_2;
}

size_t new_len;
char *new_buf;

new_buf = php_stream_get_line(csv_stream, NULL, 0, &new_len);
if (new_buf == NULL) {
	/* Unterminated enclosure: adjust the pointer if needed and exit the loop */
	if (tptr > temp && *(tptr - 1) == '\0') {
		tptr--;
	}
	goto quit_loop_2;
}