// Get the length of the serialized content
  if (*content_marker != 0xd2u) {   // sanity check
    return BLOSC2_ERROR_DATA;
  }
  uint32_t content_len;
  from_big(&content_len, content_marker + 1, sizeof(content_len));
  
  // Check if content is within header bounds
  if (offset + 1 + sizeof(content_len) + content_len > header_len) {
    return BLOSC2_ERROR_DATA;
  }
  
  // Allocate and copy the content
  char* content = malloc((size_t)content_len + 1);  // +1 for null terminator
  memcpy(content, content_marker + 1 + sizeof(content_len), (size_t)content_len);
  content[content_len] = '\0';  // Null terminate
  
  // Store in metalayer
  current_metalayer->content = (uint8_t*)content;
  current_metalayer->content_len = content_len;