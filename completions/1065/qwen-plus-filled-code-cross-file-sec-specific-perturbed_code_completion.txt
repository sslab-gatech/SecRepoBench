if (regex == NULL || str == NULL) {
	return REG_BADPAT;
}

int result;
regmatch_t local_pmatch[PMATCH_MAX];
if (pmatch == NULL) {
	pmatch = local_pmatch;
	nmatch = PMATCH_MAX;
}

result = regexec(&regex->rx, str, nmatch, pmatch, eflags);

return result;