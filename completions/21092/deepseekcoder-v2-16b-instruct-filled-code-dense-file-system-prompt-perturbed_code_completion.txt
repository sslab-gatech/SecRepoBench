// <MASK>
    unsigned int denom = arrayZ[i].fromCoord - arrayZ[i-1].fromCoord;
    if (denom == 0) denom = 1; // Avoid division by zero
    return arrayZ[i-1].toCoord +
	   ((arrayZ[i].toCoord - arrayZ[i-1].toCoord) *
	    (inputvalue - arrayZ[i-1].fromCoord) + denom/2) / denom;
#undef toCoord
#undef fromCoord