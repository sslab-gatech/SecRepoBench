// Calculate the denominator for linear interpolation between two segments.
    int denom = arrayZ[i].fromCoord - arrayZ[i-1].fromCoord;
    if (denom == 0) {
      // Handle the case where the fromCoord values are equal to avoid division by zero.
      coords[i] = arrayZ[i-1].toCoord;
    } else {
      return arrayZ[i-1].toCoord +
             ((arrayZ[i].toCoord - arrayZ[i-1].toCoord) *
              (inputvalue - arrayZ[i-1].fromCoord) + denom/2) / denom;
    }