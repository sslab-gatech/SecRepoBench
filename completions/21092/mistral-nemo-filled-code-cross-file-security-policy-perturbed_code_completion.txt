unsigned int len = ARRAY_LENGTH(arrayZ);
    unsigned int denom = arrayZ[i].fromCoord - arrayZ[i-1].fromCoord;
    if (inputvalue <= arrayZ[0].fromCoord)
      return arrayZ[0].toCoord;
    for (unsigned int i = 1; i < len - 1; i++)
      if (inputvalue >= arrayZ[i].fromCoord)
        return arrayZ[i-1].toCoord +
               ((arrayZ[i].toCoord - arrayZ[i-1].toCoord) *
                (inputvalue - arrayZ[i-1].fromCoord) + denom/2) / denom;
    return arrayZ[len-2].toCoord +
           ((arrayZ[len-1].toCoord - arrayZ[len-2].toCoord) *
            (inputvalue - arrayZ[len-2].fromCoord) + denom/2) / denom;