for (unsigned int i = 1; i < len; i++)
{
  if (inputvalue <= arrayZ[i].fromCoord)
  {
    int denom = arrayZ[i].fromCoord - arrayZ[i-1].fromCoord;
    if (denom != 0)
    {
      return arrayZ[i-1].toCoord +
             ((arrayZ[i].toCoord - arrayZ[i-1].toCoord) *
              (inputvalue - arrayZ[i-1].fromCoord) + denom/2) / denom;
    }
    else
    {
      return arrayZ[i-1].toCoord;
    }
  }
}