unsigned int i;
    for (i = 0; i < len - 1; i++)
    {
        if (inputvalue < arrayZ[i].fromCoord)
            return arrayZ[i - 1].toCoord +
                   ((arrayZ[i].toCoord - arrayZ[i - 1].toCoord) *
                    (inputvalue - arrayZ[i - 1].fromCoord) + denom / 2) / denom;
    }
    
    if (i == len - 1 && inputvalue >= arrayZ[i].fromCoord)
    {
        return arrayZ[i].toCoord; // Handle case where inputvalue is beyond the last segment
    }
    
    // Calculate the denominator for linear interpolation
    unsigned int denom = arrayZ[i].fromCoord - arrayZ[i - 1].fromCoord;
    if (denom == 0) // Prevent division by zero
        return arrayZ[i - 1].toCoord; // Return previous toCoord if fromCoords are equal