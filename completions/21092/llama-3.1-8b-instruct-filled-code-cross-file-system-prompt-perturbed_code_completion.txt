// <MASK>
int i = 0;
while (i < len) {
  if (inputvalue <= fromCoord) {
    return inputvalue;
  } else if (inputvalue >= toCoord) {
    return inputvalue;
  } else if (i == 0 || fromCoord!= arrayZ[i - 1].fromCoord) {
    denom = toCoord - fromCoord;
  } else {
    denom = arrayZ[i - 1].toCoord - arrayZ[i - 1].fromCoord;
  }
  i++;
}
return arrayZ[i - 1].toCoord +
       ((arrayZ[i].toCoord - arrayZ[i - 1].toCoord) *
        (inputvalue - arrayZ[i - 1].fromCoord) + denom/2) / denom;