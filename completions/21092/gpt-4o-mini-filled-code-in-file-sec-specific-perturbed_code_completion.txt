unsigned int i = 0;
    for (; i < len && inputvalue >= arrayZ[i].fromCoord; i++);
    
    if (i == 0) return inputvalue; // Before the first segment
    if (i == len) return arrayZ[len - 1].toCoord; // Beyond the last segment

    // Handle case where two fromCoords are equal
    if (arrayZ[i - 1].fromCoord == arrayZ[i].fromCoord) {
      return arrayZ[i - 1].toCoord;
    }

    // Calculate the denominator for linear interpolation
    int denom = arrayZ[i].fromCoord - arrayZ[i - 1].fromCoord;