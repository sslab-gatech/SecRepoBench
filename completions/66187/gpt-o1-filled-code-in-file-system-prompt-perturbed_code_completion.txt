else if ( (linebuffer[i] & 0xf0) == 0xe0 ) {
	/* UTF8 3 bytes char */
	if ((i + 2 < len) &&
	    ((linebuffer[i + 1] & 0xc0) == 0x80) &&
	    ((linebuffer[i + 2] & 0xc0) == 0x80)) {
		if (j + 2 >= GF_ARRAY_LENGTH(szLineConv))
			break;
		szLineConv[j++] = linebuffer[i];
		szLineConv[j++] = linebuffer[i + 1];
		i += 2;
	} else {
		/* fallback partial */
		if (j >= GF_ARRAY_LENGTH(szLineConv))
			break;
		szLineConv[j++] = 0xc0 | ((linebuffer[i] >> 6) & 0x03);
		linebuffer[i] &= 0xbf;
	}
}
else if ( (linebuffer[i] & 0xf8) == 0xf0 ) {
	/* UTF8 4 bytes char */
	if ((i + 3 < len) &&
	    ((linebuffer[i + 1] & 0xc0) == 0x80) &&
	    ((linebuffer[i + 2] & 0xc0) == 0x80) &&
	    ((linebuffer[i + 3] & 0xc0) == 0x80)) {
		if (j + 3 >= GF_ARRAY_LENGTH(szLineConv))
			break;
		szLineConv[j++] = linebuffer[i];
		szLineConv[j++] = linebuffer[i + 1];
		szLineConv[j++] = linebuffer[i + 2];
		i += 3;
	} else {
		/* fallback partial */
		if (j >= GF_ARRAY_LENGTH(szLineConv))
			break;
		szLineConv[j++] = 0xf0 | ((linebuffer[i] >> 3) & 0x07);
		linebuffer[i] &= 0x87;
	}
}