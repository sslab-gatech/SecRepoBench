e->stack = p;
  for (size_t i = 0; i < len; i++) {
    p[i] = e->env[i];
  }
  e->env = p;
  MRB_ENV_SET_STACK(e, p);
  MRB_ENV_SET_LEN(e, len);
  MRB_ENV_SET_CLOSED(e);
  return TRUE;
}