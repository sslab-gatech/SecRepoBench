{
    memcpy(p, e->stack, sizeof(mrb_value) * len);
    e->stack = p;
    MRB_ENV_CLOSE(e);
    return TRUE;
  }
  else if (noraise) {
    return FALSE;
  }
  else {
    mrb_raise(mrb_state, E_RUNTIME_ERROR, "out of memory");
    return FALSE;
  }