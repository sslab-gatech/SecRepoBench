mrb_value *p = (mrb_value*)mrb_malloc_simple(mrb_state, sizeof(mrb_value)*len);
  if (p) {
    memcpy(p, e->stack, sizeof(mrb_value)*len);
    e->stack = p;
    MRB_ENV_CLOSE(e);
    return TRUE;
  }
  else {
    if (!noraise) {
      mrb_raise(mrb_state, E_RUNTIME_ERROR, "failed to allocate memory");
    }
    return FALSE;
  }