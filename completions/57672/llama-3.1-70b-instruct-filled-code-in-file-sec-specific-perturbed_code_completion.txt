if (p) {
    mrb_value *newstack = (mrb_value*)mrb_malloc_simple(mrb, sizeof(mrb_value)*len);
    if (live!= mrb_state->gc.live && mrb_object_dead_p(mrb_state, (struct RBasic*)e)) {
      // The e object is now subject to GC inside mrb_malloc_simple().
      // Moreover, if NULL is returned due to mrb_malloc_simple() failure, simply ignore it.
      mrb_free(mrb_state, newstack);
      return TRUE;
    }
    else if (newstack) {
      stack_copy(newstack, e->stack, len);
      e->stack = newstack;
      MRB_ENV_CLOSE(e);
      return TRUE;
    }
  }
  return FALSE;