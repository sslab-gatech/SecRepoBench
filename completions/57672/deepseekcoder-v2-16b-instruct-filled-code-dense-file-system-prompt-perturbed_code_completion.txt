// <MASK>
  mrb_value *new_stack = (mrb_value*)mrb_malloc_simple(mrb_state, sizeof(mrb_value)*len);
  if (new_stack) {
    memcpy(new_stack, e->stack, sizeof(mrb_value)*len);
    e->stack = new_stack;
    MRB_ENV_CLOSE(e);
    return TRUE;
  }
  // If allocation fails, free the allocated memory and return FALSE
  mrb_free(mrb_state, new_stack);
  return FALSE;
}