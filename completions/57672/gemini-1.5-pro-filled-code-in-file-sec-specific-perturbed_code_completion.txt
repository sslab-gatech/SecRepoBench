{
    stack_copy(p, e->stack, len);
    e->stack = p;
    MRB_ENV_CLOSE(e);
    return TRUE;
  }
  else if (noraise) return FALSE;
  else {
    mrb_exc_raise(mrb_state, mrb_obj_value(mrb_state->nomem_err));
  }
  return FALSE; /* not reached */
}