{
    memcpy(p, e->stack, sizeof(mrb_value)*len);
    e->stack = p;
    MRB_ENV_CLOSE(e);
    return TRUE;
  }
  if (!noraise) {
    mrb_state->c->ci--; // exceptions are handled at the method caller; see #3087
    mrb_exc_raise(mrb_state, mrb_obj_value(mrb_state->nomem_err));
  }
  return FALSE;
}