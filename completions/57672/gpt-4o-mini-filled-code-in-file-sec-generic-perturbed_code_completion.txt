{
    size_t len = (size_t)MRB_ENV_LEN(e);
    if (len > 0) {
      memcpy(p, e->stack, sizeof(mrb_value) * len);
      e->stack = p;
      mrb_write_barrier(mrb, (struct RBasic*)e);
    }
    MRB_ENV_CLOSE(e);
    return TRUE;
  }