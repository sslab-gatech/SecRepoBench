std::vector<int> output(effectiveaxiscount);
    for (unsigned int i = 0; i < effectiveaxiscount; i++)
    {
        output[i] = map->map(coords[i]);
        map = &StructAfter<SegmentMaps>(*map);
    }

    // Assuming a version check is needed
    if (version >= 2)
    {
        // Process variation data if applicable
        for (unsigned int i = 0; i < effectiveaxiscount; i++)
        {
            // Example of applying variation data
            int variation_index = get_variation_index(i); // Placeholder for actual variation index retrieval
            int delta = get_variation_delta(variation_index); // Placeholder for actual delta retrieval
            output[i] = clamp(output[i] + delta, min_value, max_value); // Ensure clamping to a valid range
        }
    }

    // Update original coordinates with transformed values
    for (unsigned int i = 0; i < effectiveaxiscount; i++)
    {
        coords[i] = output[i];
    }