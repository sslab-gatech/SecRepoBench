for (unsigned int i = 0; i < effectiveaxiscount; i++)
    {
        coords[i] = map->map(coords[i]);
        map = &StructAfter<SegmentMaps>(*map);
        
        if (version >= 2)
        {
            // Assuming variation data is available and processed here
            float variation_delta = get_variation_delta(coords[i], i);
            coords[i] = clamp(coords[i] + round(variation_delta), min_value, max_value);
        }
    }

    // Deallocate variation store cache if necessary
    deallocate_variation_store_cache();

    // Update original coordinates with transformed values
    for (unsigned int i = 0; i < effectiveaxiscount; i++)
    {
        coords[i] = transformed_coords[i]; // Assuming transformed_coords is defined and filled
    }