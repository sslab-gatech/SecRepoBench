std::vector<int> output(effectiveaxiscount);
    for (unsigned int i = 0; i < effectiveaxiscount; i++)
    {
        output[i] = map->map(coords[i]);
        map = &StructAfter<SegmentMaps>(*map);
    }

#ifndef HB_NO_VARIATIONS2
    if (version.major >= 2)
    {
        const avarV2Tail *v2 = (const avarV2Tail *)map;
        for (unsigned int i = 0; i < effectiveaxiscount; i++)
        {
            int delta = v2->varIdxMap.get_delta(i);
            output[i] += delta; // Adjust the coordinate by the delta
        }
    }
#endif

    // Update the original coordinates with the transformed values
    for (unsigned int i = 0; i < effectiveaxiscount; i++)
    {
        coords[i] = std::clamp(output[i], /* min_value */, /* max_value */); // Clamp to a specified range
    }