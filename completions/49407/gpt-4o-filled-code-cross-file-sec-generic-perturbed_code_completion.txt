std::vector<int> transformed_coords(effectiveaxiscount);

    for (unsigned int i = 0; i < effectiveaxiscount; ++i)
    {
      // Apply the mapping transformation using the current SegmentMaps object
      transformed_coords[i] = map->apply(coords[i]);
      map = map->next();
    }

    if (version >= 2)
    {
      VariationStoreCache cache;
      for (unsigned int i = 0; i < effectiveaxiscount; ++i)
      {
        int delta = variationStore.computeDelta(variationIndexMap[i], cache);
        transformed_coords[i] = clamp(transformed_coords[i] + round(delta), minValue, maxValue);
      }
    }

    // Update the original coordinates array with the transformed values
    for (unsigned int i = 0; i < effectiveaxiscount; ++i)
    {
      coords[i] = transformed_coords[i];
    }