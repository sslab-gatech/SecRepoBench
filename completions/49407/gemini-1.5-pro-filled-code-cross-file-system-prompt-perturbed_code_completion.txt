for (unsigned int i = 0; i < effectiveaxiscount; i++)
    {
      coords[i] = map->map_coord (coords[i]);
      map++;
    }

    if (version >= 2)
    {
      unsigned int count = varStore->getAxisCount ();
      if (count > 0)
      {
        hb_vector_t<int> output (effectiveaxiscount);
        const VariationData *variation_data = font->get_variation_data ();

        for (unsigned int i = 0; i < effectiveaxiscount; i++)
        {
          int *delta = varStoreCache;
          if (!delta)
          {
            delta = varStore->get_delta (coords, variation_data->index_map, count);
            varStoreCache = delta;
          }
          output[i] = coords[i] + roundf (delta[variation_data->index_map[i]]);
          output[i] = hb_clamp (output[i], 0, 16384);
        }

        hb_free (varStoreCache);
        varStoreCache = nullptr;

        for (unsigned int i = 0; i < effectiveaxiscount; i++)
        {
          coords[i] = output[i];
        }
      }
    }