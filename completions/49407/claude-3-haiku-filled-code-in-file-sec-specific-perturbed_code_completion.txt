// <MASK>
VariationStore varStore;
DeltaSetIndexMap varIdxMap;

// Allocate an output vector for the transformed coordinates
int* output_coords = new int[coords_length];

// Apply variation data transformation
for (unsigned int i = 0; i < effectiveaxiscount; i++) {
    int delta = varIdxMap.get_delta(coords[i]);
    int transformed_coord = hb_clamp(coords[i] + delta, -16384, 16383);
    output_coords[i] = transformed_coord;
    map = &StructAfter<SegmentMaps>(*map);
}

// Update the original coordinates array
for (unsigned int i = 0; i < effectiveaxiscount; i++) {
    coords[i] = output_coords[i];
}

// Deallocate the variation store cache
delete[] output_coords;