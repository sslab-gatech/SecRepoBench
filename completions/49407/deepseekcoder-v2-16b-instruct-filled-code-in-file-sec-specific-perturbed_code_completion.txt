unsigned int count = hb_min(coords_length, axisCount);
    const avarV2Tail *v2tail = (const avarV2Tail *)&StructAfter<SegmentMaps> (*map);
    const VariationStore *varStore = (const VariationStore *)(const char *)v2tail->varStore + (v2tail->varStore.get_offset() - (char *)v2tail);
    const DeltaSetIndexMap *varIdxMap = (const DeltaSetIndexMap *)(const char *)v2tail->varIdxMap + (v2tail->varIdxMap.get_offset() - (char *)v2tail);

    for (unsigned int i = 0; i < count; i++) {
        int mapped_value = map_value(coords[i], map, 0, 1);
        int delta = varIdxMap->get_delta(mapped_value, varStore);
        coords[i] = clamp(mapped_value + delta, varStore->get_min(), varStore->get_max());
    }