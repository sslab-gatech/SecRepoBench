// Iterate through the coordinates up to the smaller of coords_length and axisCount.
// For each coordinate, apply a mapping transformation using the current SegmentMaps
// object and then advance to the next SegmentMaps object.
//
// If the version is 2 or higher, further process the coordinates using variation data.
// Allocate an output vector for the transformed coordinates. For each coordinate,
// apply an additional transformation involving a variation index map and a variation
// store to compute a delta value. Adjust each coordinate by the rounded delta,
// clamp the result to a specified range, and store it in the output vector.
//
// After processing, deallocate the variation store cache and update the original
// coordinates array with the transformed values from the output vector.
for (unsigned int i = 0; i < effectiveaxiscount; i++)
{
  coords[i] = map->map (coords[i]);
  map = &StructAfter<SegmentMaps> (*map);
}

if (version >= 2)
{
  std::vector<int> output_coords (effectiveaxiscount);
  hb_ot_var_get_axis_infos (face, 0, &effectiveaxiscount, nullptr);
  hb_ot_var_get_normalized_coords (face, effectiveaxiscount, coords, output_coords.data());

  for (unsigned int i = 0; i < effectiveaxiscount; i++)
  {
    coords[i] = hb_clamp (output_coords[i], -16384, 16384);
  }

  hb_ot_var_store_clear_variations (face);
}