for (unsigned int i = 0; i < effectiveaxiscount; i++) {
      int coord = coords[i];
      if (version >= 2) {
        // Variation data processing for version 2 and higher
        unsigned int variationIndex = map->getVariationIndex(coord);
        int delta = variationStore.getDelta(variationIndex);
        coord += (int)round(delta);
        coord = hb_clamp(coord, map->getMin(), map->getMax());
      } else {
        // Mapping transformation for version 1
        coord = map->getMappedCoord(coord);
      }
      coords[i] = coord;
      map++;
    }
    if (version >= 2) {
      variationStore.clearCache();
    }