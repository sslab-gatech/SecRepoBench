std::vector<int> output(effectiveaxiscount);
    for (unsigned int i = 0; i < effectiveaxiscount; i++)
    {
        coords[i] = map->map(coords[i]);
        if (version >= 2)
        {
            // Assuming variation_index_map and variation_store are defined and accessible
            int variation_index = variation_index_map[i];
            int delta = variation_store[variation_index];
            output[i] = std::clamp(coords[i] + delta, min_value, max_value); // Ensure clamping to a valid range
        }
        else
        {
            output[i] = coords[i];
        }
        map = &StructAfter<SegmentMaps>(*map);
    }

    // Update original coordinates with transformed values
    std::copy(output.begin(), output.end(), coords);
    
    // Deallocate variation store cache if necessary
    // variation_store.clear(); // Uncomment if dynamic memory is used