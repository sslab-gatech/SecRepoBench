for (unsigned int i = 0; i < effectiveaxiscount; i++)
    {
      coords[i] = map->map (coords[i]);
      map = &StructAfter<SegmentMaps> (*map);
    }

#ifndef HB_NO_VARIATIONS2
    if (version.major < 2)
      return;

    const auto &v2 = * (const avarV2Tail *) map;
    std::vector<int> output(coords_length);
    for (unsigned int i = 0; i < coords_length; i++)
    {
      int varIdx = v2.varIdxMap.map (coords[i]);
      int delta = v2.varStore.get (varIdx);
      int value = roundf (coords[i] + delta);
      value = hb_clamp (value, -100000, 100000);
      output[i] = value;
    }
    v2.varStore.cache_deallocate ();
    std::copy (output.begin (), output.end (), coords);
#endif