for (unsigned int i = 0; i < effectiveaxiscount; i++)
    {
      coords[i] = map->map (coords[i]);
      map = &StructAfter<SegmentMaps> (*map);
    }

#ifndef HB_NO_VARIATIONS2
    if (version.major < 2)
      return;

    hb_vector_t<int> out (coords_length);
    hb_var_store_cache_t var_store_cache;
    for (unsigned int i = 0; i < coords_length; i++)
    {
      int delta = 0;
      unsigned int outerIndex = i;
      unsigned int innerIndex = 0;
      if (unlikely (!varIdxMap.get_var_index (outerIndex, &innerIndex)))
        continue;
      varStore.get_delta (outerIndex, innerIndex, &var_store_cache, &delta);
      out[i] = coords[i] + roundf (delta);
      out[i] = hb_clamp (out[i], -0x4000, 0x4000);
    }
    var_store_cache.fini ();

    memcpy (coords, out, coords_length * sizeof (coords[0]));
#endif