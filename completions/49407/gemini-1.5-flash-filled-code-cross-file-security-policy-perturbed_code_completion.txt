for (unsigned int i = 0; i < effectiveaxiscount; i++) {
      coords[i] = map->map (coords[i]);
      map = &StructAfter<SegmentMaps> (*map);
    }

    if (version >= 2) {
      // Allocate variation store cache.
      std::vector<int> variation_store_cache(axisCount);
      // Iterate through coordinates and apply variation transformation.
      for (unsigned int i = 0; i < effectiveaxiscount; i++) {
        int variation_index = variationIndexMap[i];
        int delta = variationStore[variation_index];
        coords[i] += delta;
        coords[i] = hb_clamp (coords[i], minCoord[i], maxCoord[i]);
      }
      // Deallocate variation store cache.

    }
  }