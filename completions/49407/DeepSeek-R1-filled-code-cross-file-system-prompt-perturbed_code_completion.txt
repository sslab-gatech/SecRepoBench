for (unsigned i = 0; i < effectiveaxiscount; i++)
    {
        coords[i] = map->map(coords[i]);
        map = &StructAfter<SegmentMaps>(*map);
    }

    if (version >= 2)
    {
        hb_vector_t<int> out;
        if (unlikely (!out.resize (coords_length))) return;

        for (unsigned i = 0; i < coords_length; i++)
        {
            int v = coords[i];
            uint32_t varIdx = varIdxMap.map (i);
            float delta = varStore.get_delta (varIdx, coords, coords_length);
            v += static_cast<int>(roundf (delta));
            v = hb_clamp (v, 0x0000, 0xFFFF);
            out[i] = v;
        }

        varStore.destroy_cache ();

        memcpy (coords, out.arrayZ, coords_length * sizeof (int));
    }