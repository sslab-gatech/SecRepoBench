std::vector<int> output(effectiveaxiscount);
    for (unsigned int i = 0; i < effectiveaxiscount; ++i) {
        // Apply mapping transformation
        coords[i] = map->transform(coords[i]);

        // Advance to the next SegmentMaps object
        map = map->next();

        // If version is 2 or higher, process with variation data
        if (version >= 2) {
            int variationIndex = getVariationIndex(coords[i]);
            int delta = variationStore[variationIndex];
            coords[i] += delta;
            coords[i] = std::clamp(coords[i], minRange, maxRange);
        }

        // Store the transformed value in the output vector
        output[i] = coords[i];
    }

    // Update original coordinates with transformed values
    std::copy(output.begin(), output.end(), coords);
    
    // Deallocate variation store cache if necessary
    clearVariationStore();