// Allocate an output vector for the transformed coordinates.
    std::vector<int> output(coords_length);
    for (unsigned int i = 0; i < effectiveaxiscount; i++)
    {
      int mapped = map->map(coords[i]);
      if (version >= 2)
      {
        unsigned int variationIndex = map->getVariationIndex(i);
        float variationValue = variationStore.getVariationValue(variationIndex);
        int delta = round(variationValue * 1000.0f);
        mapped += delta;
        mapped = hb_clamp(mapped, minValue, maxValue);
      }
      output[i] = mapped;
      map = &StructAfter<SegmentMaps> (*map);
    }

    // Update the original coordinates array with the transformed values from the output vector.
    std::memcpy(coords, output.data(), coords_length * sizeof(int));