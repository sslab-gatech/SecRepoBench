if (timeparser->time_fmt_year) {
    struct tm current_tm;
    gmtime_r(&now, &current_tm);
    snprintf(tmp, sizeof(tmp), "%04d %s", current_tm.tm_year + 1900, time_str);
    time_len = strlen(tmp);
    p = flb_strptime(tmp, timeparser->time_fmt_year, tm);
}
else {
    memcpy(tmp, time_str, tsize);
    tmp[tsize] = '\0';
    p = flb_strptime(tmp, timeparser->time_fmt, tm);
}