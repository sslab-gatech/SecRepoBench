if (timeparser->time_fmt_year == NULL) {
        time(&time_now);
        gmtime_r(&time_now, &tmy);

        snprintf(tmp, sizeof(tmp), "%d %.*s",
                 tmy.tm_year + 1900, (int) tsize, time_str);

        tmp[sizeof(tmp) - 1] = '\0';
        fmt = timeparser->time_fmt;
        p = flb_strptime(tmp, fmt, tm);
    }
    else {
        if (tsize > sizeof(tmp) - 1) {
            return -1;
        }
        memcpy(tmp, time_str, tsize);
        tmp[tsize] = '\0';
        fmt = timeparser->time_fmt_year;
        p = flb_strptime(tmp, fmt, tm);
    }