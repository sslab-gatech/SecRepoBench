if (!timeparser->time_with_year) {
        time_now = now;
        gmtime_r(&time_now, &tmy);
        snprintf(tmp, sizeof(tmp), "%d %.*s", tmy.tm_year + 1900, time_len, time_str);
        time_ptr = tmp;
        time_len += snprintf(tmp + time_len, sizeof(tmp) - time_len, " %s", time_str);
    } else {
        memcpy(tmp, time_str, time_len);
        tmp[time_len] = '\0';
        time_ptr = tmp;
    }

    p = flb_strptime(time_ptr, timeparser->time_fmt, tm);