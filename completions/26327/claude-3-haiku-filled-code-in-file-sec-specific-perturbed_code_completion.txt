if (!timeparser->time_with_year) {
    time_now = now;
    gmtime_r(&time_now, &tmy);
    snprintf(tmp, sizeof(tmp), "%04d %.*s", tmy.tm_year + 1900, (int)tsize, time_str);
    p = flb_strptime(tmp, timeparser->time_fmt_year, tm);
} else {
    strncpy(tmp, time_str, tsize);
    tmp[tsize] = '\0';
    p = flb_strptime(tmp, timeparser->time_fmt, tm);
}