if (strstr(time_str, " ") == NULL) {
        // Year is missing, use current date
        time_now = time(NULL);
        gmtime_r(&time_now, &tmy);
        snprintf(tmp, sizeof(tmp), "%04d-%02d-%02d %s", 
                 tmy.tm_year + 1900, tmy.tm_mon + 1, tmy.tm_mday, time_str);
        fmt = timeparser->time_fmt_year;
    } else {
        // Year is present, copy the time string to tmp
        strncpy(tmp, time_str, sizeof(tmp) - 1);
        tmp[sizeof(tmp) - 1] = '\0'; // Ensure null-termination
        fmt = timeparser->time_fmt;
    }

    p = flb_strptime(tmp, fmt, tm);