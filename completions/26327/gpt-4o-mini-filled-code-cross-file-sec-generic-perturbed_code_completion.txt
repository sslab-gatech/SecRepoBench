if (strstr(time_str, " ") == NULL) {
        // Year is missing, use current date
        time_now = time(NULL);
        gmtime_r(&time_now, &tmy);
        snprintf(tmp, sizeof(tmp), "%d %s", tmy.tm_year + 1900, time_str);
        time_ptr = tmp;
    } else {
        // Ensure the time string is null-terminated
        strncpy(tmp, time_str, time_len);
        tmp[time_len] = '\0';
        time_ptr = tmp;
    }

    // Parse the time string
    p = flb_strptime(time_ptr, timeparser->time_fmt, tm);