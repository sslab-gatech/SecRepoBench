if (timeparser->time_with_year == FLB_FALSE) {
        time_now = now;
        gmtime_r(&time_now, &tmy);
        fmt = timeparser->time_fmt_year;
        snprintf(tmp, sizeof(tmp) - 1, fmt,
                 tmy.tm_year + 1900, tmy.tm_mon + 1, tmy.tm_mday,
                 time_ptr);
        time_len = strlen(tmp);
        time_ptr = tmp;

        p = flb_strptime(time_ptr, timeparser->time_fmt_full, tm);
    }
    else {
        memcpy(tmp, time_str, tsize);
        tmp[tsize] = '\0';
        time_ptr = tmp;

        p = flb_strptime(time_ptr, timeparser->time_fmt_full, tm);
    }