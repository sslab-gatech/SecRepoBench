if (timeparser->time_with_year == FLB_FALSE) {
    time_now = now;
    gmtime_r(&time_now, &tmy);

    fmt = timeparser->time_fmt_year;
    time_len = snprintf(tmp, sizeof(tmp) - 1,
                        "%d %.*s",
                        1900 + tmy.tm_year, (int) tsize, time_str);
    time_ptr = tmp;
    p = flb_strptime(time_ptr, fmt, tm);
}
else if (timeparser->time_with_year == FLB_TRUE) {
    /* User provided year */
    fmt = timeparser->time_fmt;

    memcpy(tmp, time_str, tsize);
    tmp[tsize] = '\0';
    time_ptr = tmp;
    p = flb_strptime(time_ptr, fmt, tm);
}