if (timeparser->time_fmt_year) {
        fmt = timeparser->time_fmt_year;
        time_now = now;
        gmtime_r(&time_now, &tmy);
        snprintf(tmp, sizeof(tmp), "%d-%02d-%02d %.*s",
                 tmy.tm_year + 1900, tmy.tm_mon + 1, tmy.tm_mday,
                 (int)tsize, time_str);
        p = flb_strptime(tmp, fmt, tm);
    } else {
        strncpy(tmp, time_str, tsize);
        tmp[tsize] = '\0';
        fmt = timeparser->time_fmt;
        p = flb_strptime(tmp, fmt, tm);
    }