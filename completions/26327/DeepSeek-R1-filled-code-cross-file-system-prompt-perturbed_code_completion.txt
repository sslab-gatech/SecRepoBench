if (timeparser->time_fmt_year) {
        gmtime_r(&now, &tmy);
        snprintf(tmp, sizeof(tmp), "%04d %.*s", tmy.tm_year + 1900, (int)tsize, time_str);
        fmt = timeparser->time_fmt_year;
        time_ptr = tmp;
        time_len = strlen(tmp);
    }
    else {
        memcpy(tmp, time_str, tsize);
        tmp[tsize] = '\0';
        fmt = timeparser->time_fmt;
        time_ptr = tmp;
        time_len = tsize;
    }

    p = flb_strptime(time_ptr, fmt, tm);