new_l_data = block_len - 32; // Calculate new length for data allocation, excluding core data
if (new_l_data > INT_MAX || new_l_data < 0) {
    hts_log_error("Invalid block length or overflow detected in data size calculation");
    return -4;
}
if (b->m_data < new_l_data) { // Check if reallocation is necessary
    uint8_t *new_data = realloc(b->data, new_l_data);
    if (!new_data) {
        hts_log_error("Memory allocation failure for BAM data buffer");
        return -4;
    }
    b->data = new_data;
    b->m_data = new_l_data;
}
b->l_data = new_l_data;

// Read the query name part of the BAM record into the buffer
if (bgzf_read(filepointer, b->data, c->l_qname - c->l_extranul) != c->l_qname - c->l_extranul) {
    hts_log_error("Failed to read query name from BAM record");
    return -4;
}

// Pad the query name with extra nulls if necessary
memset(b->data + c->l_qname - c->l_extranul, 0, c->l_extranul);