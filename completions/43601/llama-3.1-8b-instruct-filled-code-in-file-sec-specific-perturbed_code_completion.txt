// Search for given tag in ICC profile directory
n = _cmsSearchTag(Icc, sig, TRUE);
if (n < 0) return NULL;                // Not found, return NULL

// It is already read?
if (Icc -> TagPtrs[n] == NULL) {

    // Not yet, get original position
    Offset   = Icc ->TagOffsets[n];
    TagSize  = Icc ->TagSizes[n];

    // read the data directly, don't keep copy
    if (data!= NULL) {

        if (BufferSize < TagSize)
            TagSize = BufferSize;

        if (!Icc ->IOhandler ->Seek(Icc ->IOhandler, Offset)) return NULL;
        if (!Icc ->IOhandler ->Read(Icc ->IOhandler, data, 1, TagSize)) return NULL;

        _cmsUnlockMutex(Icc->ContextID, Icc ->UsrMutex);
        return data;
    }

    _cmsUnlockMutex(Icc->ContextID, Icc ->UsrMutex);
    return Icc ->TagSizes[n];
}