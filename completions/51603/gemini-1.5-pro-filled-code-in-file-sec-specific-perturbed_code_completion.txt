struct magic *m = &myself->mp[myself->cont_count == 0 ? 0 : myself->cont_count - 1];

	if (m->type == FILE_NAME) {
		file_magwarn(ms,
		    "Strength setting is not supported for NAME");
		return -1;
	}
	/* so we can write + or - after it */
	if (m->factor_op != FILE_FACTOR_OP_NONE) {
		file_magwarn(ms, "Current entry already has a strength type "
		    "`%c%u', new type `%s'", m->factor_op, m->factor, l);
		return -1;
	}
	switch (*l) {
	case FILE_FACTOR_OP_NONE:
		break;
	case FILE_FACTOR_OP_PLUS:
	case FILE_FACTOR_OP_MINUS:
	case FILE_FACTOR_OP_TIMES:
	case FILE_FACTOR_OP_DIV:
		m->factor_op = *l++;
		break;
	default:
		file_magwarn(ms, "Unknown factor op `%c'", *l);
		return -1;
	}