struct magic *m = &me->mp[me->cont_count == 0 ? 0 : me->cont_count - 1];
if (m->factor_op != FILE_FACTOR_OP_NONE) {
    file_magwarn(ms, "Strength already defined for this entry");
    return -1;
}
if (m->type == FILE_NAME) {
    file_magwarn(ms, "Strength setting is not supported for NAME entries");
    return -1;
}
switch (*l) {
    case '*':
        m->factor_op = FILE_FACTOR_OP_TIMES;
        l++;
        break;
    case '/':
        m->factor_op = FILE_FACTOR_OP_DIV;
        l++;
        break;
    case '+':
        m->factor_op = FILE_FACTOR_OP_PLUS;
        l++;
        break;
    case '-':
        m->factor_op = FILE_FACTOR_OP_MINUS;
        l++;
        break;
    default:
        m->factor_op = FILE_FACTOR_OP_PLUS;
        break;
}