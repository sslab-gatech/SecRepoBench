struct magic *m = &myself->mp[0].m;

if (m->factor_op != FILE_FACTOR_OP_NONE) {
    file_magwarn(ms, "Current entry already has a strength type");
    return -1;
}

if (m->type == FILE_NAME) {
    file_magwarn(ms, "Strength setting is not supported for NAME entries");
    return -1;
}

if (!l || *l == '\0') {
    file_magwarn(ms, "Empty factor operation");
    goto out;
}

switch (*l) {
    case '+':
    case '-':
    case '*':
    case '/':
        m->factor_op = *l++;
        break;
    default:
        file_magwarn(ms, "Unknown factor op `%c'", *l);
        goto out;
}