// <MASK>
if (m->factor_op == FILE_FACTOR_OP_MUL) {
    if (factor == 0) {
        file_magwarn(ms, "Cannot have factor op `%c' and factor %u",
            m->factor_op, m->factor);
        goto out;
    }
    m->factor = CAST(uint8_t, factor);
} else if (m->factor_op == FILE_FACTOR_OP_DIV) {
    if (factor == 0) {
        file_magwarn(ms, "Cannot have factor op `%c' and factor %u",
            m->factor_op, m->factor);
        goto out;
    }
    m->factor = CAST(uint8_t, factor);
} else {
    file_magwarn(ms, "Unknown factor op `%c'", m->factor_op);
    goto out;
}