struct magic *m = myself;

	if (m->factor_op != FILE_FACTOR_OP_NONE) {
		file_magwarn(ms, "Strength type already defined");
		return -1;
	}
	if (m->type == FILE_NAME) {
		file_magwarn(ms, "Strength setting is not supported for FILE/NAME");
		return -1;
	}


	switch (*l) {
	case '>':
		m->factor_op = FILE_FACTOR_OP_GT;
		break;
	case '<':
		m->factor_op = FILE_FACTOR_OP_LT;
		break;
	case '=':
		m->factor_op = FILE_FACTOR_OP_EQ;
		break;
	case '&':
		m->factor_op = FILE_FACTOR_OP_AND;
		break;
	case '^':
		m->factor_op = FILE_FACTOR_OP_XOR;
		break;
	case '+':
		m->factor_op = FILE_FACTOR_OP_ADD;
		break;
	case '-':
		m->factor_op = FILE_FACTOR_OP_MINUS;
		break;
	case '*':
		m->factor_op = FILE_FACTOR_OP_MULTIPLY;
		break;
	case '/':
		m->factor_op = FILE_FACTOR_OP_DIV;
		break;
	case '%':
		m->factor_op = FILE_FACTOR_OP_MOD;
		break;
	default:
		file_magwarn(ms, "Unknown factor op `%c'", *l);
		goto out;
	}
	l++;