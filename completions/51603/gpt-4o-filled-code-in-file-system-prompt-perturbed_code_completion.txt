if (me->mp == NULL) {
		file_magwarn(ms, "No current entry for strength type");
		return -1;
	}
	if (me->mp->type == FILE_NAME) {
		file_magwarn(ms, "Strength setting not supported for "
		    "NAME types");
		return -1;
	}

	EATAB;
	switch (*l) {
	case FILE_FACTOR_OP_PLUS:
	case FILE_FACTOR_OP_MINUS:
	case FILE_FACTOR_OP_TIMES:
	case FILE_FACTOR_OP_DIV:
		me->mp->factor_op = *l++;
		break;
	default:
		file_magwarn(ms, "Unknown factor op `%c'", *l);
		return -1;
	}
	EATAB;
	factor = strtoul(l, &el, 0);
	if (factor > 255) {
		file_magwarn(ms, "Too large factor `%lu'", factor);
		goto out;
	}
	if (*el && !isspace(CAST(unsigned char, *el))) {
		file_magwarn(ms, "Bad factor `%s'", l);
		goto out;
	}
	me->mp->factor = CAST(uint8_t, factor);
	if (me->mp->factor == 0 && me->mp->factor_op == FILE_FACTOR_OP_DIV) {
		file_magwarn(ms, "Cannot have factor op `%c' and factor %u",
		    me->mp->factor_op, me->mp->factor);
		goto out;
	}
	return 0;
out:
	me->mp->factor_op = FILE_FACTOR_OP_NONE;
	me->mp->factor = 0;
	return -1;