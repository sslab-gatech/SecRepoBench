if (m->factor_op != FILE_FACTOR_OP_NONE) {
		file_magwarn(ms, "Duplicate factor operation");
		goto out;
	}

	switch (*l++) {
	case '/':
		m->factor_op = FILE_FACTOR_OP_DIV;
		break;
	case '*':
		m->factor_op = FILE_FACTOR_OP_MUL;
		break;
	case '+':
		m->factor_op = FILE_FACTOR_OP_ADD;
		break;
	case '-':
		m->factor_op = FILE_FACTOR_OP_SUB;
		break;
	default:
		file_magwarn(ms, "Unknown factor operation `%c'", l[-1]);
		goto out;
	}