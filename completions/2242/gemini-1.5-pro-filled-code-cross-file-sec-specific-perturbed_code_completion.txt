const char *buf, *end, *last, *c;
			size_t lines, bytecnt;
			int linecnt = m->lineno;

			if (s == NULL) {
				ms->search.s_len = 0;
				return 0;
			}

			if (linecnt == 0) {
				bytecnt = m->str_range;
			} else if (linecnt < 0) {
				linecnt = -linecnt;
				bytecnt = linecnt * 80;
			} else {
				bytecnt = linecnt * 80;
			}