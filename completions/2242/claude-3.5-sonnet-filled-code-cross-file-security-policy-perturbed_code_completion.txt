const char *buf, *end, *last, *c;
size_t bytecnt, linecnt;

if (source == NULL) {
    return -1;
}

bytecnt = m->str_range;
linecnt = m->str_range;

if (m->str_flags & REGEX_LINE_COUNT) {
    linecnt = m->str_range;
    bytecnt = linecnt * 80;
} else {
    linecnt = 0;
    bytecnt = m->str_range;
}