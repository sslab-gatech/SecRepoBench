switch (i)
{
  case 0:
  {
    scale = (double) (((size_t) 1UL << jp2_image->comps[i].prec) - 1) / QuantumRange;
    pixel = scale * GetPixelRed(image, p);
    break;
  }
  case 1:
  {
    scale = (double) (((size_t) 1UL << jp2_image->comps[i].prec) - 1) / QuantumRange;
    pixel = scale * GetPixelGreen(image, p);
    break;
  }
  case 2:
  {
    scale = (double) (((size_t) 1UL << jp2_image->comps[i].prec) - 1) / QuantumRange;
    pixel = scale * GetPixelBlue(image, p);
    break;
  }
  case 3:
  {
    scale = (double) (((size_t) 1UL << jp2_image->comps[i].prec) - 1) / QuantumRange;
    pixel = scale * GetPixelAlpha(image, p);
    break;
  }
}