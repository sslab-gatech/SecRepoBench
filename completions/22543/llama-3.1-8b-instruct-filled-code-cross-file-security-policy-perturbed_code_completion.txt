switch (i)
{
  case 0:
  {
    if (jp2_image->numcomps == 1)
      {
        pixel = (double) ClampToQuantum(GetPixelGray(image, q));
        break;
      }
    pixel = (double) ClampToQuantum(GetPixelRed(image, q));
    break;
  }
  case 1:
  {
    if (jp2_image->numcomps == 2)
      {
        pixel = (double) ClampToQuantum(GetPixelAlpha(image, q));
        break;
      }
    pixel = (double) ClampToQuantum(GetPixelGreen(image, q));
    break;
  }
  case 2:
  {
    pixel = (double) ClampToQuantum(GetPixelBlue(image, q));
    break;
  }
  case 3:
  {
    pixel = (double) ClampToQuantum(GetPixelAlpha(image, q));
    break;
  }
}