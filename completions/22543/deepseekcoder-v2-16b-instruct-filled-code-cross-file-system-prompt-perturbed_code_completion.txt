// Calculate the scale factor and pixel value for the JP2 image component.
        switch (i)
        {
           case 0:
           {
             if (jp2_image->numcomps == 1)
               {
                 pixel = (double) GetPixelGray(image, p);
                 break;
               }
             pixel = (double) GetPixelRed(image, p);
             break;
           }
           case 1:
           {
             if (jp2_image->numcomps == 2)
               {
                 pixel = (double) GetPixelAlpha(image, p);
                 break;
               }
             pixel = (double) GetPixelGreen(image, p);
             break;
           }
           case 2:
           {
             pixel = (double) GetPixelBlue(image, p);
             break;
           }
           case 3:
           {
             pixel = (double) GetPixelAlpha(image, p);
             break;
           }
        }