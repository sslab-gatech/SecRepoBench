// <MASK>
  hb_vector_t<hb_codepoint_t> full_glyphs;
  full_glyphs.create (initial_gids_to_retain->len);
  hb_codepoint_t gid = HB_SET_VALUE_INVALID;
  while (initial_gids_to_retain->next (&gid))
  {
    if (gid > face->num_glyphs())
    {
      DEBUG_MSG(SUBSET, nullptr, "Drop GID %d; out of range", gid);
      continue;
    }
    full_glyphs.push_back (gid);
    hb_ot_glyf_glyph_t *glyph = glyf.get (gid);
    if (glyph->num_contours > 0)
    {
      for (unsigned int i = 0; i < glyph->num_components; i++)
      {
        hb_codepoint_t component_gid = glyph->components[i].gid;
        if (component_gid > face->num_glyphs())
        {
          DEBUG_MSG(SUBSET, nullptr, "Drop component GID %d; out of range", component_gid);
          continue;
        }
        full_glyphs.push_back (component_gid);
      }
    }
  }
  full_glyphs.sort ();
  full_glyphs.unique ();
  full_glyphs.destroy ();
  hb_set_destroy (initial_gids_to_retain);
  return full_glyphs.release();
  // </MASK>