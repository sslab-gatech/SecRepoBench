if (streaming) {
        ret->attr = NULL; // In streaming mode, we do not associate the attribute
    } else {
        attr->atype = XML_ATTRIBUTE_ID;
        attr->id = ret; // Associate the attribute with the ID only if not in streaming mode
    }

    // Record the line number from the attribute's parent element if needed
    // Add the new ID to the document's ID table
    if (xmlHashAddEntry(table, identifier, ret) < 0) {
        xmlFreeID(ret);
        return(-1);
    }

    if (id != NULL)
        *id = ret; // Assign the newly created ID to the provided pointer

    return(0); // Return success