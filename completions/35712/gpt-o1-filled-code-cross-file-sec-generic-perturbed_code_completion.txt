CASE(OP_EXT1, Z) {
  /* Read the next byte as the actual instruction. */
  instruction = *pc++;
  switch ((enum mrb_insn)instruction) {
    default:
      /* If there's no handling for this sub-instruction,
         raise an assertion failure and stop. */
      mrb_assert(!"OP_EXT1 with unknown sub-instruction");
      goto L_STOP;
  }
  NEXT;
}

CASE(OP_EXT2, Z) {
  /* Read two bytes for the extended instruction. */
  instruction = *pc++;
  instruction = (instruction << 8) | *pc++;
  switch ((enum mrb_insn)instruction) {
    default:
      mrb_assert(!"OP_EXT2 with unknown sub-instruction");
      goto L_STOP;
  }
  NEXT;
}

CASE(OP_EXT3, Z) {
  /* Read three bytes for the extended instruction. */
  instruction = *pc++;
  instruction = (instruction << 8) | *pc++;
  instruction = (instruction << 8) | *pc++;
  switch ((enum mrb_insn)instruction) {
    default:
      mrb_assert(!"OP_EXT3 with unknown sub-instruction");
      goto L_STOP;
  }
  NEXT;
}