CASE(OP_EXT1, B) {
  uint8_t op = mrb_vm_ci_read_byte(mrb->c->ci);
  switch (op) {
  case 0x01: /* OP_EXT1_1 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x02: /* OP_EXT1_2 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x03: /* OP_EXT1_3 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x04: /* OP_EXT1_4 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x05: /* OP_EXT1_5 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x06: /* OP_EXT1_6 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x07: /* OP_EXT1_7 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x08: /* OP_EXT1_8 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x09: /* OP_EXT1_9 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0A: /* OP_EXT1_A */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0B: /* OP_EXT1_B */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0C: /* OP_EXT1_C */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0D: /* OP_EXT1_D */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0E: /* OP_EXT1_E */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0F: /* OP_EXT1_F */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  default:
    pc--;
    NEXT;
  }
  pc--;
  NEXT;
}

CASE(OP_EXT2, B) {
  uint8_t op = mrb_vm_ci_read_byte(mrb->c->ci);
  switch (op) {
  case 0x01: /* OP_EXT2_1 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x02: /* OP_EXT2_2 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x03: /* OP_EXT2_3 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x04: /* OP_EXT2_4 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x05: /* OP_EXT2_5 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x06: /* OP_EXT2_6 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x07: /* OP_EXT2_7 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x08: /* OP_EXT2_8 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x09: /* OP_EXT2_9 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0A: /* OP_EXT2_A */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0B: /* OP_EXT2_B */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0C: /* OP_EXT2_C */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0D: /* OP_EXT2_D */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0E: /* OP_EXT2_E */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0F: /* OP_EXT2_F */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  default:
    pc--;
    NEXT;
  }
  pc--;
  NEXT;
}

CASE(OP_EXT3, B) {
  uint8_t op = mrb_vm_ci_read_byte(mrb->c->ci);
  switch (op) {
  case 0x01: /* OP_EXT3_1 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x02: /* OP_EXT3_2 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x03: /* OP_EXT3_3 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x04: /* OP_EXT3_4 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x05: /* OP_EXT3_5 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x06: /* OP_EXT3_6 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x07: /* OP_EXT3_7 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x08: /* OP_EXT3_8 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x09: /* OP_EXT3_9 */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0A: /* OP_EXT3_A */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0B: /* OP_EXT3_B */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0C: /* OP_EXT3_C */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0D: /* OP_EXT3_D */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0E: /* OP_EXT3_E */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], TRUE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  case 0x0F: /* OP_EXT3_F */
    {
      mrb_value val = mrb_range_new(mrb, regs[a], regs[a+1], FALSE);
      regs[a] = val;
      mrb_gc_arena_restore(mrb, ai);
      pc--;
      NEXT;
    }
  default:
    pc--;
    NEXT;
  }
  pc--;
  NEXT;
}