CASE(OP_EXT1, B) {
  uint8_t op = FETCH_B();
  switch (op) {
    CASE(OP_EXT1_CASE1) {
      /* handle OP_EXT1_CASE1 */
      mrb_value v = mrb_ary_new_from_values(mrb, 1, &regs[a]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT1_CASE2) {
      /* handle OP_EXT1_CASE2 */
      mrb_value v = mrb_ary_new_from_values(mrb, 2, &regs[a], &regs[a+1]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT1_CASE3) {
      /* handle OP_EXT1_CASE3 */
      mrb_value v = mrb_ary_new_from_values(mrb, 3, &regs[a], &regs[a+1], &regs[a+2]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT1_CASE4) {
      /* handle OP_EXT1_CASE4 */
      mrb_value v = mrb_ary_new_from_values(mrb, 4, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT1_CASE5) {
      /* handle OP_EXT1_CASE5 */
      mrb_value v = mrb_ary_new_from_values(mrb, 5, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT1_CASE6) {
      /* handle OP_EXT1_CASE6 */
      mrb_value v = mrb_ary_new_from_values(mrb, 6, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT1_CASE7) {
      /* handle OP_EXT1_CASE7 */
      mrb_value v = mrb_ary_new_from_values(mrb, 7, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5], &regs[a+6]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT1_CASE8) {
      /* handle OP_EXT1_CASE8 */
      mrb_value v = mrb_ary_new_from_values(mrb, 8, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5], &regs[a+6], &regs[a+7]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT1_CASE9) {
      /* handle OP_EXT1_CASE9 */
      mrb_value v = mrb_ary_new_from_values(mrb, 9, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5], &regs[a+6], &regs[a+7], &regs[a+8]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT1_CASE10) {
      /* handle OP_EXT1_CASE10 */
      mrb_value v = mrb_ary_new_from_values(mrb, 10, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5], &regs[a+6], &regs[a+7], &regs[a+8], &regs[a+9]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    default:
      pc--;
      NEXT;
  }
  pc--;
  NEXT;
}

CASE(OP_EXT2, B) {
  uint8_t op = FETCH_B();
  switch (op) {
    CASE(OP_EXT2_CASE1) {
      /* handle OP_EXT2_CASE1 */
      mrb_value v = mrb_ary_new_from_values(mrb, 1, &regs[a]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT2_CASE2) {
      /* handle OP_EXT2_CASE2 */
      mrb_value v = mrb_ary_new_from_values(mrb, 2, &regs[a], &regs[a+1]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT2_CASE3) {
      /* handle OP_EXT2_CASE3 */
      mrb_value v = mrb_ary_new_from_values(mrb, 3, &regs[a], &regs[a+1], &regs[a+2]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT2_CASE4) {
      /* handle OP_EXT2_CASE4 */
      mrb_value v = mrb_ary_new_from_values(mrb, 4, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT2_CASE5) {
      /* handle OP_EXT2_CASE5 */
      mrb_value v = mrb_ary_new_from_values(mrb, 5, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT2_CASE6) {
      /* handle OP_EXT2_CASE6 */
      mrb_value v = mrb_ary_new_from_values(mrb, 6, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT2_CASE7) {
      /* handle OP_EXT2_CASE7 */
      mrb_value v = mrb_ary_new_from_values(mrb, 7, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5], &regs[a+6]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT2_CASE8) {
      /* handle OP_EXT2_CASE8 */
      mrb_value v = mrb_ary_new_from_values(mrb, 8, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5], &regs[a+6], &regs[a+7]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT2_CASE9) {
      /* handle OP_EXT2_CASE9 */
      mrb_value v = mrb_ary_new_from_values(mrb, 9, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5], &regs[a+6], &regs[a+7], &regs[a+8]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT2_CASE10) {
      /* handle OP_EXT2_CASE10 */
      mrb_value v = mrb_ary_new_from_values(mrb, 10, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5], &regs[a+6], &regs[a+7], &regs[a+8], &regs[a+9]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    default:
      pc--;
      NEXT;
  }
  pc--;
  NEXT;
}

CASE(OP_EXT3, B) {
  uint8_t op = FETCH_B();
  switch (op) {
    CASE(OP_EXT3_CASE1) {
      /* handle OP_EXT3_CASE1 */
      mrb_value v = mrb_ary_new_from_values(mrb, 1, &regs[a]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT3_CASE2) {
      /* handle OP_EXT3_CASE2 */
      mrb_value v = mrb_ary_new_from_values(mrb, 2, &regs[a], &regs[a+1]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT3_CASE3) {
      /* handle OP_EXT3_CASE3 */
      mrb_value v = mrb_ary_new_from_values(mrb, 3, &regs[a], &regs[a+1], &regs[a+2]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT3_CASE4) {
      /* handle OP_EXT3_CASE4 */
      mrb_value v = mrb_ary_new_from_values(mrb, 4, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT3_CASE5) {
      /* handle OP_EXT3_CASE5 */
      mrb_value v = mrb_ary_new_from_values(mrb, 5, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT3_CASE6) {
      /* handle OP_EXT3_CASE6 */
      mrb_value v = mrb_ary_new_from_values(mrb, 6, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT3_CASE7) {
      /* handle OP_EXT3_CASE7 */
      mrb_value v = mrb_ary_new_from_values(mrb, 7, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5], &regs[a+6]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT3_CASE8) {
      /* handle OP_EXT3_CASE8 */
      mrb_value v = mrb_ary_new_from_values(mrb, 8, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5], &regs[a+6], &regs[a+7]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT3_CASE9) {
      /* handle OP_EXT3_CASE9 */
      mrb_value v = mrb_ary_new_from_values(mrb, 9, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5], &regs[a+6], &regs[a+7], &regs[a+8]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    CASE(OP_EXT3_CASE10) {
      /* handle OP_EXT3_CASE10 */
      mrb_value v = mrb_ary_new_from_values(mrb, 10, &regs[a], &regs[a+1], &regs[a+2], &regs[a+3], &regs[a+4], &regs[a+5], &regs[a+6], &regs[a+7], &regs[a+8], &regs[a+9]);
      regs[a] = v;
      mrb_gc_arena_restore(mrb, ai);
      NEXT;
    }
    default:
      pc--;
      NEXT;
  }
  pc--;
  NEXT;
}