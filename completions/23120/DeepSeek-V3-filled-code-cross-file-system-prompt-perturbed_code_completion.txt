if ((__xmlRegisterCallbacks) && (xmlDeregisterNodeDefaultValue))
        xmlDeregisterNodeDefaultValue((xmlNodePtr) attribute);

    if ((attribute->atype == XML_ATTRIBUTE_ID) && (attribute->doc != NULL))
        xmlRemoveID(attribute->doc, attribute);
    else if ((attribute->atype == XML_ATTRIBUTE_IDREF) ||
             (attribute->atype == XML_ATTRIBUTE_IDREFS))
        xmlRemoveRef(attribute->doc, attribute);

    if (attribute->children != NULL)
        xmlTextReaderFreeNodeList(reader, attribute->children);

    if (attribute->ns != NULL)
        xmlFreeNs(attribute->ns);

    DICT_FREE(attribute->name);