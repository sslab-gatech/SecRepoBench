if (attribute->atype == XML_ATTRIBUTE_ID) {
    if (attribute->doc != NULL && attribute->doc->ids != NULL) {
        xmlHashRemoveEntry(attribute->doc->ids, attribute->name, xmlTextReaderFreeIDTableEntry);
    }
}
if (attribute->atype == XML_ATTRIBUTE_REF) {
    if (attribute->doc != NULL && attribute->doc->refs != NULL) {
        xmlHashRemoveEntry(attribute->doc->refs, attribute->name, (xmlHashDeallocator) xmlFree);
    }
}
if (attribute->children != NULL) {
    xmlTextReaderFreeNodeList(reader, attribute->children);
    attribute->children = NULL;
}
if ((__xmlRegisterCallbacks) && (xmlDeregisterNodeDefaultValue)) {
    xmlDeregisterNodeDefaultValue((xmlNodePtr)attribute);
}
DICT_FREE(attribute->name);