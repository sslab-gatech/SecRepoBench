if ((reader != NULL) && (reader->ctxt != NULL) &&
    (reader->ctxt->freeAttrsNr < 100)) {
    attribute->next = reader->ctxt->freeAttrs;
    reader->ctxt->freeAttrs = attribute;
    reader->ctxt->freeAttrsNr++;
} else {
    // Check if the property is an ID or a reference within a document and
    // remove it from the document's ID or reference table if applicable.
    if ((reader != NULL) && (reader->ctxt != NULL) && (reader->ctxt->idTable != NULL)) {
        xmlTextReaderFreeIDTableEntry(attribute->atype, attribute->name);
    }

    // If the current property node has children, recursively free the node list.
    if (attribute->children != NULL) {
        xmlTextReaderFreeNodeList(reader, attribute->children);
    }

    // Free the memory associated with the property name using the dictionary.
    if (dict != NULL) {
        xmlDictFree(dict, attribute->name);
    }

    // Free the memory associated with the property node.
    xmlFree(attribute);
}