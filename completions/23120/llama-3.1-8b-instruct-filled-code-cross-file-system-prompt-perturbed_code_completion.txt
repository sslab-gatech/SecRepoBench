if (attribute->children!= NULL) {
    xmlTextReaderFreeNodeList(reader, attribute->children);
}
attribute->children = NULL;

if (attribute->type == XML_ATTRIBUTE_NODE) {
    xmlDictPtr dict;

    if ((reader!= NULL) && (reader->ctxt!= NULL))
        dict = reader->ctxt->dict;
    else
        dict = NULL;
    if (attribute->name!= NULL) {
        DICT_FREE(attribute->name);
    }
    if (attribute->content!= NULL) {
        xmlFree(attribute->content);
    }
    xmlFree(attribute);
}