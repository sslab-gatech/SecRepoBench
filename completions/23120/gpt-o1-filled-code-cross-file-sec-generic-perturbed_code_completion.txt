if ((__xmlRegisterCallbacks) && (xmlDeregisterNodeDefaultValue))
    xmlDeregisterNodeDefaultValue((xmlNodePtr) attribute);

if (attribute->parent && attribute->parent->doc) {
    xmlDocPtr doc = attribute->parent->doc;
    if (xmlIsID(doc, attribute->parent, attribute))
        xmlRemoveID(doc, attribute);
    else if (xmlIsRef(doc, attribute->parent, attribute))
        xmlRemoveRef(doc, attribute);
}

if (attribute->children != NULL) {
    xmlTextReaderFreeNodeList(reader, attribute->children);
    attribute->children = NULL;
}

DICT_FREE(attribute->name);
attribute->name = NULL;