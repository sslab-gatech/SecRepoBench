if (attribute->type == XML_ATTRIBUTE_ID) {
        if ((reader != NULL) && (reader->ctxt != NULL) && (reader->ctxt->doc != NULL)) {
            xmlRemoveID(reader->ctxt->doc, attribute);
        }
    } else if (attribute->type == XML_ATTRIBUTE_REF) {
        if ((reader != NULL) && (reader->ctxt != NULL) && (reader->ctxt->doc != NULL)) {
            xmlRemoveRef(reader->ctxt->doc, attribute);
        }
    }

    if (attribute->children != NULL) {
        xmlTextReaderFreeNodeList(reader, attribute->children);
        attribute->children = NULL;
    }

    if (__xmlRegisterCallbacks && xmlDeregisterNodeDefaultValue) {
        xmlDeregisterNodeDefaultValue((xmlNodePtr)attribute);
    }

    if (attribute->ns != NULL) {
        xmlFreeNs(attribute->ns);
        attribute->ns = NULL;
    }

    if (dict == NULL) {
        xmlFree((xmlChar *)attribute->name);
    }
    attribute->name = NULL;