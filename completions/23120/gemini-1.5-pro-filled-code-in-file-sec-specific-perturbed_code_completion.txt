if ((reader != NULL) && (reader->doc != NULL) && (reader->ctxt != NULL)) {
        if (attribute->parent != NULL) {
            if (attribute->parent->doc != NULL) {
                if (xmlIsID(attribute->parent->doc, attribute->parent,
                            attribute))
                    xmlTextReaderRemoveID(attribute->parent->doc, attribute);
                if (xmlIsRef(attribute->parent->doc, attribute->parent,
                             attribute))
                    xmlTextReaderRemoveRef(attribute->parent->doc, attribute);
            }
        }
    }


    if ((attribute->children != NULL) &&
        (attribute->type != XML_ENTITY_REF_NODE)) {
	xmlTextReaderFreeNodeList(reader, attribute->children);
	attribute->children = NULL;
    }
    DICT_FREE(attribute->name);