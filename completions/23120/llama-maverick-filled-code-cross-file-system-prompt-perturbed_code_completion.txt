if (attribute->atype == XML_ATTRIBUTE_ID) {
    if ((reader->ctxt != NULL) && (reader->ctxt->myDoc != NULL)) {
        xmlIDTablePtr table = (xmlIDTablePtr) reader->ctxt->myDoc->ids;
        if (table != NULL)
            xmlHashRemoveEntry(table, attribute->name, xmlTextReaderFreeIDTableEntry);
    }
}
if (attribute->children != NULL) {
    if (attribute->children->parent == (xmlNodePtr) attribute)
        xmlTextReaderFreeNodeList(reader, attribute->children);
    attribute->children = NULL;
}
if ((__xmlRegisterCallbacks) && (xmlDeregisterNodeDefaultValue))
    xmlDeregisterNodeDefaultValue((xmlNodePtr) attribute);
DICT_FREE(attribute->name);