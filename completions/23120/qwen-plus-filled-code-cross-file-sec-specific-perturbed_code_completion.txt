if (attribute->atype == XML_ATTRIBUTE_ID) {
    if (attribute->doc != NULL && attribute->doc->ids != NULL) {
        xmlHashRemoveEntry(attribute->doc->ids, attribute->name, xmlTextReaderFreeIDTableEntry);
    }
}

if (attribute->children != NULL) {
    xmlNodePtr child = attribute->children;
    while (child != NULL) {
        xmlNodePtr next = child->next;
        xmlTextReaderFreeNode(reader, child);
        child = next;
    }
    attribute->children = NULL;
}

DICT_FREE(attribute->name);