if ((__xmlRegisterCallbacks) && (xmlDeregisterNodeDefaultValue))
	xmlDeregisterNodeDefaultValue((xmlNodePtr)attribute);

    if ((reader != NULL) && (reader->ctxt != NULL) &&
	(reader->ctxt->myDoc != NULL)) {
	xmlDocPtr doc = reader->ctxt->myDoc;
	xmlIDPtr id = xmlGetID(doc, attribute->value);
	if ((id != NULL) && (id->attr == attribute))
	    xmlRemoveID(doc, id);
    }

    if (attribute->children != NULL) {
	if (attribute->children->parent == (xmlNodePtr)attribute)
	    xmlTextReaderFreeNodeList(reader, attribute->children);
	attribute->children = NULL;
    }

    DICT_FREE(attribute->name);

    if ((reader != NULL) && (reader->ctxt != NULL) &&
        (reader->ctxt->freeAttrsNr < 100)) {
        attribute->next = reader->ctxt->freeAttrs;
	reader->ctxt->freeAttrs = attribute;
	reader->ctxt->freeAttrsNr++;
    } else {
	xmlFree(attribute);
    }