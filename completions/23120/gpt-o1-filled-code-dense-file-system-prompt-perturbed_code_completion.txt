if ((__xmlRegisterCallbacks) && (xmlDeregisterNodeDefaultValue))
    xmlDeregisterNodeDefaultValue((xmlNodePtr)attribute);

if ((attribute->doc != NULL) && (attribute->parent != NULL)) {
    if (xmlIsID(attribute->doc, attribute->parent, attribute))
        xmlRemoveID(attribute->doc, attribute);
    else if (xmlIsRef(attribute->doc, attribute->parent, attribute))
        xmlRemoveRef(attribute->doc, attribute);
}

if (attribute->children != NULL) {
    xmlTextReaderFreeNodeList(reader, attribute->children);
    attribute->children = NULL;
}

if ((dict != NULL) && (attribute->name != NULL) &&
    (!xmlDictOwns(dict, attribute->name))) {
    xmlFree((xmlChar *) attribute->name);
}