if ((reader!= NULL) && (reader->ctxt!= NULL) &&
    (reader->ctxt->freeAttrsNr < 100)) {
    attribute->next = reader->ctxt->freeAttrs;
    reader->ctxt->freeAttrs = attribute;
    reader->ctxt->freeAttrsNr++;
} else {
    xmlFree(attribute);
    if (attribute->children!= NULL) {
        xmlTextReaderFreeNodeList(reader, attribute->children);
    }
    if (attribute->type == XML_ATTRIBUTE_NODE) {
        xmlDictPtr dict = reader->ctxt->dict;
        if (dict!= NULL) {
            xmlFree((xmlChar *) attribute->name);
        }
    }
}