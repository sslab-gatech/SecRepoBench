if ((__xmlRegisterCallbacks) && (xmlDeregisterNodeDefaultValue))
    xmlDeregisterNodeDefaultValue((xmlNodePtr) attribute);

if ((attribute->atype == XML_ATTRIBUTE_ID) && (attribute->doc != NULL) &&
    (attribute->doc->ids != NULL)) {
    xmlRemoveID(attribute->doc, attribute);
} else if ((attribute->atype == XML_ATTRIBUTE_REF) && (attribute->doc != NULL) &&
           (attribute->doc->refs != NULL)) {
    xmlRemoveRef(attribute->doc, attribute);
}

if (attribute->children != NULL) {
    xmlTextReaderFreeNodeList(reader, attribute->children);
    attribute->children = NULL;
}

DICT_FREE(attribute->name);