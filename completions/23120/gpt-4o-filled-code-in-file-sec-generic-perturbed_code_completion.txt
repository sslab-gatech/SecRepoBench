if (reader->errorFunc != NULL) {
        if (xmlTextReaderRemoveID(reader->ctxt->myDoc, attribute) < 0) {
            xmlTextReaderValidityError(reader->ctxt,
                "Failed to remove ID for attribute %s\n", attribute->name);
        }
        if (xmlTextReaderRemoveRef(reader->ctxt->myDoc, attribute) < 0) {
            xmlTextReaderValidityError(reader->ctxt,
                "Failed to remove Ref for attribute %s\n", attribute->name);
        }
    } else {
        xmlTextReaderRemoveID(reader->ctxt->myDoc, attribute);
        xmlTextReaderRemoveRef(reader->ctxt->myDoc, attribute);
    }

    if (attribute->children != NULL) {
        xmlTextReaderFreeNodeList(reader, attribute->children);
    }

    DICT_FREE(attribute->name);