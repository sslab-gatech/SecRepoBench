if (attribute->children != NULL) {
    xmlTextReaderFreeNodeList(reader, attribute->children);
    attribute->children = NULL;
}

if ((__xmlRegisterCallbacks) && (xmlDeregisterNodeDefaultValue))
    xmlDeregisterNodeDefaultValue((xmlNodePtr) attribute);

if (attribute->atype == XML_ATTRIBUTE_ID) {
    xmlRemoveID(reader->ctxt, attribute);
}

if (attribute->name != NULL) {
    if (dict != NULL) {
        if (!xmlDictOwns(dict, attribute->name)) {
            xmlFree((xmlChar *)attribute->name);
        }
    } else {
        xmlFree((xmlChar *)attribute->name);
    }
}