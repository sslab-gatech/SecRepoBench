if ((__xmlRegisterCallbacks) && (xmlDeregisterNodeDefaultValue))
	xmlDeregisterNodeDefaultValue((xmlNodePtr) attribute);

    if (attribute->children != NULL)
	xmlTextReaderFreeNodeList(reader, attribute->children);

    DICT_FREE(attribute->name);
    DICT_FREE(attribute->ns);
    if ((attribute->atype != XML_ATTRIBUTE_ID) &&
        (attribute->atype != XML_ATTRIBUTE_IDREF) &&
        (attribute->atype != XML_ATTRIBUTE_IDREFS)) {
	DICT_FREE(attribute->defaultValue);
	if (attribute->children != (xmlNodePtr) &attribute->name)
	    DICT_FREE(attribute->content);
    } else {
	xmlDocPtr doc;

	if ((reader != NULL) && (reader->ctxt != NULL) &&
	    (reader->ctxt->myDoc != NULL))
	    doc = reader->ctxt->myDoc;
	else
	    doc = NULL;
	if (doc != NULL) {
	    if (attribute->atype == XML_ATTRIBUTE_ID) {
		xmlRemoveID(doc, attribute);
	    } else {
		xmlRemoveRef(doc, attribute);
	    }
	}
    }