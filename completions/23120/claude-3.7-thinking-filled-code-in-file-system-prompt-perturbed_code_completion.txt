if ((__xmlRegisterCallbacks) && (xmlDeregisterNodeDefaultValue))
    xmlDeregisterNodeDefaultValue((xmlNodePtr) attribute);

if (attribute->doc != NULL) {
    if (attribute->atype == XML_ATTRIBUTE_ID)
        xmlTextReaderRemoveID(attribute->doc, attribute);
    else if (attribute->atype == XML_ATTRIBUTE_IDREF)
        xmlTextReaderRemoveRef(attribute->doc, attribute);
}

if (attribute->children != NULL) {
    if (attribute->children->parent == (xmlNodePtr) attribute)
        xmlTextReaderFreeNodeList(reader, attribute->children);
    attribute->children = NULL;
}

if (attribute->name != NULL)
    DICT_FREE(attribute->name);

if ((reader != NULL) && (reader->ctxt != NULL) &&
    (reader->ctxt->freeAttrsNr < 100)) {
    attribute->next = reader->ctxt->freeAttrs;
    reader->ctxt->freeAttrs = attribute;
    reader->ctxt->freeAttrsNr++;
} else {
    xmlFree(attribute);
}