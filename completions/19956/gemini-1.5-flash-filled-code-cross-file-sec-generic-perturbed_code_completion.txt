VarRegionList *dst = hb_serialize_context_alloc<VarRegionList>(c);
    if (!dst) return false;

    dst->axes_count = src->axes_count;
    dst->regions_count = regionmapping.size();

    size_t total_size = sizeof(VarRegionList) + dst->axes_count * sizeof(Axis) + dst->regions_count * sizeof(Region);
    void *ptr = hb_serialize_context_alloc(c, total_size);
    if (!ptr) return false;
    dst = reinterpret_cast<VarRegionList*>(ptr);


    dst->axes = reinterpret_cast<Axis*>(dst + 1);
    dst->regions = reinterpret_cast<Region*>(dst->axes + dst->axes_count);

    for (size_t i = 0; i < dst->axes_count; ++i) {
        dst->axes[i] = src->axes[i];
    }

    for (const auto& pair : regionmapping) {
        size_t src_index = pair.first;
        size_t dst_index = pair.second;
        dst->regions[dst_index] = src->regions[src_index];
    }

    return true;