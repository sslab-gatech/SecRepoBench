TRACE_SERIALIZE (this);

    VarRegionList *dest = c->extend_min (*this);
    if (unlikely (dest == nullptr)) return_trace (false);

    dest->axis_count = src->axis_count;
    dest->region_count = regionmapping.get_length ();

    /*
     * VarRegionList layout:
     *
     * - VarRegionList
     * - VarRegionAxis[axis_count]
     * - VarRegion[region_count]
     * - VarRegionIndexes[region_count * axis_count]
     */

    size_t var_region_axes_size = VarRegionAxis::static_size * src->axis_count;
    size_t var_regions_size = VarRegion::static_size * regionmapping.get_length ();
    size_t var_region_indexes_size = HBUINT16::static_size * regionmapping.get_length () * src->axis_count;

    if (unlikely (!c->allocate_size<char> (var_region_axes_size + var_regions_size + var_region_indexes_size)))
      return_trace (false);

    /* copy VarRegionAxis */
    memcpy (dest->axes, src->axes, var_region_axes_size);

    /* copy VarRegionIndexes */
    for (unsigned int i = 0; i < regionmapping.get_length (); ++i)
    {
      unsigned int src_index = regionmapping.get_value (i);
      for (unsigned int j = 0; j < src->axis_count; ++j)
      {
        dest->regions[i].indexes[j] = src->regions[src_index].indexes[j];
      }
    }

    return_trace (true);