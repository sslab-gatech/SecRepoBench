VarRegionList* dest = c->allocate_size<VarRegionList> (VarRegionList::get_size (src->get_axis_count (), regionmapping.get_population ()));
if (!dest) return false;

dest->axisCount = src->get_axis_count ();
dest->regionCount = regionmapping.get_population ();

for (unsigned int new_idx = 0; new_idx < dest->regionCount; new_idx++)
{
    unsigned int old_idx = regionmapping.backward (new_idx);
    if (old_idx >= src->get_region_count ()) return false;
    const VarRegion* src_region = src->get_region (old_idx);
    VarRegion* dest_region = &dest->regions[new_idx];
    for (unsigned int i = 0; i < dest->axisCount; i++)
        dest_region->axisValues[i].set (src_region->axisValues[i].get ());
}

return true;