VarRegionList *dest = c->extend_min (*src);
if (unlikely (dest == nullptr)) return false;

dest->axis_count = src->axis_count;
dest->region_count = src->region_count;

for (unsigned int i = 0; i < src->axis_count; i++)
{
  const hb_bimap_t::iterator it = regionmapping.find (i);
  if (it == regionmapping.end ())
    return false;

  unsigned int axis_index = it->second;
  if (unlikely (axis_index >= dest->axis_count))
    return false;

  dest->axes[axis_index] = c->allocate_size<VarAxis> (src->axes[i].get_size ());
  if (unlikely (dest->axes[axis_index] == nullptr))
    return false;

  memcpy (dest->axes[axis_index], &src->axes[i], src->axes[i].get_size ());
}

for (unsigned int i = 0; i < src->region_count; i++)
{
  const hb_bimap_t::iterator it = regionmapping.find (i);
  if (it == regionmapping.end ())
    return false;

  unsigned int region_index = it->second;
  if (unlikely (region_index >= dest->region_count))
    return false;

  dest->regions[region_index] = c->allocate_size<VarRegion> (src->regions[i].get_size ());
  if (unlikely (dest->regions[region_index] == nullptr))
    return false;

  memcpy (dest->regions[region_index], &src->regions[i], src->regions[i].get_size ());
}

return true;