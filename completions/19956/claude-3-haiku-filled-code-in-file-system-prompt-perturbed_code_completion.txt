bool serialize (hb_serialize_context_t *c, const VarRegionList *src, const hb_bimap_t &regionmapping)
{
  if (unlikely (!c->extend_min (*this))) return_trace (false);

  axisCount = src->axisCount;
  regionCount = regionmapping.get_population ();

  unsigned int size = get_size ();
  if (unlikely (!c->allocate_size<HBUINT8> (size)))
    return_trace (false);

  unsigned int region_index = 0;
  for (const auto &region : regionmapping)
  {
    VarRegionAxis *dest_axis = &axesZ[region_index * axisCount];
    const VarRegionAxis *src_axis = &src->axesZ[region];
    memcpy (dest_axis, src_axis, VarRegionAxis::static_size * axisCount);
    region_index++;
  }

  return_trace (true);
}