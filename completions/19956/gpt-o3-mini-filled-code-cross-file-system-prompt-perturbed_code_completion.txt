VarRegionList *dest = c->extend_min(*src);
if (unlikely(dest == nullptr))
  return_trace(false);

// Set axis and region counts: use source axis count and number of mappings for regions.
dest->axisCount = src->axisCount;
dest->regionCount = static_cast<unsigned int>(regionmapping.size());

// Allocate memory for axis data for all regions.
unsigned int total_axes = dest->axisCount * dest->regionCount;
dest->axes = c->allocate_size<Axis>(total_axes);
if (unlikely(dest->axes == nullptr))
  return_trace(false);

// For each region mapping, copy the axis data from the corresponding source region.
for (auto it = regionmapping.begin(); it != regionmapping.end(); ++it)
{
  unsigned int src_region = it->first;
  unsigned int dst_region = it->second;

  if (src_region >= src->regionCount || dst_region >= dest->regionCount)
    return_trace(false);

  for (unsigned int i = 0; i < dest->axisCount; i++)
  {
    dest->axes[dst_region * dest->axisCount + i] = src->regions[src_region].axes[i];
  }
}

return_trace(true);