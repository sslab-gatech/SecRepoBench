VarRegionList* dest = c->start_embed (src);
    if (!dest) return false;

    dest->axisCount = src->axisCount;
    dest->regionCount = regionmapping.get_population ();

    unsigned regions_size = dest->regionCount * VarRegion::get_size (dest->axisCount);
    VarRegion* regions = (VarRegion*) c->allocate_size<HBUINT8> (regions_size);
    if (!regions) return false;

    for (auto _ : regionmapping.keys ())
    {
        hb_codepoint_t src_region = _;
        hb_codepoint_t dst_region = regionmapping[src_region];
        const VarRegion* src_reg = &src->regions[src_region];
        VarRegion* dst_reg = &regions[dst_region];
        for (unsigned i = 0; i < dest->axisCount; i++)
            dst_reg->axes[i] = src_reg->axes[i];
    }

    return true;