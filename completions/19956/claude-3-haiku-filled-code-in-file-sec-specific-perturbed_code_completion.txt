bool serialize (hb_serialize_context_t *c, const VarRegionList *src, const hb_bimap_t &regionmapping)
{
  if (unlikely (!c->extend_min (*this))) return_trace (false);

  axisCount = src->axisCount;
  regionCount = regionmapping.get_population ();

  unsigned int size = get_size ();
  if (unlikely (!c->allocate_size<HBUINT8> (size)))
    return_trace (false);

  VarRegionAxis *dest_axes = axesZ.arrayZ;
  for (const auto &region_pair : regionmapping)
  {
    *dest_axes++ = src->axesZ[region_pair.first];
  }

  return_trace (true);
}