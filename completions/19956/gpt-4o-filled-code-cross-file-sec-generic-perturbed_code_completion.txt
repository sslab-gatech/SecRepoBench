// Check for null pointers
    if (!c || !src) return false;

    // Calculate the size needed for serialization
    size_t region_count = regionmapping.size();
    size_t axis_count = src->axis_count;
    size_t total_size = sizeof(uint16_t) * 2 + region_count * axis_count * sizeof(float);

    // Allocate memory in the context
    if (!c->allocate(total_size)) return false;

    // Serialize axis and region counts
    if (!c->write_uint16(axis_count) || !c->write_uint16(region_count)) return false;

    // Iterate over each region in the region map
    for (size_t i = 0; i < region_count; ++i) {
        const VarRegion &region = src->regions[regionmapping[i]];
        for (size_t j = 0; j < axis_count; ++j) {
            if (!c->write_float(region.axis_values[j])) return false;
        }
    }

    return true;