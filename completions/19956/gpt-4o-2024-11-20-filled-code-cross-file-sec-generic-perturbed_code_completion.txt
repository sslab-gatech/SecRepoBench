TRACE_SERIALIZE(this);

    // Allocate memory for the VarRegionList in the context
    VarRegionList *dest = c->allocate_size<VarRegionList>(VarRegionList::min_size + src->get_size(regionmapping));
    if (unlikely(dest == nullptr)) return_trace(false);

    // Set the axis and region counts
    dest->axisCount = src->axisCount;
    dest->regionCount = regionmapping.size();

    // Iterate over each region in the region map
    for (unsigned int i = 0; i < regionmapping.size(); i++) {
        const VarRegion &src_region = src->regions[regionmapping[i]];
        VarRegion &dest_region = dest->regions[i];

        // Copy axis data from the source to the destination
        for (unsigned int j = 0; j < src->axisCount; j++) {
            dest_region.axes[j].startCoord = src_region.axes[j].startCoord;
            dest_region.axes[j].peakCoord = src_region.axes[j].peakCoord;
            dest_region.axes[j].endCoord = src_region.axes[j].endCoord;
        }
    }

    return_trace(true);