bool VariationDevice::serialize (hb_serialize_context_t *c, const VariationDevice *src, const hb_bimap_t &region_mapping)
{
  // Serialize a VariationDevice object from the source to the context using the provided region map.
  // Allocate memory for the VariationDevice in the context and check for allocation success.
  // Set the outer and inner indices based on the source and region map.
  // Allocate additional memory as required based on the object's size calculations.
  // Iterate over each region in the region map, using its mapping to copy axis data from the source to the destination.
  // Ensure successful completion by returning true if the serialization process finishes without errors.
  if (unlikely (!c->extend_min (*this))) return false;
  outerIndex = region_mapping[src->outerIndex];
  innerIndex = region_mapping[src->innerIndex];
  deltaFormat = src->deltaFormat;
  if (unlikely (!c->allocate_size<HBUINT16> (deltaFormat == 0x8000? 2 * HBUINT16::static_size : HBUINT16::static_size))) return false;
  if (deltaFormat == 0x8000)
  {
    HBUINT16 *p = (HBUINT16 *)c->get_data ();
    p[0] = src->deltaValueZ[0];
    p[1] = src->deltaValueZ[1];
  }
  else
  {
    UnsizedArrayOf<HBUINT16> &deltaValueZ = c->get_array<HBUINT16> ();
    deltaValueZ = src->deltaValueZ;
  }
  return true;
}