bool serialize (hb_serialize_context_t *c, const VarRegionList *src, const hb_bimap_t &regionmapping)
{
  if (unlikely (!c->extend_min (*this))) return_trace (false);

  axisCount = src->axisCount;
  regionCount = regionmapping.get_population ();

  unsigned int size = min_size + VarRegionAxis::static_size * axisCount * regionCount;
  if (unlikely (!c->allocate_size<HBUINT8> (size))) return_trace (false);

  for (unsigned int i = 0; i < src->regionCount; i++)
  {
    unsigned int new_region = regionmapping[i];
    VarRegionAxis *axis = &axesZ[new_region * axisCount];
    const VarRegionAxis *src_axis = &src->axesZ[i * src->axisCount];
    for (unsigned int j = 0; j < axisCount; j++)
      axis[j] = src_axis[j];
  }

  return_trace (true);
}