size_t region_count = regionmapping.get_population();
size_t axis_count = src->get_axis_count();

// Allocate memory for the VarRegionList in the context
VarRegionList *dst = c->allocate_size<VarRegionList>(sizeof(VarRegionList) + region_count * sizeof(VarRegion));
if (!dst)
    return false;

// Set the axis and region counts
dst->axis_count = axis_count;
dst->region_count = region_count;

// Allocate additional memory for axis data
for (unsigned int i = 0; i < axis_count; i++)
{
    dst->axis_data[i] = c->allocate_size<VariationAxis>(sizeof(VariationAxis));
    if (!dst->axis_data[i])
        return false;
}

// Iterate over each region in the region map
unsigned int region_index = 0;
for (const auto &pair : regionmapping)
{
    const VarRegion *src_region = src->get_region(pair.second);
    VarRegion *dst_region = &dst->regions[region_index++];

    // Copy axis data from the source to the destination
    for (unsigned int i = 0; i < axis_count; i++)
    {
        dst->axis_data[i]->min_value = src_region->axis_data[i].min_value;
        dst->axis_data[i]->def_value = src_region->axis_data[i].def_value;
        dst->axis_data[i]->max_value = src_region->axis_data[i].max_value;
    }
}

return true;