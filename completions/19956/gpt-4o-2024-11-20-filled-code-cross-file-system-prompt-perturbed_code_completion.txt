TRACE_SERIALIZE(this);

    // Allocate memory for VarRegionList
    VarRegionList *dest = c->allocate_size<VarRegionList>(VarRegionList::min_size + src->regions.length * VarRegion::static_size);
    if (unlikely(dest == nullptr)) return_trace(false);

    // Set axis count and region count
    dest->axisCount = src->axisCount;
    dest->regionCount = regionmapping.length;

    // Iterate over each region in the region mapping
    for (unsigned int i = 0; i < regionmapping.length; i++) {
        const VarRegion &src_region = src->regions[regionmapping[i]];
        VarRegion &dest_region = dest->regions[i];

        // Copy axis data from source to destination
        for (unsigned int j = 0; j < src->axisCount; j++) {
            dest_region.axes[j].startCoord = src_region.axes[j].startCoord;
            dest_region.axes[j].peakCoord = src_region.axes[j].peakCoord;
            dest_region.axes[j].endCoord = src_region.axes[j].endCoord;
        }
    }

    return_trace(true);