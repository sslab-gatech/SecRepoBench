TRACE_SERIALIZE (this);

if (unlikely (!c->extend_min (*this))) return_trace (false);

axisCount = src->axisCount;
regionCount = regionmapping.get_population();

unsigned int size = min_size + get_region_size() * regionCount;
if (unlikely (!c->allocate_size<HBUINT8> (size - min_size))) 
  return_trace (false);

// Copy each region data from source to destination based on the mapping
for (unsigned int i = 0; i < regionmapping.get_population(); i++) 
{
  unsigned int old_index = regionmapping.backward(i);
  
  // Copy each axis's region data
  for (unsigned int axis = 0; axis < axisCount; axis++) 
  {
    const VarRegionAxis* src_axis = &src->get_region(old_index)[axis];
    VarRegionAxis* dst_axis = &get_region(i)[axis];
    
    dst_axis->startCoord = src_axis->startCoord;
    dst_axis->peakCoord = src_axis->peakCoord;
    dst_axis->endCoord = src_axis->endCoord;
  }
}

return_trace (true);