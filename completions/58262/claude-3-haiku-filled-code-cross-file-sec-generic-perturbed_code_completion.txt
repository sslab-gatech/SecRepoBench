if ( fieldnames_vl == NULL ) {
    hsize_t nfields;
    herr_t herr;

    dataspace_id = H5Aget_space(attr_id);
    herr = H5Sget_simple_extent_dims(dataspace_id, &nfields, NULL);
    if ( herr < 0 ) {
        H5Sclose(dataspace_id);
        H5Aclose(attr_id);
        return MATIO_E_GENERIC_READ_ERROR;
    }

    fieldnames_vl = (hvl_t *)calloc((size_t)nfields, sizeof(*fieldnames_vl));
    if ( fieldnames_vl == NULL ) {
        H5Sclose(dataspace_id);
        H5Aclose(attr_id);
        return MATIO_E_OUT_OF_MEMORY;
    }

    *nfields = nfields;
}