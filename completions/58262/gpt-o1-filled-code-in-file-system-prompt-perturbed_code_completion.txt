dataspace_id = H5Aget_space(attr_id);
/* Make sure the attribute's dataspace is 1-D */
if ( H5Sget_simple_extent_ndims(dataspace_id) != 1 ) {
    H5Sclose(dataspace_id);
    H5Aclose(attr_id);
    return MATIO_E_FILE_FORMAT_VIOLATION;
}
/* Get the number of fields in the attribute */
{
    hsize_t dims[1] = {0};
    if ( H5Sget_simple_extent_dims(dataspace_id, dims, NULL) != 1 ) {
        H5Sclose(dataspace_id);
        H5Aclose(attr_id);
        return MATIO_E_FILE_FORMAT_VIOLATION;
    }
    *nfields = dims[0];
    if ( *nfields < 1 ) {
        H5Sclose(dataspace_id);
        H5Aclose(attr_id);
        return MATIO_E_NO_ERROR;
    }
}
/* Allocate memory for reading the field names */
fieldnames_vl = (hvl_t *)malloc((size_t)(*nfields)*sizeof(*fieldnames_vl));