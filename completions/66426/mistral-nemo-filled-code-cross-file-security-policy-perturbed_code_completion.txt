bitint *p = (bitint *)needle;
  bitint *e = (bitint *)(needle + m);
  bitint *q = (bitint *)ys;
  bitint *f = (bitint *)(ys + n);
  bitint h = 0, g = 0;
  for (; q < f; q++) {
    h = (h << 8) ^ *q;
    if (q >= e) {
      g = (g << 8) ^ *(q - m);
      h ^= g;
    }
    if (h == *p) {
      if (!memcmp(q, p, m)) return (mrb_int)(q - ys);
    }
  }
  return -1;