def xmlDOMWrapAdoptNode(ctxt, sourceDoc, node, destDoc, destParent, options):
    if (node is None or node.type == XML_NAMESPACE_DECL or destDoc is None or
            (destParent is not None and destParent.doc != destDoc)):
        return -1
    if sourceDoc is None:
        sourceDoc = node.doc
    if sourceDoc == destDoc:
        return -1
    if node.type in (XML_ELEMENT_NODE, XML_ATTRIBUTE_NODE,
                   XML_TEXT_NODE, XML_CDATA_SECTION_NODE,
                   XML_ENTITY_REF_NODE, XML_PI_NODE, XML_COMMENT_NODE):
        pass
    elif node.type == XML_DOCUMENT_FRAG_NODE:
        return 2
    else:
        return 1
    if node.parent is not None and node.parent != destParent:
        xmlUnlinkNode(node)
    if node.type == XML_ELEMENT_NODE:
        return xmlDOMWrapAdoptBranch(ctxt, sourceDoc, node, destDoc, destParent, options)
    elif node.type == XML_ATTRIBUTE_NODE:
        return xmlDOMWrapAdoptAttr(ctxt, sourceDoc, node, destDoc, destParent, options)
    else:
        node.doc = destDoc
        if sourceDoc is not None and sourceDoc.dict == destDoc.dict:
            adoptStr = 0
        if node.type in (XML_TEXT_NODE, XML_CDATA_SECTION_NODE):
            XML_TREE_ADOPT_STR_2(node.content)
        elif node.type == XML_ENTITY_REF_NODE:
            node.content = None
            node.children = None
            node.last = None
            if destDoc.intSubset or destDoc.extSubset:
                ent = xmlGetDocEntity(destDoc, node.name)
                if ent is not None:
                    node.content = ent.content
                    node.children = ent
                    node.last = ent
            XML_TREE_ADOPT_STR(node.name)
        elif node.type == XML_PI_NODE:
            XML_TREE_ADOPT_STR(node.name)
            XML_TREE_ADOPT_STR_2(node.content)
        else:
            pass
    return 0