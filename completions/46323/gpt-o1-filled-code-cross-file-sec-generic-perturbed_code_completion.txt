if (copy == NULL) {
    /* Failed to copy the current node, skip it. */
} else {
    /* Link the new copy into the child's list of the parent node. */
    if (insert->children == NULL) {
        insert->children = copy;
        insert->last = copy;
    } else {
        insert->last->next = copy;
        copy->prev = insert->last;
        insert->last = copy;
    }
}