if (copy == NULL) {
                if (cur->next != NULL) {
                    cur = cur->next;
                    continue;
                }
                while (1) {
                    if (cur->parent == NULL) {
                        cur = NULL;
                        break;
                    }
                    if (cur->parent == node) {
                        cur = NULL;
                        break;
                    }
                    if (cur->parent->next != NULL) {
                        cur = cur->parent->next;
                        break;
                    }
                    cur = cur->parent;
                }
                insert = insert->parent;
                continue;
            }
            if (insert == NULL) {
                copyNode = copy;
                insert = copyNode;
            } else {
                xmlAddChild(insert, copy);
            }