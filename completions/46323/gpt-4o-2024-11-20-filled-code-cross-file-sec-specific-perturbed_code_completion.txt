if (copy == NULL) {
                // If the copied node is NULL, skip to the next sibling or parent.
                cur = cur->next;
                while (cur == NULL && insert != NULL) {
                    cur = insert->parent;
                    insert = insert->parent;
                    if (cur == node) {
                        cur = NULL;
                        break;
                    }
                }
                continue;
            }

            // Insert the copied node into the list of children of the parent node.
            if (insert->children == NULL) {
                insert->children = copy;
                copy->parent = insert;
            } else {
                xmlNodePtr lastChild = insert->children;
                while (lastChild->next != NULL) {
                    lastChild = lastChild->next;
                }
                lastChild->next = copy;
                copy->prev = lastChild;
                copy->parent = insert;
            }