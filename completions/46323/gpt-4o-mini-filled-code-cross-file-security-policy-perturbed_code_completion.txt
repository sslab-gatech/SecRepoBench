if (copy != NULL) {
                insert = xmlAddChild(insert, copy);
            } else {
                // Handle the case where the copy failed, ensuring we do not reference freed memory
                if (insert != NULL && insert->parent != NULL) {
                    insert = insert->parent; // Move up the tree to avoid invalidated pointers
                }
            }