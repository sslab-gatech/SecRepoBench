if (copy == NULL) {
    xmlFreeNode(node);
    return(NULL);
}
copy->parent = parent;
copy->next = NULL;
copy->prev = p;
if (p != NULL) {
    p->next = copy;
} else {
    ret = copy;
}
copy->children = NULL;
copy->last = NULL;
copy->doc = doc;
copy->type = node->type;
copy->name = xmlStrdup(node->name);
if (node->content != NULL) {
    copy->content = xmlStrdup(node->content);
} else {
    copy->content = NULL;
}