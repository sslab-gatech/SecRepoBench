// Handle the case where the copied node is null.
if (copy == NULL) {
    continue;
}

// Otherwise, insert the copied node into the list of children of the parent node.
insert->children = copy;
if (insert->last == NULL) {
    insert->last = copy;
} else {
    insert->last->next = copy;
    copy->prev = insert->last;
    insert->last = copy;
}