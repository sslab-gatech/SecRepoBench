if (copy == NULL) {
                // Handle the error, e.g., by logging it and freeing any allocated resources.
                xmlTreeErrMemory("copying node");
                continue;
            }
            if (insert == copyNode) {
                copyNode->children = copy;
            } else {
                insert->next = copy;
            }
            copy->prev = insert;
            copy->parent = insert->parent;
            insert->last = copy;