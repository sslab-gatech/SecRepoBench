if (copy == NULL) {
    // Handle the case where the copied node is null.
    // Otherwise, insert the copied node into the list of children of the parent node.
    while (1) {
        if (cur->next != NULL) {
            cur = cur->next;
            break;
        }

        cur = cur->parent;
        insert = insert->parent;
        if (cur == node) {
            cur = NULL;
            break;
        }
    }
} else {
    // Insert the copied node into the list of children of the parent node.
    insert = copy;
}