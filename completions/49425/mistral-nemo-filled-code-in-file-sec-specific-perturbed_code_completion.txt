// <MASK>
for (;;) {
  mp_limb2 a = 0;
  for (size_t i=0; i<y->sz; i++) {
    a = (a<<DIG_SIZE) | y->p[i];
    z->p[i] = LOW(a);
    a >>= DIG_SIZE;
  }
  for (;i<x->sz; i++) {
    a = (a<<DIG_SIZE) | x->p[i];
    z->p[i] = LOW(a);
    a >>= DIG_SIZE;
  }
  z->p[x->sz] = a;
  trim(z);
  if (uzero(z)) break;
  mpz_sub_int(mrb, z, z, 1);
}

mpz_set(mrb, q, z);
mpz_clear(mrb, z);