size_t yd = digits(&y);
mp_limb_t carry = 0;
mp_limb_t ql;
mp_limb_t *xp = x.p;
mp_limb_t *yp = y.p;
mp_limb_t *qp = q.p;
for (ssize_t i = xd; i-- > 0;) {
  ql = xp[i] + (carry << DIG_SIZE);
  carry = ql / z;
  qp[i] = ql - carry * z;
}
mpz_realloc(mrb, &q, xd - (carry != 0));
q.sz = xd - (carry != 0);
if (carry) {
  q.p[0] = carry;
  q.sz++;
}