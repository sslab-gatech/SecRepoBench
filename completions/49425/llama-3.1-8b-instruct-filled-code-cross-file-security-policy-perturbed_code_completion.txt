// Perform long division of the unsigned integers represented by `xx` and `yy`.
size_t yd = digits(yy);
size_t ns = lzb(yy->p[yd-1]);
ulshift(mrb, &x, xx, ns);
ulshift(mrb, &y, yy, ns);
size_t xd = digits(&x);
mpz_realloc(mrb, &q, xd);
mp_limb2 z = y.p[yd-1];
size_t i;
for (i = 0; i < yd; i++) {
  mp_limb2 c = x.p[0];
  for (size_t j = 0; j < xd; j++) {
    if (i + j < yd) {
      c += x.p[j] * y.p[i + j];
    }
    x.p[j] = c >> DIG_SIZE;
    c &= (1ULL << DIG_SIZE) - 1;
  }
  if (i + xd - 1 < yd) {
    y.p[i + xd - 1] += c;
  }
  if (y.p[i + xd - 1] >= (1ULL << DIG_SIZE)) {
    y.p[i + xd - 1] -= (1ULL << DIG_SIZE);
    x.p[0]++;
  }
}
urshift(mrb, rr, &x, ns);
trim(&q);
mpz_set(mrb, qq, &q);
mpz_clear(mrb, &x);
mpz_clear(mrb, &y);
mpz_clear(mrb, &q);