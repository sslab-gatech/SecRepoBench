if (in->raw != NULL)
    xmlBufFree(in->raw);
in->raw = in->buffer;
in->buffer = xmlBufCreateSize(2 * xmlBufUse(in->raw) + 1);
if (in->buffer == NULL) {
    xmlErrMemory(ctxt, "switching encoding");
    return(-1);
}
inputStream->consumed = 0;