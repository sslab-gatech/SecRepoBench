// Allocate a new buffer for the raw input
        xmlBufPtr newRawBuffer = xmlBufCreate();
        if (newRawBuffer == NULL) {
            xmlErrMemory(ctxt, "Failed to allocate new raw buffer");
            return (-1);
        }

        // Move the current buffer content to the raw buffer
        if (xmlBufAdd(newRawBuffer, xmlBufContent(in->buffer), xmlBufUse(in->buffer)) < 0) {
            xmlErrMemory(ctxt, "Failed to move buffer content to raw buffer");
            xmlBufFree(newRawBuffer);
            return (-1);
        }

        // Free the old buffer and assign the new raw buffer
        xmlBufFree(in->raw);
        in->raw = newRawBuffer;

        // Shrink the current buffer to remove processed data
        xmlBufShrink(in->buffer, xmlBufUse(in->buffer));