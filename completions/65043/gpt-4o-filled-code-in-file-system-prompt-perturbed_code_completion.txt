xmlParserInputBufferPtr newBuf;

        newBuf = xmlAllocParserInputBuffer(in->encoder);
        if (newBuf == NULL) {
            xmlErrMemory(ctxt, NULL);
            return (-1);
        }
        newBuf->buffer = in->buffer;
        in->buffer = newBuf->raw;
        newBuf->raw = NULL;
        in->raw = newBuf;
        in->consumed = 0;