xmlParserInputBufferPtr newBuffer = xmlAllocInputBuffer(handler);
        if (newBuffer == NULL) {
            xmlErrMemory(ctxt, NULL);
            return (-1);
        }
        newBuffer->encoder = handler;
        newBuffer->buffer = in->buffer; // Move the current buffer to the new buffer
        in->buffer = newBuffer; // Update the input buffer to the new buffer
        in->buffer->use = 0; // Reset the use count for the new buffer
        in->buffer->size = 0; // Reset the size for the new buffer