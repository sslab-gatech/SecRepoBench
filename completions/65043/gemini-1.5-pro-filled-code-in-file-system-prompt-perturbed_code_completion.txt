xmlParserInputBufferPtr raw;

        raw = xmlAllocParserInputBuffer(in->encoder);
        if (raw == NULL) {
            xmlCharEncCloseFunc(handler);
            return (-1);
        }
	raw->buffer = in->buffer;
        in->buffer = xmlAllocParserInputBuffer(handler);
        if (in->buffer == NULL) {
	    xmlFreeParserInputBuffer(raw);
            xmlCharEncCloseFunc(handler);
            return (-1);
        }
	in->raw = raw;
        in->compressed = 0;
	inputStream->converted = 0;
	in->rawconsumed = (unsigned long)(inputStream->end - inputStream->cur);