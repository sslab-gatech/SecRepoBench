// <MASK>
xmlParserInputBufferGrow(ctxt->input->buf, INPUT_CHUNK);
xmlBufUpdateInput(ctxt->input->buf->buffer, ctxt->input, curBase);

if (ret < 0) {
    xmlFatalErr(ctxt, buf->error, NULL);
} else if (ret == 0) {
    xmlParserGrow(ctxt);
    if (ctxt->input->cur >= ctxt->input->end) {
        *len = 0;
    } else {
        *len = 1;
        xmlParserGrow(ctxt);
    }
}