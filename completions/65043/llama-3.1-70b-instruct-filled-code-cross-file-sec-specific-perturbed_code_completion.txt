// Create a new input buffer and assign it to the current buffer pointer.
xmlParserInputBufferPtr newBuf = xmlParserInputBufferCreate(NULL, NULL, NULL, NULL, NULL, NULL);
in->buffer = newBuf;

// Shrink the existing input buffer to remove processed data.
xmlBufShrink(in->raw, in->raw->use);

// Move the current buffer to the raw buffer pointer.
in->raw = in->buffer;

// Update the number of processed bytes in the input structure.
inputStream->consumed += in->buffer->consumed;