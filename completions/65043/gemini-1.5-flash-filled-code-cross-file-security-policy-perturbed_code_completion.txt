xmlParserInputBufferPtr newBuf = xmlParserInputBufferCreate();
        if (newBuf == NULL) {
            xmlErrMemory(ctxt, NULL);
            return (-1);
        }
        xmlParserInputBufferPtr tmp = in;
        in = newBuf;
        in->raw = tmp->raw;
        in->buffer = xmlBufCreate();
        if (in->buffer == NULL) {
            xmlParserInputBufferFree(in);
            xmlErrMemory(ctxt, NULL);
            return (-1);
        }
        inputStream->buf = in;
        inputStream->cur = in->buffer->buffer;
        inputStream->base = in->buffer->buffer;
        inputStream->consumed = 0;
        tmp->raw = NULL;
        xmlParserInputBufferFree(tmp);