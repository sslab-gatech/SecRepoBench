// <MASK>
if (nbchars == XML_ENC_ERR_MEMORY) {
    xmlErrMemory(ctxt, NULL);
} else if (nbchars < 0) {
    xmlErrInternal(ctxt,
                   "switching encoding: encoder error\n",
                   NULL);
    xmlHaltParser(ctxt);
    return (-1);
}
// </MASK>