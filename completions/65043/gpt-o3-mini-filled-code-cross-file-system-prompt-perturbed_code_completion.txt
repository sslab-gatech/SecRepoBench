{
    xmlBufPtr tmp = in->buffer;
    in->buffer = xmlBufCreate();
    if (in->buffer == NULL) {
        xmlErrMemory(ctxt, "switching encoding");
        return(-1);
    }
    in->raw = tmp;
    inputStream->consumed += tmp->use;
    xmlBufShrink(tmp, tmp->use);
}