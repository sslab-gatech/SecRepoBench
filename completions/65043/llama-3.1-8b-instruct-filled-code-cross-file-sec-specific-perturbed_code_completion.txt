// Create a new input buffer and assign it to the current buffer pointer.
// Shrink the existing input buffer to remove processed data.
// Move the current buffer to the raw buffer pointer.
// Update the number of processed bytes in the input structure.
xmlBufferPtr newBuffer = xmlBufferCreate();
xmlBufferPtr oldBuffer = in->buffer;
in->buffer = newBuffer;
xmlBufferShrink(oldBuffer, in->pos);
xmlBufferMove(oldBuffer, 0, in->pos);
in->pos = 0;
xmlBufResetInput(in->buffer, inputStream);