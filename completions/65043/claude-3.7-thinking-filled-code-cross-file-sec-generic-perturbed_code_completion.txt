xmlBufPtr temp;

// Create a new input buffer and assign it to the current buffer pointer
temp = xmlBufCreate();
if (temp == NULL) {
    xmlErrMemory(ctxt, NULL);
    return (-1);
}

// Move the current buffer to the raw buffer pointer
if (in->raw != NULL)
    xmlBufFree(in->raw);
in->raw = in->buffer;
in->buffer = temp;

// Update the number of processed bytes in the input structure
inputStream->consumed = 0;