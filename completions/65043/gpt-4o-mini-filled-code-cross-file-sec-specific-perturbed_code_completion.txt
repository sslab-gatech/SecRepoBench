xmlParserInputBufferPtr newBuffer = xmlAllocInputBuffer(handler);
        if (newBuffer == NULL) {
            xmlErrMemory(ctxt, NULL);
            return (-1);
        }
        newBuffer->encoder = handler;
        newBuffer->buffer = in->buffer; // Assign the existing buffer to the new buffer
        in->buffer = newBuffer; // Update the input buffer to the new buffer
        in->raw = in->buffer; // Move the current buffer to the raw buffer pointer
        in->processedBytes = 0; // Reset the number of processed bytes