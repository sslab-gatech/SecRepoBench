xmlParserInputBufferPtr raw;

        raw = in->buffer;
        in->buffer = xmlAllocParserInputBuffer(in->encoder);
        if (in->buffer == NULL) {
            xmlCharEncCloseFunc(handler);
            in->buffer = raw;
            return(-1);
        }
        in->buffer->raw = raw;
        in->base = xmlBufContent(in->buffer->buffer);
        in->cur = in->base;
        in->end = in->base;
        inputStream->consumed += (in->raw->end - in->raw->cur);