// <MASK>
  GetAffineMatrix(&affine);
  (void) CopyMagickString(primitive_name,draw_info->primitive,MagickPathExtent);
  (void) CopyMagickString(geometry,draw_info->geometry,MagickPathExtent);
  token=AcquireString(geometry);
  q=token;
  for ( ; *q!= '\0'; )
  {
    GetNextToken(q,&q,MagickPathExtent,primitive);
    if (*primitive == '\0')
      break;
    if (*primitive == '#')
      {
        if (image->debug!= MagickFalse)
          (void) LogMagickEvent(DrawEvent,GetMagickModule(),
            "  comment: %s",primitive+1);
        continue;
      }
    if (LocaleCompare("affine",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        affine.sx=StringToDouble(token,&next_token);
        GetNextToken(q,&q,MagickPathExtent,token);
        if (*token == ',')
          GetNextToken(q,&q,MagickPathExtent,token);
        affine.rx=StringToDouble(token,&next_token);
        GetNextToken(q,&q,MagickPathExtent,token);
        if (*token == ',')
          GetNextToken(q,&q,MagickPathExtent,token);
        affine.ry=StringToDouble(token,&next_token);
        GetNextToken(q,&q,MagickPathExtent,token);
        if (*token == ',')
          GetNextToken(q,&q,MagickPathExtent,token);
        affine.sy=StringToDouble(token,&next_token);
        GetNextToken(q,&q,MagickPathExtent,token);
        if (*token == ',')
          GetNextToken(q,&q,MagickPathExtent,token);
        affine.tx=StringToDouble(token,&next_token);
        GetNextToken(q,&q,MagickPathExtent,token);
        if (*token == ',')
          GetNextToken(q,&q,MagickPathExtent,token);
        affine.ty=StringToDouble(token,&next_token);
        if (image->debug!= MagickFalse)
          (void) LogMagickEvent(DrawEvent,GetMagickModule(),
            "  affine: sx = %g, rx = %g, ry = %g, sy = %g, tx = %g, ty = %g",
            affine.sx,affine.rx,affine.ry,affine.sy,affine.tx,affine.ty);
        continue;
      }
    if (LocaleCompare("alpha",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "alpha(%s)",token);
        (void) DrawAlphaPrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("arc",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "arc(%s)",token);
        (void) DrawArcPrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("bezier",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "bezier(%s)",token);
        (void) DrawBezierPrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("circle",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "circle(%s)",token);
        (void) DrawCirclePrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("color",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "color(%s)",token);
        (void) DrawColorPrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("decorate",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "decorate(%s)",token);
        (void) DrawDecoratePrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("ellipse",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "ellipse(%s)",token);
        (void) DrawEllipsePrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("fill",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "fill(%s)",token);
        (void) DrawFillPrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("image",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "image(%s)",token);
        (void) DrawImagePrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("line",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "line(%s)",token);
        (void) DrawLinePrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("matte",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "matte(%s)",token);
        (void) DrawMattePrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("point",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "point(%s)",token);
        (void) DrawPointPrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("polygon",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "polygon(%s)",token);
        (void) DrawPolygonPrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("polyline",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "polyline(%s)",token);
        (void) DrawPolylinePrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("pop",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "pop(%s)",token);
        (void) DrawPopPrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("push",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "push(%s)",token);
        (void) DrawPushPrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("rectangle",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "rectangle(%s)",token);
        (void) DrawRectanglePrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("roundRectangle",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "roundRectangle(%s)",token);
        (void) DrawRoundRectanglePrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("rotate",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "rotate(%s)",token);
        (void) DrawRotatePrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("scale",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "scale(%s)",token);
        (void) DrawScalePrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("skewX",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "skewX(%s)",token);
        (void) DrawSkewXPrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("skewY",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "skewY(%s)",token);
        (void) DrawSkewYPrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("text",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "text(%s)",token);
        (void) DrawTextPrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("translate",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "translate(%s)",token);
        (void) DrawTranslatePrimitive(image,draw_info,pattern,exception);
        continue;
      }
    if (LocaleCompare("viewbox",primitive) == 0)
      {
        GetNextToken(q,&q,MagickPathExtent,token);
        (void) FormatLocaleString(pattern,MagickPathExtent,
          "viewbox(%s)",token);
        (void) DrawViewboxPrimitive(image,draw_info,pattern,exception);
        continue;
      }
    status=MagickFalse;
    break;
  }
  if (status == MagickFalse)
    ThrowBinaryException(DrawError,"NonconformingDrawingPrimitiveDefinition",
      primitive_name);