if (image->debug != MagickFalse)
  (void) LogMagickEvent(DrawEvent,GetMagickModule(),"begin draw-image");
/*
  Allocate graphic context memory.
*/
graphic_context=(DrawInfo **) AcquireQuantumMemory((size_t) MaxGraphicContexts,
  sizeof(*graphic_context));
if (graphic_context == (DrawInfo **) NULL)
  ThrowBinaryException(ResourceLimitError,"MemoryAllocationFailed",
    primitive_name);
(void) memset(graphic_context,0,(size_t) MaxGraphicContexts*
  sizeof(*graphic_context));
for (n=0; n < MaxGraphicContexts; n++)
  graphic_context[n]=AcquireDrawInfo();
n=0;
graphic_context[n]=CloneDrawInfo((ImageInfo *) NULL,draw_info);
primitive=(char *) AcquireString(draw_info->primitive);
primitive_info=(PrimitiveInfo *) AcquireQuantumMemory((size_t) BezierQuantum,
  sizeof(*primitive_info));
if (primitive_info == (PrimitiveInfo *) NULL)
  ThrowBinaryException(ResourceLimitError,"MemoryAllocationFailed",
    primitive_name);
stops=(StopInfo *) AcquireQuantumMemory((size_t) BezierQuantum,
  sizeof(*stops));
if (stops == (StopInfo *) NULL)
  {
    primitive_info=(PrimitiveInfo *) RelinquishMagickMemory(primitive_info);
    ThrowBinaryException(ResourceLimitError,"MemoryAllocationFailed",
      primitive_name);
  }
token=(char *) NULL;
status=MagickTrue;
GetAffineMatrix(&affine);
GetAffineMatrix(&current);
(void) memcpy(&current,&affine,sizeof(current));