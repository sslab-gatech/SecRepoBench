if (b->content_type == MAPPED_SLICE) {
    // Extract reference sequence ID, start, and span from the slice header.
    // This includes special handling for the LARGE_POS macro, which uses
    // larger data types for positions and spans. If LARGE_POS is defined,
    // use safe_ltf8_get to extract 64-bit values for ref_seq_start and
    // ref_seq_span; otherwise, use safe_itf8_get for standard 32-bit values.
    if (LARGE_POS) {
        int64_t ref_seq_start;
        int64_t ref_seq_span;
        if (safe_ltf8_get((char *)cp, (char *)cp_end, &ref_seq_start) < 0 ||
            safe_ltf8_get((char *)cp, (char *)cp_end, &ref_seq_span) < 0) {
            free(slice_header->block_content_ids);
            free(slice_header);
            return NULL;
        }
        slice_header->ref_seq_id = ref_seq_start;
        slice_header->ref_seq_start = ref_seq_start;
        slice_header->ref_seq_span = ref_seq_span;
    } else {
        int32_t ref_seq_start;
        int32_t ref_seq_span;
        if (safe_itf8_get((char *)cp, (char *)cp_end, &ref_seq_start) < 0 ||
            safe_itf8_get((char *)cp, (char *)cp_end, &ref_seq_span) < 0) {
            free(slice_header->block_content_ids);
            free(slice_header);
            return NULL;
        }
        slice_header->ref_seq_id = ref_seq_start;
        slice_header->ref_seq_start = ref_seq_start;
        slice_header->ref_seq_span = ref_seq_span;
    }
}