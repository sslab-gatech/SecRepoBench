size_t len = 0;
while (len < 128 && len < *length && curin[len] != '\0')
    suffix[len++] = curin[len];
if (len == 128 && curin[len] != '\0') return EXR_ERR_CORRUPT_CHUNK;
if (len >= *length) return EXR_ERR_CORRUPT_CHUNK;
suffix[len++] = '\0';

mem = (char*)alloc_fn(len);
if (!mem) return EXR_ERR_OUT_OF_MEMORY;
memcpy(mem, suffix, len);
out->_suffix = mem;
out->_is_allocated = 1;