size_t maxStrLen = 128;
for (len = 0; len < maxStrLen && len < *length; ++len)
{
    suffix[len] = curin[len];
    if (curin[len] == '\0')
    {
        break;
    }
}

// Check if we found a NULL terminator
if (len == maxStrLen || len == *length)
{
    // If we didn't find a NULL terminator within maxStrLen or
    // we reached the end of the input data, it's an error
    return EXR_ERR_CORRUPT_CHUNK;
}

// Increment len to include the NULL terminator
len += 1;

// Allocate memory for the string
mem = (char*) alloc_fn(len);
if (!mem)
{
    return EXR_ERR_OUT_OF_MEMORY;
}

// Copy the string to the allocated memory
memcpy(mem, suffix, len);

// Store the pointer in the output structure
out->_suffix = mem;

// Mark the string as dynamically allocated
out->_allocated = DWA_CLASSIFIER_TRUE;