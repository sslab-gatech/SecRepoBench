len = 0;
while (curin[len] != '\0' && len < sizeof(suffix) - 1)
{
    suffix[len] = curin[len];
    len++;
}
suffix[len] = '\0';

if (len == sizeof(suffix) - 1 && curin[len] != '\0')
{
    return EXR_ERR_CORRUPT_CHUNK; // String exceeds maximum length
}

mem = (char*)alloc_fn(len + 1);
if (!mem) return EXR_ERR_MEMORY_ALLOCATION_FAILED;

memcpy(mem, suffix, len + 1);

out->_suffix = mem;
out->_suffixAllocated = DWA_CLASSIFIER_TRUE;