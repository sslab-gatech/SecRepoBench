// Ensure the length of the string does not exceed the buffer size
    while (len < 128 && len < *length && curin[len] != '\0') {
        suffix[len] = (char) curin[len];
        len++;
    }

    // Check if the string was properly null-terminated within the buffer
    if (len == 128 || len >= *length || curin[len] != '\0') {
        return EXR_ERR_CORRUPT_CHUNK;
    }

    // Increment len to account for the null terminator
    len++;

    // Allocate memory for the string including the null terminator
    mem = (char*) alloc_fn(len);
    if (!mem) return EXR_ERR_OUT_OF_MEMORY;

    // Copy the string into the allocated memory
    memcpy(mem, suffix, len);

    // Store the pointer in the output structure and mark it as dynamically allocated
    out->_suffix = mem;
    out->_ownsSuffix = true;