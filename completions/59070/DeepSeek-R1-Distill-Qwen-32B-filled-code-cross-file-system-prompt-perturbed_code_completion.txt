// Read the string into the buffer
    size_t i = 0;
    do {
        if (i >= 128) return EXR_ERR_CORRUPT_CHUNK; // Exceeds max allowed length
        suffix[i] = curin[i];
    } while (suffix[i++] != '\0');

    len = i; // Length includes null terminator

    // Allocate memory for the string
    char* mem = (char*) alloc_fn(len);
    if (!mem) return EXR_ERR_OUT_OF_MEMORY;

    // Copy the string and update the output
    memcpy(mem, suffix, len);
    out->_suffix = mem;
    out->_suffixMalloced = true;

    curin += len;