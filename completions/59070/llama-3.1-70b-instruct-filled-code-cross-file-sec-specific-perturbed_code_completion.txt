// Extract a null-terminated string from the input data into a buffer, checking for maximum length.
len = 0;
while (len < 128 && *curin!= '\0') {
    suffix[len++] = *curin++;
}

// Check if the string is too long.
if (len == 128 && *curin!= '\0') return EXR_ERR_CORRUPT_CHUNK;

// Allocate memory using the provided allocation function to store the string, including its null terminator.
mem = (char*) alloc_fn(len + 1);
if (mem == NULL) return EXR_ERR_NO_MEMORY;

// Copy the string into the newly allocated memory and store the pointer in the output structure.
memcpy(mem, suffix, len + 1);
out->_suffix = mem;

// Mark the string in the output structure as dynamically allocated.
out->_suffixAllocated = true;