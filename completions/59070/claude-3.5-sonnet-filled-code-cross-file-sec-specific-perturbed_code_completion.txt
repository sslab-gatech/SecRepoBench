size_t i;
for (i = 0; i < 128 && i < *length; ++i) {
    if (curin[i] == '\0') break;
    suffix[i] = curin[i];
}
if (i == 128 || i == *length) return EXR_ERR_CORRUPT_CHUNK;
len = i + 1;

mem = (char*)alloc_fn(len);
if (!mem) return EXR_ERR_OUT_OF_MEMORY;

memcpy(mem, suffix, len);
out->_suffix = mem;
out->_suffixIsAllocated = 1;