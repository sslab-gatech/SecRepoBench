for (size_t i = 0; i < 128 && i < *length; ++i) {
    if (curin[i] == '\0') {
        len = i + 1;
        break;
    }
    suffix[i] = curin[i];
}

if (len == 0 || len > 128) return EXR_ERR_CORRUPT_CHUNK;

mem = (char*)alloc_fn(len);
if (!mem) return EXR_ERR_OUT_OF_MEMORY;

memcpy(mem, suffix, len);
out->_suffix = mem;
out->_stringStatic = DWA_CLASSIFIER_FALSE;