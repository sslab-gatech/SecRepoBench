size_t suffix_len = 0;

// Determine the length of the null-terminated string in the input data
while (suffix_len < 128 && curin[suffix_len] != '\0') {
    suffix_len++;
}

if (suffix_len >= 128 || curin[suffix_len] != '\0') {
    return EXR_ERR_CORRUPT_CHUNK;
}

// Copy the string into the local buffer
memcpy(suffix, curin, suffix_len);
suffix[suffix_len] = '\0'; // Ensure null-termination

// Allocate memory for the string using the provided allocator
mem = (char*) alloc_fn(suffix_len + 1);
if (!mem) {
    return EXR_ERR_MEMORY_ALLOCATION_FAILED;
}

// Copy the string into the newly allocated memory
memcpy(mem, suffix, suffix_len + 1);

// Store the pointer and mark it as dynamically allocated
out->_suffix = mem;
out->_suffixIsAllocated = true;

len = suffix_len + 1; // Update length to account for the string and null terminator