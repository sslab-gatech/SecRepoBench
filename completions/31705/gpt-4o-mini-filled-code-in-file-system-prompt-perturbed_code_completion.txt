*needs_free = true;
    *chunk = malloc(lazy_chunk_bytes);
    if (*chunk == NULL) {
        return BLOSC2_ERROR_MEMORY_ALLOC;
    }

    // Read the chunk data
    size_t rbytes = fread(*chunk, 1, lazy_chunk_bytes, fp);
    if (rbytes != lazy_chunk_bytes) {
        BLOSC_TRACE_ERROR("Cannot read the lazy chunk from the frame.");
        free(*chunk);
        return BLOSC2_ERROR_FILE_READ;
    }

    // Set the chunk as lazy
    uint8_t* blosc2_flags = *chunk + BLOSC2_CHUNK_BLOSC2_FLAGS;
    *blosc2_flags |= 0x08U;  // Mark as lazy

    return lazy_chunk_bytes;