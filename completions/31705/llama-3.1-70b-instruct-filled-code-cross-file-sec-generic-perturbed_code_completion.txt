if (fp!= NULL) {
  fclose(fp);
}
if (rc < 0) {
  if (*needs_free) {
    free(*chunk);
  }
  return rc;
} else {
  return lazy_chunk_bytes;
}