if (uc + (length - 1) > ue) {
	DPRINTF("Bad const: ", uc, *ucp);
	return 0;
}
for (size_t i = 1; i < length; i++) {
	if (uc[i - 1] != (unsigned char)str[i]) {
		DPRINTF("Bad const: ", uc, *ucp);
		return 0;
	}
}