if (uc + length > ue) {
    DPRINTF("Bad const: ", uc, *ucp);
    return 0;
}

for (; length > 0; length--, uc++) {
    if (*uc!= *str++) {
        DPRINTF("Bad const: ", uc, *ucp);
        return 0;
    }
}