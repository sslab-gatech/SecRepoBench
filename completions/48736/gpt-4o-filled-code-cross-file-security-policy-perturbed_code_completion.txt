if (ucp == NULL || *ucp >= ue) {
		DPRINTF("Bad const: ", uc, *ucp);
		return 0;
	}

	for (size_t i = 0; i < length; i++) {
		if (uc >= ue || *uc != (unsigned char)str[i]) {
			DPRINTF("Bad const: ", uc, *ucp);
			return 0;
		}
		uc++;
	}
	*ucp = uc;