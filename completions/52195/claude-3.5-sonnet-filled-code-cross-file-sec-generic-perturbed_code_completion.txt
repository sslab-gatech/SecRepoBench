if (striple && !checkedstriple) {
  // Adjust index to re-check the last character of the previous word
  i--;
  checkedstriple = 1;
}

rv = lookup(st.c_str() + i, st.size() - i);

while (rv) {
  if ((!rv->astr) ||
      ((compoundflag && TESTAFF(rv->astr, compoundflag, rv->alen)) ||
       (compoundend && TESTAFF(rv->astr, compoundend, rv->alen)))) {
    
    if (((cpdwordmax == -1) || (wordnum + 1 < cpdwordmax)) ||
        ((cpdmaxsyllable != 0) &&
         (numsyllable + get_syllable(std::string(HENTRY_WORD(rv), rv->blen)) <=
          cpdmaxsyllable))) {
      
      if (scpd == 0 || checkcpdtable[scpd - 1].cond2 == FLAG_NULL ||
          TESTAFF(rv->astr, checkcpdtable[scpd - 1].cond2, rv->alen)) {
        break;
      }
    }
  }
  rv = rv->next_homonym;
}