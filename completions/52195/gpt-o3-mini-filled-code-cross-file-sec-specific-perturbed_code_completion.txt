if (!checkedstriple && i + 2 < st.size() && st[i] == st[i+1] && st[i] == st[i+2]) {
    // Triple letter pattern detected: remove one duplicate to simplify compound formation.
    checkedstriple = 1;
    striple = 1;
    st.erase(i + 1, 1);  // safely remove one character
    len = st.size();
    setcminmax(&cmin, &cmax, st.c_str(), len);
    rv = lookup(st.c_str(), i);
}