// Check if the current substring is a valid compound word
            rv = lookup(st.substr(i).c_str(), st.size() - i);
            if (rv) {
              // Ensure the found entry is not marked as forbidden
              if (rv->astr && TESTAFF(rv->astr, forbiddenword, rv->alen)) {
                rv = NULL;
              } else {
                // Check if the entry has the necessary affix flags
                if (TESTAFF(rv->astr, compoundflag, rv->alen) ||
                    TESTAFF(rv->astr, compoundend, rv->alen)) {
                  // Valid compound word found, return the entry
                  return rv;
                }
              }
            }