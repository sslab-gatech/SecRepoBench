if (checkcompoundtriple && !striple && !checkedstriple && i >= 2 &&
    st[i - 1] == st[i - 2] && (i + 1 >= st.size() || st[i] != st[i - 1])) {
    i++;
    striple = 1;
    checkedstriple = 1;
    rv = lookup(st.c_str(), i);
    while (rv && !hu_mov_rule &&
           ((needaffix && TESTAFF(rv->astr, needaffix, rv->alen)) ||
            !((compoundflag && !compound_words && !onlycpdrule &&
               TESTAFF(rv->astr, compoundflag, rv->alen)) ||
              (compoundbegin && !wordnum && !onlycpdrule &&
               TESTAFF(rv->astr, compoundbegin, rv->alen)) ||
              (compoundmiddle && wordnum && !compound_words && !onlycpdrule &&
               TESTAFF(rv->astr, compoundmiddle, rv->alen)) ||
              (!defcpdtable.empty() && onlycpdrule &&
               defcpd_check(&compound_words, wnum, rv, rwords, 0))))) {
        rv = rv->next_homonym;
    }
}