// Check for compound word formation by looking up the current substring
            rv = lookup(st.c_str() + i, st.size() - i);
            if (rv) {
              // Check if the found entry has the necessary flags for compound formation
              if (TESTAFF(rv->astr, compoundflag, rv->alen) ||
                  TESTAFF(rv->astr, compoundbegin, rv->alen) ||
                  TESTAFF(rv->astr, compoundmiddle, rv->alen)) {
                // If the entry is valid, proceed to check for further compound conditions
                if (compound_words && compound_words[wnum + 1]) {
                  // If the next compound word is already found, return the first entry
                  return rv_first;
                }
                // Continue checking for additional compound conditions
                // (e.g., checking for forbidden words, affix conditions, etc.)
                // ...
              }
            }