// Handle simplified triple letter checking. If "simplifiedtriple"
        // and "checkcompoundtriple" are enabled, look for a triple-letter
        // pattern around the current position. If found, remove one of the
        // repeated letters to see whether that helps form a valid compound.
        // We set "striple" so the outer loop rechecks the modified string,
        // and if it works out, "checkedstriple" will be set to stop further
        // attempts on this segment.

        if (simplifiedtriple && checkcompoundtriple && !checkedstriple
            && scpd == 0 && !compound_words && (i > 1)
            // Check if we have at least a triple, like "fff", or the pattern
            // "f_f" repeated. The second condition ensures we don't read
            // beyond the string length when checking st[i+1].
            && (st[i - 1] == st[i])
            && (
                  ((st[i - 1] == st[i - 2]) && (i > 1))
                  || ((i + 1 < (int)st.size()) && (st[i - 1] == st[i + 1]))
               )
           ) {
          // Remove the current character to "collapse" the triple letter
          // into a double, then break so we can recheck the new string form.
          st.erase(i, 1);
          striple = 1;
          break;
        }