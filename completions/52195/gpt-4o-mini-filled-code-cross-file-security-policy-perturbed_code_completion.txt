if (i < st.size()) {
              rv = affix_check(st, i, st.size() - i, compoundflag, IN_CPD_END);
            }

            if (!rv && compoundend && !onlycpdrule) {
              if (i < st.size())
                rv = affix_check(st, i, st.size() - i, compoundend, IN_CPD_END);
            }

            if (!rv && !defcpdtable.empty() && compound_words) {
              if (i < st.size())
                rv = affix_check(st, i, st.size() - i, 0, IN_CPD_END);
              if (rv && defcpd_check(&compound_words, wnum + 1, rv, NULL, 1))
                return rv_first;
              rv = NULL;
            }