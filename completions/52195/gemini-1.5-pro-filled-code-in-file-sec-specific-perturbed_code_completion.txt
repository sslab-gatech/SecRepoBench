if (simplifiedtriple && scpd == 0 && !compound_words &&
                (i > 0) && (i + 1 < st.size()) && (st[i - 1] == st[i + 1]) &&
                !(((i > 1) && (st[i - 1] == st[i - 2])) ||
                  ((i + 2 < st.size()) && (st[i - 1] == st[i + 2])))) {
              striple = 1;
              checkedstriple = 1;
              st[i] = st[i - 1];
              i--;
              if (utf8) {
                for (; i > 0 && (st[i] & 0xc0) == 0x80; i--)
                  ;
              }
            }

            rv = lookup(word.c_str() + i, word.size() - i);  // perhaps without prefix

            // search homonym with compound flag
            while ((rv) && ((needaffix && TESTAFF(rv->astr, needaffix, rv->alen)) ||
                            !((compoundflag && !compound_words && !onlycpdrule &&
                               TESTAFF(rv->astr, compoundflag, rv->alen)) ||
                              (compoundend && !wordnum && !onlycpdrule &&
                               TESTAFF(rv->astr, compoundend, rv->alen)) ||
                              (!defcpdtable.empty() && onlycpdrule &&
                               ((!compound_words && !wordnum &&
                                 defcpd_check(&compound_words, wnum + 1, rv, rwords, 0)) ||
                                (compound_words &&
                                 defcpd_check(&compound_words, wnum + 1, rv, rwords, 0))))))) {
              rv = rv->next_homonym;
            }