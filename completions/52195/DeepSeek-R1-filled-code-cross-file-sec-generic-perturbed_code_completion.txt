if (checkcompoundtriple && !striple && !checkedstriple && i > 0 && 
                (st[i] == st[i-1]) && 
                ((i > 1 && st[i-2] == st[i]) || (i < st.size() - 1 && st[i+1] == st[i]))) {
                i++;
                striple = 1;
                checkedstriple = 0;
                rv = lookup(st.c_str() + i, st.size() - i);
                while (rv) {
                    if ((compoundflag && TESTAFF(rv->astr, compoundflag, rv->alen)) ||
                        (compoundend && TESTAFF(rv->astr, compoundend, rv->alen)) ||
                        (!defcpdtable.empty() && defcpd_check(&compound_words, wnum + 1, rv, NULL, 1))) {
                        break;
                    }
                    rv = rv->next_homonym;
                }
            } else {
                rv = lookup(st.c_str() + i, st.size() - i);
                while (rv) {
                    if ((compoundflag && TESTAFF(rv->astr, compoundflag, rv->alen)) ||
                        (compoundend && TESTAFF(rv->astr, compoundend, rv->alen)) ||
                        (!defcpdtable.empty() && defcpd_check(&compound_words, wnum + 1, rv, NULL, 1))) {
                        break;
                    }
                    rv = rv->next_homonym;
                }
            }