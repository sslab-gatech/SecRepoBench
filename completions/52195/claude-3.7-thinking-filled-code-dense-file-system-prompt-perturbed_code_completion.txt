if (checkcompoundtriple && !checkedstriple) {
  // check triple letters in the compound word
  if ((i > 1) && (word[i-1] == word[i]) && (word[i-1] == word[i-2])) {
    // Triple letters detected at position i-2, i-1, i
    checkedstriple = 1;
    striple = 1;
    i--; // go back to check the pattern again with adjusted index
    continue;
  } else if ((i < word.size() - 1) && (word[i-1] == word[i]) && (word[i-1] == word[i+1])) {
    // Triple letters detected at position i-1, i, i+1
    checkedstriple = 1;
    striple = 1;
    continue; // recheck with same index
  }
}

// Next word is a complete word
rv = lookup(word.c_str() + i, word.size() - i);  // lookup the word

// Search homonym with appropriate compound flags
while ((rv) && ((needaffix && TESTAFF(rv->astr, needaffix, rv->alen)) ||
       !((compoundflag && TESTAFF(rv->astr, compoundflag, rv->alen)) ||
         (compoundend && TESTAFF(rv->astr, compoundend, rv->alen)) ||
         (!defcpdtable.empty() && words &&
          defcpd_check(&words, wnum + 1, rv, NULL, 1))))) {
  rv = rv->next_homonym;
}