// Handle simplified triple letter checking
          if (checkcompoundtriple && scpd == 0 && !compound_words) {
            if ((i > 1 && word[i - 1] == word[i] && word[i - 1] == word[i - 2]) ||
                (i < word.size() - 1 && word[i - 1] == word[i] && word[i - 1] == word[i + 1])) {
              if (!checkedstriple) {
                striple = 1;
                checkedstriple = 1;
                continue;
              }
            }
          }

          // Perform a lookup for the current substring starting from the adjusted index
          rv = lookup(st.c_str(), i);

          // Iterate over homonyms of the current entry to check for matching compound conditions
          while (rv) {
            if ((compoundflag && TESTAFF(rv->astr, compoundflag, rv->alen)) ||
                (compoundend && TESTAFF(rv->astr, compoundend, rv->alen))) {
              // Ensure the entry has the correct affix flags for compound formation
              if (scpd == 0 || checkcpdtable[scpd - 1].cond2 == FLAG_NULL ||
                  TESTAFF(rv->astr, checkcpdtable[scpd - 1].cond2, rv->alen)) {
                return rv_first;
              }
            }
            rv = rv->next_homonym;
          }