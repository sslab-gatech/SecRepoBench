if (striple && !checkedstriple) {
    // Check if we have a triple-letter sequence at the current index
    if ((i > 1) && (st[i] == st[i - 1]) && (st[i - 1] == st[i - 2])) {
        // Remove the middle character to simplify the triple sequence
        st.erase(i - 1, 1);
        // Adjust index so subsequent checks re-evaluate the now-shortened substring
        i--;
        // Optionally re-check the dictionary for the new substring
        rv = lookup(st.c_str(), i);
        while (rv) {
            // Ensure that any affix flags or compound conditions match
            if (
                //  e.g. compoundflag check or other validations go here
               ((compoundflag && TESTAFF(rv->astr, compoundflag, rv->alen)) ||
                (compoundend && TESTAFF(rv->astr, compoundend, rv->alen)))
            ) {
                break;
            }
            rv = rv->next_homonym;
        }
    }
    checkedstriple = 1;
}