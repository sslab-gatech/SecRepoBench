if (simplifiedtriple && scpd == 0 && !checkedstriple && !compound_words &&
    (i > 0) && (i + 1 < st.size()) && (st[i - 1] == st[i + 1]) &&
    (((i > 1) && (st[i - 1] == st[i - 2])) ||
     ((i + 2 < st.size()) && (st[i - 1] == st[i + 2])))) {
  checkedstriple = 1;
  striple = 1;
  i--;
}

rv = lookup(st.c_str() + i, st.size() - i);

while (rv && !hu_mov_rule &&
       ((needaffix && TESTAFF(rv->astr, needaffix, rv->alen)) ||
        !((compoundflag && !compound_words &&
           TESTAFF(rv->astr, compoundflag, rv->alen)) ||
          (compoundend && !compound_words &&
           TESTAFF(rv->astr, compoundend, rv->alen)) ||
          (!defcpdtable.empty() && compound_words &&
           defcpd_check(&compound_words, wnum + 1, rv, NULL, 1))))) {
  rv = rv->next_homonym;
}