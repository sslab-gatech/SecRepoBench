// <MASK>
// Allocate memory for the output string with space for the null terminator
out = flb_sds_create_size(len + 1);
if (!out) {
    return NULL;
}

// Set the last byte of the output string to the null terminator
out[len] = '\0';

// Check if the URI ends with a slash and set a flag accordingly
if (len > 0 && pathuri[len - 1] == '/') {
    end_slash = FLB_TRUE;
}
else {
    end_slash = FLB_FALSE;
}