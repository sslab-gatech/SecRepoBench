unsigned int tail_length = c->tail - init_tail;
    unsigned int final_table_position = c->length ();
    unsigned int num_records = obj_indices.length;

    // Update the length and record length fields
    c->set_length (final_table_position);
    this->length = final_table_position - initial_table_position;

    // Reverse the order of the written variation selector records
    hb_vector_t<hb_pair_t<unsigned, unsigned>> reversed_obj_indices;
    for (int i = num_records - 1; i >= 0; i--)
    {
      reversed_obj_indices.push (obj_indices[i]);
    }

    // Update the offsets in the variation records
    for (unsigned int i = 0; i < num_records; i++)
    {
      hb_pair_t<unsigned, unsigned> &pair = reversed_obj_indices[i];
      pair.first = c->length () - pair.first;
      pair.second = c->length () - pair.second;
    }