unsigned int tail_len = c->length () - initial_table_position;
    unsigned int num_records = obj_indices.length;

    c->set_length (initial_table_position);

    if (unlikely (!c->extend_min (sizeof (uint16_t)))) return;
    c->write_u16 (format);

    if (unlikely (!c->extend_min (sizeof (uint16_t)))) return;
    c->write_u16 (num_records);

    if (unlikely (!c->extend_min (sizeof (unsigned int)))) return;
    c->write_u32 (tail_len);

    c->set_tail (init_tail + tail_len);