unsigned int tail_length = c->tail - init_tail;
    unsigned int final_table_position = c->length ();
    unsigned int table_length = final_table_position - initial_table_position;

    // Reverse the order of the written variation selector records
    hb_vector_t<hb_pair_t<unsigned, unsigned>> reversed_obj_indices;
    for (int i = obj_indices.len - 1; i >= 0; i--)
    {
      reversed_obj_indices.push (obj_indices[i]);
    }

    // Update the length and record length fields with the appropriate values
    // based on the current context length and offsets.
    this->length = table_length;
    this->record_length = obj_indices.len;

    // Adjust the offsets in the variation records to reflect the new table position
    for (unsigned int i = 0; i < reversed_obj_indices.len; i++)
    {
      reversed_obj_indices[i].first += initial_table_position;
      reversed_obj_indices[i].second += initial_table_position;
    }

    // Now that records are in the right order, we can set up the offsets.
    _add_links_to_variation_records(c, reversed_obj_indices);