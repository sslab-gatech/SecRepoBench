for (; p < end && isdigit(*p); p++) {
    int digit = *p - '0';
    if (nextnumber > INT_MAX / 10 || (nextnumber == INT_MAX / 10 && digit > 7)) {
      mrb_raise(mrb, E_RUNTIME_ERROR, "Integer too large");
    }
    nextnumber = nextnumber * 10 + digit;
  }