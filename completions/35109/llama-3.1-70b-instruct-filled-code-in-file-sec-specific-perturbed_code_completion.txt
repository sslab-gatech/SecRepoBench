while (isdigit(*p)) {
  nextnumber = nextnumber * 10 + (*p - '0');
  p++;
}
if (nextnumber > INT_MAX) {
  mrb_raise(mrb, E_ARGUMENT_ERROR, "value too big");
}