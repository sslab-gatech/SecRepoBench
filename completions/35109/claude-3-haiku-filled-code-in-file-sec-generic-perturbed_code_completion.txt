*valp = (int)nextnumber;
if (p == end || !isdigit((unsigned char)*p)) {
  return p;
}
do {
  nextnumber = nextnumber * 10 + (*p - '0');
  p++;
} while (p < end && isdigit((unsigned char)*p));
return p;