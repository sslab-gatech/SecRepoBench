while (p < end && ISDIGIT(*p)) {
    nextnumber = 10 * nextnumber + (*p - '0');
    if (nextnumber >= MRB_INT_MAX / 10 && (p + 1 < end && ISDIGIT(p[1]) || *p - '0' > MRB_INT_MAX % 10)) {
      // Number too large to fit
      mrb_raise(mrb, E_ARGUMENT_ERROR, "format number too big");


    } else if (nextnumber <= MRB_INT_MIN / 10 && (p + 1 < end && ISDIGIT(p[1]) || *p - '0' > -(MRB_INT_MIN % 10))) {
      mrb_raise(mrb, E_ARGUMENT_ERROR, "format number too small");
    }

    p++;
  }
  if (p == end) {
      mrb_raise(mrb, E_ARGUMENT_ERROR, "malformed format string - %*[0-9]");
  }