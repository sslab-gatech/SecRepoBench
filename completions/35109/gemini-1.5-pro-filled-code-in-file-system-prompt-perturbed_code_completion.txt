for (; p < end && ISDIGIT(*p); p++) {
    int next_digit = *p - '0';
    if (MRB_INT_MAX / 10 < nextnumber || MRB_INT_MAX - next_digit < (nextnumber * 10)) {
      mrb_raise(mrb, E_ARGUMENT_ERROR, #val " too big 2");
    }
    nextnumber = nextnumber * 10 + next_digit;
  }
  if (p >= end) {
    mrb_raise(mrb, E_ARGUMENT_ERROR, "malformed format string - %*[0-9]");
  }