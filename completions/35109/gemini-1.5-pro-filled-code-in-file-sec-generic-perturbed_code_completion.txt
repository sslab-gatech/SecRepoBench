for (; p < end && ISDIGIT(*p); p++) {
    if (nextnumber > MRB_INT_MAX / 10) {
      mrb_raise(mrb, E_ARGUMENT_ERROR, #val " too big 2");
    }
    nextnumber *= 10;
    if (nextnumber > MRB_INT_MAX - (*p - '0')) {
      mrb_raise(mrb, E_ARGUMENT_ERROR, #val " too big 3");
    }
    nextnumber += *p - '0';
  }
  if (p >= end) {
    mrb_raise(mrb, E_ARGUMENT_ERROR, "malformed format string - %*[0-9]");
  }