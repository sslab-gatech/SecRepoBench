while (p < end && isdigit((unsigned char)*p)) {
    int digit = *p - '0';
    if (nextnumber > (INT_MAX - digit) / 10) {
        // Overflow detected, set valp to a sentinel value or handle error
        *valp = INT_MAX; // or some error code
        return p;
    }
    nextnumber = nextnumber * 10 + digit;
    p++;
}