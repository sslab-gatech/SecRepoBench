{
    if (child->type == RE_NODE_ANY && child->flags & RE_NODE_FLAG_NON_GREEDY &&
        child->range_max - child->range_min > THRESHOLD)
    {
        *min_gap = child->range_min;
        *maximumgap = child->range_max;

        // Create a new AST for the remainder
        RE_AST* new_ast = (RE_AST*) yr_malloc(sizeof(RE_AST));
        if (new_ast == NULL)
            return ERROR_INSUFFICIENT_MEMORY;

        new_ast->root_node = child->next_sibling;
        if (new_ast->root_node != NULL)
        {
            new_ast->root_node->prev_sibling = NULL;
        }

        // Update current AST to separate nodes before the split point
        child->next_sibling = NULL;
        re_ast->root_node->children_tail = child;

        *remainder_re_ast = new_ast;

        return ERROR_SUCCESS;
    }
}