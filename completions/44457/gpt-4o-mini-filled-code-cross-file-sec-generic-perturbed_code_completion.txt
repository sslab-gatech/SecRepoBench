if (ptern->addrQuery == NULL_ADDRESS) {
    (void) ThrowMagickException(
      fxinfo->exception, GetMagickModule(), OptionError,
      "Missing query in ternary operator", "at '%s'",
      SetShortExp(fxinfo));
    return MagickFalse;
  }

  if (ptern->addrColon == NULL_ADDRESS) {
    // Handle the case for the query operator
    ptern->addrQuery = fxinfo->usedElements;
    // Add addressing element for the query result
    (void) AddAddressingElement(fxinfo, rConditional, ptern->addrQuery);
  } else {
    // Handle the case for the colon operator
    if (ptern->addrQuery == NULL_ADDRESS) {
      (void) ThrowMagickException(
        fxinfo->exception, GetMagickModule(), OptionError,
        "Colon operator without preceding query", "at '%s'",
        SetShortExp(fxinfo));
      return MagickFalse;
    }
    ptern->addrColon = fxinfo->usedElements;
    // Mark the current element to push a result
    (void) AddAddressingElement(fxinfo, rResult, ptern->addrColon);
  }