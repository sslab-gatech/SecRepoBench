if (*pfx->pex == '?') {
    pfx->pex++;
    if (ternary->addrQuery != NULL_ADDRESS) {
      ThrowMagickException(pfx->exception, GetMagickModule(), OptionError,
                           "Ternary operator already has a query set", NULL);
      return MagickFalse;
    }
    ternary->addrQuery = pfx->usedElements;
    if (!AddAddressingElement(pfx, rConditional, ternary->addrQuery)) {
      return MagickFalse;
    }
  } else if (*pfx->pex == ':') {
    pfx->pex++;
    if (ternary->addrQuery == NULL_ADDRESS) {
      ThrowMagickException(pfx->exception, GetMagickModule(), OptionError,
                           "Ternary operator missing query set", NULL);
      return MagickFalse;
    }
    if (ternary->addrColon != NULL_ADDRESS) {
      ThrowMagickException(pfx->exception, GetMagickModule(), OptionError,
                           "Ternary operator already has a colon set", NULL);
      return MagickFalse;
    }
    ternary->addrColon = pfx->usedElements;
    ElementT *pel = &pfx->Elements[pfx->usedElements - 1];
    pel->DoPush = MagickTrue;
    if (!AddAddressingElement(pfx, rControl, ternary->addrColon)) {
      return MagickFalse;
    }
  } else {
    ThrowMagickException(pfx->exception, GetMagickModule(), OptionError,
                         "Expected '?' or ':'", NULL);
    return MagickFalse;
  }