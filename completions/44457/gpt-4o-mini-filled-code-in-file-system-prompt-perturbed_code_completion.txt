if (pfx->OperatorStack[pfx->usedOprStack-1] == rGoto) {
    if (tern.addrQuery != NULL_ADDRESS) {
      pfx->Elements[tern.addrQuery].EleNdx = pfx->usedElements;
      tern.addrQuery = NULL_ADDRESS;
    } else {
      (void) ThrowMagickException (
        pfx->exception, GetMagickModule(), OptionError,
        "Ternary operator '?' without corresponding ':'", "'%s'",
        pfx->token);
      return MagickFalse;
    }
  } else if (pfx->OperatorStack[pfx->usedOprStack-1] == rIfZeroGoto) {
    if (tern.addrQuery != NULL_ADDRESS) {
      pfx->Elements[tern.addrQuery].EleNdx = pfx->usedElements;
      tern.addrQuery = NULL_ADDRESS;
    } else {
      (void) ThrowMagickException (
        pfx->exception, GetMagickModule(), OptionError,
        "Ternary operator '?' without corresponding ':'", "'%s'",
        pfx->token);
      return MagickFalse;
    }
  } else if (pfx->OperatorStack[pfx->usedOprStack-1] == rIfNotZeroGoto) {
    if (tern.addrColon != NULL_ADDRESS) {
      pfx->Elements[tern.addrColon].EleNdx = pfx->usedElements;
      tern.addrColon = NULL_ADDRESS;
    } else {
      (void) ThrowMagickException (
        pfx->exception, GetMagickModule(), OptionError,
        "Ternary operator ':' without corresponding '?'", "'%s'",
        pfx->token);
      return MagickFalse;
    }
  }