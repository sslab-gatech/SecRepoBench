static MagickBooleanType inline ProcessTernaryOpr (FxInfo *fxinfo, TernaryT *ptern)
{
  if (fxinfo->usedOprStack == 0)
    return MagickTrue;

  {
    OperatorE top = fxinfo->OperatorStack[fxinfo->usedOprStack - 1];
    if (top == oQuery)
      {
        if (ptern->addrQuery != NULL_ADDRESS || ptern->addrColon != NULL_ADDRESS)
          {
            (void) ThrowMagickException(fxinfo->exception,GetMagickModule(),OptionError,
              "Multiple '?' in ternary operator","'%s'",SetShortExp(fxinfo));
            return MagickFalse;
          }
        fxinfo->usedOprStack--;
        if (!AddElement(fxinfo,(fxFltType) 0,top))
          return MagickFalse;
        ptern->addrQuery = fxinfo->usedElements - 1;
      }
    else if (top == oColon)
      {
        if (ptern->addrQuery == NULL_ADDRESS)
          {
            (void) ThrowMagickException(fxinfo->exception,GetMagickModule(),OptionError,
              "':' without matching '?'","'%s'",SetShortExp(fxinfo));
            return MagickFalse;
          }
        if (ptern->addrColon != NULL_ADDRESS)
          {
            (void) ThrowMagickException(fxinfo->exception,GetMagickModule(),OptionError,
              "Multiple ':' in ternary operator","'%s'",SetShortExp(fxinfo));
            return MagickFalse;
          }
        fxinfo->usedOprStack--;
        if (!AddElement(fxinfo,(fxFltType) 0,top))
          return MagickFalse;
        ptern->addrColon = fxinfo->usedElements - 1;
      }
  }
  return MagickTrue;
}