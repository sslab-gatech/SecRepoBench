if (pel->oprNum == oQuery) {
  if (ptern->addrQuery!= NULL_ADDRESS) {
    (void) ThrowMagickException (
      pfx->exception, GetMagickModule(), OptionError,
      "Ternary query '?' already set at", "'%s'",
      SetShortExp(pfx));
    return MagickFalse;
  }
  if (ptern->addrColon!= NULL_ADDRESS) {
    (void) ThrowMagickException (
      pfx->exception, GetMagickModule(), OptionError,
      "Ternary colon ':' already set at", "'%s'",
      SetShortExp(pfx));
    return MagickFalse;
  }
  ptern->addrQuery = pfx->usedElements;
  pfx->usedOprStack--;
} else if (pel->oprNum == oColon) {
  if (ptern->addrColon!= NULL_ADDRESS) {
    (void) ThrowMagickException (
      pfx->exception, GetMagickModule(), OptionError,
      "Ternary colon ':' already set at", "'%s'",
      SetShortExp(pfx));
    return MagickFalse;
  }
  if (ptern->addrQuery == NULL_ADDRESS) {
    (void) ThrowMagickException (
      pfx->exception, GetMagickModule(), OptionError,
      "Ternary colon ':' without preceding '?' at", "'%s'",
      SetShortExp(pfx));
    return MagickFalse;
  }
  ptern->addrColon = pfx->usedElements;
  pfx->usedOprStack--;
}