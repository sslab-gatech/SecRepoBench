if (fxinfo->usedOprStack > 0)
  {
    OperatorE top = fxinfo->OperatorStack[fxinfo->usedOprStack-1];
    if (top == oTernaryQuery)
      {
        if (ptern->addrQuery != NULL_ADDRESS || ptern->addrColon != NULL_ADDRESS)
          {
            (void) ThrowMagickException(fxinfo->exception,GetMagickModule(),
              OptionError,"UnexpectedTernaryQuery","in '%s'",SetShortExp(fxinfo));
            return MagickFalse;
          }
        fxinfo->usedOprStack--;
        ptern->addrQuery = fxinfo->usedElements;
        if (!AddAddressingElement(fxinfo,rJmpIfFalse,NULL_ADDRESS))
          return MagickFalse;
      }
    else if (top == oTernaryColon)
      {
        if (ptern->addrQuery == NULL_ADDRESS || ptern->addrColon != NULL_ADDRESS)
          {
            (void) ThrowMagickException(fxinfo->exception,GetMagickModule(),
              OptionError,"UnexpectedTernaryColon","in '%s'",SetShortExp(fxinfo));
            return MagickFalse;
          }
        fxinfo->usedOprStack--;
        ptern->addrColon = fxinfo->usedElements;
        if (!AddAddressingElement(fxinfo,rJmp,NULL_ADDRESS))
          return MagickFalse;
        ElementT
          *pel = &fxinfo->Elements[fxinfo->usedElements-1];
        pel->DoPush = MagickTrue;
      }
  }