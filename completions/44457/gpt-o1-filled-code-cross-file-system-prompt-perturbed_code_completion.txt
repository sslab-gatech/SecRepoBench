{
  if (fxinfo->usedOprStack > 0)
  {
    OperatorE topOpr = fxinfo->OperatorStack[fxinfo->usedOprStack - 1];

    if (topOpr == oQuestion)
    {
      if ((ptern->addrQuery != NULL_ADDRESS) || (ptern->addrColon != NULL_ADDRESS))
      {
        (void)ThrowMagickException(
          fxinfo->exception, GetMagickModule(), OptionError,
          "Unexpected '?' operator", "'%s' at '%s'",
          fxinfo->token, SetShortExp(fxinfo));
        return MagickFalse;
      }
      fxinfo->usedOprStack--;
      ptern->addrQuery = (int)(fxinfo->usedElements);
      (void)AddAddressingElement(fxinfo, rIfFalse, NULL_ADDRESS);
    }
    else if (topOpr == oColon)
    {
      if ((ptern->addrQuery == NULL_ADDRESS) || (ptern->addrColon != NULL_ADDRESS))
      {
        (void)ThrowMagickException(
          fxinfo->exception, GetMagickModule(), OptionError,
          "Unexpected ':' operator", "'%s' at '%s'",
          fxinfo->token, SetShortExp(fxinfo));
        return MagickFalse;
      }
      fxinfo->usedOprStack--;
      ptern->addrColon = (int)(fxinfo->usedElements);
      fxinfo->Elements[fxinfo->usedElements - 1].DoPush = MagickTrue;
      (void)AddAddressingElement(fxinfo, rJump, NULL_ADDRESS);
    }
  }
}