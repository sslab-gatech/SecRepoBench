if (pfx->usedOprStack == 0) return MagickTrue;
  OperatorE op = pfx->OperatorStack[pfx->usedOprStack - 1];
  pfx->usedOprStack--;
  if (op == oQuery) {
    if (ptern->addrQuery != NULL_ADDRESS || ptern->addrColon != NULL_ADDRESS) {
      (void) ThrowMagickException(pfx->exception, GetMagickModule(), OptionError, "Inconsistent ternary structure", "at '%s'", SetShortExp(pfx));
      return MagickFalse;
    }
    ptern->addrQuery = pfx->usedElements;
    (void) AddAddressingElement(pfx, rCondExec, NULL_ADDRESS);
  } else if (op == oColon) {
    if (ptern->addrQuery == NULL_ADDRESS || ptern->addrColon != NULL_ADDRESS) {
      (void) ThrowMagickException(pfx->exception, GetMagickModule(), OptionError, "Inconsistent ternary structure", "at '%s'", SetShortExp(pfx));
      return MagickFalse;
    }
    ptern->addrColon = pfx->usedElements;
    (void) AddElement(pfx, (fxFltType)0, oPushResult);
    (void) AddAddressingElement(pfx, rControlFlow, NULL_ADDRESS);
  }