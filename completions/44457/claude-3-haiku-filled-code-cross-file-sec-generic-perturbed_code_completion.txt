if (ternary.addrQuery == NULL_ADDRESS) {
  // No existing query in the ternary structure
  ternary.addrQuery = pfx->usedElements;
  (void) AddAddressingElement(pfx, rPushConditional, NULL_ADDRESS);
} else if (ternary.addrColon == NULL_ADDRESS) {
  // No existing colon in the ternary structure
  ternary.addrColon = pfx->usedElements;
  (void) AddAddressingElement(pfx, rPopConditional, ternary.addrQuery);
  (void) AddAddressingElement(pfx, rPushResult, NULL_ADDRESS);
} else {
  // Ternary structure is inconsistent
  (void) ThrowMagickException(
    pfx->exception, GetMagickModule(), OptionError,
    "Inconsistent ternary structure", "'%s'",
    SetShortExp(pfx));
  return MagickFalse;
}