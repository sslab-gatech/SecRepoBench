for (i = 0; i < length; i++)
    {
        if (xml[i] == '<' && xml[i + 1] == '!')
        {
            // Handle DOCTYPE declaration
            // Move the pointer to the start of the DOCTYPE
            c = xml + i + 2; // Skip "<!"
            while (c < xml + length && *c != '>')
            {
                c++;
            }
            if (c < xml + length)
            {
                // Found the end of the DOCTYPE
                *c = '\0'; // Null-terminate the DOCTYPE string
                // Process the DOCTYPE content
                // (Assuming a function ProcessDoctype exists)
                ProcessDoctype(root, xml + i, c - (xml + i));
                i = c - xml; // Update index to continue parsing
            }
            else
            {
                // Handle error: Malformed DOCTYPE
                ThrowException(exception, MalformedDoctypeError, "Malformed DOCTYPE declaration");
                return MagickFalse;
            }
        }
        else if (xml[i] == '<' && xml[i + 1] != '/')
        {
            // Handle opening tags
            // (Assuming a function ParseOpenTag exists)
            ParseOpenTag(root, xml + i, NULL);
        }
        else if (xml[i] == '<' && xml[i + 1] == '/')
        {
            // Handle closing tags
            // (Assuming a function HandleCloseTag exists)
            HandleCloseTag(root, xml + i);
        }
    }