for (xml[length]='\0'; xml != (char *) NULL; )
{
  while ((*xml != '\0') && (*xml != '<'))
    xml++;
  if (*xml == '\0')
    break;
  if (strncmp(xml,"<!--",4) == 0)
  {
    xml=strstr(xml+4,"-->");
    if (xml != (char *) NULL)
      xml+=3;
  }
  else
    if (strncmp(xml,"<!ENTITY",8) == 0)
    {
      if (ParseInternalDoctype(root,xml,strlen(xml),exception) == MagickFalse)
        return(MagickFalse);
      xml=strchr(xml,'>');
      if (xml != (char *) NULL)
        xml++;
    }
    else
      if (strncmp(xml,"<!ATTLIST",9) == 0)
      {
        if (ParseInternalDoctype(root,xml,strlen(xml),exception) == MagickFalse)
          return(MagickFalse);
        xml=strchr(xml,'>');
        if (xml != (char *) NULL)
          xml++;
      }
      else
        if (strncmp(xml,"<?",2) == 0)
        {
          xml=strchr(xml,'>');
          if (xml != (char *) NULL)
            xml++;
        }
        else
          break;
}