// Parse through the XML string to identify and process different components of a DOCTYPE declaration.
  // When encountering an ENTITY declaration, parse and store the entity definitions in the appropriate data structure.
  // Handle both parameter and general entities, updating predefined entities as needed.
  // Validate entity definitions and handle any errors or circular declarations appropriately.
  // For ATTLIST declarations, parse and store default attributes, managing memory for new attribute tags as necessary.
  // Ensure that malformed or incomplete declarations are handled by throwing appropriate exceptions.
  // Process comments and processing instructions by identifying their boundaries and calling appropriate processing functions.
  // Continue parsing until the end of the DOCTYPE declaration or the input string is reached.
  for (xml[length]='\0'; xml != (char *) NULL; )
  {
    while ((*xml != '\0') && (*xml != '&'))
      xml++;
    if (*xml == '\0')
      break;
    if (strncmp(xml+1,tag,strlen(tag)) == 0)
      return(MagickFalse);
    i=0;
    while ((entities[i] != (char *) NULL) &&
           (strncmp(entities[i],xml+1,strlen(entities[i])) == 0))
      i+=2;
    if ((entities[i] != (char *) NULL) &&
        (ValidateEntities(tag,entities[i+1],depth+1,entities) == 0))
      return(MagickFalse);
  }