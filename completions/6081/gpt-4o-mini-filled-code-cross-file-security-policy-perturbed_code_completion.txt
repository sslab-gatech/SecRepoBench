if (length < 8) // Check for minimum length for DOCTYPE
      ThrowFatalException(XMLParseError,"MalformedDOCTYPE");

    c = xml;
    while (*c != '\0' && strncmp(c, "<!DOCTYPE", 9) != 0)
      c++;

    if (strncmp(c, "<!DOCTYPE", 9) == 0)
    {
      c += 9; // Move past "<!DOCTYPE"
      while (isspace((unsigned char) *c))
        c++; // Skip whitespace

      // Process the name of the DOCTYPE
      if (length < (c - xml) + 1)
        ThrowFatalException(XMLParseError,"IncompleteDOCTYPEName");

      // Extract the DOCTYPE name
      char *doctype_name = c;
      while (*c != '\0' && !isspace((unsigned char) *c) && *c != '>')
        c++;

      if (*c == '\0' || *c != '>')
        ThrowFatalException(XMLParseError,"MalformedDOCTYPE");

      // Store the DOCTYPE name or process further as needed
      // ...

      // Move past the '>'
      c++;
    }

    // Continue parsing for ENTITY and ATTLIST declarations
    while (*c != '\0' && strncmp(c, "<!ENTITY", 8) == 0)
    {
      // Handle ENTITY declarations
      // ...
      c += 8; // Move past "<!ENTITY"
      // Parse entity details...
    }

    while (*c != '\0' && strncmp(c, "<!ATTLIST", 9) == 0)
    {
      // Handle ATTLIST declarations
      // ...
      c += 9; // Move past "<!ATTLIST"
      // Parse attribute details...
    }