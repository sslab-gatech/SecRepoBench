while (*xml != '\0')
    {
        xml += strspn(xml, " \n\r\t"); // Skip whitespace
        if (strncmp(xml, "<!ENTITY", 8) == 0)
        {
            // Handle ENTITY declaration
            char *entity_name = xml + 8;
            xml += 8 + strcspn(xml, " \n\r\t>");
            if (*xml == '>')
            {
                *xml = '\0'; // End the entity declaration
                // Add entity to the predefined entities
                // (Assuming a function AddEntity exists)
                AddEntity(entity_name, xml);
            }
            else
            {
                // Handle error for malformed ENTITY
                ThrowFatalException(ResourceLimitError, "Malformed ENTITY declaration");
            }
        }
        else if (strncmp(xml, "<!ATTLIST", 9) == 0)
        {
            // Handle ATTLIST declaration
            // (Assuming a function HandleAttlist exists)
            HandleAttlist(xml);
        }
        else if (strncmp(xml, "<!DOCTYPE", 8) == 0)
        {
            // Handle DOCTYPE declaration
            // (Assuming a function HandleDoctype exists)
            HandleDoctype(xml);
        }
        else if (strncmp(xml, "<!--", 4) == 0)
        {
            // Handle comments
            xml = strstr(xml, "-->");
            if (xml == NULL)
            {
                // Handle error for unclosed comment
                ThrowFatalException(ResourceLimitError, "Unclosed comment");
            }
            xml += 3; // Move past the comment
        }
        else if (*xml == '<')
        {
            // Handle opening or closing tags
            // (Assuming a function HandleTag exists)
            HandleTag(xml);
        }
        else
        {
            // Handle character data
            // (Assuming a function HandleCharacterData exists)
            HandleCharacterData(xml);
        }
    }