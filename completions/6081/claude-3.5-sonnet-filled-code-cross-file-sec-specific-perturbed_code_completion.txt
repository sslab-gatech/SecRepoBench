while ((c=strchr(xml,'<')) != (char *) NULL)
{
  *c='\0';
  ParseCharacterContent(root,xml,(size_t) (c-xml),0);
  xml=c+1;
  if (strncmp(xml,"!--",3) == 0)
    {
      xml=strstr(xml+3,"-->");
      if (xml != (char *) NULL)
        xml+=3;
      continue;
    }
  if (strncmp(xml,"![CDATA[",8) == 0)
    {
      xml=strstr(xml+8,"]]>");
      if (xml != (char *) NULL)
        xml+=3;
      continue;
    }
  if (strncmp(xml,"!ENTITY",7) == 0)
    {
      xml+=7;
      c=(char *) NULL;
      while ((*xml != '\0') && (isspace((int) ((unsigned char) *xml)) == 0))
        xml++;
      while (isspace((int) ((unsigned char) *xml)) != 0)
        xml++;
      n=xml;
      while ((*xml != '\0') && (isspace((int) ((unsigned char) *xml)) == 0))
        xml++;
      if (*xml != '\0')
        {
          *xml='\0';
          xml++;
        }
      while (isspace((int) ((unsigned char) *xml)) != 0)
        xml++;
      q=(*xml);
      v=xml+1;
      if ((q == '"') || (q == '\''))
        {
          c=strchr(v,q);
          if (c != (char *) NULL)
            {
              *c='\0';
              entities=root->entities;
              for (i=0; entities[i] != (char *) NULL; i+=2) ;
              root->entities=(char **) ResizeQuantumMemory(entities,(size_t)
                (i+4),sizeof(*root->entities));
              if (root->entities == (char **) NULL)
                break;
              root->entities[i]=ConstantString(n);
              root->entities[i+1]=ConstantString(v);
              root->entities[i+2]=(char *) NULL;
              root->entities[i+3]=(char *) NULL;
              xml=c+1;
            }
        }
      continue;
    }
  if (strncmp(xml,"!ATTLIST",8) == 0)
    {
      xml+=8;
      while (isspace((int) ((unsigned char) *xml)) == 0)
        if (*xml != '\0')
          xml++;
      while (isspace((int) ((unsigned char) *xml)) != 0)
        xml++;
      n=xml;
      while ((*xml != '\0') && (isspace((int) ((unsigned char) *xml)) == 0))
        xml++;
      if (*xml != '\0')
        *xml++='\0';
      while (isspace((int) ((unsigned char) *xml)) != 0)
        xml++;
      c=xml;
      while ((strncmp(xml,"#FIXED",6) != 0) && (strncmp(xml,"#IMPLIED",8) != 0) &&
             (strncmp(xml,"#REQUIRED",9) != 0) && (*xml != '\0'))
        xml++;
      if (*xml == '\0')
        break;
      xml+=strlen(xml);
    }
  while ((*xml != '\0') && (*xml != '>'))
    xml++;
  if (*xml == '>')
    xml++;