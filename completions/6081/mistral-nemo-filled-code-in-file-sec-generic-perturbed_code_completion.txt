MagickExport char *XMLTreeInfoToXML(XMLTreeInfo *xml_info)
{
  // ... (previous code)

  // Add the closing tag for the root element
  if (parent == (XMLTreeInfo *) NULL)
  {
    if ((length+strlen(xml_info->tag)+MagickPathExtent) > extent)
    {
      extent=length+strlen(xml_info->tag)+MagickPathExtent;
      xml=(char *) ResizeQuantumMemory(xml,extent,sizeof(*xml));
      if (xml == (char *) NULL)
        return(xml);
    }
    length+=FormatLocaleString(xml+length,extent,"</%s>",xml_info->tag);
  }

  return((char *) ResizeQuantumMemory(xml,length+1,sizeof(*xml)));
}