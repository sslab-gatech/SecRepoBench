if (strncmp(urlString, "file://", 7) == 0) {
    // Check if it's "file:///" with an extra '/'
    int prefixLength = 7;
    if (urlString[7] == '/') {
        prefixLength = 8;
    }
    
    // Remove the "file://" or "file:///" prefix
    memmove(urlString, urlString + prefixLength, strlen(urlString) - prefixLength + 1);
    
    // Replace %20 with spaces
    for (int i = 0; i < strlen(urlString); i++) {
        if (urlString[i] == '%' && i+2 < strlen(urlString) && urlString[i+1] == '2' && urlString[i+2] == '0') {
            urlString[i] = ' ';
            // Skip next two characters as they've been processed
            i += 2;
        }
    }
}