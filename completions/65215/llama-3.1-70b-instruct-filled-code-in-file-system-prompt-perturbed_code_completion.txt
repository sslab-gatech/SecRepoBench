// Convert a URL to a filesystem path by removing the "file://" prefix if present.
// Specifically, handle the case where the URL uses a "file:///" prefix with a drive letter,
// and adjust the string to remove the correct number of characters.
// Replace occurrences of "%20" in the URL with spaces to complete the conversion to a filesystem path format.

if (strncmp(urlString, "file:///", 8) == 0) {
    // Handle the case where the URL uses a "file:///" prefix with a drive letter
    char* driveLetter = strchr(urlString + 8, '/');
    if (driveLetter) {
        // Remove the "file:///" prefix and the drive letter
        memmove(urlString, driveLetter + 1, strlen(driveLetter));
    }
} else if (strncmp(urlString, "file://", 7) == 0) {
    // Remove the "file://" prefix
    memmove(urlString, urlString + 7, strlen(urlString + 7));
}

// Replace occurrences of "%20" in the URL with spaces
for (char* p = urlString; *p; p++) {
    if (*p == '%') {
        if (strncmp(p, "%20", 3) == 0) {
            *p ='';
            memmove(p + 1, p + 3, strlen(p + 3));
        }
    }
}