// <MASK>
size_t url_len = strlen(urlString);
if (url_len >= 7 && strncmp(urlString, "file://", 7) == 0) {
    // Remove the "file://" prefix
    memmove(urlString, urlString + 7, url_len - 6);
} else if (url_len >= 8 && strncmp(urlString, "file:///", 8) == 0) {
    // Remove the "file:///" prefix and adjust for the drive letter
    memmove(urlString, urlString + 8, url_len - 7);
}

// Replace "%20" with spaces
for (size_t i = 0; i < url_len; i++) {
    if (urlString[i] == '%' && i + 2 < url_len && urlString[i + 1] == '2' && urlString[i + 2] == '0') {
        urlString[i] = ' ';
        memmove(urlString + i + 1, urlString + i + 3, url_len - i - 3);
        url_len -= 2;
    }
}