if (!strncmp(urlString, "file:///", 8)) {
    // Handle "file:///" with drive letter (Windows)
    if (urlString[8] && urlString[9] == ':') {
        memmove(urlString, urlString + 8, strlen(urlString) - 7);
    } else {
        memmove(urlString, urlString + 7, strlen(urlString) - 6);
    }
} else if (!strncmp(urlString, "file://", 7)) {
    memmove(urlString, urlString + 7, strlen(urlString) - 6);
}

char *src, *dst;
src = dst = urlString;

while (*src) {
    if (*src == '%' && src[1] == '2' && src[2] == '0') {
        *dst++ = ' ';
        src += 3;
    } else {
        *dst++ = *src++;
    }
}
*dst = '\0';