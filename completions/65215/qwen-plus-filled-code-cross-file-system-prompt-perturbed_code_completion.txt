if (urlString && strstr(urlString, "file://")) {
    if (urlString[0] == 'f' && urlString[1] == 'i' && urlString[2] == 'l' && urlString[3] == 'e' && urlString[4] == ':') {
        if (urlString[5] == '/' && urlString[6] == '/') {
            // Handle the case of file:///<drive>/
            memmove(urlString, urlString + 8, strlen(urlString) - 7);
        } else {
            // Handle the case of file://
            memmove(urlString, urlString + 7, strlen(urlString) - 6);
        }
    }
}

char *p = urlString;
while ((p = strstr(p, "%20"))) {
    p[0] = ' ';
    memmove(p + 1, p + 3, strlen(p + 3) + 1);
}