// <MASK>
char *url = urlString;
if (strncmp(url, "file://", 7) == 0) {
    url += 7;
    if (url[0] == '/' && url[1] == '/' && isalpha(url[2]) && url[3] == ':') {
        // Handle "file:///C:/" style URLs
        url += 4;
    }
}

// Replace "%20" with spaces
char *p = url;
while ((p = strstr(p, "%20"))) {
    *p = ' ';
    memmove(p+1, p+3, strlen(p+3)+1);
}