if (strncmp(urlString, "file://", 7) == 0) {
    char *path = urlString + 7;
    
    // Handle Windows-style file URLs with drive letters
    if (strlen(path) > 2 && path[0] == '/' && path[2] == ':') {
        path++;
    }
    
    memmove(urlString, path, strlen(path) + 1);
}

char *p = urlString;
while ((p = strstr(p, "%20")) != NULL) {
    *p = ' ';
    memmove(p + 1, p + 3, strlen(p + 3) + 1);
}