char *path = urlString;

	// Remove file:// prefix
	if (strncmp(urlString, "file://", 7) == 0) {
		path += 7;
		// Handle Windows drive letter format file:///C:/path
		if (path[0] == '/' && isalpha((unsigned char)path[1]) && path[2] == ':') {
			path++;
		}
	}

	// Decode %20 to spaces in-place
	char *src = path;
	char *dst = path;
	while (*src) {
		if (src[0] == '%' && src[1] == '2' && src[2] == '0') {
			*dst++ = ' ';
			src += 3;
		} else {
			*dst++ = *src++;
		}
	}
	*dst = 0;

	// Move processed path to start of buffer if we had a prefix
	if (path != urlString) {
		memmove(urlString, path, dst - path + 1);
	}