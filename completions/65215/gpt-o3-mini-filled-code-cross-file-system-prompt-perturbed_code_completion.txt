if (strncmp(urlString, "file://", 7) == 0) {
    // Determine the correct offset: if there's an extra '/' (as in "file:///C:/..."), skip 8 characters; otherwise 7.
    int prefixLen = (urlString[7] == '/') ? 8 : 7;
    memmove(urlString, urlString + prefixLen, strlen(urlString + prefixLen) + 1);
}

// Replace all occurrences of "%20" with a space.
char *src = urlString, *dst = urlString;
while (*src) {
    if (src[0] == '%' && src[1] == '2' && src[2] == '0') {
        *dst++ = ' ';
        src += 3;
    } else {
        *dst++ = *src++;
    }
}
*dst = '\0';