// <MASK>
char *url = urlString;
char *prefix = "file://";
char *prefix_slash = "file:///";
char *drive_letter = "";
char *path = "";
char *res_path = "";
char *temp_path = "";

// Check if the URL starts with the "file://" prefix
if (strncmp(url, prefix, strlen(prefix)) == 0) {
    // If the URL starts with the "file:///" prefix with a drive letter, remove the correct number of characters
    if (strncmp(url, prefix_slash, strlen(prefix_slash)) == 0) {
        drive_letter = url + strlen(prefix_slash);
        // Remove the drive letter from the URL
        url = gf_strdup(url + strlen(prefix_slash));
    } else {
        // Remove the "file://" prefix from the URL
        url = gf_strdup(url + strlen(prefix));
    }
}

// Replace occurrences of "%20" in the URL with spaces
while (strstr(url, "%20")!= NULL) {
    temp_path = strstr(url, "%20");
    temp_path[0] ='';
    temp_path[1] = 0;
    url = gf_strdup(url);
}

// Remove the last delimiter from the URL
gf_url_remove_last_delimiter(url, res_path);

// If the URL started with a drive letter, add it back to the path
if (drive_letter!= NULL) {
    gf_dynstrcat(&path, drive_letter, NULL);
    gf_dynstrcat(&path, res_path, NULL);
} else {
    path = gf_strdup(res_path);
}

// Free the temporary strings
gf_free(url);
gf_free(temp_path);