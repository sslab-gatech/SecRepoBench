const char *file_prefix = "file://";
    const char *file_prefix_with_drive = "file:///";
    char *path_start = NULL;

    // Check for "file:///" prefix
    if (strncmp(urlString, file_prefix_with_drive, strlen(file_prefix_with_drive)) == 0) {
        path_start = urlString + strlen(file_prefix_with_drive);
    }
    // Check for "file://" prefix
    else if (strncmp(urlString, file_prefix, strlen(file_prefix)) == 0) {
        path_start = urlString + strlen(file_prefix);
    } else {
        path_start = urlString; // No prefix, use the original string
    }

    // Decode %20 to spaces
    char *decoded_path = urlString; // Reuse the original buffer for simplicity
    char *src = path_start;
    char *dst = decoded_path;

    while (*src) {
        if (src[0] == '%' && src[1] == '2' && src[2] == '0') {
            *dst++ = ' ';
            src += 3; // Skip over "%20"
        } else {
            *dst++ = *src++;
        }
    }
    *dst = '\0'; // Null-terminate the resulting string