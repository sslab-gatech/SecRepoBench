// Check if the URL starts with "file://"
if (strncmp(urlString, "file://", 7) == 0) {
    // Special case for Windows-style paths with drive letters
    // Example: "file:///C:/path" -> "C:/path"
    if (strlen(urlString) > 9 && urlString[7] == '/' && urlString[9] == ':') {
        // This looks like a file:///X: pattern where X is a drive letter
        // We want to keep the drive letter, so we move the string position 8 chars ahead
        memmove(urlString, urlString + 8, strlen(urlString + 8) + 1);
    } else {
        // Regular file:// prefix, remove 7 characters
        memmove(urlString, urlString + 7, strlen(urlString + 7) + 1);
    }
}

// Replace %20 with spaces
char *src, *dst;
src = dst = urlString;
while (*src) {
    if (src[0] == '%' && src[1] == '2' && src[2] == '0') {
        *dst++ = ' ';
        src += 3;
    } else {
        *dst++ = *src++;
    }
}
*dst = '\0';