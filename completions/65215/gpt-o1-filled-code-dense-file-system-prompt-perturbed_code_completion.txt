if (!strncmp(urlString, "file:///", 8) && isalpha((unsigned char)urlString[8]) && urlString[9] == ':') {
    memmove(urlString, urlString + 8, strlen(urlString + 8) + 1);
} else if (!strncmp(urlString, "file://", 7)) {
    memmove(urlString, urlString + 7, strlen(urlString + 7) + 1);
}

char *reader = urlString;
char *writer = urlString;
while (*reader) {
    if (reader[0] == '%' && reader[1] == '2' && reader[2] == '0') {
        *writer++ = ' ';
        reader += 3;
    } else {
        *writer++ = *reader++;
    }
}
*writer = '\0';