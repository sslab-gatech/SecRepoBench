if (!urlString) return;

    // Check if the URL starts with "file://"
    const char *filePrefix = "file://";
    size_t prefixLen = strlen(filePrefix);
    if (strncmp(urlString, filePrefix, prefixLen) == 0) {
        // Move the pointer past the "file://" prefix
        urlString += prefixLen;

        // On Windows, handle "file:///" with a drive letter (e.g., "file:///C:/path")
        if (urlString[0] == '/' && urlString[1] && urlString[2] == ':') {
            urlString++; // Skip the leading slash
        }
    }

    // Allocate a buffer for the filesystem path
    size_t urlLen = strlen(urlString);
    char *fsPath = (char *)malloc(urlLen + 1);
    if (!fsPath) {
        // Handle memory allocation failure
        return;
    }

    // Replace "%20" with spaces in the URL
    char *src = urlString;
    char *dst = fsPath;
    while (*src) {
        if (src[0] == '%' && src[1] == '2' && src[2] == '0') {
            *dst++ = ' ';
            src += 3; // Skip past "%20"
        } else {
            *dst++ = *src++;
        }
    }
    *dst = '\0'; // Null-terminate the string

    // Copy the converted path back to the original buffer
    strncpy(urlString, fsPath, urlLen + 1);

    // Free the temporary buffer
    free(fsPath);