if (codec->subtitle_header) {
    if (codec->codec_type != AVMEDIA_TYPE_SUBTITLE) {
        av_log(codec, AV_LOG_WARNING, "Ignoring subtitle header for non-subtitle codec\n");
    } else {
        const AVCodecDescriptor *desc = avcodec_descriptor_get(codec->codec_id);
        if (desc && (desc->props & AV_CODEC_PROP_BITMAP_SUB)) {
            av_log(codec, AV_LOG_WARNING, "Ignoring subtitle header for bitmap subtitle codec\n");
        } else {
            int ret = ff_subtitle_header_parser_init(codec);
            if (ret < 0)
                return ret;
        }
    }
}