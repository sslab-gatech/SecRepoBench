import pcap
import dpkt

def process_pcap_file(file_path):
    pcap_file = pcap.open_offline(file_path, pcap.OFFLINE)
    for packet in pcap_file:
        try:
            dpkt_packet = dpkt.ethernet.Ethernet(packet)
            if dpkt_packet.haslayer(dpkt.ip.IP):
                ip_packet = dpkt_packet.getlayer(dpkt.ip.IP)
                if ip_packet.haslayer(dpkt.tcp.TCP):
                    tcp_packet = ip_packet.getlayer(dpkt.tcp.TCP)
                    print(f"Source Port: {tcp_packet.sport}, Destination Port: {tcp_packet.dport}")
        except Exception as e:
            print(f"Error processing packet: {e}")
    pcap_file.close()

# Example usage
process_pcap_file("path/to/your/pcap/file.pcap")