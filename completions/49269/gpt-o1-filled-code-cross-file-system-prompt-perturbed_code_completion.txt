{
  if (number->sn == 0) {
    /* number is zero, so it has 1 digit ("0") */
    return 1;
  }

  /* Trim any top limbs that are zero */
  size_t s = number->sz;
  while (s > 0 && number->p[s - 1] == 0) {
    s--;
  }

  /* If after trimming, nothing remains, it's zero */
  if (s == 0) {
    return 1;
  }

  /* Count bits in the highest non-zero limb */
  mp_limb limb = number->p[s - 1];
  int highest_bit = 0;
  while (limb > 0) {
    limb >>= 1;
    highest_bit++;
  }

  /* Total bits in the number */
  size_t bit_count = (s - 1) * DIGITBITS + highest_bit;

  /* Approximate decimal digits using log10(2) */
  double d = (double)bit_count * 0.3010299956639812;
  return (size_t)d + 1;
}