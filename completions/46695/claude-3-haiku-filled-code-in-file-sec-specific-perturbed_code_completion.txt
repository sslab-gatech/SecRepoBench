// Fill in the masked region
status = RenderFreetype(image, draw_info, encoding, offset, metrics, exception);
if (status == MagickFalse) {
    (void) FT_Done_FreeType(library);
    stream = (FT_StreamRec *) RelinquishMagickMemory(stream);
    return MagickFalse;
}

// Finalize the font metrics
metrics->bounds.x1 = (double) floor(metrics->bounds.x1 + 0.5);
metrics->bounds.y1 = (double) floor(metrics->bounds.y1 + 0.5);
metrics->bounds.x2 = (double) ceil(metrics->bounds.x2 + 0.5);
metrics->bounds.y2 = (double) ceil(metrics->bounds.y2 + 0.5);
metrics->width = metrics->bounds.x2 - metrics->bounds.x1;

// Clean up resources
(void) FT_Done_FreeType(library);
stream = (FT_StreamRec *) RelinquishMagickMemory(stream);
return MagickTrue;