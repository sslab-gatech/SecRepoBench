size_t slen = 0;
const char *q = ctx->pos;
while (ctx->pos < ctx->end) {
    if (*ctx->pos == '\\') {
        ctx->pos++;
        if (ctx->pos < ctx->end) {
            ctx->pos++;
            num_escapes++;
        }
        continue;
    }
    if (*ctx->pos == quote_char) {
        break;
    }
    ctx->pos++;
}
if (ctx->pos >= ctx->end || *ctx->pos != quote_char) {
    plist_free_data(data);
    PLIST_OSTEP_ERR("Unterminated quoted string at offset %ld\n", q - ctx->start);
    ctx->err++;
    break;
}
slen = ctx->pos - p;
char *strbuf = (char*)malloc(slen + 1);
if (!strbuf) {
    plist_free_data(data);
    PLIST_OSTEP_ERR("Out of memory while parsing quoted string\n");
    ctx->err++;
    break;
}
ctx->pos++; // skip closing quote