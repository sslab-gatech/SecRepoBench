while (ctx->pos < ctx->end) {
                if (*ctx->pos == quote_char) {
                    if (ctx->pos > p && *(ctx->pos - 1) == '\\') {
                        num_escapes++;
                    } else {
                        break;
                    }
                } else if (*ctx->pos == '\\') {
                    num_escapes++;
                }
                ctx->pos++;
            }
            if (ctx->pos >= ctx->end) {
                PLIST_OSTEP_ERR("Unterminated quoted string at offset %ld\n", ctx->pos - ctx->start);
                ctx->err++;
                goto err_out;
            }
            size_t slen = ctx->pos - p;
            char *strbuf = (char*)malloc(slen + 1);