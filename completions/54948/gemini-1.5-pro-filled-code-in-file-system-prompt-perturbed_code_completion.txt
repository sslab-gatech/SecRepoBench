while (ctx->pos < ctx->end) {
    if (*ctx->pos == quote_char) {
        if ((ctx->end - ctx->pos > 1) && *(ctx->pos+1) == quote_char) {
            // escaped quote
            num_escapes++;
            ctx->pos++;
        } else {
            break;
        }
    } else if (*ctx->pos == '\\') {
        num_escapes++;
    }
    ctx->pos++;
}
if (*ctx->pos != quote_char) {
    PLIST_OSTEP_ERR("Unterminated quoted string at offset %ld\n", ctx->pos - ctx->start);
    ctx->err++;
    goto err_out;
}
size_t slen = ctx->pos - p;
char *strbuf = (char*)malloc(slen+1);
ctx->pos++; // skip closing quote