mp_limb i;
int sign = mpz_sgn(*mpzptr);
if (sign == 0) {
  *v = 0;
  return TRUE;
}

size_t size = mpz_size(*mpzptr);
if (size > 1 || mpz_cmp_si(*mpzptr, INT_MIN) < 0 || mpz_cmp_si(*mpzptr, INT_MAX) > 0) {
  return FALSE;
}

i = mpz_getlimbn(*mpzptr, 0);
if (sign < 0) {
  i = -i;
}