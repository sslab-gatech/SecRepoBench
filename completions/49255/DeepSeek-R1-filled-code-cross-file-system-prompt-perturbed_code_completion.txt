if (mpzptr->sn == 0) {
    *v = 0;
    return TRUE;
}
if (mpzptr->sz != 1) {
    return FALSE;
}
i = mpzptr->p[0];
size_t bits = sizeof(mrb_int) * 8;
mrb_uint max = (mpzptr->sn > 0) ? ((mrb_uint)1 << (bits - 1)) - 1 : (mrb_uint)1 << (bits - 1);
if (i > max) {
    return FALSE;
}
*v = (mpzptr->sn > 0) ? (mrb_int)i : -(mrb_int)i;
return TRUE;