static int
mpz_get_int(mpz_t *mpzptr, mrb_int *v)
{
  mp_limb i;
  // This code block is responsible for converting a multi-precision integer
  // (represented by mpz_t structure) to a single precision integer (mrb_int),
  // if possible. If conversion is not possible, return FALSE.
  if (mpzptr->sn == 0) {
    // If the multi-precision integer is zero, return 0
    *v = 0;
  } else {
    // Check if the multi-precision integer can be represented as a single precision integer
    if (mpzptr->sn <= DIGITBITS) {
      // If the multi-precision integer can be represented as a single precision integer,
      // extract the most significant limb and convert it to a single precision integer
      i = mpzptr->p[0];
      if (i < 0) {
        // If the most significant limb is negative, convert it to a positive value
        i = -i;
        // Check for overflow
        if (i > (mrb_int)0x7fffffff) {
          return FALSE;
        }
      } else {
        // Check for overflow
        if (i > (mrb_int)0x7fffffff) {
          return FALSE;
        }
      }
      *v = i;
    } else {
      // If the multi-precision integer cannot be represented as a single precision integer,
      // return FALSE
      return FALSE;
    }
  }
  return TRUE;
}