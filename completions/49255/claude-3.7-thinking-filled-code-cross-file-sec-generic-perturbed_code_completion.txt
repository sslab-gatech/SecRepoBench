// Check if mpzptr is NULL
if (!mpzptr) {
    return FALSE;
}

// If the size is 0, the number is 0
if (mpzptr->sz == 0) {
    i = 0;
}
// Check if the number is too large (has more than one limb)
else if (mpzptr->sz > 1) {
    return FALSE;
}
else {
    // Get the single limb
    i = mpzptr->p[0];
    
    // Adjust based on sign
    if (mpzptr->sn < 0) {
        i = -i;
    }
}

// Cast to mrb_int and back to mp_limb to check for loss of information
mrb_int v_temp = (mrb_int)i;
mp_limb i_back = (mp_limb)v_temp;
if (i_back != i) {
    return FALSE;
}