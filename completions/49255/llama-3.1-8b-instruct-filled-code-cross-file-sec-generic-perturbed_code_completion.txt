static int
mpz_get_int(mpz_t *mpzptr, mrb_int *v)
{
  mp_limb i;
  // This code block is responsible for converting a multi-precision integer
  // (represented by mpz_t structure) to a single precision integer (mrb_int),
  // if possible. If conversion is not possible, return FALSE.
  // <MASK>
  if (mpzptr->sn == 1 && mpzptr->p[0] < (1 << 31)) {
    *v = (mrb_int)mpzptr->p[0];
  } else if (mpzptr->sn == 1 && mpzptr->p[0] < (1 << 63)) {
    *v = (mrb_int)mpzptr->p[0];
  } else {
    // If the multi-precision integer cannot be converted to a single precision integer,
    // we can use the mpz_mul_int function to multiply the integer by 1 and then
    // use the mpz_get_int function to get the result as a single precision integer.
    mpz_t temp;
    mpz_init_set_int(mrb_state, &temp, 1);
    mpz_mul_int(mrb_state, mpzptr, &temp, 1);
    *v = mpz_get_int(&temp, v);
    mpz_clear(mrb_state, &temp);
  }
  return TRUE;
}