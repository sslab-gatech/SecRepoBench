static int
mpz_get_int(mpz_t *mpzptr, mrb_int *v)
{
  mp_limb i;
  // This code block is responsible for converting a multi-precision integer
  // (represented by mpz_t structure) to a single precision integer (mrb_int),
  // if possible. If conversion is not possible, return FALSE.
  // <MASK>
  if (mpzptr->sn == 1 && mpzptr->p[0] < (1 << 31)) {
    *v = (mrb_int)mpzptr->p[0];
  } else if (mpzptr->sn == 1 && mpzptr->p[0] < (1 << 63)) {
    *v = (mrb_int)mpzptr->p[0];
  } else {
    // If the multi-precision integer cannot be converted to a single precision integer,
    // we can try to get the most significant bit of the integer.
    // This is a common operation in many algorithms, so it's worth optimizing.
    *v = (mrb_int)mpz_get_bit(mpzptr, 0);
  }
  return TRUE;
}