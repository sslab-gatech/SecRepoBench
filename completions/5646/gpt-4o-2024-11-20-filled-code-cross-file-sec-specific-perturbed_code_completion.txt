next_token[i] = '\0'; // Null-terminate the token string.

  // Check if the token starts with "url(".
  if (strncmp(next_token, "url(", 4) == 0)
  {
    char *url_start = next_token + 4; // Skip "url(".
    char *url_end = next_token + i - 1; // Point to the last character.

    // Trim trailing spaces and the closing ')' if present.
    while ((url_end > url_start) && (isspace((int) ((unsigned char) *url_end)) || *url_end == ')'))
      url_end--;

    // Trim leading spaces and optional '#' character.
    while ((url_start < url_end) && (isspace((int) ((unsigned char) *url_start)) || *url_start == '#'))
      url_start++;

    // Calculate the length of the actual URL.
    size_t url_length = (size_t)(url_end - url_start + 1);

    // Copy the URL to the beginning of the token string.
    if (url_length < extent)
    {
      memmove(next_token, url_start, url_length);
      next_token[url_length] = '\0'; // Null-terminate the token string.
    }
    else
    {
      // If the URL length exceeds the extent, truncate it safely.
      memmove(next_token, url_start, extent - 1);
      next_token[extent - 1] = '\0'; // Null-terminate the token string.
    }
  }