next_token[i]='\0';
if ((i > 4) && (LocaleNCompare(next_token,"url(",4) == 0))
{
  register ssize_t j = 4; // Skip "url("
  
  // If the next character is '#', skip it too
  if (next_token[j] == '#')
    j++;
  
  // Copy the URL to the beginning of the token string
  register ssize_t k = 0;
  while (j < i)
    next_token[k++] = next_token[j++];
  
  next_token[k] = '\0';
  
  // If the last character is a closing parenthesis, remove it
  if ((k > 0) && (next_token[k-1] == ')'))
    next_token[--k] = '\0';
}