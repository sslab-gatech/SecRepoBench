// Check if the token starts with "url(".
// If true, extract the actual URL by skipping the "url(" prefix and optional '#' character.
// Then copy the URL to the beginning of the token string, replacing the original content.
if (strncmp(next_token, "url(", 4) == 0) {
    const char *url_start = next_token + 4;
    if (*url_start == '#') {
        url_start++;
    }
    char *url_end = strchr(url_start, ')');
    if (url_end != NULL) {
        size_t url_length = url_end - url_start;
        if (url_length < extent - 1) {
            strncpy(next_token, url_start, url_length);
            next_token[url_length] = '\0';
        } else {
            next_token[extent - 1] = '\0';
        }
    }
}