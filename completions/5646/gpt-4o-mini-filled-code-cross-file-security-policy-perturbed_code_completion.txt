// Null-terminate the token string.
  next_token[i] = '\0';
  
  // Check if the token starts with "url(".
  const char *url_prefix = "url(";
  size_t url_prefix_length = strlen(url_prefix);
  
  if (i >= url_prefix_length && strncmp(next_token, url_prefix, url_prefix_length) == 0) {
    // Extract the actual URL by skipping the "url(" prefix.
    char *url_start = next_token + url_prefix_length;
    
    // Skip optional '#' character.
    if (*url_start == '#') {
      url_start++;
    }
    
    // Copy the URL to the beginning of the token string, replacing the original content.
    size_t url_length = strlen(url_start);
    if (url_length < extent - 1) {
      memcpy(next_token, url_start, url_length + 1); // +1 for null terminator
    } else {
      // If the URL is too long, truncate it and null-terminate.
      memcpy(next_token, url_start, extent - 1);
      next_token[extent - 1] = '\0';
    }
  }