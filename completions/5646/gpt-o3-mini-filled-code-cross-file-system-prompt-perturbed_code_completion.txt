next_token[i] = '\0';
if (i >= 4 && strncasecmp(next_token, "url(", 4) == 0)
{
  char *token_ptr = next_token + 4;
  while (isspace((int)((unsigned char)*token_ptr)))
    token_ptr++;
  if (*token_ptr == '#')
    token_ptr++;
  /* Locate the closing parenthesis */
  char *end_url = token_ptr;
  while (*end_url && *end_url != ')')
    end_url++;
  /* Trim any trailing whitespace from the URL */
  while (end_url > token_ptr && isspace((int)((unsigned char)*(end_url - 1))))
    end_url--;
  size_t url_length = end_url - token_ptr;
  if (url_length < extent)
  {
    memmove(next_token, token_ptr, url_length);
    next_token[url_length] = '\0';
  }
}