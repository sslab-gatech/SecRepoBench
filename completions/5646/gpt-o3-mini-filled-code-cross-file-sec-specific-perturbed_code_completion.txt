next_token[i] = '\0';
if (i >= 4 && strncmp(next_token, "url(", 4) == 0)
{
  const char *url_start = next_token + 4;
  /* Skip an optional '#' character if present */
  if (*url_start == '#')
    url_start++;
  /* Skip any leading whitespace */
  while (isspace((int)((unsigned char)*url_start)) && *url_start != '\0')
    url_start++;
  /* Locate the closing parenthesis, if any */
  const char *url_end = url_start;
  while (*url_end != ')' && *url_end != '\0')
    url_end++;
  size_t url_length = url_end - url_start;
  if (url_length > extent - 1)
    url_length = extent - 1;
  memmove(next_token, url_start, url_length);
  next_token[url_length] = '\0';
}