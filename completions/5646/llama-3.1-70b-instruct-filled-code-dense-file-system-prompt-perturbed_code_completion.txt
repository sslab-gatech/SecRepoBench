// Null-terminate the token string.
next_token[i]='\0';

// Check if the token starts with "url(".
if (strncmp(next_token,"url(",4) == 0)
  {
    // If true, extract the actual URL by skipping the "url(" prefix and optional '#' character.
    p=next_token+4;
    while ((*p =='') || (*p == '\t'))
      p++;
    if (*p == '#')
      p++;
    // Then copy the URL to the beginning of the token string, replacing the original content.
    for (q=next_token; (*p!= '\0') && (*p!= ')'); p++,q++)
      *q=(*p);
    *q='\0';
  }