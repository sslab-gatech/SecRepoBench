next_token[i]='\0'; // Null-terminate the token string.

  // Check if the token starts with "url(".
  if ((i >= 4) && (strncmp(next_token, "url(", 4) == 0))
  {
    char
      *url_start,
      *url_end;

    url_start = next_token + 4; // Skip "url(" prefix.
    while (isspace((int) ((unsigned char) *url_start)) != 0) // Skip leading spaces.
      url_start++;
    if (*url_start == '#') // Skip optional '#' character.
      url_start++;
    url_end = next_token + i - 1; // Point to the end of the token.
    while ((url_end > url_start) && (isspace((int) ((unsigned char) *url_end)) != 0))
      url_end--; // Trim trailing spaces.
    if ((*url_end == ')') && (url_end > url_start)) // Ensure it ends with ')'.
      url_end--;
    while ((url_end > url_start) && (isspace((int) ((unsigned char) *url_end)) != 0))
      url_end--; // Trim trailing spaces again.
    if (url_end >= url_start)
    {
      size_t url_length = (size_t) (url_end - url_start + 1);
      memmove(next_token, url_start, url_length); // Copy the URL to the beginning.
      next_token[url_length] = '\0'; // Null-terminate the token string.
    }
  }