/*
    Null-terminate the token string.
  */
  if (i >= (ssize_t) extent)
    i=(ssize_t) extent-1;
  next_token[i]='\0';

  /*
    Check if the token starts with "url(".
  */
  if (strncmp(next_token,"url(",4) == 0)
  {
    char *url_part=next_token+4;
    /*
      Skip optional '#' character.
    */
    if (*url_part == '#')
      url_part++;
    /*
      Copy the URL to the beginning of the token string, replacing the original content.
    */
    {
      size_t url_length=strlen(url_part);
      if (url_length >= extent)
        url_length=extent-1;
      memmove(next_token,url_part,url_length);
      next_token[url_length]='\0';
    }
  }