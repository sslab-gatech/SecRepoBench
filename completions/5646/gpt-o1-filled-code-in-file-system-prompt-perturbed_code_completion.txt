next_token[i] = '\0';

/* Check if the token starts with "url(" */
if (strncmp(next_token, "url(", 4) == 0)
{
  char *url_start=next_token+4;

  /* Skip optional '#' character */
  if (*url_start == '#')
    url_start++;

  /* Remove trailing ')' if present */
  {
    char *end_paren=strrchr(url_start, ')');
    if (end_paren != (char *) NULL)
      *end_paren='\0';
  }

  /* Shift the actual URL to the beginning of the token array */
  (void) memmove(next_token,url_start,strlen(url_start)+1);
}