import blosc2

# Function to get the usermeta chunk out of a frame
def frame_get_usermeta(frame_struct, usermeta):
    # Get the size of the user metadata from within the trailer
    usermeta_len_network = frame_struct.sdata[frame_struct.trailer_offset + BLOSC_TRAILER_USERMETA_LEN_OFFSET]
    usermeta_len = int.from_bytes(usermeta_len_network.to_bytes(1, 'big'), 'big')

    if usermeta_len == 0:
        usermeta = None
        return 0

    # Get the user metadata chunk
    usermeta = frame_struct.sdata[frame_struct.trailer_offset + BLOSC_TRAILER_USERMETA_OFFSET:frame_struct.trailer_offset + BLOSC_TRAILER_USERMETA_OFFSET + usermeta_len]

    return usermeta_len