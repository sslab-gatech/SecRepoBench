{
  double
    value;
  FxInfo
    *fx_info;
  MagickBooleanType
    status;
  PixelInfo
    pixel;
  char
    hex[MagickPathExtent];

  if (image == (Image *) NULL)
    {
      (void) ThrowMagickException(exception,GetMagickModule(),
        OptionWarning,"NoImageForProperty","\"%%[%s]\"",lookup_pattern);
      continue;
    }
  GetPixelInfo(image,&pixel);
  fx_info=AcquireFxInfo(image,lookup_pattern+4,exception);
  status=FxEvaluateChannelExpression(fx_info,RedPixelChannel,0,0,
    &value,exception);
  pixel.red=(double) QuantumRange*value;
  status&=FxEvaluateChannelExpression(fx_info,GreenPixelChannel,0,0,
    &value,exception);
  pixel.green=(double) QuantumRange*value;
  status&=FxEvaluateChannelExpression(fx_info,BluePixelChannel,0,0,
    &value,exception);
  pixel.blue=(double) QuantumRange*value;
  fx_info=DestroyFxInfo(fx_info);
  if (status != MagickFalse)
    {
      (void) FormatLocaleString(hex,MagickPathExtent,"#%02X%02X%02X",
        (int) (pixel.red  > QuantumRange ? QuantumRange : pixel.red),
        (int) (pixel.green> QuantumRange ? QuantumRange : pixel.green),
        (int) (pixel.blue > QuantumRange ? QuantumRange : pixel.blue));
      AppendString2Text(hex);
    }
  continue;
}