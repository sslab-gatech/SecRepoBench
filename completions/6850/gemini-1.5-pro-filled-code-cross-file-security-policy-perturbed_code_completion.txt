if (image == (Image *) NULL)
            {
              (void) ThrowMagickException(exception,GetMagickModule(),
                OptionWarning,"NoImageForProperty","\"%%[%s]\"",lookup_pattern);
              continue; /* else no image to retrieve artifact */
            }
          if ((image->columns == 0) || (image->rows == 0))
            continue;
          {
            double
              value;

            FxInfo
              *fx_info;

            MagickStatusType
              status;

            PixelInfo
              pixel;

            ssize_t
              x,
              y;

            /*
              Hex Pixel - color value calculator.
            */
            GetPixelInfo(image,&pixel);
            fx_info=AcquireFxInfo(image,lookup_pattern+4,exception);
            status=FxEvaluateChannelExpression(fx_info,RedPixelChannel,0,0,
              &value,exception);
            pixel.red=QuantumRange*value;
            status&=FxEvaluateChannelExpression(fx_info,GreenPixelChannel,0,0,
              &value,exception);
            pixel.green=QuantumRange*value;
            status&=FxEvaluateChannelExpression(fx_info,BluePixelChannel,0,0,
              &value,exception);
            pixel.blue=QuantumRange*value;
            x=(ssize_t) (value+0.5);
            y=(ssize_t) (value+0.5);
            if (image->colorspace == CMYKColorspace)
              {
                status=FxEvaluateChannelExpression(fx_info,BlackPixelChannel,0,0,
                  &value,exception);
                pixel.black=QuantumRange*value;
              }
            fx_info=DestroyFxInfo(fx_info);
            if (status != MagickFalse)
              {
                char
                  hex[MagickPathExtent];

                (void) FormatLocaleString(hex,MagickPathExtent,"#%02X%02X%02X",
                  ScaleQuantumToChar(ClampToQuantum(pixel.red)),
                  ScaleQuantumToChar(ClampToQuantum(pixel.green)),
                  ScaleQuantumToChar(ClampToQuantum(pixel.blue)));
                AppendString2Text(hex);
              }
          }
          continue;