/*
  Hex - color value calculator (returns hex color string).
*/
if (image == (Image *) NULL)
  {
    (void) ThrowMagickException(exception,GetMagickModule(),
      OptionWarning,"NoImageForProperty","\"%%[%s]\"",lookup_pattern);
    continue; /* else no image to retrieve artifact */
  }
PixelInfo
  pixel;
FxInfo
  *fx_info;
MagickStatusType
  status;
double
  value;

GetPixelInfo(image,&pixel);
fx_info=AcquireFxInfo(image,lookup_pattern+4,exception);
status=FxEvaluateChannelExpression(fx_info,RedPixelChannel,0,0,
  &value,exception);
pixel.red=(double) QuantumRange*value;
status&=FxEvaluateChannelExpression(fx_info,GreenPixelChannel,0,0,
  &value,exception);
pixel.green=(double) QuantumRange*value;
status&=FxEvaluateChannelExpression(fx_info,BluePixelChannel,0,0,
  &value,exception);
pixel.blue=(double) QuantumRange*value;
if (image->colorspace == CMYKColorspace)
  {
    status&=FxEvaluateChannelExpression(fx_info,BlackPixelChannel,0,0,
      &value,exception);
    pixel.black=(double) QuantumRange*value;
  }
status&=FxEvaluateChannelExpression(fx_info,AlphaPixelChannel,0,0,
  &value,exception);
pixel.alpha=(double) QuantumRange*value;
fx_info=DestroyFxInfo(fx_info);
if (status != MagickFalse)
  {
    char
      hex[MagickPathExtent];

    (void) QueryColorname(image,&pixel,HexCompliance,hex,exception);
    AppendString2Text(hex);
  }
continue;