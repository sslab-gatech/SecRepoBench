if (image == (Image *) NULL)
          {
            (void) ThrowMagickException(exception,GetMagickModule(),
              OptionWarning,"NoImageForProperty","\"%%[%s]\"",lookup_pattern);
            continue;
          }
        GetPixelInfo(image,&pixel);
        fx_info=AcquireFxInfo(image,lookup_pattern+4,exception);
        status=FxEvaluateChannelExpression(fx_info,RedPixelChannel,0,0,
          &value,exception);
        pixel.red=(double) QuantumRange*value;
        status&=FxEvaluateChannelExpression(fx_info,GreenPixelChannel,0,0,
          &value,exception);
        pixel.green=(double) QuantumRange*value;
        status&=FxEvaluateChannelExpression(fx_info,BluePixelChannel,0,0,
          &value,exception);
        pixel.blue=(double) QuantumRange*value;
        status&=FxEvaluateChannelExpression(fx_info,AlphaPixelChannel,0,0,
          &value,exception);
        pixel.alpha=(double) QuantumRange*value;
        fx_info=DestroyFxInfo(fx_info);
        if (status != MagickFalse)
          {
            char
              hex[MagickPathExtent];

            MagickBooleanType
              include_alpha;

            include_alpha=(pixel.alpha != OpaqueAlpha) ? MagickTrue : MagickFalse;
            if (GetColorTuple(&pixel,include_alpha,hex,exception) != MagickFalse)
              AppendString2Text(hex);
          }