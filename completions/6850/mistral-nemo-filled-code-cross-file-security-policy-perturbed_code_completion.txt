// <MASK>
  if (LocaleCompare("hex:",lookup_pattern,4) == 0)
    {
      // Retrieve pixel information from the image.
      // Acquire a new FxInfo instance using the specified pattern starting after the prefix "hex:".
      // Evaluate the red, green, and blue channel expressions, storing the results in respective pixel channels.
      // Scale the evaluated channel values to the QuantumRange and assign them to the pixel structure.
      // <MASK>
      FxInfo
        *fx_info;

      MagickStatusType
        status;

      PixelInfo
        pixel;

      ssize_t
        x,
        y;

      assert(image != (Image *) NULL);
      assert(image->signature == MagickCoreSignature);
      if (image->debug != MagickFalse)
        (void) LogMagickEvent(TraceEvent,GetMagickModule(),"%s",image->filename);

      fx_info=AcquireFxInfo(image,lookup_pattern+4,exception);
      if (fx_info == (FxInfo *) NULL)
        return((char *) NULL);

      for (y=0; y < (ssize_t) image->rows; y++)
      {
        for (x=0; x < (ssize_t) image->columns; x++)
        {
          status=FxEvaluateChannelExpression(fx_info,RedPixelChannel,x,y,
            &pixel.red,exception);
          if (status == MagickFalse)
            break;
          status&=FxEvaluateChannelExpression(fx_info,GreenPixelChannel,x,y,
            &pixel.green,exception);
          if (status == MagickFalse)
            break;
          status&=FxEvaluateChannelExpression(fx_info,BluePixelChannel,x,y,
            &pixel.blue,exception);
          if (status == MagickFalse)
            break;
          pixel.red=(double) QuantumRange*pixel.red;
          pixel.green=(double) QuantumRange*pixel.green;
          pixel.blue=(double) QuantumRange*pixel.blue;
          SetPixelChannel(image,&pixel,RedPixelChannel);
          SetPixelChannel(image,&pixel,GreenPixelChannel);
          SetPixelChannel(image,&pixel,BluePixelChannel);
        }
        if (status == MagickFalse)
          break;
      }

      fx_info=DestroyFxInfo(fx_info);
      if (status == MagickFalse)
        return((char *) NULL);
    }