if (LocaleNCompare("hex:",lookup_pattern,4) == 0)
{
  // Retrieve pixel information from the image.
  // Acquire a new FxInfo instance using the specified pattern starting after the prefix "hex:".
  // Evaluate the red, green, and blue channel expressions, storing the results in respective pixel channels.
  // <MASK>
  const char
    *string;

  Image
    *image;

  ExceptionInfo
    *exception;

  PixelInfo
    pixel;

  ssize_t
    x,
    y;

  assert(image!= (Image *) NULL);
  assert(image->signature == MagickCoreSignature);
  if (image->debug!= MagickFalse)
    (void) LogMagickEvent(TraceEvent,GetMagickModule(),"%s",image->filename);
  image=AcquireImageByMOID(MagickCoreImageMOID,exception);
  if (image == (Image *) NULL)
    {
      (void) ThrowMagickException(exception,GetMagickModule(),ResourceLimitError,
        "MemoryAllocationFailed","`%s'",lookup_pattern);
      return((char *) NULL);
    }
  GetPixelInfo(image,&pixel);
  string=GetImageProperty(image,lookup_pattern+4,exception);
  if (string == (char *) NULL)
    {
      (void) ThrowMagickException(exception,GetMagickModule(),OptionWarning,
        "UnknownImageProperty","\"%%[%s]\"",lookup_pattern);
      image=DestroyImage(image);
      return((char *) NULL);
    }
  if (LocaleCompare("red",string) == 0)
    {
      for (y=0; y < (ssize_t) image->rows; y++)
      {
        for (x=0; x < (ssize_t) image->columns; x++)
        {
          pixel.red=(double) QuantumRange*GetPixelRed(image,x,y,exception);
        }
      }
    }
  else
    if (LocaleCompare("green",string) == 0)
      {
        for (y=0; y < (ssize_t) image->rows; y++)
        {
          for (x=0; x < (ssize_t) image->columns; x++)
          {
            pixel.green=(double) QuantumRange*GetPixelGreen(image,x,y,exception);
          }
        }
      }
    else
      if (LocaleCompare("blue",string) == 0)
        {
          for (y=0; y < (ssize_t) image->rows; y++)
          {
            for (x=0; x < (ssize_t) image->columns; x++)
            {
              pixel.blue=(double) QuantumRange*GetPixelBlue(image,x,y,exception);
            }
          }
        }
      else
        if (LocaleCompare("alpha",string) == 0)
          {
            for (y=0; y < (ssize_t) image->rows; y++)
            {
              for (x=0; x < (ssize_t) image->columns; x++)
              {
                pixel.alpha=(double) QuantumRange*GetPixelAlpha(image,x,y,exception);
              }
            }
          }
        else
          if (LocaleCompare("all",string) == 0)
            {
              for (y=0; y < (ssize_t) image->rows; y++)
              {
                for (x=0; x < (ssize_t) image->columns; x++)
                {
                  pixel.red=(double) QuantumRange*GetPixelRed(image,x,y,exception);
                  pixel.green=(double) QuantumRange*GetPixelGreen(image,x,y,exception);
                  pixel.blue=(double) QuantumRange*GetPixelBlue(image,x,y,exception);
                  pixel.alpha=(double) QuantumRange*GetPixelAlpha(image,x,y,exception);
                }
              }
            }
          else
            {
              (void) ThrowMagickException(exception,GetMagickModule(),OptionWarning,
                "UnknownImageProperty","\"%%[%s]\"",lookup_pattern);
              image=DestroyImage(image);
              return((char *) NULL);
            }
  image=DestroyImage(image);
  if (LocaleCompare("red",string) == 0)
    {
      char
        result[MagickPathExtent];

      (void) FormatLocaleString(result,MagickPathExtent,"%.*g",
        GetMagickPrecision(),pixel.red);
      AppendString2Text(result);
    }
  else
    if (LocaleCompare("green",string) == 0)
      {
        char
          result[MagickPathExtent];

        (void) FormatLocaleString(result,MagickPathExtent,"%.*g",
          GetMagickPrecision(),pixel.green);
        AppendString2Text(result);
      }
    else
      if (LocaleCompare("blue",string) == 0)
        {
          char
            result[MagickPathExtent];

          (void) FormatLocaleString(result,MagickPathExtent,"%.*g",
            GetMagickPrecision(),pixel.blue);
          AppendString2Text(result);
        }
      else
        if (LocaleCompare("alpha",string) == 0)
          {
            char
              result[MagickPathExtent];

            (void) FormatLocaleString(result,MagickPathExtent,"%.*g",
              GetMagickPrecision(),pixel.alpha);
            AppendString2Text(result);
          }
        else
          if (LocaleCompare("all",string) == 0)
            {
              char
                name[MagickPathExtent];

              (void) QueryColorname(image,&pixel,SVGCompliance,name,exception);
              AppendString2Text(name);
            }
  return((char *) NULL);
}