if (LocaleNCompare("hex:",lookup_pattern,4) == 0)
        {
          double
            value;

          FxInfo
            *fx_info;

          MagickStatusType
            status;

          PixelInfo
            pixel;

          if (image == (Image *) NULL)
            {
              (void) ThrowMagickException(exception,GetMagickModule(),
                OptionWarning,"NoImageForProperty","\"%%[%s]\"",lookup_pattern);
              continue;
            }
          GetPixelInfo(image,&pixel);
          fx_info=AcquireFxInfo(image,lookup_pattern+4,exception);
          status=FxEvaluateChannelExpression(fx_info,RedPixelChannel,0,0,
            &value,exception);
          pixel.red=(double) QuantumRange*value;
          status&=FxEvaluateChannelExpression(fx_info,GreenPixelChannel,0,0,
            &value,exception);
          pixel.green=(double) QuantumRange*value;
          status&=FxEvaluateChannelExpression(fx_info,BluePixelChannel,0,0,
            &value,exception);
          pixel.blue=(double) QuantumRange*value;
          status&=FxEvaluateChannelExpression(fx_info,AlphaPixelChannel,0,0,
            &value,exception);
          pixel.alpha=(double) QuantumRange*value;
          fx_info=DestroyFxInfo(fx_info);
          if (status != MagickFalse)
            {
              char
                hex[MagickPathExtent];

              unsigned int
                a,
                b,
                g,
                r;

              r=(unsigned int) (pixel.red*255.0/QuantumRange+0.5);
              g=(unsigned int) (pixel.green*255.0/QuantumRange+0.5);
              b=(unsigned int) (pixel.blue*255.0/QuantumRange+0.5);
              a=(unsigned int) (pixel.alpha*255.0/QuantumRange+0.5);
              if (image->alpha_trait != UndefinedPixelTrait)
                (void) FormatLocaleString(hex,MagickPathExtent,"#%02X%02X%02X%02X",
                  r,g,b,a);
              else
                (void) FormatLocaleString(hex,MagickPathExtent,"#%02X%02X%02X",
                  r,g,b);
              AppendString2Text(hex);
            }
          continue;
        }