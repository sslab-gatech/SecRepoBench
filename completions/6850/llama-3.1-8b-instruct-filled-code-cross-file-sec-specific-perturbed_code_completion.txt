if (LocaleNCompare("hex:",lookup_pattern,4) == 0)
{
  // Retrieve pixel information from the image.
  // Acquire a new FxInfo instance using the specified pattern starting after the prefix "hex:".
  // Evaluate the red, green, and blue channel expressions, storing the results in respective pixel channels.
  // <MASK>
  const char
    *string;

  PixelInfo
    pixel;

  FxInfo
    *fx_info;

  MagickStatusType
    status;

  ssize_t
    x,
    y;

  assert(image!= (Image *) NULL);
  assert(image->signature == MagickCoreSignature);
  if (image->debug!= MagickFalse)
    (void) LogMagickEvent(TraceEvent,GetMagickModule(),"%s",image->filename);
  GetPixelInfo(image,&pixel);
  fx_info=AcquireFxInfo(image,lookup_pattern+4,exception);
  status=FxEvaluateChannelExpression(fx_info,RedPixelChannel,0,0,
    &pixel.red,exception);
  if (status!= MagickFalse)
    status&=FxEvaluateChannelExpression(fx_info,GreenPixelChannel,0,0,
      &pixel.green,exception);
  if (status!= MagickFalse)
    status&=FxEvaluateChannelExpression(fx_info,BluePixelChannel,0,0,
      &pixel.blue,exception);
  if (image->colorspace == CMYKColorspace)
    {
      status&=FxEvaluateChannelExpression(fx_info,BlackPixelChannel,0,0,
        &pixel.black,exception);
    }
  status&=FxEvaluateChannelExpression(fx_info,AlphaPixelChannel,0,0,
    &pixel.alpha,exception);
  fx_info=DestroyFxInfo(fx_info);
  if (status!= MagickFalse)
    {
      char
        result[MagickPathExtent];

      (void) FormatLocaleString(result,MagickPathExtent,"%02x%02x%02x%02x",
        (unsigned int) (pixel.red+0.5),
        (unsigned int) (pixel.green+0.5),
        (unsigned int) (pixel.blue+0.5),
        (unsigned int) (pixel.alpha+0.5));
      AppendString2Text(result);
    }
  continue;
}