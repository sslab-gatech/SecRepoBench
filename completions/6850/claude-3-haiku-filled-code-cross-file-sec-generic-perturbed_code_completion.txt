// Retrieve pixel information from the image.
FxInfo *fx_info = AcquireFxInfo(image, lookup_pattern + 4, exception);
PixelInfo pixel;
GetPixelInfo(image, &pixel);

// Evaluate the red, green, and blue channel expressions, storing the results in respective pixel channels.
FxEvaluateChannelExpression(fx_info, RedPixelChannel, 0, 0, &pixel.red, exception);
FxEvaluateChannelExpression(fx_info, GreenPixelChannel, 0, 0, &pixel.green, exception);
FxEvaluateChannelExpression(fx_info, BluePixelChannel, 0, 0, &pixel.blue, exception);

// Scale the evaluated channel values to the QuantumRange and assign them to the pixel structure.
pixel.red = QuantumRange * pixel.red;
pixel.green = QuantumRange * pixel.green;
pixel.blue = QuantumRange * pixel.blue;

// Destroy the FxInfo instance
fx_info = DestroyFxInfo(fx_info);