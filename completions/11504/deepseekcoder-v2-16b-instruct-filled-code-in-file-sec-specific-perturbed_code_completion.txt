*/
    if (prefix != NULL) {
	if (xmlStrEqual(prefix, BAD_CAST "xmlns")) {
	    xmlNsPtr ns;
	    xmlChar *value;

	    if (atts != NULL) {
		att = atts[0];
		while (att != NULL) {
		    value = att + 1;
		    att = att + 2;
		    if ((value != NULL) && (xmlStrncmp(value, BAD_CAST "xmlns", 5) == 0)) {
			ns = xmlNewNs(ret, NULL, NULL);
			if (ns != NULL) {
			    if (xmlStrncmp(value, BAD_CAST "xmlns:", 7) == 0) {
				ns->prefix = xmlStrncpy(xmlMalloc(6), value + 7, 5);
			    } else {
				ns->prefix = xmlStrncpy(xmlMalloc(6), value, 5);
			    }
			    if (ns->prefix != NULL) {
				xmlFree(name);
				name = xmlStrdup(ns->prefix);
				xmlFree(prefix);
				prefix = NULL;
			    }
			}
		    }
		}
	    }
	}
    }

    /*
     * Process the attributes
     */
    if (atts != NULL) {
	i = 0;
	att = atts[i];
	while (att != NULL) {
	    value = att + 1;
	    att = att + 2;
	    xmlSAX2AttributeInternal(ctxt, att, value, prefix);
	}
    }

    /*
     * Now that all the attributes are processed, we can resolve the
     * namespaces.
     */
    if (prefix != NULL) {
	ns = xmlSearchNs(ctxt->myDoc, ret, prefix);
	if (ns == NULL) {
	    ns = xmlNewNs(ret, NULL, prefix);
	}
    } else {
	ns = xmlSearchNs(ctxt->myDoc, ret, NULL);
	if (ns == NULL) {
	    ns = xmlNewNs(ret, NULL, NULL);
	}
    }
    if (ns != NULL) {
	xmlSetNs(ret, ns);
    }

    /*
     * Set the node name
     */
    if (name != NULL) {
	xmlNodeSetName(ret, name);
    }

    /*
     * Set the node content
     */
    if (ctxt->sax != NULL) {
	ctxt->sax->startElement(ctxt->userData, name, atts);
    }

    /*
     * Update the context
     */
    ctxt->node = ret;
    ctxt->depth++;
    ctxt->nbchars = 0;
    ctxt->nbinput = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0;
    ctxt->nbentitiesTab = NULL;
    ctxt->nbentitiesEnd = 0;
    ctxt->nbentitiesSize = 0;
    ctxt->nbentitiesAlloc = 0;
    ctxt->nbentities = 0;
    ctxt->nbentitiesPtr = 0;
    ctxt->nbentitiesMax = 0