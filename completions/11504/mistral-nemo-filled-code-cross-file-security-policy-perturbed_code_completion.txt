if (parser_ctxt->freeElems != NULL) {
        // Reuse an existing xmlNode from the parser context's free elements list.
        ret = parser_ctxt->freeElems;
        parser_ctxt->freeElems = parser_ctxt->freeElems->next;
        ret->next = NULL;
        ret->type = XML_ELEMENT_NODE;
        ret->name = xmlDictQLookup(parser_ctxt->dict, localname, NULL);
        if (ret->name == NULL) {
            xmlSAX2ErrMemory(parser_ctxt, "xmlSAX2StartElementNs");
            return;
        }
        if (parser_ctxt->dictNames) {
            ret->ns = xmlSearchNs(parser_ctxt->myDoc, parent, prefix);
        } else {
            ret->ns = NULL;
        }
        if (ret->ns == NULL && prefix != NULL) {
            ret->ns = xmlNewNs(ret, NULL, prefix);
            if (ret->ns == NULL) {
                xmlSAX2ErrMemory(parser_ctxt, "xmlSAX2StartElementNs");
                return;
            }
        }
    } else {
        ret = xmlNewDocNode(parser_ctxt->myDoc, NULL, localname, NULL);
        if (ret == NULL) {
            xmlSAX2ErrMemory(parser_ctxt, "xmlSAX2StartElementNs");
            return;
        }
    }