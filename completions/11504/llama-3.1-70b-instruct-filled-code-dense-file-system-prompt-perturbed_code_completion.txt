ret = parser_ctxt->freeElems;
if (ret!= NULL) {
    parser_ctxt->freeElems = ret->next;
    parser_ctxt->freeElemsNr--;
    ret->next = NULL;
    ret->type = XML_ELEMENT_NODE;
    if (parser_ctxt->dictNames)
        ret->name = xmlDictQLookup(parser_ctxt->dict, prefix, localname);
    else
        ret->name = xmlBuildQName(localname, prefix, NULL, 0);
    if (ret->name == NULL) {
        xmlSAX2ErrMemory(parser_ctxt, "xmlSAX2StartElementNs");
        return;
    }
    memset(ret->properties, 0, sizeof(xmlAttrPtr));
    memset(ret->children, 0, sizeof(xmlNodePtr));
    memset(ret->content, 0, sizeof(xmlString));
    memset(ret->ns, 0, sizeof(xmlNsPtr));
    memset(ret->nsDef, 0, sizeof(xmlNsPtr));
    memset(ret->predecessor, 0, sizeof(xmlNodePtr));
    memset(ret->next, 0, sizeof(xmlNodePtr));
    memset(ret->parent, 0, sizeof(xmlNodePtr));
    memset(ret->last, 0, sizeof(xmlNodePtr));
    memset(ret->properties, 0, sizeof(xmlAttrPtr));
    memset(ret->ns, 0, sizeof(xmlNsPtr));
    memset(ret->content, 0, sizeof(xmlString));
    memset(ret->properties, 0, sizeof(xmlAttrPtr));
    memset(ret->children, 0, sizeof(xmlNodePtr));
    memset(ret->last, 0, sizeof(xmlNodePtr));
    memset(ret->parent, 0, sizeof(xmlNodePtr));
    memset(ret->next, 0, sizeof(xmlNodePtr));
    memset(ret->doc, 0, sizeof(xmlDocPtr));
    memset(ret->line, 0, sizeof(int));
    memset(ret->extra, 0, sizeof(void *));
} else {
    if (parser_ctxt->dictNames)
        ret = xmlNewDocNodeEatName(parser_ctxt->myDoc, NULL,
                                   (xmlChar *) localname, NULL);
    else if (lname == NULL)
        ret = xmlNewDocNode(parser_ctxt->myDoc, NULL, localname, NULL);
    else
        ret = xmlNewDocNodeEatName(parser_ctxt->myDoc, NULL,
                                   (xmlChar *) lname, NULL);
    if (ret == NULL) {
        xmlSAX2ErrMemory(parser_ctxt, "xmlSAX2StartElementNs");
        return;
    }
}