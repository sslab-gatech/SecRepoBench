// Calculate the coefficient using a lookup table and adjust it based on
// the position within the block and a quality scale.
magnitude = av_clip(magnitude, 0, (1 << num_bits) - 1);
coeff = ctx->vlc.symbols[vlc] * ctx->quant_matrix[ctx->scantable.permutated[pos]] * qscale / 8;
coeff = (magnitude ^ (vlc & 0x100)) - (vlc & 0x100);