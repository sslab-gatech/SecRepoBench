if (num_bits > 8 || pos >= 64)
    return AVERROR_INVALIDDATA;

coeff = vlcdec_lookup[num_bits][magnitude];
if (coeff == 0)
    return AVERROR_INVALIDDATA;

if (pos < 64) {
    coeff *= qscale;
    coeff /= (pos > 2 ? 2 * pos - 2 : 2);
    if (coeff < -2048)
        coeff = -2048;
    else if (coeff > 2047)
        coeff = 2047;
} else {
    coeff = 0;
}