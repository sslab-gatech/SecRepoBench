// Use the magnitude to determine the coefficient value
        coeff = (magnitude ^ (1 << (num_bits - 1))) + 1; // Adjust sign based on the magnitude
        coeff *= (qscale >> 2); // Scale the coefficient based on the quality scale