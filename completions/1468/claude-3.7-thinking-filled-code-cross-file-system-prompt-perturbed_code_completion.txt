if (num_bits == 0) {
    coeff = 0;
} else {
    // Extract sign from the MSB of magnitude
    int sign = (magnitude >> (num_bits - 1)) ? -1 : 1;
    // Remove the sign bit and get absolute value
    magnitude &= (1 << (num_bits - 1)) - 1;
    // Dequantize using the quality scale
    coeff = sign * ((magnitude * qscale) >> 2);
}