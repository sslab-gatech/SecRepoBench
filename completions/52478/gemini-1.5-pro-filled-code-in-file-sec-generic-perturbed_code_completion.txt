switch ((*it).pre) {

        case LWO::PrePostBehaviour_OffsetRepeat:
        case LWO::PrePostBehaviour_Repeat: {
            const double val_delta = (*it).keys.back().value - (*it).keys.front().value;

            size_t old_size = (*it).keys.size();
            double post_time = firsttime;
            unsigned int i = 0;
            while (post_time > first) {
                post_time -= delta;
                LWO::Key k = (*it).keys[i % old_size];
                k.time = post_time;

                if ((*it).pre == LWO::PrePostBehaviour_OffsetRepeat) {
                    k.value -= val_delta * (i / old_size);
                }

                (*it).keys.insert((*it).keys.begin(), k);
                ++i;
            }
            (*it).old_first = (*it).keys.size() - old_size;

            old_size = (*it).keys.size();
            double pre_time = my_last;
            i = 0;
            while (pre_time < last) {
                pre_time += delta;
                LWO::Key k = (*it).keys[i % old_size];
                k.time = pre_time;

                if ((*it).pre == LWO::PrePostBehaviour_OffsetRepeat) {
                    k.value += val_delta * (i / old_size);
                }

                (*it).keys.push_back(k);
                ++i;
            }
            (*it).old_last = old_size - 1;
            break;
        }

        case LWO::PrePostBehaviour_Oscillate: {
            const size_t old_size = (*it).keys.size();
            double post_time = firsttime;
            unsigned int i = 0;
            while (post_time > first) {
                post_time -= delta;
                LWO::Key k = (*it).keys[old_size - (i % old_size) - 1];
                k.time = post_time;
                (*it).keys.insert((*it).keys.begin(), k);
                ++i;
            }
            (*it).old_first = (*it).keys.size() - old_size;

            old_size = (*it).keys.size();
            double pre_time = my_last;
            i = 0;
            while (pre_time < last) {
                pre_time += delta;
                LWO::Key k = (*it).keys[old_size - (i % old_size) - 1];
                k.time = pre_time;
                (*it).keys.push_back(k);
                ++i;
            }
            (*it).old_last = old_size - 1;
            break;
        }

        default:
            // silence compiler warning
            break;
        }