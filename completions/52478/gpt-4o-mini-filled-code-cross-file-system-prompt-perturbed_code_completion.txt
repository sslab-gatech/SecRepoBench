// Insert pre-behavior keys based on the envelope's pre behavior type
        switch ((*it).pre) {
            case LWO::PrePostBehaviour_OffsetRepeat: {
                // Calculate the number of additional keys needed for OffsetRepeat
                size_t numKeys = static_cast<size_t>(delta / (my_last - firsttime));
                for (size_t j = 0; j < numKeys; ++j) {
                    Key newKey;
                    newKey.time = firsttime + j * (my_last - firsttime);
                    newKey.value = (*it).keys.front().value; // Repeat the first key's value
                    (*it).keys.insert((*it).keys.begin(), newKey);
                }
                break;
            }
            case LWO::PrePostBehaviour_Repeat: {
                // Insert keys to repeat the envelope
                for (double t = firsttime; t < my_last; t += delta) {
                    Key newKey;
                    newKey.time = t;
                    newKey.value = (*it).keys.front().value; // Repeat the first key's value
                    (*it).keys.push_back(newKey);
                }
                break;
            }
            case LWO::PrePostBehaviour_Oscillate: {
                // Insert keys for oscillation behavior
                for (double t = firsttime; t < my_last; t += delta) {
                    Key newKey;
                    newKey.time = t;
                    newKey.value = (t - firsttime < delta / 2) ? (*it).keys.front().value : (*it).keys.back().value;
                    (*it).keys.push_back(newKey);
                }
                break;
            }
            default:
                break;
        }