// process pre behavior
        switch ((*it).pre) {
        case LWO::PrePostBehaviour_OffsetRepeat:
        case LWO::PrePostBehaviour_Repeat:
        case LWO::PrePostBehaviour_Oscillate: {
            // Calculate the number of additional keys needed for pre behavior
            int numPreKeys = static_cast<int>(first / delta);
            for (int i = 1; i <= numPreKeys; ++i) {
                double newTime = firsttime - i * delta;
                double valueDelta = (*it).keys.back().value - (*it).keys.front().value;
                double newValue = (*it).keys.front().value;

                if ((*it).pre == LWO::PrePostBehaviour_OffsetRepeat) {
                    newValue -= i * valueDelta;
                } else if ((*it).pre == LWO::PrePostBehaviour_Repeat) {
                    newValue = (*it).keys.front().value;
                } else if ((*it).pre == LWO::PrePostBehaviour_Oscillate) {
                    if (i % 2 == 1) {
                        newValue = (*it).keys.back().value;
                    }
                }

                LWO::Key newKey;
                newKey.time = newTime;
                newKey.value = newValue;
                (*it).keys.insert((*it).keys.begin(), newKey);
            }
            break;
        }
        default:
            // silence compiler warning
            break;
        }