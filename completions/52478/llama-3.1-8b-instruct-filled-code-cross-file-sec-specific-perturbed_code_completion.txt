// Handles the pre-behavior of LightWave envelopes by inserting additional keyframes
// for pre-defined behaviors such as OffsetRepeat, Repeat, and Oscillate. This involves
// calculating the time delta between keys and adjusting keyframe values accordingly.
// The logic uses the start time, end time, and value delta to calculate new keyframe
// positions and values, adapting to the pre-behavior type.
if ((*it).pre == LWO::PrePostBehaviour_OffsetRepeat) {
    // Calculate the offset and repeat values
    double offset = (*it).keys.back().value - (*it).keys.front().value;
    double repeat = (*it).keys.back().time - (*it).keys.front().time;

    // Insert new keyframes for the offset and repeat behaviors
    for (double t = (*it).keys.front().time; t < (*it).keys.back().time; t += repeat) {
        LWO::Key new_key;
        new_key.time = t;
        new_key.value = (*it).keys.front().value + offset;
        (*it).keys.push_back(new_key);
    }
} else if ((*it).pre == LWO::PrePostBehaviour_Repeat) {
    // Calculate the repeat value
    double repeat = (*it).keys.back().time - (*it).keys.front().time;

    // Insert new keyframes for the repeat behavior
    for (double t = (*it).keys.front().time; t < (*it).keys.back().time; t += repeat) {
        LWO::Key new_key;
        new_key.time = t;
        new_key.value = (*it).keys.front().value;
        (*it).keys.push_back(new_key);
    }
} else if ((*it).pre == LWO::PrePostBehaviour_Oscillate) {
    // Calculate the oscillation parameters
    double amplitude = (*it).keys.back().value - (*it).keys.front().value;
    double period = (*it).keys.back().time - (*it).keys.front().time;

    // Insert new keyframes for the oscillation behavior
    for (double t = (*it).keys.front().time; t < (*it).keys.back().time; t += period) {
        LWO::Key new_key;
        new_key.time = t;
        new_key.value = (*it).keys.front().value + amplitude * sin(2 * M_PI * (t - (*it).keys.front().time) / period);
        (*it).keys.push_back(new_key);
    }
}