// Handles the pre-behavior of LightWave envelopes by inserting additional keyframes
// for pre-defined behaviors such as OffsetRepeat, Repeat, and Oscillate. This involves
// calculating the time delta between keys and adjusting keyframe values accordingly.
// The logic uses the start time, end time, and value delta to calculate new keyframe
// positions and values, adapting to the pre-behavior type.
switch ((*it).pre) {
    case LWO::PrePostBehaviour_OffsetRepeat:
    case LWO::PrePostBehaviour_Repeat:
    case LWO::PrePostBehaviour_Oscillate:
    {
        double offset = 0.0;
        double repeat = 1.0;
        double oscillate = 1.0;

        // Calculate the time delta between the first and last keyframes
        double timeDelta = my_last - firsttime;

        // Calculate the value delta between the first and last keyframes
        float valueDelta = (*it).keys.back().value - (*it).keys.front().value;

        // Calculate the offset, repeat, and oscillate values based on the pre-behavior type
        switch ((*it).pre) {
            case LWO::PrePostBehaviour_OffsetRepeat:
                offset = valueDelta;
                break;
            case LWO::PrePostBehaviour_Repeat:
                repeat = timeDelta;
                break;
            case LWO::PrePostBehaviour_Oscillate:
                oscillate = timeDelta;
                break;
        }

        // Insert additional keyframes based on the pre-behavior type
        for (double t = firsttime; t < my_last; t += repeat) {
            LWO::Key newKey;
            newKey.time = t;
            newKey.value = (*it).keys.front().value + (valueDelta * (t - firsttime) / timeDelta);

            // Apply the offset, repeat, and oscillate values to the new keyframe
            switch ((*it).pre) {
                case LWO::PrePostBehaviour_OffsetRepeat:
                    newKey.value += offset;
                    break;
                case LWO::PrePostBehaviour_Repeat:
                    newKey.value = (*it).keys.front().value + (valueDelta * (t - firsttime) / timeDelta);
                    break;
                case LWO::PrePostBehaviour_Oscillate:
                    newKey.value = (*it).keys.front().value + (valueDelta * sin((t - firsttime) / oscillate));
                    break;
            }

            (*it).keys.push_back(newKey);
        }
        break;
    }
    default:
        // silence compiler warning
        break;
}