// process pre behavior
        switch ((*it).pre) {
        case LWO::PrePostBehaviour_OffsetRepeat:
        case LWO::PrePostBehaviour_Repeat:
        case LWO::PrePostBehaviour_Oscillate: {
            // Calculate the number of repetitions needed before the first keyframe
            double pre_duration = first - firsttime;
            if (pre_duration > 0) {
                int num_repeats = static_cast<int>(pre_duration / delta);
                double offset = num_repeats * delta;
                for (const auto& key : (*it).keys) {
                    LWO::Key new_key = key;
                    new_key.time = key.time - offset;
                    (*it).keys.insert((*it).keys.begin(), new_key);
                }
            }
            break;
        }
        default:
            // silence compiler warning
            break;
        }