switch ((*it).pre) {
    case LWO::PrePostBehaviour_OffsetRepeat:
    case LWO::PrePostBehaviour_Repeat:
    case LWO::PrePostBehaviour_Oscillate:
        // Calculate how many repeats we need to add before the first key
        const int n = static_cast<int>(firsttime / delta);
        
        // Insert new keys at the beginning of the keyframes vector
        for (int i = 0; i < n; i++) {
            const double insert_time = firsttime - (n - i) * delta;
            LWO::Key new_key;
            new_key.time = insert_time;
            
            // For OffsetRepeat and Repeat, use the first value
            // For Oscillate, alternate between first and last value
            if ((*it).pre == LWO::PrePostBehaviour_Oscillate && i % 2 == 1) {
                new_key.value = (*it).keys.back().value;
            } else {
                new_key.value = (*it).keys.front().value;
            }
            
            new_key.inter = (*it).keys.front().inter;
            std::copy_n((*it).keys.front().params, 5, new_key.params);
            
            (*it).keys.insert((*it).keys.begin(), new_key);
        }
        break;

    default:
        break;
}