// process pre behavior
        switch ((*it).pre) {
        case LWO::PrePostBehaviour_OffsetRepeat:
        case LWO::PrePostBehaviour_Repeat:
        case LWO::PrePostBehaviour_Oscillate: {
            const double start_value = (*it).keys.front().value;
            const double end_value = (*it).keys.back().value;
            const double value_delta = end_value - start_value;

            // Insert keys for pre behavior
            for (double t = firsttime - delta; t >= first; t -= delta) {
                LWO::Key new_key;
                new_key.time = t;
                new_key.value = start_value + value_delta * ((firsttime - t) / delta);

                if ((*it).pre == LWO::PrePostBehaviour_Oscillate && ((int)((firsttime - t) / delta) % 2) == 1) {
                    new_key.value = end_value - (new_key.value - start_value);
                }

                (*it).keys.insert((*it).keys.begin(), new_key);
            }
            break;
        }
        default:
            // silence compiler warning
            break;
        }