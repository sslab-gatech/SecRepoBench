// Handles the pre-behavior of LightWave envelopes by inserting additional keyframes
// for pre-defined behaviors such as OffsetRepeat, Repeat, and Oscillate. This involves
// calculating the time delta between keys and adjusting keyframe values accordingly.
// The logic uses the start time, end time, and value delta to calculate new keyframe
// positions and values, adapting to the pre-behavior type.
if ((*it).pre == LWO::PrePostBehaviour_OffsetRepeat) {
    // Insert additional keyframes for OffsetRepeat behavior
    double offset = (*it).keys.back().value;
    double repeat = (*it).keys.front().value;
    double repeat_time = (*it).keys.front().time;
    double last_time = (*it).keys.back().time;

    // Calculate the time delta between keys
    double delta = last_time - repeat_time;

    // Insert new keyframes
    for (double t = repeat_time; t <= last_time; t += delta) {
        LWO::Key new_key;
        new_key.time = t;
        new_key.value = repeat + (t - repeat_time) * offset;
        (*it).keys.push_back(new_key);
    }
} else if ((*it).pre == LWO::PrePostBehaviour_Repeat) {
    // Insert additional keyframes for Repeat behavior
    double repeat = (*it).keys.front().value;
    double repeat_time = (*it).keys.front().time;
    double last_time = (*it).keys.back().time;

    // Calculate the time delta between keys
    double delta = last_time - repeat_time;

    // Insert new keyframes
    for (double t = repeat_time; t <= last_time; t += delta) {
        LWO::Key new_key;
        new_key.time = t;
        new_key.value = repeat;
        (*it).keys.push_back(new_key);
    }
} else if ((*it).pre == LWO::PrePostBehaviour_Oscillate) {
    // Insert additional keyframes for Oscillate behavior
    double amplitude = (*it).keys.front().value;
    double frequency = (*it).keys.back().value;
    double repeat_time = (*it).keys.front().time;
    double last_time = (*it).keys.back().time;

    // Calculate the time delta between keys
    double delta = last_time - repeat_time;

    // Insert new keyframes
    for (double t = repeat_time; t <= last_time; t += delta) {
        LWO::Key new_key;
        new_key.time = t;
        new_key.value = amplitude * sin(2 * M_PI * frequency * (t - repeat_time));
        (*it).keys.push_back(new_key);
    }
}