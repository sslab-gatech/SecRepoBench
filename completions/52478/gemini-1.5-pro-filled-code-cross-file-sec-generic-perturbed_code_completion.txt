// process pre behavior
        switch ((*it).pre) {

        case LWO::PrePostBehaviour_OffsetRepeat:
        case LWO::PrePostBehaviour_Repeat:
        case LWO::PrePostBehaviour_Oscillate:
            {
                const size_t oldsize = (*it).keys.size();
                (*it).old_first = 0;
                (*it).old_last = static_cast<size_t>(oldsize - 1);


                double post_time = delta;
                const double value_delta = (*it).keys.back().value - (*it).keys.front().value;

                if (delta < 1e-6) {
                    // avoid division by zero, it doesn't make any sense to extrapolate
                    // anim data here.
                    break;
                }

                while (firsttime > 0.0) {
                    LWO::Key key = (*it).keys[(*it).old_first];
                    key.time -= delta;

                    switch ((*it).pre) {
                        case LWO::PrePostBehaviour_OffsetRepeat:
                            key.value -= value_delta;
                            break;
                        case LWO::PrePostBehaviour_Repeat:
                            // nothing to do
                            break;
                        case LWO::PrePostBehaviour_Oscillate:
                            key.value = (*it).keys.front().value + (value_delta - (key.value - (*it).keys.front().value));
                            break;
                        default:
                            break;
                    }
                    (*it).keys.insert((*it).keys.begin(), key);
                    firsttime -= delta;
                    post_time += delta;
                    ++(*it).old_first;
                    ++(*it).old_last;
                }
            }
            break;

        default:
            // silence compiler warning
            break;
        }