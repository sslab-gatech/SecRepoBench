// process pre behavior
        switch ((*it).pre) {
        case LWO::PrePostBehaviour_OffsetRepeat:
        case LWO::PrePostBehaviour_Repeat:
        case LWO::PrePostBehaviour_Oscillate: {
            // Calculate the number of repetitions needed to cover the range
            const double range_start = firsttime;
            const double range_end = firsttime + delta;
            const double period = delta;

            if (period > 0.0) {
                double current_time = range_start - period;
                while (current_time >= first) {
                    LWO::Key new_key = (*it).keys.back();
                    new_key.time = current_time;
                    new_key.value -= (float)((*it).keys.back().value - (*it).keys.front().value);
                    (*it).keys.insert((*it).keys.begin(), new_key);
                    current_time -= period;
                }
            }
            break;
        }
        default:
            // No pre behavior to process
            break;
        }