// process pre behavior
        switch ((*it).pre) {
        case LWO::PrePostBehaviour_OffsetRepeat:
        case LWO::PrePostBehaviour_Repeat:
        case LWO::PrePostBehaviour_Oscillate: {
            // Calculate the number of repetitions needed before the first keyframe
            double pre_time = firsttime;
            while (pre_time > first) {
                double offset = delta;
                if ((*it).pre == LWO::PrePostBehaviour_OffsetRepeat) {
                    offset *= -1.0;
                }

                for (auto rit = (*it).keys.rbegin(); rit != (*it).keys.rend(); ++rit) {
                    LWO::Key new_key = *rit;
                    new_key.time -= delta;
                    new_key.value += offset;
                    if (new_key.time < first) {
                        break;
                    }
                    (*it).keys.insert((*it).keys.begin(), new_key);
                }
                pre_time -= delta;
            }
            break;
        }
        default:
            // No pre behavior or unsupported behavior
            break;
        }