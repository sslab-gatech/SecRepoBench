// Handles the pre-behavior of LightWave envelopes by inserting additional keyframes
// for pre-defined behaviors such as OffsetRepeat, Repeat, and Oscillate. This involves
// calculating the time delta between keys and adjusting keyframe values accordingly.
// The logic uses the start time, end time, and value delta to calculate new keyframe
// positions and values, adapting to the pre-behavior type.
if (delta > 0.0) {
    switch ((*it).pre) {
    case LWO::PrePostBehaviour_OffsetRepeat:
    case LWO::PrePostBehaviour_Repeat:
        {
            const double repeat_count = std::floor(firsttime / delta);
            const double repeat_offset = repeat_count * delta;
            for (std::vector<LWO::Key>::iterator kit = (*it).keys.begin(); kit != (*it).keys.end(); ++kit) {
                (*kit).time += repeat_offset;
            }
        }
        break;
    case LWO::PrePostBehaviour_Oscillate:
        {
            const double oscillate_count = std::floor(firsttime / (2.0 * delta));
            const double oscillate_offset = oscillate_count * 2.0 * delta;
            for (std::vector<LWO::Key>::iterator kit = (*it).keys.begin(); kit != (*it).keys.end(); ++kit) {
                (*kit).time += oscillate_offset;
                if (static_cast<int>(oscillate_count) % 2 == 1) {
                    (*kit).value = (*it).keys.back().value - (*kit).value;
                }
            }
        }
        break;
    default:
        // silence compiler warning
        break;
    }
}