// process pre behavior
switch ((*it).pre) {
    case LWO::PrePostBehaviour_Reset:
        // insert a key at firsttime with value 0
        {
            LWO::Key k;
            k.time = firsttime;
            k.value = 0.0f;
            (*it).keys.insert((*it).keys.begin(), k);
        }
        break;

    case LWO::PrePostBehaviour_Constant:
        // insert a key at firsttime with value of first key
        {
            LWO::Key k;
            k.time = firsttime;
            k.value = (*it).keys.front().value;
            (*it).keys.insert((*it).keys.begin(), k);
        }
        break;

    case LWO::PrePostBehaviour_Repeat:
    case LWO::PrePostBehaviour_Oscillate:
    case LWO::PrePostBehaviour_OffsetRepeat:
        {
            double t = firsttime;
            double val_delta = (*it).keys.back().value - (*it).keys.front().value;
            double time_delta = (*it).keys.back().time - (*it).keys.front().time;

            // insert keys to match time range
            while (t < firsttime + delta) {
                LWO::Key k;
                k.time = t;

                switch ((*it).pre) {
                    case LWO::PrePostBehaviour_Repeat:
                        k.value = (*it).keys.front().value + val_delta * (t % time_delta) / time_delta;
                        break;

                    case LWO::PrePostBehaviour_Oscillate:
                        k.value = (*it).keys.front().value + val_delta * (fabs((t / time_delta) - floor(0.5 + t / time_delta)) * 2.0);
                        break;

                    case LWO::PrePostBehaviour_OffsetRepeat:
                        k.value = (*it).keys.front().value + val_delta * (t % time_delta) / time_delta;
                        if ((int)(t / time_delta) % 2) {
                            k.value = (*it).keys.back().value - k.value + (*it).keys.front().value;
                        }
                        break;

                    default:
                        // silence compiler warning
                        break;
                }

                (*it).keys.insert((*it).keys.begin(), k);
                t += delta;
            }
        }
        break;

    default:
        // silence compiler warning
        break;
}