// process pre behavior
switch ((*it).pre) {
    case LWO::PrePostBehaviour_OffsetRepeat:
    case LWO::PrePostBehaviour_Repeat:
    case LWO::PrePostBehaviour_Oscillate:
        {
            const double value_delta = (*it).keys.back().value - (*it).keys.front().value;
            const size_t num_keys = static_cast<size_t>((firsttime - first) / delta);

            std::vector<LWO::Key> new_keys;
            new_keys.reserve(num_keys);

            for (size_t i = 0; i < num_keys; ++i) {
                LWO::Key k;
                k.time = first + delta * i;

                switch ((*it).pre) {
                    case LWO::PrePostBehaviour_OffsetRepeat:
                        k.value = (*it).keys.front().value + value_delta * (i + 1);
                        break;
                    case LWO::PrePostBehaviour_Repeat:
                        k.value = (*it).keys[i % (*it).keys.size()].value;
                        break;
                    case LWO::PrePostBehaviour_Oscillate:
                        k.value = (i % 2 == 0) ? 
                            (*it).keys[i % (*it).keys.size()].value : 
                            (*it).keys[(*it).keys.size() - 1 - (i % (*it).keys.size())].value;
                        break;
                    default:
                        break;
                }

                new_keys.push_back(k);
            }

            (*it).keys.insert((*it).keys.begin(), new_keys.begin(), new_keys.end());
        }
        break;

    default:
        // silence compiler warning
        break;
}