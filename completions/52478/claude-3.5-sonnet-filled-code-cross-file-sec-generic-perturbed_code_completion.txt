// process pre behavior
switch ((*it).pre) {
    case LWO::PrePostBehaviour_OffsetRepeat:
    case LWO::PrePostBehaviour_Repeat:
    case LWO::PrePostBehaviour_Oscillate:
        {
            double time = firsttime - delta;
            while (time >= 0.0) {
                LWO::Key new_key;
                new_key.time = time;

                if ((*it).pre == LWO::PrePostBehaviour_OffsetRepeat) {
                    new_key.value = (*it).keys.front().value - ((*it).keys.back().value - (*it).keys.front().value);
                } else if ((*it).pre == LWO::PrePostBehaviour_Repeat) {
                    new_key.value = (*it).keys.back().value;
                } else { // Oscillate
                    new_key.value = (*it).keys.front().value + ((*it).keys.back().value - (*it).keys.front().value) * (1.0 - (time - firsttime + delta) / delta);
                }

                (*it).keys.push_front(new_key);
                time -= delta;
            }
        }
        break;

    default:
        // No pre-behavior modification needed
        break;
}