int status;
size_t footer_start;
uint8_t *pb;
size_t out_size;
void *out_buf;
z_stream strm;
unsigned int crc;

/* Calculate maximum size for compressed data (worst case) */
/* Using a conservative estimate: input_size + 30% + a moderate overhead */
out_size = input_size + (input_size * 3 / 10) + 128;
/* Add space for gzip header and footer */
out_size += FLB_GZIP_HEADER_OFFSET + 8;

/* Allocate memory for the output buffer */
out_buf = flb_malloc(out_size);