size_t max_size = input_size + (input_size / 16) + 64 + 12; // Calculate the maximum required size for the output buffer
void *out_buf = malloc(max_size); // Allocate memory for the output buffer based on the calculated maximum size
if (!out_buf) {
    flb_errno();
    flb_error("[gzip] could not allocate outgoing buffer");
    return -1;
}