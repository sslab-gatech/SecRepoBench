int status;
size_t footer_start;
uint8_t *pb;
z_stream strm;
uint32_t crc;
size_t out_size;
void *out_buf;

/* Calculate worst-case output size for compression overhead + GZip header/footer */
out_size = input_size + (input_size / 10) + 128;
out_size += FLB_GZIP_HEADER_OFFSET + 8;

/* Allocate memory for the output buffer */
out_buf = flb_malloc(out_size);