int status;
size_t footer_start;
uint8_t *pb;
size_t out_size;
void *out_buf;
z_stream strm;
mz_ulong crc;

/* Calculate max output size (header + compressed data + footer) */
out_size = FLB_GZIP_HEADER_OFFSET + input_size + (input_size / 100) + 32 + 8;

/* Allocate buffer for compressed data */
out_buf = flb_malloc(out_size);