// <MASK>
out_size = (input_size + 9) & ~7;
out_buf = flb_malloc(out_size);
if (!out_buf) {
    flb_errno();
    flb_error("[gzip] could not allocate outgoing buffer");
    return -1;
}
memset(out_buf, 0, out_size);
strm.zalloc = Z_NULL;
strm.zfree = Z_NULL;
strm.opaque = Z_NULL;
strm.next_in = in_data;
strm.avail_in = input_size;
strm.total_out = 0;
deflateInit2(&strm, Z_DEFAULT_COMPRESSION, Z_DEFLATED, -Z_DEFAULT_WINDOW_BITS, 9, Z_DEFAULT_STRATEGY);