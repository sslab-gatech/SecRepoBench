// Determine the maximum required size for the output buffer to store the compressed data.
// This calculation accounts for the potential worst-case size expansion due to compression.
out_size = input_size + (input_size / 1000) + 12; // 12 bytes for gzip header and footer

// Allocate memory for the output buffer based on the calculated maximum size.
*out_data = flb_malloc(out_size);
out_buf = *out_data;