// Determine the maximum required size for the output buffer to store the compressed data.
// This calculation accounts for the potential worst-case size expansion due to compression.
size_t out_size = compressBound(input_size);

// Allocate memory for the output buffer based on the calculated maximum size.
out_buf = flb_malloc(out_size);
if (!out_buf) {
    flb_errno();
    flb_error("[gzip] could not allocate outgoing buffer");
    return -1;
}