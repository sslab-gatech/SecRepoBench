unsigned long out_size = compressBound(input_size);
    uint8_t *out_buf = (uint8_t *) flb_malloc(out_size);
    uint8_t *pb;
    z_stream strm;
    int status;
    unsigned long crc;
    size_t footer_start;