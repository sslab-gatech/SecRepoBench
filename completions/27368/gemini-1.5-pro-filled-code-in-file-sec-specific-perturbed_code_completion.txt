int status;
    size_t footer_start;
    uint8_t *pb;
    mz_ulong crc;
    z_stream strm;
    size_t out_size;
    void *out_buf;

    out_size = compressBound(input_size);
    out_size += FLB_GZIP_HEADER_OFFSET + 8; /* GZip header + CRC32 footer */

    out_buf = flb_malloc(out_size);