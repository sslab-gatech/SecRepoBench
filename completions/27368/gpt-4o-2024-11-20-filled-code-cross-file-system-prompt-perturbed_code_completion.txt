int status;
    size_t out_size;
    void *out_buf;
    z_stream strm;
    uint32_t crc;

    /* Calculate the maximum size of the output buffer */
    out_size = deflateBound(&strm, input_size) + FLB_GZIP_HEADER_OFFSET + 8;

    /* Allocate memory for the output buffer */
    out_buf = flb_malloc(out_size);