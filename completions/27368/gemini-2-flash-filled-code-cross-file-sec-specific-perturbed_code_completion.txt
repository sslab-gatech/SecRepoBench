int status;
    uint8_t *pb;
    void *out_buf;
    size_t out_size;
    z_stream strm;
    mz_ulong crc;
    size_t footer_start;

    /* Determine the maximum required size for the output buffer */
    out_size = input_size + (input_size / 1000) + 12 + FLB_GZIP_HEADER_OFFSET + 8;

    /* Allocate memory for the output buffer */
    out_buf = flb_malloc(out_size);