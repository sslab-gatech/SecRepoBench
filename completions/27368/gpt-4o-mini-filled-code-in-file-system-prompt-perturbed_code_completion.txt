int status;
    size_t max_size;
    uint8_t *out_buf;
    mz_stream strm;
    unsigned int crc;

    /* Determine the maximum required size for the output buffer */
    max_size = compressBound(input_size) + FLB_GZIP_HEADER_OFFSET + 8;

    /* Allocate memory for the output buffer */
    out_buf = flb_malloc(max_size);