uLong out_size = compressBound(input_size);
    void *out_buf = flb_malloc(out_size + FLB_GZIP_HEADER_OFFSET + 8);
    z_stream strm;
    uint32_t crc;
    uint8_t *pb;
    int status;
    size_t footer_start;