if (MaxColormapSize == 0 || MaxColormapSize > SIZE_MAX / sizeof(*c_mp_i))
  c_mp_i = (ssize_t *) NULL;
else
  c_mp_i = (ssize_t *) AcquireQuantumMemory(MaxColormapSize, sizeof(*c_mp_i));
if (c_mp_i == (ssize_t *) NULL)
  ThrowBinaryException(ResourceLimitError, "MemoryAllocationFailed", image->filename);