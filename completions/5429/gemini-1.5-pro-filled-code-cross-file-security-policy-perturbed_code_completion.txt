c_mp_i=(ssize_t *) AcquireQuantumMemory(MaxColormapSize,sizeof(*c_mp_i));
  if (c_mp_i == (ssize_t *) NULL)
    ThrowBinaryException(ResourceLimitError,"MemoryAllocationFailed",
      image->filename);
  /* Treat PseudoClass specially. */
  if (image->storage_class == PseudoClass)
    {
      for (i=0; i < (ssize_t) MaxColormapSize; i++)
        c_mp_i[i]=(-1);
      for (i=0; i < (ssize_t) image->colors; i++)
        c_mp_i[i]=i;
    }