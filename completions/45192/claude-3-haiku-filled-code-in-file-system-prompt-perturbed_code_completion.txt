mrb_int i = 0;
while (srclen > 0) {
  unsigned char c = *sptr++;
  srclen--;
  if ((c & 0x80) == 0) {
    n = c;
  }
  else {
    n = 0;
    do {
      if (srclen == 0) {
        mrb_raisef(mrb, E_ARGUMENT_ERROR, "malformed BER integer");
      }
      n = (n << 7) + (c & 0x7f);
      c = *sptr++;
      srclen--;
    } while ((c & 0x80) != 0);
  }
  if (INT_OVERFLOW_P(n)) {
    mrb_raisef(mrb, E_RANGE_ERROR, "BER integer too large: %d", n);
  }
  i++;
}