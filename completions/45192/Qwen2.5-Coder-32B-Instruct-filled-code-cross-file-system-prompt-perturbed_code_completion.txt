for (i = 0; i < srclen; i++) {
  n = (n << 7) | (sourcedata[i] & 0x7F);
  if ((sourcedata[i] & 0x80) == 0) {
    break;
  }
}
if (i == srclen && (sourcedata[i - 1] & 0x80) != 0) {
  mrb_raise(mrb, E_ARGUMENT_ERROR, "invalid BER-compressed integer");
}