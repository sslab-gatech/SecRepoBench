for (i = 0; i < srclen; i++) {
    unsigned char byte = sourcedata[i];
    n = (n << 7) | (byte & 0x7f);
    if ((byte & 0x80) == 0) {
        break;
    }
    if (i == sizeof(mrb_int) * 8 / 7) {
        mrb_raise(mrb, E_RANGE_ERROR, "BER-compressed integer too big");
    }
}