i = 0;
  while (1) {
    if (i >= srclen) {
      mrb_raise(mrb, E_ARGUMENT_ERROR, "invalid BER format (incomplete data)");
    }
    unsigned char byte = sourcedata[i++];
    if (n > (MRB_INT_MAX >> 7)) {
      mrb_raise(mrb, E_ARGUMENT_ERROR, "invalid BER format (overflow)");
    }
    n = (n << 7) | (byte & 0x7f);
    if ((byte & 0x80) == 0) {
      break;
    }
  }