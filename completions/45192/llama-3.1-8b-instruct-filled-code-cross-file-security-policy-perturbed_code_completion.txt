if (srclen == 0) {
  mrb_raise(mrb, E_ARGUMENT_ERROR, "unpack_BER: empty source data");
}
for (i = 0; i < srclen; i++) {
  mrb_int mask = ~((1L<<(7*i))-1);
  if ((n & mask) == 0) break;
  mrb_ary_push(mrb, ary, mrb_int_value(mrb, (n & 0x7f)));
  n >>= 7;
}
mrb_ary_push(mrb, ary, mrb_int_value(mrb, n));
return i;