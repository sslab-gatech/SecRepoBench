for (i = 0; i < srclen; i++) {
    n = (n << 7) | (sourcedata[i] & 0x7f);
    if ((sourcedata[i] & 0x80) == 0) {
      i++;
      break;
    }
    if (i == srclen - 1) {
      mrb_raise(mrb, E_ARGUMENT_ERROR, "malformed BER compressed integer");
    }
  }