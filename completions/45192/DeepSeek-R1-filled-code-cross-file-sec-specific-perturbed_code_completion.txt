for (i = 0; ; i++) {
    if (i >= srclen) {
        mrb_raise(mrb, E_ARGUMENT_ERROR, "invalid BER compressed integer (unexpected end of input)");
    }
    unsigned char byte = sourcedata[i];
    if (i > 0) {
        if (n > (MRB_INT_MAX >> 7)) {
            mrb_raise(mrb, E_RANGE_ERROR, "BER value exceeds maximum integer");
        }
        n <<= 7;
    }
    n |= (byte & 0x7F);
    if ((byte & 0x80) == 0) break;
}
i++;  // Increment to account for 0-based index to byte count