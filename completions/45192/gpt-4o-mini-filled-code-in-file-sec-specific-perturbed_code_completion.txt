if (srcidx >= srclen) {
    mrb_raise(mrb, E_ARGUMENT_ERROR, "not enough data to unpack");
  }

  while (1) {
    unsigned char byte = sourcedata[srcidx++];
    n = (n << 7) | (byte & 0x7F);
    if (!(byte & 0x80)) {
      break;
    }
    if (srcidx >= srclen) {
      mrb_raise(mrb, E_ARGUMENT_ERROR, "not enough data to unpack");
    }
  }
  i = srcidx;