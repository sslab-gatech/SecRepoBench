i = 0;
n = 0;
while (i < srclen) {
  if ((sourcedata[i] & 0x80) == 0) {
    n = n * 128 + sourcedata[i];
    i++;
  } else {
    mrb_int x = sourcedata[i] & 0x7f;
    n = n * 128 + x;
    i++;
    while (i < srclen && (sourcedata[i] & 0x80)!= 0) {
      x = sourcedata[i] & 0x7f;
      n = n * 128 + x;
      i++;
    }
    if (i < srclen && (sourcedata[i] & 0x80) == 0) {
      x = sourcedata[i] & 0x7f;
      n = n * 128 + x;
      i++;
    } else {
      mrb_raise(mrb, E_ARGUMENT_ERROR, "malformed BER-compressed integer");
    }
  }
  mrb_ary_push(mrb, ary, mrb_int_value(mrb, n));
  n = 0;
}