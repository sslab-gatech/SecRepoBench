for (i = 0; i < srclen; ++i) {
  mrb_int byte = sourcedata[i];
  if ((byte & 0x80) == 0) { // Check if the continuation bit is clear
    n = (n << 7) | (byte & 0x7f);
    break;
  } else {
    n = (n << 7) | (byte & 0x7f);
  }
}
if (i == srclen) {
  mrb_raise(mrb, E_ARGUMENT_ERROR, "incomplete BER-compressed integer");
}
if (n < 0) {
  mrb_raise(mrb, E_RANGE_ERROR, "BER-compressed integer underflow");
}