bool result = false;
    if (font)
    {
        // Generate subset glyphs and check for errors
        result = generate_subset_glyphs(context, font);
        
        // Cleanup the font created for instancing
        hb_font_destroy(font);
    }

    // Handle cleanup of compiled subset glyphs if necessary
    if (context->compiled_subset_glyphs)
    {
        context->compiled_subset_glyphs->free_compiled_bytes();
    }

    return_trace(result);