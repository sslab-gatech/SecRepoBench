bool result = false;
    if (context->plan->accelerator) {
        hb_vector_t<glyf_impl::SubsetGlyph> subset_glyphs;
        if (_populate_subset_glyphs(context->plan, font, subset_glyphs)) {
            hb_serialize_context_t *c = hb_serialize_context_create(1024);
            if (serialize(c, subset_glyphs.begin(), context->plan->use_short_loca, context->plan)) {
                dataZ.set(c->copy_bytes(), c->length());
                result = true;
            }
            hb_serialize_context_destroy(c);
        }
        _free_compiled_subset_glyphs(subset_glyphs);
    } else {
        // Fallback to full glyph subsetting if no accelerator is available
        // This is a simplified placeholder for the fallback logic
        result = subset_glyphs_fallback(context, font);
    }
    if (font) {
        hb_font_destroy(font);
    }
    return result;