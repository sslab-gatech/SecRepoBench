hb_vector_t<char> subset_glyphs;
    if (!_populate_subset_glyphs (context, font, &subset_glyphs))
    {
      if (font) hb_font_destroy (font);
      return_trace (false);
    }

    bool use_short_loca = _calculate_padded_offsets (subset_glyphs);

    hb_serialize_context_t serializer;
    hb_glyf_accelerator_t glyf;
    if (!glyf.serialize_subset (context, subset_glyphs, use_short_loca, &serializer))
    {
      if (font) hb_font_destroy (font);
      return_trace (false);
    }

    bool result = serializer.successful ();
    if (font) hb_font_destroy (font);