PathExtent,
                 "%lux%lu",(unsigned long) horizontal,(unsigned long) vertical);
               (void) SetImageProperty(image,"tiff:ycbcr-subsampling",
                 sampling_factor,exception);
             }
         }
#endif
         break;
      }
      case COMPRESSION_LZW: image->compression=LZWCompression; break;
      case COMPRESSION_ADOBE_DEFLATE: image->compression=ZipCompression; break;
      case COMPRESSION_PACKBITS: image->compression=RLECompression; break;
      case COMPRESSION_DEFLATE: image->compression=DeflateCompression; break;
      case COMPRESSION_JBIG: image->compression=JBIGCompression; break;
      case COMPRESSION_ZSTD:
      {
        image->compression=ZSTDCompression;
        break;
      }
      default:
      {
        image->compression=UnknownCompression;
        break;
      }
    }
    if (image->compression == UnknownCompression)
      {
        TIFFClose(tiff);
        ThrowReaderException(CoderError,"UnsupportedImageCompression");
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PREDICTOR,&value) == 1)
      {
        if (value == PREDICTOR_HORIZONTAL)
          (void) SetImageProperty(image,"tiff:predictor","horizontal",
            exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_COLORMAP,&min_sample_value,&max_sample_value,
        &sample_info) == 1)
      {
        if (sample_info != (unsigned char *) NULL)
          {
            image->colormap=(Quantum *) sample_info;
            image->colors=256;
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_GRAYRESPONSEUNIT,&units) == 1)
      {
        if (units == RESUNIT_INCH)
          image->units=InchResolution;
        if (units == RESUNIT_CENTIMETER)
          image->units=CentimeterResolution;
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_GRAYRESPONSELOWER,&min_sample_value,
        &max_sample_value) == 1)
      {
        image->gamma=(double) max_sample_value/min_sample_value;
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_GAMMA,&value) == 1)
      image->gamma=(double) value;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_MATTEING,NULL,&value) == 1)
      {
        if (value != 0)
          (void) SetImageProperty(image,"tiff:matte","yes",exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_THRESHHOLDING,&value) == 1)
      {
        if (value == THRESHHOLD_BILEVEL)
          (void) SetImageProperty(image,"tiff:threshholding","bilevel",
            exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_TILEWIDTH,&value) == 1)
      image->tile.width=(size_t) value;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_TILELENGTH,&value) == 1)
      image->tile.height=(size_t) value;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_TILEDEPTH,&value) == 1)
      image->tile.depth=(size_t) value;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SUBFILETYPE,&value) == 1)
      {
        if (value & FILETYPE_REDUCEDIMAGE)
          (void) SetImageProperty(image,"tiff:subfiletype","reducedimage",
            exception);
        if (value & FILETYPE_PAGE)
          (void) SetImageProperty(image,"tiff:subfiletype","page",exception);
        if (value & FILETYPE_MASK)
          (void) SetImageProperty(image,"tiff:subfiletype","mask",exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_EXTRASAMPLES,&extra_samples,&sample_info) == 1)
      {
        if (extra_samples > 0)
          {
            image->colorspace=CMYKColorspace;
            (void) SetImageProperty(image,"tiff:extrasamples","CMYK",exception);
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SAMPLEFORMAT,&sample_format) == 1)
      {
        if (sample_format == SAMPLEFORMAT_IEEEFP)
          (void) SetImageProperty(image,"tiff:sample-format","floating-point",
            exception);
        if (sample_format == SAMPLEFORMAT_INT)
          (void) SetImageProperty(image,"tiff:sample-format","signed-integer",
            exception);
        if (sample_format == SAMPLEFORMAT_UINT)
          (void) SetImageProperty(image,"tiff:sample-format","unsigned-integer",
            exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_YCBCRSUBSAMPLING,&value,&value) == 1)
      {
        (void) FormatLocaleString(sampling_factor,MagickPathExtent,
          "%lux%lu",(unsigned long) value,(unsigned long) value);
        (void) SetImageProperty(image,"tiff:ycbcr-subsampling",sampling_factor,
          exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_REFERENCEBLACKWHITE,&min_sample_value,
        &max_sample_value) == 1)
      {
        image->gamma=(double) max_sample_value/min_sample_value;
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_XPOSITION,&x_position) == 1)
      image->page.x=(ssize_t) ceil(x_position*image->resolution.x-0.5);
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_YPOSITION,&y_position) == 1)
      image->page.y=(ssize_t) ceil(y_position*image->resolution.y-0.5);
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_RESOLUTIONUNIT,&units) == 1)
      {
        if (units == RESUNIT_INCH)
          image->units=PixelsPerInchResolution;
        if (units == RESUNIT_CENTIMETER)
          image->units=PixelsPerCentimeterResolution;
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SOFTWARE,&value) == 1)
      {
        char
          software[MagickPathExtent];

        (void) FormatLocaleString(software,MagickPathExtent,"%s",value);
        (void) SetImageProperty(image,"tiff:software",software,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_ARTIST,&value) == 1)
      {
        char
          artist[MagickPathExtent];

        (void) FormatLocaleString(artist,MagickPathExtent,"%s",value);
        (void) SetImageProperty(image,"tiff:artist",artist,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_COPYRIGHT,&value) == 1)
      {
        char
          copyright[MagickPathExtent];

        (void) FormatLocaleString(copyright,MagickPathExtent,"%s",value);
        (void) SetImageProperty(image,"tiff:copyright",copyright,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_DATETIME,&value) == 1)
      {
        char
          timestamp[MagickPathExtent];

        (void) FormatLocaleString(timestamp,MagickPathExtent,"%s",value);
        (void) SetImageProperty(image,"tiff:timestamp",timestamp,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_DOCUMENTNAME,&value) == 1)
      {
        char
          document[MagickPathExtent];

        (void) FormatLocaleString(document,MagickPathExtent,"%s",value);
        (void) SetImageProperty(image,"tiff:document",document,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_HOSTCOMPUTER,&value) == 1)
      {
        char
          hostcomputer[MagickPathExtent];

        (void) FormatLocaleString(hostcomputer,MagickPathExtent,"%s",value);
        (void) SetImageProperty(image,"tiff:hostcomputer",hostcomputer,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_IMAGEDESCRIPTION,&value) == 1)
      {
        char
          description[MagickPathExtent];

        (void) FormatLocaleString(description,MagickPathExtent,"%s",value);
        (void) SetImageProperty(image,"comment",description,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_MAKE,&value) == 1)
      {
        char
          make[MagickPathExtent];

        (void) FormatLocaleString(make,MagickPathExtent,"%s",value);
        (void) SetImageProperty(image,"tiff:make",make,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_MODEL,&value) == 1)
      {
        char
          model[MagickPathExtent];

        (void) FormatLocaleString(model,MagickPathExtent,"%s",value);
        (void) SetImageProperty(image,"tiff:model",model,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_OPIIMAGEID,&value) == 1)
      {
        char
          image_id[MagickPathExtent];

        (void) FormatLocaleString(image_id,MagickPathExtent,"%s",value);
        (void) SetImageProperty(image,"tiff:image-id",image_id,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PAGENAME,&value) == 1)
      {
        char
          label[MagickPathExtent];

        (void) FormatLocaleString(label,MagickPathExtent,"%s",value);
        (void) SetImageProperty(image,"label",label,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SOFTWARE,&value) == 1)
      {
        char
          software[MagickPathExtent];

        (void) FormatLocaleString(software,MagickPathExtent,"%s",value);
        (void) SetImageProperty(image,"tiff:software",software,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,33423,&value) == 1)
      {
        char
          kodak_33423[MagickPathExtent];

        (void) FormatLocaleString(kodak_33423,MagickPathExtent,"%s",value);
        (void) SetImageProperty(image,"tiff:kodak-33423",kodak_33423,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,36867,&value) == 1)
      {
        char
          kodak_36867[MagickPathExtent];

        (void) FormatLocaleString(kodak_36867,MagickPathExtent,"%s",value);
        (void) SetImageProperty(image,"tiff:kodak-36867",kodak_36867,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SUBFILETYPE,&value) == 1)
      {
        if (value & FILETYPE_REDUCEDIMAGE)
          (void) SetImageProperty(image,"tiff:subfiletype","reducedimage",
            exception);
        if (value & FILETYPE_PAGE)
          (void) SetImageProperty(image,"tiff:subfiletype","page",exception);
        if (value & FILETYPE_MASK)
          (void) SetImageProperty(image,"tiff:subfiletype","mask",exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_EXTRASAMPLES,&extra_samples,&sample_info) == 1)
      {
        if (extra_samples > 0)
          {
            image->colorspace=CMYKColorspace;
            (void) SetImageProperty(image,"tiff:extrasamples","CMYK",exception);
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SAMPLEFORMAT,&sample_format) == 1)
      {
        if (sample_format == SAMPLEFORMAT_IEEEFP)
          (void) SetImageProperty(image,"tiff:sample-format","