SetField(tiff,TIFFTAG_JPEGTABLESMODE,JPEGTablesMode_None);
#endif
        break;
      }
      case COMPRESSION_NONE:
      {
        if (image->storage_class == DirectClass)
          {
            if (image->depth == 1)
              predictor=2;  /* 1-bit uncompressed data can be run-length encoded */
            else
              if (image->depth == 8)
                predictor=1;  /* 8-bit uncompressed data can be predictor 1 */
          }
        break;
      }
      default:
        break;
    }
    if (predictor != 0)
      (void) TIFFSetField(tiff,TIFFTAG_PREDICTOR,predictor);
    if (image->resolution.x != 0.0)
      (void) TIFFSetField(tiff,TIFFTAG_XRESOLUTION,image->resolution.x);
    if (image->resolution.y != 0.0)
      (void) TIFFSetField(tiff,TIFFTAG_YRESOLUTION,image->resolution.y);
    if (image->units != UndefinedResolution)
      (void) TIFFSetField(tiff,TIFFTAG_RESOLUTIONUNIT,
        (uint16) image->units);
    if (image->page.x != 0)
      (void) TIFFSetField(tiff,TIFFTAG_XPOSITION,image->page.x);
    if (image->page.y != 0)
      (void) TIFFSetField(tiff,TIFFTAG_YPOSITION,image->page.y);
    if (image->orientation != UndefinedOrientation)
      (void) TIFFSetField(tiff,TIFFTAG_ORIENTATION,
        (uint16) image->orientation);
    if (image->chromaticity.white_point.x != 0.0)
      (void) TIFFSetField(tiff,TIFFTAG_WHITEPOINT,image->chromaticity.white_point.x,
        image->chromaticity.white_point.y);
    if (image->chromaticity.red_primary.x != 0.0)
      (void) TIFFSetField(tiff,TIFFTAG_PRIMARYCHROMATICITIES,
        image->chromaticity.red_primary.x,image->chromaticity.red_primary.y,
        image->chromaticity.green_primary.x,image->chromaticity.green_primary.y,
        image->chromaticity.blue_primary.x,image->chromaticity.blue_primary.y);
    if (image->debug != MagickFalse)
      {
        (void) LogMagickEvent(CoderEvent,GetMagickModule(),"Geometry: %ux%u",
          (unsigned int) image->columns,(unsigned int) image->rows);
        (void) LogMagickEvent(CoderEvent,GetMagickModule(),"Depth: %u",
          (unsigned int) image->depth);
        (void) LogMagickEvent(CoderEvent,GetMagickModule(),"Resolution: %.20g x %.20g",
          image->resolution.x,image->resolution.y);
        (void) LogMagickEvent(CoderEvent,GetMagickModule(),"Units: %s",
          GetQuantumUnitsString(image->units));
        (void) LogMagickEvent(CoderEvent,GetMagickModule(),"Orientation: %s",
          GetImageOrientation(image->orientation));
      }
    if (image->storage_class == DirectClass)
      {
        if (image->depth == 1)
          quantum_type=BlackQuantum;
        else
          if (image->depth == 8)
            quantum_type=GrayQuantum;
          else
            quantum_type=RGBQuantum;
        if (image->alpha_trait != UndefinedPixelTrait)
          quantum_type=quantum_type == RGBQuantum ? RGBAQuantum :
            GrayAlphaQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=quantum_type == RGBQuantum ? CMYKQuantum :
            CMYKAQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)
          quantum_type=CMYKQuantum;
        if (image->colorspace == LabColorspace)
          quantum_type=LabQuantum;
        if (image->colorspace == YCbCrColorspace)
          quantum_type=YCbCrQuantum;
        if (image->colorspace == GRAYColorspace)
          quantum_type=GrayQuantum;
        if (image->colorspace == RGBColorspace)
          quantum_type=RGBQuantum;
        if (image->colorspace == CMYKColorspace)