0.0))
          {
            /*
              Set vertical image position.
            */
            (void) TIFFSetField(tiff,TIFFTAG_YPOSITION,(float) image->page.y/
              image->resolution.y);
          }
      }
    if (image->orientation != TopLeftOrientation)
      (void) TIFFSetField(tiff,TIFFTAG_ORIENTATION,(uint16) image->orientation);
    if (image->chromaticity.white_point.x != 0.0)
      {
        float
          *chromaticity;

        chromaticity=(float *) AcquireQuantumMemory(3*sizeof(*chromaticity));
        if (chromaticity == (float *) NULL)
          ThrowWriterException(ResourceLimitError,"MemoryAllocationFailed");
        chromaticity[0]=image->chromaticity.white_point.x;
        chromaticity[1]=image->chromaticity.white_point.y;
        chromaticity[2]=0.0;
        (void) TIFFSetField(tiff,TIFFTAG_WHITEPOINT,chromaticity);
        chromaticity=(float *) RelinquishMagickMemory(chromaticity);
      }
    if (image->chromaticity.red_primary.x != 0.0)
      {
        float
          *chromaticity;

        chromaticity=(float *) AcquireQuantumMemory(3*sizeof(*chromaticity));
        if (chromaticity == (float *) NULL)
          ThrowWriterException(ResourceLimitError,"MemoryAllocationFailed");
        chromaticity[0]=image->chromaticity.red_primary.x;
        chromaticity[1]=image->chromaticity.red_primary.y;
        chromaticity[2]=0.0;
        (void) TIFFSetField(tiff,TIFFTAG_RED_PRIMARIES,chromaticity);
        chromaticity=(float *) RelinquishMagickMemory(chromaticity);
      }
    if (image->chromaticity.green_primary.x != 0.0)
      {
        float
          *chromaticity;

        chromaticity=(float *) AcquireQuantumMemory(3*sizeof(*chromaticity));
        if (chromaticity == (float *) NULL)
          ThrowWriterException(ResourceLimitError,"MemoryAllocationFailed");
        chromaticity[0]=image->chromaticity.green_primary.x;
        chromaticity[1]=image->chromaticity.green_primary.y;
        chromaticity[2]=0.0;
        (void) TIFFSetField(tiff,TIFFTAG_GREEN_PRIMARIES,chromaticity);
        chromaticity=(float *) RelinquishMagickMemory(chromaticity);
      }
    if (image->chromaticity.blue_primary.x != 0.0)
      {
        float
          *chromaticity;

        chromaticity=(float *) AcquireQuantumMemory(3*sizeof(*chromaticity));
        if (chromaticity == (float *) NULL)
          ThrowWriterException(ResourceLimitError,"MemoryAllocationFailed");
        chromaticity[0]=image->chromaticity.blue_primary.x;
        chromaticity[1]=image->chromaticity.blue_primary.y;
        chromaticity[2]=0.0;
        (void) TIFFSetField(tiff,TIFFTAG_BLUE_PRIMARIES,chromaticity);
        chromaticity=(float *) RelinquishMagickMemory(chromaticity);
      }
    if (image->colorspace == CMYKColorspace)
      {
        (void) TIFFSetField(tiff,TIFFTAG_INKSET,INKSET_CMYK);
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_SEPARATED);
      }
    if (image->colorspace == YCbCrColorspace)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_YCBCR);
        (void) TIFFSetField(tiff,TIFFTAG_YCBCRSUBSAMPLING,1,1);
      }
    if (image->colorspace == LabColorspace)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_CIELAB);
        (void) TIFFSetField(tiff,TIFFTAG_EXTRASAMPLES,1,&sample_info);
        sample_info[0]=EXTRASAMPLE_ASSOCALPHA;
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,4);
      }
    if (image->colorspace == GrayColorspace)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,photometric);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == GrayscaleColorspace)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,photometric);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == PaletteColorspace)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentColorspace)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherColorspace)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaColorspace)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspace)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspaceWithAlpha)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspaceWithAlphaChannel)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspaceWithAlphaChannelAndAlpha)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspaceWithAlphaChannelAndAlphaChannel)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspaceWithAlphaChannelAndAlphaChannelAndAlpha)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspaceWithAlphaChannelAndAlphaChannelAndAlphaChannelAndAlpha)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspaceWithAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlpha)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspaceWithAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlpha)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspaceWithAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlpha)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspaceWithAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlpha)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspaceWithAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlpha)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspaceWithAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlpha)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspaceWithAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlpha)
      {
        (void) TIFFSetField(tiff,TIFFTAG_PHOTOMETRIC,PHOTOMETRIC_PALETTE);
        (void) TIFFSetField(tiff,TIFFTAG_SAMPLESPERPIXEL,1);
      }
    if (image->colorspace == TransparentDitherAlphaPremultipliedColorspaceWithAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAndAlphaChannelAnd