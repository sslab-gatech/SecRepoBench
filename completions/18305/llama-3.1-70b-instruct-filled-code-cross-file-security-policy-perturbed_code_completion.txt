if (TIFFGetFieldDefaulted(tiff,TIFFTAG_EXIFIFD,&value) == 1)
  TIFFReadEXIFProperties(tiff,image,errorinfo);
if (TIFFGetFieldDefaulted(tiff,TIFFTAG_XRESOLUTION,&x_resolution) == 1)
  image->resolution.x=x_resolution;
if (TIFFGetFieldDefaulted(tiff,TIFFTAG_YRESOLUTION,&y_resolution) == 1)
  image->resolution.y=y_resolution;
if (TIFFGetFieldDefaulted(tiff,TIFFTAG_RESOLUTIONUNIT,&units) == 1)
  {
    if (units == RESUNIT_INCH)
      image->units=PixelsPerInchResolution;
    if (units == RESUNIT_CENTIMETER)
      image->units=PixelsPerCentimeterResolution;
  }