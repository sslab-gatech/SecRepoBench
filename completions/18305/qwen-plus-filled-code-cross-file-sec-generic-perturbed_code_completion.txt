// Retrieve and possibly set EXIF properties for the image. The process is 
// enabled by default unless explicitly disabled through the "tiff:exif-properties" 
// option.
option=GetImageOption(image_info,"tiff:exif-properties");
if ((option == (const char *) NULL) || (IsStringTrue(option) != MagickFalse))
  {
    const char
      *value;

    // Fetch EXIF resolution properties and update image resolution fields if available.
    value=GetImageProperty(image,"exif:resolution-x",exception);
    if (value != (char *) NULL)
      {
        image->resolution.x=(double) StringToDouble(value,(char **) NULL);
        (void) SetImageProperty(image,"tiff:x-resolution",value,exception);
      }
    value=GetImageProperty(image,"exif:resolution-y",exception);
    if (value != (char *) NULL)
      {
        image->resolution.y=(double) StringToDouble(value,(char **) NULL);
        (void) SetImageProperty(image,"tiff:y-resolution",value,exception);
      }

    // Fetch EXIF units property and update image units field if available.
    value=GetImageProperty(image,"exif:resolution-units",exception);
    if (value != (char *) NULL)
      {
        if (LocaleCompare(value,"inches") == 0)
          image->units=PixelsPerInchResolution;
        else if (LocaleCompare(value,"centimeters") == 0)
          image->units=PixelsPerCentimeterResolution;
        (void) SetImageProperty(image,"tiff:resolution-unit",value,exception);
      }
  }