if (version == 1 || layer == 0 || bitrateIdx == 0 || bitrateIdx == 15) {
		// Invalid header values
		fprintf(stderr, "Invalid MP3 header: version=%u, layer=%u, bitrateIdx=%u\n", version, layer, bitrateIdx);
		return 0;
	}

	// Define the bitrate table for MPEG-1 and MPEG-2/2.5
	static const u16 bitrate_table[2][3][15] = {
		// MPEG-1
		{
			{0, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320}, // Layer I
			{0, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384}, // Layer II
			{0, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320}  // Layer III
		},
		// MPEG-2/2.5
		{
			{0, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256}, // Layer I
			{0, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160},     // Layer II
			{0, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160}      // Layer III
		}
	};

	// Determine the layer index (0-based)
	u32 lidx = (version == 3) ? (3 - layer) : (layer == 1 ? 0 : (layer == 2 ? 1 : 2));

	// Validate the layer index
	if (lidx > 2) {
		fprintf(stderr, "Invalid layer index: lidx=%u\n", lidx);
		return 0;
	}

	// Return the bitrate value from the table
	return bitrate_table[version != 3][lidx][bitrateIdx];