if (version == 3) {
    lidx = (layer == 1) ? 0 : (layer == 2) ? 1 : 2;
} else {
    lidx = (layer == 1) ? 3 : 4;
}

if (lidx > 4) {
    gf_log(GF_LOG_ERROR, "Invalid layer index %d\n", lidx);
    return 0;
}

if (bitrateIdx == 0xF) {
    return 0;
}

return gf_mp3_bitrate_table[lidx][bitrateIdx];