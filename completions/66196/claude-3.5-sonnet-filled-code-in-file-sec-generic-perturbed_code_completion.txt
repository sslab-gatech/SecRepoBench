u32 gf_mp3_bit_rate(u32 hdr)
{
    u8 version = gf_mp3_version(hdr);
    u8 layer = gf_mp3_layer(hdr);
    u8 bitrateIdx = (hdr >> 12) & 0xF;
    u32 lidx;
    /*MPEG-1*/
    if (version & 1) {
        lidx = 3 - layer;
    }
    /*MPEG-2/2.5*/
    else {
        lidx = 4;
    }
    
    if (lidx > 4) {
        GF_LOG(GF_LOG_ERROR, GF_LOG_CODING, ("[MP3] Invalid layer index %d\n", lidx));
        return 0;
    }
    
    return bitrate_table[lidx][bitrateIdx];
}