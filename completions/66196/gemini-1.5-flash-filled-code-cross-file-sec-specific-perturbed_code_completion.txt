static const u32 mpeg1_bitrate_table[4][15] = {
		{0, 32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448},
		{0, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384},
		{0, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
	};
	static const u32 mpeg2_bitrate_table[4][15] = {
		{0, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160},
		{0, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160},
		{0, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160},
		{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
	};

	if (version == 3) {
		lidx = layer - 1;
		if (lidx > 3 || bitrateIdx > 14 || mpeg1_bitrate_table[lidx][bitrateIdx] == 0) {
			GF_LOG(GF_LOG_ERROR, GF_LOG_CORE, ("[gf_mp3_bit_rate] invalid bitrate index\n"));
			return 0;
		}
		return mpeg1_bitrate_table[lidx][bitrateIdx] * 1000;
	} else {
		lidx = layer - 1;
		if (lidx > 3 || bitrateIdx > 14 || mpeg2_bitrate_table[lidx][bitrateIdx] == 0) {
			GF_LOG(GF_LOG_ERROR, GF_LOG_CORE, ("[gf_mp3_bit_rate] invalid bitrate index\n"));
			return 0;
		}
		return mpeg2_bitrate_table[lidx][bitrateIdx] * 1000;
	}
}