u32 bitrate_table[3][16] = {
		{0, 32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 0}, // Layer 1
		{0, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 0},   // Layer 2
		{0, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 0}     // Layer 3
	};

	if (version == 3) { // MPEG-1
		lidx = 3 - layer;
	} else { // MPEG-2 or MPEG-2.5
		lidx = (layer == 3) ? 2 : 1;
	}

	if (lidx >= 3 || bitrateIdx == 0 || bitrateIdx == 15) {
		GF_LOG(GF_LOG_ERROR, GF_LOG_CODEC, ("Invalid MP3 bitrate index %d for layer %d\n", bitrateIdx, layer));
		return 0;
	}

	return bitrate_table[lidx][bitrateIdx];