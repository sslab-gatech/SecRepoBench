u32 gf_mp3_bit_rate(u32 hdr)
{
    u8 version = gf_mp3_version(hdr);
    u8 layer = gf_mp3_layer(hdr);
    u8 bitrateIdx = (hdr >> 12) & 0xF;
    u32 lidx;
    // Determine the appropriate layer index based on the MPEG version and layer information.
    // Log an error and return 0 if the layer index is invalid.
    // Calculate the layer index for MPEG-1 or for MPEG-2/2.5 based on the specified conditions.
    // Validate the calculated layer index, logging an error and returning 0 if invalid.
    // Return the bitrate value from a pre-defined bitrate table using the layer and bitrate index.
    // <MASK>
    if (version & 1) {
        if (layer == 3) {
            lidx = bitrateIdx;
        }
        else {
            lidx = bitrateIdx + 32;
        }
    }
    else {
        if (layer == 3) {
            lidx = bitrateIdx + 64;
        }
        else {
            lidx = bitrateIdx + 112;
        }
    }
    if (lidx >= GF_ARRAY_LENGTH(bitrate_table[layer])) {
        GF_LOG(GF_LOG_ERROR, GF_LOG_CODING, ("[MPEG-1/2 Audio] bitrate index not valid\n"));
        return 0;
    }
    return bitrate_table[layer][lidx];
}