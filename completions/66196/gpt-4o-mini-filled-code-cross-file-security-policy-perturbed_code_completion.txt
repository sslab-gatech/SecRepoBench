if (layer == 3) {
    lidx = (version == 3) ? 0 : 1; // MPEG-1 Layer III
} else if (layer == 2) {
    lidx = (version == 3) ? 2 : 3; // MPEG-1 Layer II
} else if (layer == 1) {
    lidx = (version == 3) ? 4 : 5; // MPEG-1 Layer I
} else {
    // Invalid layer
    fprintf(stderr, "Error: Invalid layer index\n");
    return 0;
}

// Validate bitrate index
if (bitrateIdx < 0 || bitrateIdx >= sizeof(bitrate_table[lidx]) / sizeof(bitrate_table[lidx][0])) {
    fprintf(stderr, "Error: Bitrate index out of bounds\n");
    return 0;
}

// Return the bitrate value
return bitrate_table[lidx][bitrateIdx];