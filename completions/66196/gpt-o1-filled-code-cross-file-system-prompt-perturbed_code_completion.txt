static const u16 mpeg1_bitrate_table[3][16] = {
		{0, 32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 0},  /* Layer I */
		{0, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 0},     /* Layer II */
		{0, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 0}       /* Layer III */
	};
	static const u16 mpeg2_bitrate_table[3][16] = {
		{0, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 0},     /* Layer I */
		{0, 8, 16, 24, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 0},         /* Layer II */
		{0, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, 0}           /* Layer III */
	};

	u8 verIndex = (version == 3) ? 1 : 0;
	u8 layerIndex = 3 - layer;
	if (layerIndex > 2) {
		/* Log an error for invalid layer index */
		return 0;
	}
	if (!bitrateIdx || (bitrateIdx == 0xF)) {
		/* Log an error for invalid bit rate index */
		return 0;
	}

	u16 br = verIndex ? mpeg1_bitrate_table[layerIndex][bitrateIdx]
	                  : mpeg2_bitrate_table[layerIndex][bitrateIdx];

	if (!br) {
		/* Log an error for invalid table entry */
		return 0;
	}
	return br * 1000;