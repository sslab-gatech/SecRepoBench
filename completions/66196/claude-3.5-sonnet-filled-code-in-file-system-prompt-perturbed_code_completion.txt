u32 gf_mp3_bit_rate(u32 hdr)
{
    u8 version = gf_mp3_version(hdr);
    u8 layer = gf_mp3_layer(hdr);
    u8 bitrateIdx = (hdr >> 12) & 0xF;
    u32 lidx;

    // Determine the appropriate layer index based on the MPEG version and layer information.
    if (version == 3) { // MPEG-1
        lidx = 3 - layer;
    } else { // MPEG-2 or MPEG-2.5
        lidx = 4;
    }

    // Validate the calculated layer index, logging an error and returning 0 if invalid.
    if (lidx > 4) {
        GF_LOG(GF_LOG_ERROR, GF_LOG_CODING, ("[MPEG-1/2 Audio] Invalid layer index\n"));
        return 0;
    }

    // Return the bitrate value from a pre-defined bitrate table using the layer and bitrate index.
    return bitrate_table[lidx][bitrateIdx];
}