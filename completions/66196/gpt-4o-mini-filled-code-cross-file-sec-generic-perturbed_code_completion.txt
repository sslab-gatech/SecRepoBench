if (layer == 3) {
		if (version == 3) {
			lidx = 0; // MPEG-1 Layer III
		} else {
			lidx = 1; // MPEG-2/2.5 Layer III
		}
	} else if (layer == 2) {
		lidx = (version == 3) ? 2 : 3; // MPEG-1 Layer II or MPEG-2/2.5 Layer II
	} else if (layer == 1) {
		lidx = (version == 3) ? 4 : 5; // MPEG-1 Layer I or MPEG-2/2.5 Layer I
	} else {
		fprintf(stderr, "Error: Invalid layer index\n");
		return 0; // Invalid layer
	}

	if (lidx > 5) {
		fprintf(stderr, "Error: Layer index out of bounds\n");
		return 0; // Invalid layer index
	}

	static const u32 bitrate_table[3][6] = {
		{0, 32, 40, 48, 56, 64},   // MPEG-1 Layer I
		{0, 64, 80, 96, 112, 128}, // MPEG-1 Layer II
		{0, 128, 160, 192, 224, 256} // MPEG-1 Layer III
	};

	return bitrate_table[layer - 1][bitrateIdx];