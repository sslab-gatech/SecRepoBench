static const u16 mp3_bitrate_table[2][3][16] = {
	/* MPEG-1 */
	{
		/* Layer I */
		{0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,0},
		/* Layer II */
		{0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,0},
		/* Layer III */
		{0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,0}
	},
	/* MPEG-2/2.5 */
	{
		/* Layer I */
		{0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,0},
		/* Layer II */
		{0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,0},
		/* Layer III */
		{0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,0}
	}
};

if (bitrateIdx == 0 || bitrateIdx == 0xF) return 0;

if (version == 3) {
	/* MPEG-1 */
	if (layer < 1 || layer > 3) return 0;
	lidx = 3 - layer;
	return mp3_bitrate_table[0][lidx][bitrateIdx] * 1000;
} else {
	/* MPEG-2 or 2.5 */
	if (layer < 1 || layer > 3) return 0;
	lidx = 3 - layer;
	return mp3_bitrate_table[1][lidx][bitrateIdx] * 1000;
}