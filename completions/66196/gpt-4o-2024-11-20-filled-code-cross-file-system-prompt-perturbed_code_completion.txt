if (version == 1 || layer == 0 || bitrateIdx == 0 || bitrateIdx == 15) {
		// Invalid header values
		return 0;
	}

	if (version == 3) {
		// MPEG-1
		lidx = 3 - layer;
	} else {
		// MPEG-2 or MPEG-2.5
		lidx = 4 + (3 - layer);
	}

	if (lidx >= 6) {
		// Invalid layer index
		return 0;
	}

	// Pre-defined bitrate table
	static const u16 mp3_bitrate_table[6][15] = {
		{0, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320},  // MPEG-1, Layer I
		{0, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384}, // MPEG-1, Layer II
		{0, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320},  // MPEG-1, Layer III
		{0, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224},  // MPEG-2/2.5, Layer I
		{0, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160},      // MPEG-2/2.5, Layer II
		{0, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160}       // MPEG-2/2.5, Layer III
	};

	return mp3_bitrate_table[lidx][bitrateIdx] * 1000;