if (version == 3) { /*MPEG 1*/
		if (layer == 3) lidx = 0;
		else if (layer == 2) lidx = 1;
		else if (layer == 1) lidx = 2;
		else {
			GF_LOG(GF_LOG_ERROR, GF_LOG_CONTAINER, ("[MPEG-1] Invalid MPEG layer %d\n", layer));
			return 0;
		}
	} else { /*MPEG 2, 2.5*/
		if (layer == 3) lidx = 3;
		else if (layer == 2) lidx = 4;
		else if (layer == 1) lidx = 5;
		else {
			GF_LOG(GF_LOG_ERROR, GF_LOG_CONTAINER, ("[MPEG-2/2.5] Invalid MPEG layer %d\n", layer));
			return 0;
		}
	}

	if (bitrateIdx == 0 || bitrateIdx == 15) {
		GF_LOG(GF_LOG_WARNING, GF_LOG_CONTAINER, ("[MPEG] Invalid bitrate index %d\n", bitrateIdx));
		return 0;
	}
	static const u32 bit_rate[6][15] = {
		{0, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320}, //MPEG-1 Layer 3
		{0, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384}, //MPEG-1 Layer 2
		{0, 32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448}, //MPEG-1 Layer 1
		{0, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224}, //MPEG-2/2.5 Layer 3
		{0, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160}, //MPEG-2/2.5 Layer 2
		{0, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256} //MPEG-2/2.5 Layer 1
	};
	return bit_rate[lidx][bitrateIdx];