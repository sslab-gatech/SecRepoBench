if (uc == ueend)
		return 0;
	switch (*uc) {
	case ' ':
	case '\t':
	case '\n':
	case '\r':
		uc++;
		continue;
	case ']':
		uc++;
		st[JSON_ARRAY]++;
		DPRINTF("Good array: ", uc, *ucp);
		*ucp = uc;
		return 1;
	default:
		--uc;
		if (!json_parse(&uc, ueend, st, lvl + 1)) {
			DPRINTF("Bad array: ", uc, *ucp);
			*ucp = uc;
			return 0;
		}
		if (*uc == ',') {
			uc++;
			continue;
		}
		if (*uc == ']') {
			uc++;
			st[JSON_ARRAY]++;
			DPRINTF("Good array: ", uc, *ucp);
			*ucp = uc;
			return 1;
		}
		DPRINTF("Unexpected character in array: ", uc, *ucp);
		*ucp = uc;
		return 0;
	}