uc = json_skip_space(uc, ueend);
        if (uc == ueend)
            goto out;

        // Attempt to parse the next JSON element
        if (!json_parse(&uc, ueend, st, lvl + 1)) {
            DPRINTF("Failed to parse element", uc, *ucp);
            break; // Exit the loop on failure
        }

        // Check for the next character
        uc = json_skip_space(uc, ueend);
        if (uc == ueend)
            goto out;

        // Determine if the next character is a comma or closing bracket
        if (*uc == ',') {
            uc++; // Move past the comma
            continue; // Continue to parse the next element
        } else if (*uc == ']') {
            uc++; // Closing bracket found, exit the loop
            DPRINTF("Successfully parsed array", uc, *ucp);
            *ucp = uc;
            return 1; // Successfully parsed the array
        } else {
            DPRINTF("Unexpected character in array", uc, *ucp);
            break; // Exit the loop on unexpected character
        }