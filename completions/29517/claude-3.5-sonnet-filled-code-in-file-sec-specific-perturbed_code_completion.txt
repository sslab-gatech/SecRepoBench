if ( H5Aexists_by_name(dset_id,".","MATLAB_fields",H5P_DEFAULT) ) {
    hsize_t nfields;
    err = Mat_H5ReadFieldNames(matvar, dset_id, &nfields);
} else {
    H5G_info_t group_info;
    matvar->internal->num_fields = 0;
    H5Gget_info(dset_id, &group_info);
    if ( group_info.nlinks > 0 ) {
        struct ReadGroupInfoIterData group_data = {0, matvar};
        hsize_t idx = 0;
        H5Literate(dset_id, H5_INDEX_NAME, H5_ITER_NATIVE, &idx, Mat_H5ReadGroupInfoIterate, (void*)&group_data);
        matvar->internal->num_fields = group_data.nfields;
        nfields = group_data.nfields;
    } else {
        nfields = 0;
    }
}