// Check if the structure defines its fields using the "MATLAB_fields" attribute.
// If the attribute exists, read the field names and update the number of fields.
// If the attribute does not exist, retrieve the number of links in the dataset group.
// If there are links, iterate over them to count and collect field names.
// Store the field names in the matvar structure and update the total number of fields.
if ( H5Aexists_by_name(dset_id,".","MATLAB_fields",H5P_DEFAULT) ) {
    hsize_t nfields;
    err = Mat_H5ReadFieldNames(matvar, dset_id, &nfields);
    if ( err ) {
        return err;
    }
    matvariable->internal->num_fields = nfields;
    matvariable->internal->fieldnames = (char**)calloc(nfields, sizeof(*matvariable->internal->fieldnames));
    if ( NULL!= matvariable->internal->fieldnames ) {
        hsize_t k;
        for ( k = 0; k < nfields; k++ ) {
            matvariable->internal->fieldnames[k] = strdup(matvariable->internal->fieldnames[k]);
        }
    } else {
        return MATIO_E_OUT_OF_MEMORY;
    }
} else {
    // Retrieve the number of links in the dataset group
    hid_t group_id = H5Gopen(dset_id, ".", H5P_DEFAULT);
    if ( group_id < 0 ) {
        return MATIO_E_GENERIC_READ_ERROR;
    }
    hid_t iter_id = H5Giterate(group_id, ".", H5_INDEX_NAME, H5_ITER_NATIVE, Mat_H5ReadGroupInfoIterate, NULL, H5P_DEFAULT);
    if ( iter_id < 0 ) {
        H5Gclose(group_id);
        return MATIO_E_GENERIC_READ_ERROR;
    }
    H5Gclose(group_id);
    // Get the number of links
    H5Gget_num_objs(iter_id, &nfields);
    H5Iterate_close(iter_id);
    if ( nfields < 0 ) {
        return MATIO_E_GENERIC_READ_ERROR;
    }
    matvariable->internal->num_fields = nfields;
    matvariable->internal->fieldnames = (char**)calloc(nfields, sizeof(*matvariable->internal->fieldnames));
    if ( NULL!= matvariable->internal->fieldnames ) {
        hsize_t k;
        H5O_INFO_T object_info;
        for ( k = 0; k < nfields; k++ ) {
            object_info.type = H5O_TYPE_UNKNOWN;
            H5OGET_INFO_BY_NAME(dset_id, matvariable->internal->fieldnames[k], &object_info, H5P_DEFAULT);
            matvariable->internal->fieldnames[k] = strdup(matvariable->internal->fieldnames[k]);
        }
    } else {
        return MATIO_E_OUT_OF_MEMORY;
    }
}