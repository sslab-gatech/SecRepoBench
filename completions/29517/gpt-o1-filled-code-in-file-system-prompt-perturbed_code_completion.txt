if ( H5Aexists_by_name(dset_id,".","MATLAB_fields",H5P_DEFAULT) ) {
        /* If the "MATLAB_fields" attribute exists, read field names and set nfields. */
        err = Mat_H5ReadFieldNames(matvariable, dset_id, &nfields);
    } else {
        /* Otherwise, retrieve the number of links in the group and iterate over them
         * to gather field names. */
        H5G_info_t group_info;
        H5Gget_info(dset_id, &group_info);
        if ( group_info.nlinks > 0 ) {
            matvariable->internal->fieldnames = (char **)calloc((size_t)group_info.nlinks,
                sizeof(*matvariable->internal->fieldnames));
            if ( NULL == matvariable->internal->fieldnames ) {
                err = MATIO_E_OUT_OF_MEMORY;
            } else {
                struct ReadGroupInfoIterData group_data;
                group_data.nfields = 0;
                group_data.matvar = matvariable;
                /* Iterate through all links in the group and collect field names. */
                if ( H5Literate(dset_id, H5_INDEX_NAME, H5_ITER_NATIVE, NULL,
                        Mat_H5ReadGroupInfoIterate, &group_data) < 0 ) {
                    err = MATIO_E_GENERIC_READ_ERROR;
                }
                nfields = group_data.nfields;
            }
        }
    }