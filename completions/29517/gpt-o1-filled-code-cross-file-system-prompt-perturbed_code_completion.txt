if ( H5Aexists_by_name(dset_id,".","MATLAB_fields",H5P_DEFAULT) ) {
        hsize_t field_count = 0;
        err = Mat_H5ReadFieldNames(matvariable, dset_id, &field_count);
        if ( err < 0 ) {
            return err;
        }
        nfields = field_count;
        matvariable->internal->num_fields = (int)nfields;
    } else {
        H5G_info_t group_info;
        err = H5Gget_info(dset_id, &group_info);
        if ( err >= 0 && group_info.nlinks > 0 ) {
            struct ReadGroupInfoIterData group_data;
            matvariable->internal->fieldnames = (char **)calloc(group_info.nlinks, sizeof(char *));
            if ( NULL == matvariable->internal->fieldnames ) {
                return MATIO_E_OUT_OF_MEMORY;
            }
            group_data.matvar = matvariable;
            group_data.nfields = 0;
            H5Literate(dset_id, H5_INDEX_NAME, H5_ITER_INC, NULL,
                       Mat_H5ReadGroupInfoIterate, &group_data);
            nfields = group_data.nfields;
            matvariable->internal->num_fields = (int)nfields;
        }
    }