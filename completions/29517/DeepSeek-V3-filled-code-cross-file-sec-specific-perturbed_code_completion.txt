if ( H5Aexists_by_name(dset_id,".","MATLAB_fields",H5P_DEFAULT) ) {
        err = Mat_H5ReadFieldNames(matvariable, dset_id, &nfields);
        if ( err ) {
            return err;
        }
    } else {
        struct ReadGroupInfoIterData group_data = {matvariable, 0};
        H5Literate(dset_id, H5_INDEX_NAME, H5_ITER_NATIVE, NULL, 
                  Mat_H5ReadGroupInfoIterate, &group_data);
        nfields = group_data.nfields;
    }

    if ( nfields > 0 ) {
        matvariable->internal->fieldnames = (char**)malloc(nfields * sizeof(char*));
        if ( NULL == matvariable->internal->fieldnames ) {
            return MATIO_E_OUT_OF_MEMORY;
        }
        matvariable->internal->num_fields = nfields;
    }