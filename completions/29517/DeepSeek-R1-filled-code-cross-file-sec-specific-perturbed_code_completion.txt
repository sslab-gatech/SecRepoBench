if (H5Aexists_by_name(dset_id, ".", "MATLAB_fields", H5P_DEFAULT)) {
        attr_id = H5Aopen_by_name(dset_id, ".", "MATLAB_fields", H5P_DEFAULT, H5P_DEFAULT);
        if (attr_id >= 0) {
            hid_t space_id = H5Aget_space(attr_id);
            hsize_t dims[1];
            H5Sget_simple_extent_dims(space_id, dims, NULL);
            nfields = dims[0];
            hid_t type_id = H5Aget_type(attr_id);
            char **names = NULL;
            if (H5Tis_variable_str(type_id)) {
                names = (char **)malloc(nfields * sizeof(char *));
                if (names) {
                    if (H5Aread(attr_id, type_id, names) >= 0) {
                        matvariable->internal->fieldnames = (char **)malloc(nfields * sizeof(char *));
                        if (matvariable->internal->fieldnames) {
                            for (hsize_t i = 0; i < nfields; i++) {
                                matvariable->internal->fieldnames[i] = strdup(names[i]);
                                if (!matvariable->internal->fieldnames[i]) {
                                    for (hsize_t j = 0; j < i; j++)
                                        free(matvariable->internal->fieldnames[j]);
                                    free(matvariable->internal->fieldnames);
                                    matvariable->internal->fieldnames = NULL;
                                    break;
                                }
                            }
                        }
                    }
                    H5free_memory(names);
                }
            }
            H5Tclose(type_id);
            H5Sclose(space_id);
            H5Aclose(attr_id);
            if (!matvariable->internal->fieldnames)
                return MATIO_E_OUT_OF_MEMORY;
        }
    } else {
        struct ReadGroupInfoIterData group_data = {matvariable, 0};
        matvariable->internal->fieldnames = NULL;
        H5Literate(dset_id, H5_INDEX_NAME, H5_ITER_NATIVE, NULL, Mat_H5ReadGroupInfoIterate, &group_data);
        nfields = group_data.nfields;
    }