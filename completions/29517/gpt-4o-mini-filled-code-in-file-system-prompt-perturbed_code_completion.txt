if ( H5Aexists_by_name(dset_id,".","MATLAB_fields",H5P_DEFAULT) ) {
        hsize_t nfields;
        err = Mat_H5ReadFieldNames(matvariable, dset_id, &nfields);
    } else {
        hsize_t nlinks;
        herr_t herr = H5Gget_num_objs(dset_id, &nlinks);
        if ( herr < 0 ) {
            return MATIO_E_GENERIC_READ_ERROR;
        }
        if ( nlinks > 0 ) {
            matvariable->internal->fieldnames = (char**)calloc(nlinks, sizeof(char*));
            if ( matvariable->internal->fieldnames == NULL ) {
                return MATIO_E_OUT_OF_MEMORY;
            }
            matvariable->internal->num_fields = nlinks;
            for ( hsize_t i = 0; i < nlinks; i++ ) {
                matvariable->internal->fieldnames[i] = (char*)malloc(64 * sizeof(char)); // Assuming max field name length
                if ( matvariable->internal->fieldnames[i] == NULL ) {
                    return MATIO_E_OUT_OF_MEMORY;
                }
                H5Lget_name_by_idx(dset_id, ".", H5_INDEX_NAME, H5_ITER_INC, i, matvariable->internal->fieldnames[i], 64, H5P_DEFAULT);
            }
        }
    }