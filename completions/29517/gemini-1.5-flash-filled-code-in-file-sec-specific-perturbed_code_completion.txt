if ( H5Aexists_by_name(dset_id,".","MATLAB_fields",H5P_DEFAULT) ) {
        err = Mat_H5ReadFieldNames(matvariable, dset_id, &nfields);
    } else {
        struct ReadGroupInfoIterData group_data;
        group_data.matvar = matvariable;
        group_data.nfields = 0;
        if ( matvariable->internal->fieldnames == NULL ) {
            matvariable->internal->fieldnames = (char**)calloc(1, sizeof(char*));
            if ( matvariable->internal->fieldnames == NULL ) {
                return MATIO_E_OUT_OF_MEMORY;
            }
        }
        herr_t herr = H5Literate(dset_id, H5_INDEX_NAME, H5_ITER_NATIVE, NULL,
                                 Mat_H5ReadGroupInfoIterate, (void*)&group_data);
        if ( herr < 0 ) {
            return MATIO_E_GENERIC_READ_ERROR;
        }
        nfields = group_data.nfields;
        if ( nfields > 0 ) {
            matvariable->internal->num_fields = (unsigned int)nfields;
            matvariable->internal->fieldnames = (char**)realloc(matvariable->internal->fieldnames,
                (size_t)nfields*sizeof(*matvariable->internal->fieldnames));
            if ( matvariable->internal->fieldnames == NULL ) {
                return MATIO_E_OUT_OF_MEMORY;
            }
        }
    }