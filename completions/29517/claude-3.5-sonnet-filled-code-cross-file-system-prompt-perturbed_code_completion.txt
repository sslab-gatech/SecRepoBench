if (H5Aexists_by_name(dset_id, ".", "MATLAB_fields", H5P_DEFAULT)) {
    err = Mat_H5ReadFieldNames(matvariable, dset_id, &nfields);
} else {
    struct ReadGroupInfoIterData group_data = {0,};
    group_data.matvar = matvariable;
    group_data.nfields = 0;
    H5Literate(dset_id, H5_INDEX_NAME, H5_ITER_NATIVE, NULL, Mat_H5ReadGroupInfoIterate, (void*)&group_data);
    nfields = group_data.nfields;
    if (nfields > 0) {
        matvariable->internal->num_fields = nfields;
        matvariable->internal->fieldnames = (char**)malloc(nfields * sizeof(*matvariable->internal->fieldnames));
        if (matvariable->internal->fieldnames == NULL) {
            return MATIO_E_OUT_OF_MEMORY;
        }
        group_data.nfields = 0;
        H5Literate(dset_id, H5_INDEX_NAME, H5_ITER_NATIVE, NULL, Mat_H5ReadGroupInfoIterate, (void*)&group_data);
    }
}