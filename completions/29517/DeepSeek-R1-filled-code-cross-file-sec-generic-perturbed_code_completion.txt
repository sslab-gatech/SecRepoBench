if (H5Aexists_by_name(dset_id, ".", "MATLAB_fields", H5P_DEFAULT)) {
        err = Mat_H5ReadFieldNames(matvariable, dset_id, &nfields);
        if (err) {
            return err;
        }
    } else {
        H5G_info_t ginfo;
        if (H5Gget_info(dset_id, &ginfo) < 0) {
            return MATIO_E_GENERIC_READ_ERROR;
        }
        nfields = ginfo.nlinks;
        matvariable->internal->fieldnames = (char **)calloc(nfields, sizeof(char *));
        if (!matvariable->internal->fieldnames) {
            return MATIO_E_OUT_OF_MEMORY;
        }

        struct ReadGroupInfoIterData group_data = {.matvar = matvariable, .nfields = 0};
        herr_t iter_err = H5Literate(dset_id, H5_INDEX_NAME, H5_ITER_NATIVE, NULL,
                                   Mat_H5ReadGroupInfoIterate, &group_data);
        if (iter_err < 0) {
            for (hsize_t i = 0; i < group_data.nfields; i++) {
                free(matvariable->internal->fieldnames[i]);
            }
            free(matvariable->internal->fieldnames);
            matvariable->internal->fieldnames = NULL;
            return MATIO_E_GENERIC_READ_ERROR;
        }
        nfields = group_data.nfields;
    }