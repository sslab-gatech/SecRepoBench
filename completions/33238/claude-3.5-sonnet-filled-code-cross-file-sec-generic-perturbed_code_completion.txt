if (input_string.empty()) {
    return;
}

size_t start = 0;
while (start < input_string.length() && (input_string[start] == ' ' || input_string[start] == '\n')) {
    ++start;
}
input_string = input_string.substr(start);

std::string result;
result.reserve(input_string.length());

bool in_uri = false;
for (size_t i = 0; i < input_string.length(); ++i) {
    char c = input_string[i];

    if (c == ':' && i + 2 < input_string.length() && input_string[i + 1] == '/' && input_string[i + 2] == '/') {
        result += "://";
        i += 2;
        in_uri = true;
        continue;
    }

    if (c == '\\' && i + 1 < input_string.length() && input_string[i + 1] == '\\') {
        result += "\\\\";
        i += 1;
        continue;
    }

    if (c == '/' || c == '\\') {
        if (!result.empty() && result.back() != '/') {
            result += '/';
        }
    } else if (c == '%' && in_uri && i + 2 < input_string.length()) {
        std::string hex = input_string.substr(i + 1, 2);
        char decoded = static_cast<char>(std::stoi(hex, nullptr, 16));
        result += decoded;
        i += 2;
    } else {
        result += c;
    }
}

if (!result.empty() && result.back() == '/') {
    result.pop_back();
}

input_string = result;