// Check if input string is empty
if (input_string.empty()) {
    return;
}

// Remove leading spaces or new lines
size_t first_non_whitespace = input_string.find_first_not_of(" \n\r\t");
if (first_non_whitespace != std::string::npos) {
    input_string.erase(0, first_non_whitespace);
} else {
    // If the string only contains whitespace, clear it
    input_string.clear();
    return;
}

// Define the OS-specific directory separator
#ifdef _WIN32
    const char os_separator = '\\';
#else
    const char os_separator = '/';
#endif

std::string result;
result.reserve(input_string.length()); // Reserve space to avoid reallocations

for (size_t i = 0; i < input_string.length(); ) {
    // Handle URL protocol pattern (e.g., "http://")
    if (i > 0 && i + 2 < input_string.length() && 
        input_string[i] == ':' && input_string[i + 1] == '/' && input_string[i + 2] == '/') {
        result += "://";
        i += 3;
        continue;
    }
    
    // Handle Windows network path (e.g., "\\server\share")
    if (i == 0 && i + 1 < input_string.length() && 
        input_string[i] == '\\' && input_string[i + 1] == '\\') {
        result += "\\\\";
        i += 2;
        continue;
    }
    
    // Handle path separators
    if (input_string[i] == '/' || input_string[i] == '\\') {
        result += os_separator;
        // Skip consecutive separators
        do {
            i++;
        } while (i < input_string.length() && (input_string[i] == '/' || input_string[i] == '\\'));
        continue;
    }
    
    // Handle hex encoding (e.g., %20 for space)
    if (i + 2 < input_string.length() && input_string[i] == '%') {
        // Convert two hex digits to an integer
        auto hex_to_int = [](char c) -> int {
            if (c >= '0' && c <= '9') return c - '0';
            if (c >= 'a' && c <= 'f') return c - 'a' + 10;
            if (c >= 'A' && c <= 'F') return c - 'A' + 10;
            return -1; // Invalid hex digit
        };
        
        int high = hex_to_int(input_string[i + 1]);
        int low = hex_to_int(input_string[i + 2]);
        
        if (high != -1 && low != -1) {
            int value = (high << 4) | low;
            if (value >= 32 && value < 127) { // Printable ASCII only
                result += static_cast<char>(value);
                i += 3;
                continue;
            }
        }
    }
    
    // Copy the current character
    result += input_string[i++];
}

// Remove trailing whitespace
size_t last_non_whitespace = result.find_last_not_of(" \n\r\t");
if (last_non_whitespace != std::string::npos && last_non_whitespace + 1 < result.length()) {
    result.erase(last_non_whitespace + 1);
}

input_string = std::move(result);