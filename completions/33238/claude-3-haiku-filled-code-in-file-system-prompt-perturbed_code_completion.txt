void Cleanup (std::string& input_string) const {
    if (input_string.empty()) {
        return;
    }

    // Remove leading spaces or new lines
    input_string.erase(0, input_string.find_first_not_of(" \n"));

    // Replace all directory separators with the correct OS separator
    for (size_t i = 0; i < input_string.length(); ++i) {
        if (input_string[i] == '/' || input_string[i] == '\\') {
            input_string[i] = mSep;
        } else if (input_string[i] == '%' && i + 2 < input_string.length() && IsHex(input_string[i + 1]) && IsHex(input_string[i + 2])) {
            // Decode hexadecimal sequences in URIs
            char hex[3] = { input_string[i + 1], input_string[i + 2], '\0' };
            input_string[i] = static_cast<char>(strtol(hex, nullptr, 16));
            input_string.erase(i + 1, 2);
        }
    }

    // Reduce double delimiters to single delimiters
    size_t pos = 0;
    while ((pos = input_string.find(mSep + mSep, pos)) != std::string::npos) {
        input_string.erase(pos, 1);
    }

    // Handle special cases
    pos = input_string.find("://");
    if (pos != std::string::npos) {
        pos += 3;
        while (pos < input_string.length() && (input_string[pos] == '/' || input_string[pos] == '\\')) {
            input_string.erase(pos, 1);
        }
    }

    pos = input_string.find("\\\\\\\\/");
    if (pos != std::string::npos) {
        input_string.replace(pos, 5, "\\");
    }
}