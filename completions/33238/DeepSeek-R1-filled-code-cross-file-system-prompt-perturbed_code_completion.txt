if (input_string.empty()) {
            return;
        }

        input_string.erase(0, input_string.find_first_not_of(" \n"));
        if (input_string.empty()) {
            return;
        }

        std::string cleaned;
        const char kSeparator =
#ifdef _WIN32
            '\\';
#else
            '/';
#endif

        char prev_char = '\0';
        for (size_t i = 0; i < input_string.size();) {
            char c = input_string[i];

            if (c == '/' || c == '\\') {
                // Handle special sequences
                if (i >= 1 && input_string[i-1] == ':' && i+1 < input_string.size() && input_string[i+1] == '/') {
                    cleaned += "://";
                    prev_char = '/';
                    i += 2;
                } else if (i >= 1 && input_string[i-1] == '\\' && c == '\\') {
                    cleaned += "\\\\";
                    prev_char = '\\';
                    i += 2;
                } else {
                    if (prev_char != kSeparator) {
                        cleaned += kSeparator;
                        prev_char = kSeparator;
                    }
                    while (i < input_string.size() && (input_string[i] == '/' || input_string[i] == '\\')) {
                        i++;
                    }
                }
            } else if (c == '%' && i + 2 < input_string.size()) {
                // Handle hex sequences
                char hex1 = input_string[i+1];
                char hex2 = input_string[i+2];
                if (isxdigit(hex1) && isxdigit(hex2)) {
                    int value = (isdigit(hex1) ? (hex1 - '0') : (tolower(hex1) - 'a' + 10)) << 4;
                    value |= isdigit(hex2) ? (hex2 - '0') : (tolower(hex2) - 'a' + 10);
                    cleaned += static_cast<char>(value);
                    prev_char = static_cast<char>(value);
                    i += 3;
                } else {
                    cleaned += c;
                    prev_char = c;
                    i++;
                }
            } else {
                cleaned += c;
                prev_char = c;
                i++;
            }
        }

        input_string = cleaned;