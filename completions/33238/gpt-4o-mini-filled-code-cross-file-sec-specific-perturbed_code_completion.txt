if (input_string.empty()) {
    return;
}

// Remove leading spaces and new lines
input_string.erase(0, input_string.find_first_not_of(" \n"));

// Replace slashes with the OS directory separator
std::string::size_type pos = 0;
const std::string separator = std::string(1, std::filesystem::path::preferred_separator);
while ((pos = input_string.find_first_of("/\\", pos)) != std::string::npos) {
    input_string.replace(pos, 1, separator);
    pos += separator.length();
}

// Reduce double delimiters to single
std::string::size_type double_pos;
while ((double_pos = input_string.find(separator + separator)) != std::string::npos) {
    input_string.erase(double_pos, separator.length());
}

// Handle special cases for "://" and "\\\\"
size_t protocol_pos = input_string.find("://");
if (protocol_pos != std::string::npos) {
    // Skip over the protocol
    protocol_pos += 3; // Move past "://"
}

// Convert hexadecimal sequences in URIs
std::string result;
for (size_t i = 0; i < input_string.length(); ++i) {
    if (input_string[i] == '%' && i + 2 < input_string.length() &&
        isxdigit(input_string[i + 1]) && isxdigit(input_string[i + 2])) {
        std::string hex = input_string.substr(i + 1, 2);
        char decoded_char = static_cast<char>(strtol(hex.c_str(), nullptr, 16));
        result += decoded_char;
        i += 2; // Skip the next two characters
    } else {
        result += input_string[i];
    }
}

input_string = result;