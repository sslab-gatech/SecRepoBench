if (current > 0) {
    // Dispatch the bytes before the start code as a separate packet
    dst_pck = gf_filter_pck_new_alloc(ctx->opid, current, &packet_data);
    if (!dst_pck) return GF_OUT_OF_MEM;

    if (ctx->src_pck) gf_filter_pck_merge_properties(ctx->src_pck, dst_pck);
    memcpy(packet_data, start, (size_t) current);
    gf_filter_pck_set_framing(dst_pck, GF_FALSE, GF_FALSE);
    gf_filter_pck_set_cts(dst_pck, GF_FILTER_NO_TS);
    gf_filter_pck_set_dts(dst_pck, GF_FILTER_NO_TS);

    if (byte_offset != GF_FILTER_NO_BO) {
        gf_filter_pck_set_byte_offset(dst_pck, byte_offset);
    }

    mpgviddmx_enqueue_or_dispatch(ctx, dst_pck, GF_FALSE, GF_FALSE);
}