if (utf8) {
    *mincharindex = cpdmin; // Set min char index based on cpdmin
    *cmax = len; // Set max char index to the length of the word
    // Adjust max char index to exclude trailing UTF-8 continuation bytes
    const char* end = word + len;
    while (end > word && (*(end - 1) & 0xc0) == 0x80) {
      --end;
      --(*cmax);
    }
  } else {
    *mincharindex = 0; // Set min char index to 0
    *cmax = len; // Set max char index to the length of the word
  }