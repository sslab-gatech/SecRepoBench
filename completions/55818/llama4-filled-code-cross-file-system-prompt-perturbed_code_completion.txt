if (utf8) {
    *mincharindex = 0;
    *cmax = len;
    while (*cmax > 0 && ((*word[*cmax - 1] & 0xc0) == 0x80)) {
      --*cmax;
    }
    *mincharindex += cpdmin;
  } else {
    *mincharindex = 0;
    *cmax = len;
    *mincharindex += cpdmin;
    if (*cmax > *mincharindex) {
      *cmax -= 1;
    }
  }