if (utf8) {
  const char* p;
  size_t cpdmin = get_cpdmin(); // Assume a method to retrieve cpdmin value
  *mincharindex = 0;
  for (p = word; p < word + len && cpdmin > 0; ) {
    if ((*p & 0xc0) != 0x80) { // Skip continuation bytes
      ++(*mincharindex);
      --cpdmin;
    }
    ++p;
  }
  *cmax = len;
  while (*cmax > 0 && ((word[*cmax - 1] & 0xc0) == 0x80)) {
    --(*cmax);
  }
} else {
  *mincharindex = cpdmin < len ? cpdmin : len;
  *cmax = len;
}