if (utf8) {
    *mincharindex = start;
    *cmax = len;
    for (size_t i = 0; i < cpdmin; ++i) {
      if (*mincharindex < len) {
        do {
          ++(*mincharindex);
        } while (*mincharindex < len && (word[*mincharindex] & 0xc0) == 0x80);
      }
    }
    while (*cmax > 0 && (*cmax > *mincharindex) && (word[*cmax - 1] & 0xc0) == 0x80) {
      --(*cmax);
    }
  } else {
    *mincharindex = cpdmin;
    *cmax = len - cpdmin + 1;
  }