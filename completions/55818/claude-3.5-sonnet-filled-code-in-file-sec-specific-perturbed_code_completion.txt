// If utf8 is set, calculate the min char index as the starting position
// and max char index as the ending position based on UTF-8 character boundaries.
// Increment min char index by the number of UTF-8 characters specified by cpdmin.
// Exclude trailing UTF-8 continuation bytes while adjusting max char index.
if (utf8) {
  *mincharindex = 0;
  for (size_t i = 0; i < len && *mincharindex < cpdmin; i++) {
    if ((word[i] & 0xC0) != 0x80) {
      (*mincharindex)++;
    }
  }
  *cmax = len;
  while (*cmax > *mincharindex && (word[*cmax - 1] & 0xC0) == 0x80) {
    (*cmax)--;
  }
}
// If utf8 is not set, simply adjust min char index and max char index
else {
  *mincharindex = cpdmin;
  *cmax = len;
}