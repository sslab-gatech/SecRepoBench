if (utf8) {
    *mincharindex = 0;
    *cmax = len;
    size_t i = len;
    while (i > 0 && (word[i - 1] & 0xc0) == 0x80)
      i--;
    *cmax = i;
    *mincharindex += cpdmin;
  } else {
    *mincharindex += cpdmin;
    *cmax -= cpdmax;
  }