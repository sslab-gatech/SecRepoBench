if (utf8) {
    // Initialize mincharindex to the start of the word
    *mincharindex = 0;

    // Initialize cmax to the end of the word
    *cmax = len;

    // Adjust mincharindex for UTF-8 characters
    // Increment mincharindex by the number of UTF-8 characters specified by `cpdmin`
    *mincharindex += cpdmin;

    // Exclude trailing UTF-8 continuation bytes while adjusting max char index
    // If `utf8` is not set, adjust min char index and max char index.
    // Traverse the word to find the end of the last UTF-8 character
    const char* wordp = word;
    const char* p = wordp + len - 1;
    while (p >= wordp && (*p & 0xc0) == 0x80) {
      (*cmax)--;
      p--;
    }
  } else {
    // Adjust min char index and max char index for non-UTF-8 words
    *mincharindex = 0;
    *cmax = len;
  }
}