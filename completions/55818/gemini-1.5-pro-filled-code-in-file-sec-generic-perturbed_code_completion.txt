if (utf8) {
  *mincharindex = start;
  for (size_t j = 0; j < cpdmin; j++) {
    if (*mincharindex >= len) {
      *mincharindex = len;
      break;
    }
    if (word[*mincharindex] == 0) {
      break;
    }
    (*mincharindex)++;
    while (*mincharindex < len && (word[*mincharindex] & 0xc0) == 0x80) {
      (*mincharindex)++;
    }
  }
  *cmax = len;
  while (*cmax > 0 && (word[*cmax - 1] & 0xc0) == 0x80) {
    (*cmax)--;
  }
} else {
  *mincharindex = cpdmin < len ? cpdmin : len;
  *cmax = len - cpdmin + 1;
}