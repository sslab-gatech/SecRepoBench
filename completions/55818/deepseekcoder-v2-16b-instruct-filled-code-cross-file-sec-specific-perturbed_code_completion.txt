// Determine the minimum and maximum character positions in the word.
  // If the `utf8` flag is set, calculate the min char index as the starting position
  // and max char index as the ending position based on UTF-8 character boundaries.
  // Increment min char index by the number of UTF-8 characters specified by `cpdmin`.
  // Exclude trailing UTF-8 continuation bytes while adjusting max char index.
  // If `utf8` is not set, adjust min char index and max char index.
  if (utf8) {
    size_t min_char_index = 0;
    size_t max_char_index = len;

    // Calculate the min char index based on UTF-8 character boundaries
    size_t cp_count = 0;
    const char* p = word;
    while (*p && cp_count < *cpdmin) {
      if ((*p & 0xC0) != 0x80) {
        cp_count++;
      }
      p++;
    }
    min_char_index = p - word;

    // Adjust max char index to exclude trailing UTF-8 continuation bytes
    while (max_char_index > min_char_index && (*(word + max_char_index - 1) & 0xC0) == 0x80) {
      max_char_index--;
    }

    *mincharindex = min_char_index;
    *cmax = max_char_index;
  } else {
    // Adjust min char index and max char index for non-UTF-8 case
    *mincharindex = 0;
    *cmax = len;
  }
}