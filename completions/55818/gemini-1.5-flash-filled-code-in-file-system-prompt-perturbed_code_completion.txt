if (utf8) {
    *mincharindex = cpdmin;
    *cmax = len;
    for (size_t i = len; i > 0; --i) {
      if (!((word[i - 1] & 0xc0) == 0x80))
        break;
      (*cmax)--;
    }
  } else {
    *mincharindex = cpdmin;
    *cmax = len - cpdmin + 1;
  }