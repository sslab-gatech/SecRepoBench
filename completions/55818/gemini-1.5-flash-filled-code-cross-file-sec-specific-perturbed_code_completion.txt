size_t i;
  if (utf8) {
    *mincharindex = 0;
    *cmax = len;
    for (i = 0; i < len; i++) {
      if ((word[i] & 0xc0) != 0x80) {
        *mincharindex += cpdmin;
      }
    }
    for (i = len - 1; i > 0; i--) {
      if ((word[i] & 0xc0) != 0x80) {
        break;
      }
    }
    *cmax = i + 1;
  } else {
    *mincharindex = cpdmin;
    *cmax = len;
  }