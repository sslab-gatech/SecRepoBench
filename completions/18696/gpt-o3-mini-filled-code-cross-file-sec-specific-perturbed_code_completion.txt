{
  size_t path_capacity = number_vertices + 6*BezierQuantum + 360;
  #define CheckPathExtent(amount) \
    do { \
      if ((p + q + (amount)) > path_capacity) { \
        size_t new_capacity = (p + q + (amount)) * 2; \
        PointInfo *temp_path_p = (PointInfo *) ResizeMagickMemory(path_p, new_capacity * sizeof(*path_p)); \
        PointInfo *temp_path_q = (PointInfo *) ResizeMagickMemory(path_q, new_capacity * sizeof(*path_q)); \
        if ((temp_path_p == (PointInfo *) NULL) || (temp_path_q == (PointInfo *) NULL)) { \
          if (temp_path_p != (PointInfo *) NULL) \
            path_p = temp_path_p; \
          if (temp_path_q != (PointInfo *) NULL) \
            path_q = temp_path_q; \
          path_p = (PointInfo *) RelinquishMagickMemory(path_p); \
          path_q = (PointInfo *) RelinquishMagickMemory(path_q); \
          polygon_primitive = (PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive); \
          return((PrimitiveInfo *) NULL); \
        } \
        path_p = temp_path_p; \
        path_q = temp_path_q; \
        path_capacity = new_capacity; \
      } \
    } while (0)
}