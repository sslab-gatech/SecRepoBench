// Allocate memory for path_p and path_q based on the number of vertices
size_t allocated_size = (size_t)(number_vertices * sizeof(PointInfo));
path_p = (PointInfo *) AcquireQuantumMemory(number_vertices, sizeof(PointInfo));
path_q = (PointInfo *) AcquireQuantumMemory(number_vertices, sizeof(PointInfo));

// Check if memory allocation was successful
if (path_p == (PointInfo *) NULL || path_q == (PointInfo *) NULL)
{
  if (path_p != (PointInfo *) NULL)
    path_p = (PointInfo *) RelinquishMagickMemory(path_p);
  if (path_q != (PointInfo *) NULL)
    path_q = (PointInfo *) RelinquishMagickMemory(path_q);
  polygon_primitive = (PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive);
  return((PrimitiveInfo *) NULL);
}