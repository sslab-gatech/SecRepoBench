#define CheckPathExtent(pad) \
  if (status == MagickFalse) \
    break; \
  if (((size_t) (p+pad)) >= number_paths) \
    { \
      number_paths<<=1; \
      path_p=(PointInfo *) ResizeQuantumMemory(path_p,number_paths, \
        sizeof(*path_p)); \
      path_q=(PointInfo *) ResizeQuantumMemory(path_q,number_paths, \
        sizeof(*path_q)); \
      if ((path_p == (PointInfo *) NULL) || (path_q == (PointInfo *) NULL)) \
        { \
          (void) ThrowMagickException(mvg_info->exception,GetMagickModule(), \
            ResourceLimitError,"MemoryAllocationFailed","`%s'",""); \
          status=MagickFalse; \
          break; \
        } \
    }
  LineSegment
    dx = {0.0, 0.0},
    dy = {0.0, 0.0},
    inverse_slope = {0.0, 0.0},
    slope = {0.0, 0.0};

  PointInfo
    box_p[5],
    box_q[5],
    center = {0.0, 0.0},
    offset = {0.0, 0.0},
    theta = {0.0, 0.0};

  PrimitiveInfo
    *polygon_primitive;

  register ssize_t
    n;

  size_t
    arc_segments,
    number_paths,
    number_vertices;

  ssize_t
    j;

  double
    delta_theta,
    dot_product,
    mid,
    miterlimit;

  PointInfo
    *path_p,
    *path_q;

  /*
    Allocate paths.
  */
  number_vertices=primitivedata->coordinates;
  polygon_primitive=(PrimitiveInfo *) AcquireQuantumMemory((size_t)
    number_vertices+1UL,sizeof(*polygon_primitive));
  if (polygon_primitive == (PrimitiveInfo *) NULL)
    return((PrimitiveInfo *) NULL);
  (void) memcpy(polygon_primitive,primitivedata,(size_t) number_vertices*
    sizeof(*polygon_primitive));
  closed_path=polygon_primitive->closed_subpath;
  polygon_primitive[number_vertices].primitive=UndefinedPrimitive;
  number_paths=2*number_vertices+360;
  path_p=(PointInfo *) AcquireQuantumMemory(number_paths,sizeof(*path_p));
  path_q=(PointInfo *) AcquireQuantumMemory(number_paths,sizeof(*path_q));
  if (path_p == (PointInfo *) NULL)
    {
      path_q=(PointInfo *) RelinquishMagickMemory(path_q);
      polygon_primitive=(PrimitiveInfo *) RelinquishMagickMemory(
        polygon_primitive);
      return((PrimitiveInfo *) NULL);
    }