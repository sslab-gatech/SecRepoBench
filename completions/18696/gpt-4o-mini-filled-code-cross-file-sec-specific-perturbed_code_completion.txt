// Allocate memory for path_p and path_q based on the number of vertices
path_p = (PointInfo *) AcquireQuantumMemory((size_t) (number_vertices + 1), sizeof(*path_p));
path_q = (PointInfo *) AcquireQuantumMemory((size_t) (number_vertices + 1), sizeof(*path_q));

// Check if memory allocation was successful
if ((path_p == (PointInfo *) NULL) || (path_q == (PointInfo *) NULL))
{
    if (path_p != (PointInfo *) NULL)
        path_p = (PointInfo *) RelinquishMagickMemory(path_p);
    if (path_q != (PointInfo *) NULL)
        path_q = (PointInfo *) RelinquishMagickMemory(path_q);
    polygon_primitive = (PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive);
    return (PrimitiveInfo *) NULL;
}