end=q;
n=0;
while ((*end != '\0') && (*end != '"'))
{
  if (*end == '\\')
    end++;
  end++;
}
if (*end == '"')
  {
    char
      macro[MagickPathExtent];

    (void) CopyMagickString(macro,start,(size_t) (end-start+1));
    (void) AddValueToSplayTree(macros,ConstantString(name),
      ConstantString(macro));
    q=end+1;
  }
else
  q=end;
            /*
              Skip to the end of the macro definition.
            */
            while ((*q != '\0') && (*q != '"'))
              q++;
            if (*q == '"')
              q++;