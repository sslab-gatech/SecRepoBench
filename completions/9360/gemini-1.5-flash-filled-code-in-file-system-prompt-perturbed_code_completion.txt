end=q;
            while ((*q != '\n') && (*q != '\0'))
              q++;
            if (*q == '\0')
              break;
            (void) CopyMagickString(name,start,(size_t) (end-start));
            (void) SetValueInSplayTree(macros,AcquireString(name),
              AcquireString(start));
          }
        else
          {
            /*
              Unnamed macro (e.g. push graphic-context { ... }).
            */
            char
              *end;

            start=q;
            while ((*q != '}') && (*q != '\0'))
              q++;
            end=q;
            if (*q == '\0')
              {
                (void) ThrowMagickException(exception,GetMagickModule(),
                  DrawError,"UnbalancedGraphicContextPushPop","`%s'",token);
                break;
              }
            (void) CopyMagickString(name,start,(size_t) (end-start));
            (void) SetValueInSplayTree(macros,AcquireString(name),
              AcquireString(start));
            q++;
          }