end=q;
while ((*end != '"') && (*end != '\0'))
  end++;
n=(ssize_t) (end-q);
if ((MagickPathExtent-(ssize_t) strlen(name)) < n)
  ThrowWriterException(ResourceLimitError,"MemoryAllocationFailed");
(void) strncpy(name,q,n);
name[n]='\0';
q=end;
GetNextToken(q,&q,extent,token);
if (LocaleCompare("pop",token) == 0)
  {
    /* Handle the pop command */
    macros=AddValueToSplayTree(macros,ConstantString(name),ConstantString(name));
  }