size_t
              length;

            char
              *macro;

            p=start;
            while ((*p != '"') && (*p != '\0'))
              p++;
            if (*p == '\0')
              break;
            p++;
            q=p;
            while ((*q != '"') && (*q != '\0'))
              q++;
            if (*q == '\0')
              break;
            length=(size_t) (q-p);
            macro=AcquireString(p);
            macro[length]='\0';
            (void) InsertValueInSplayTree(macros,AcquireString(name),macro);
            q++;
            continue;
          }
        GetNextToken(q,&q,length,token);
        if (*q == '"')
          {
            char
              name[MagickPathExtent];

            const char
              *p;

            ssize_t
              n;

            /*
              Named macro (e.g. push graphic-context "wheel").
            */
            GetNextToken(q,&q,length,token);
            start=q;
            p=start;
            while ((*p != '"') && (*p != '\0'))
              p++;
            if (*p == '\0')
              break;
            p++;
            q=p;
            while ((*q != '"') && (*q != '\0'))
              q++;
            if (*q == '\0')
              break;
            length=(size_t) (q-p);
            (void) CopyMagickString(name,p,MagickPathExtent);
            macro=AcquireString(p);
            macro[length]='\0';
            (void) InsertValueInSplayTree(macros,AcquireString(name),macro);
            q++;
            continue;
          }
      }
    if (LocaleCompare("pop",token) == 0)
      {
        GetNextToken(q,&q,length,token);
        if (LocaleCompare("graphic-context",token) == 0)
          continue;
      }