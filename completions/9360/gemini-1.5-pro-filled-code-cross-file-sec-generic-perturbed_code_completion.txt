end=q;
n=0;
while ((*end != '\0') && (*end != '"'))
{
  if (*end == '\\')
    end++;
  end++;
}
if (*end == '"')
  {
    char
      macro[MagickPathExtent];

    (void) CopyMagickString(name,token,MagickPathExtent);
    (void) CopyMagickMemory(macro,start,(size_t) (end-start+1));
    macro[end-start]='\0';
    (void) AddValueToSplayTree(macros,ConstantString(name),
      ConstantString(macro));
    q=end+1;
  }