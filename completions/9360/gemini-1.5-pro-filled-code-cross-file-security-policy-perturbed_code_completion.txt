end=q;
while ((*end != '\"') && (*end != '\0'))
  end++;
if ((end > q) && (end < (primitive+length)))
  {
    (void) CopyMagickString(name,q,(size_t) (end-q+1));
    (void) AddValueToSplayTree(macros,ConstantString(name),
      ConstantString(token));
    q=end+1;
   }