for (end=q; *end != '\0'; )
            {
              if (*end == '#')
                {
                  /*
                    Skip comment.
                  */
                  while ((*end != '\n') && (*end != '\0'))
                    end++;
                  continue;
                }
              if (*end == '"')
                break;
              end++;
            }
            if ((q == (char *) NULL) || (end == (char *) NULL) || ((end-4) < q))
              {
                status=MagickFalse;
                break;
              }
            (void) CopyMagickString(token,q,(size_t) (end-q-1));
            (void) AddValueToSplayTree(macros,name,
              AcquireString(token));
            q=end+2;