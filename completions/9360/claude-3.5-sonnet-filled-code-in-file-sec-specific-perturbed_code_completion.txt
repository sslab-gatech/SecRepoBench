// Extract macros from the MVG string
for (;;)
{
  GetNextToken(q,&q,length,token);
  if (*token == '\0')
    break;
  if (LocaleCompare("pop",token) == 0)
  {
    GetNextToken(q,&q,length,token);
    if (LocaleCompare("graphic-context",token) == 0)
      break;
  }
}
start=q;
for (;;)
{
  GetNextToken(q,&q,length,token);
  if (*token == '\0')
    break;
  if (LocaleCompare("push",token) == 0)
  {
    GetNextToken(q,&q,length,token);
    if (LocaleCompare("graphic-context",token) == 0)
      break;
  }
}
end=q-strlen(token)-5;
(void) CopyMagickString(name,start,(size_t) (end-start+1));
(void) AddValueToSplayTree(macros,ConstantString(name),
  ConstantString(name));