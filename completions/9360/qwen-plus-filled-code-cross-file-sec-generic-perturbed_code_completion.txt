start=q;
while ((*q != '"') && (*q != '\0'))
  q++;
*q='\0';
n=FormatLocaleString(name,MagickPathExtent,"%s",start);
if (n <= 0 || n >= (ssize_t) MagickPathExtent)
  ThrowFatalException(CorruptImageError,"UnableToReadGraphicPrimitive");
end=q+1;
while ((*end != '\0') && (*end != '"'))
  end++;
if (*end == '\0')
  ThrowFatalException(CorruptImageError,"UnableToReadGraphicPrimitive");
*end='\0';
SplayTreeInfo *macro_node = NewSplayTree(CompareSplayTreeString, RelinquishMagickMemory, RelinquishMagickMemory);
(void) AddValueToSplayTree(macro_node, ConstantString(name), ConstantString(start));
(void) AddValueToSplayTree(macros, ConstantString(name), macro_node);
q=end;