const uint8_t *buf = avpkt->data;
    int buf_size = avpkt->size;
    int second_field_offset;
    int ret;

    if (buf_size < 7) {
        return AVERROR_INVALIDDATA;
    }

    int quality = buf[0];
    if (quality < 1 || quality > 31) {
        return AVERROR_INVALIDDATA;
    }

    compute_quant_matrix(s->quant_matrix, quality);