SHQContext *s = codec_context->priv_data;
    const uint8_t *buf = avpkt->data;
    int buf_size = avpkt->size;
    int second_field_offset;
    int qscale;
    int ret;

    if (buf_size < 4)
        return AVERROR_INVALIDDATA;

    qscale = FFMAX(buf[0], 1);
    compute_quant_matrix(s->quant_matrix, qscale);