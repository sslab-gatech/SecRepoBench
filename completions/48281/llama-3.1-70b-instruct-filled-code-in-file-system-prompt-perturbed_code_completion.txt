SHQContext * const s = avctx->priv_data;
const uint8_t *buf = avpkt->data;
int buf_size = avpkt->size;
int ret;

if (buf_size < 3) {
    return AVERROR_INVALIDDATA;
}

int qscale = AV_RL8(buf);
compute_quant_matrix(s->quant_matrix, qscale);