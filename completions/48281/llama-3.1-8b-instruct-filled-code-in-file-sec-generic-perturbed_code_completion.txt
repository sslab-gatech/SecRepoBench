static int speedhq_decode_frame(AVCodecContext *codec_context, AVFrame *frame,
                                int *got_frame, AVPacket *avpkt)
{
    // Initialize context and packet data variables for processing the frame.
    // Validate basic constraints on packet size and codec context width to ensure data integrity.
    // Extract a quality parameter from the packet data to adjust processing parameters.
    // Calculate a quantization matrix based on the quality parameter to prepare for further decoding.
    int qscale = avpkt->data[0];
    if (qscale < 1 || qscale > 63) {
        return AVERROR_INVALIDDATA;
    }

    compute_quant_matrix(s->quant_matrix, qscale);

    // <MASK>
    return decode_speedhq_field(s, avpkt->data + 1, avpkt->size - 1, frame, 0, 4, avpkt->size, 1);
}