SHQContext * const s = avctx->priv_data;
const uint8_t *buf = avpkt->data;
int buf_size = avpkt->size;
int ret;

if (buf_size < 3) {
    return AVERROR_INVALIDDATA;
}

if (buf[0]!= 0x80) {
    return AVERROR_INVALIDDATA;
}

int qscale = buf[2];
compute_quant_matrix(s->quant_matrix, qscale);