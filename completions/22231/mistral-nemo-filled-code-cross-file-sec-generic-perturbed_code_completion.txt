if (c->comp_hdr->codecs[DS_RI]) {
    r |= c->comp_hdr->codecs[DS_RI]
                ->encode(s, c->comp_hdr->codecs[DS_RI], blk,
                         (char *)&cr->ref_id, &out_sz);
    if (r) goto block_err;
} else {
    // If the codec for DS_RI is not available, set the ref_id to -1
    cr->ref_id = -1;
}