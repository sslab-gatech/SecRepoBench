size_t required = slice->hdr->ref_seq_span;
if (b->uncomp_size < required) {
    hts_log_error("Embedded reference too short: expected at least %" PRIu32 " bases, got %u",
                  slice->hdr->ref_seq_span, b->uncomp_size);
    return -1;
}
slice->ref = b->data;
slice->ref_start = slice->hdr->ref_seq_start;
slice->ref_end = slice->hdr->ref_seq_start + slice->hdr->ref_seq_span - 1;