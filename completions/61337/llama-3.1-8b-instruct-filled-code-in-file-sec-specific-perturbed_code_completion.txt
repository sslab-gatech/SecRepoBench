static void
htmlSwitchEncoding(htmlParserCtxtPtr ctxt, xmlCharEncoding enc) {
    xmlCharEncodingHandlerPtr handler;

    handler = xmlFindCharEncodingHandler((const char *) xmlCharEncodingGetName(enc));
    if (handler!= NULL) {
        xmlSwitchToEncoding(ctxt, handler);
    } else {
        htmlParseErr(ctxt, XML_ERR_UNSUPPORTED_ENCODING,
                     "Unsupported encoding %s\n",
                     (const xmlChar *) xmlCharEncodingGetName(enc), NULL);
    }
}