handler = xmlFindCharEncodingHandler(encoding_guess);
        if (handler != NULL) {
            if (handler->name != NULL) {
                if (xmlStrcasecmp(handler->name,
                                  (const xmlChar *) "UTF-8") != 0) {
                    xmlSwitchEncoding(ctxt, handler->name);
                }
            }
        } else {
            htmlParseErr(ctxt, XML_ERR_UNSUPPORTED_ENCODING,
                         "Unsupported encoding %s\n",
                         encoding_guess, NULL);
        }