{
    xmlCharEncodingHandlerPtr handler = xmlFindCharEncodingHandler(encoding_guess);
    if (handler == NULL) {
        htmlParseErr(ctxt, XML_ERR_UNSUPPORTED_ENCODING,
                     "Unsupported encoding: %s\n", encoding_guess, NULL);
    } else if (xmlStrcasecmp((const xmlChar *)handler->name,
                             BAD_CAST "UTF-8") != 0) {
        xmlSwitchToEncoding(ctxt, handler);
    }
}