{
    handler = xmlFindEncodingHandler((const char *)encoding_guess);
    if (handler == NULL) {
        htmlParseErrInt(ctxt, XML_ERR_UNSUPPORTED_ENCODING,
                        "Unsupported encoding: %s\n", encoding_guess);
    } else if (strcmp((const char *)encoding_guess, "UTF-8") != 0) {
        xmlSwitchEncoding(ctxt, handler);
    }
    xmlFree(encoding_guess);
}