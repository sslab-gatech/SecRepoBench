while (true) {
        char* endptr;
        long num = strtol(src, &endptr, 10);
        if (endptr == src) {
          // No number found, or error in conversion
          if (af != NULL)
            HUNSPELL_WARNING(stderr, "error: line %d: bad flagvector\n",
                             af->getlinenum());
          *dest = 0;
        } else {
          if (num >= DEFAULTFLAGS) {
            if (af != NULL)
              HUNSPELL_WARNING(stderr,
                               "error: line %d: flag id %ld is too large (max: "
                               "%d)\n",
                               af->getlinenum(), num, DEFAULTFLAGS - 1);
            num = 0;
          }
          if (num == 0 && af != NULL) {
            HUNSPELL_WARNING(stderr, "error: line %d: flag id is zero\n",
                             af->getlinenum());
          }

          *dest = (unsigned short)num;
        }
        dest++;
        if (*endptr == '\0') {
          // End of string
          break;
        } else if (*endptr == ',') {
          // Move to the next number
          src = endptr + 1;
        } else {
          // Invalid character
          if (af != NULL)
            HUNSPELL_WARNING(stderr, "error: line %d: bad flagvector\n",
                             af->getlinenum());
          break;
        }
      }
      break;