{
  int count = 0;
  for (const char* p = src; *p; ++p) {
    if (*p == ',') {
      int val = atoi(src);
      if (val >= DEFAULTFLAGS && af != NULL) {
        HUNSPELL_WARNING(stderr,
                         "error: line %d: flag id %d is too large (max: %d)\n",
                         af->getlinenum(), val, DEFAULTFLAGS - 1);
        val = 0;
      }
      dest[count++] = static_cast<unsigned short>(val);
      if (dest[count - 1] == 0 && af != NULL) {
        HUNSPELL_WARNING(stderr, "error: line %d: 0 is wrong flag id\n",
                         af->getlinenum());
      }
      src = p + 1;
    }
  }
  int val = atoi(src);
  if (val >= DEFAULTFLAGS && af != NULL) {
    HUNSPELL_WARNING(stderr,
                     "error: line %d: flag id %d is too large (max: %d)\n",
                     af->getlinenum(), val, DEFAULTFLAGS - 1);
    val = 0;
  }
  dest[count++] = static_cast<unsigned short>(val);
  if (dest[count - 1] == 0 && af != NULL) {
    HUNSPELL_WARNING(stderr, "error: line %d: 0 is wrong flag id\n",
                     af->getlinenum());
  }
}