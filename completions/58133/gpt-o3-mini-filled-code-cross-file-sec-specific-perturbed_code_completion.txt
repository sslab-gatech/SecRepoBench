{
  for (int index = 0; index < len; index++) {
    char* endptr;
    int value = std::strtol(src, &endptr, 10);
    if (endptr == src) { // no valid conversion, treat as 0
      value = 0;
    }
    if (value >= DEFAULTFLAGS) {
      if (af != NULL)
        HUNSPELL_WARNING(stderr, "error: line %d: flag id %d is too large (max: %d)\n",
                         af->getlinenum(), value, DEFAULTFLAGS - 1);
      value = 0;
    }
    if (value == 0) {
      if (af != NULL)
        HUNSPELL_WARNING(stderr, "error: line %d: 0 is wrong flag id\n", af->getlinenum());
    }
    dest[index] = static_cast<unsigned short>(value);
    src = (*endptr == ',') ? endptr + 1 : endptr;
  }
}