std::string token;
      while (true) {
        const char* next_comma = std::strchr(src, ',');
        if (next_comma) {
          token.assign(src, next_comma);
          src = next_comma + 1;
        } else {
          token.assign(src);
          src = nullptr; // End of string
        }

        int value = atoi(token.c_str());
        if (value <= 0) {
          HUNSPELL_WARNING(stderr, "error: line %d: flag id %d is invalid (must be > 0)\n", af->getlinenum(), value);
          value = 0; // Set to 0 if invalid
        } else if (value >= DEFAULTFLAGS) {
          HUNSPELL_WARNING(stderr, "error: line %d: flag id %d is too large (max: %d)\n", af->getlinenum(), value, DEFAULTFLAGS - 1);
          value = 0; // Set to 0 if too large
        }

        *dest++ = static_cast<unsigned short>(value);

        if (!next_comma) break; // Exit loop if no more commas
      }