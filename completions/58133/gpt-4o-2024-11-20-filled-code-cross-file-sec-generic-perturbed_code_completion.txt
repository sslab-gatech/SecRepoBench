int index = 0;
      while (*src) {
        char* endptr;
        long value = strtol(src, &endptr, 10); // Convert string to long
        if (endptr == src) {
          HUNSPELL_WARNING(stderr, "error: invalid number in flagvector\n");
          delete[] *result;
          *result = NULL;
          return 0;
        }
        if (value < 0 || value >= DEFAULTFLAGS) {
          HUNSPELL_WARNING(stderr,
                           "error: flag id %ld is out of range (max: %d)\n",
                           value, DEFAULTFLAGS - 1);
          value = 0;
        }
        if (index >= len) {
          HUNSPELL_WARNING(stderr, "error: too many flags in flagvector\n");
          delete[] *result;
          *result = NULL;
          return 0;
        }
        dest[index++] = (unsigned short)value;
        src = (*endptr == ',') ? endptr + 1 : endptr;
      }
      if (index != len) {
        HUNSPELL_WARNING(stderr, "error: mismatch in flag count\n");
        delete[] *result;
        *result = NULL;
        return 0;
      }