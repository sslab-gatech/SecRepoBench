for (int index = 0; index < len; index++) {
        char* endptr = nullptr;
        unsigned long value = strtoul(src, &endptr, 10);

        if (endptr == src || (*endptr != '\0' && *endptr != ',')) {
          // Handle parsing error
          HUNSPELL_WARNING(stderr, "error: line %d: invalid flag number\n", af->getlinenum());
          *result = nullptr;
          delete[] *result;
          return -1;
        }

        if (value >= DEFAULTFLAGS) {
          HUNSPELL_WARNING(stderr, "error: line %d: flag id %lu is too large (max: %d)\n",
                           af->getlinenum(), value, DEFAULTFLAGS - 1);
          value = 0; // or handle the error differently
        }
        if (value == 0 && af != NULL)
        {
          HUNSPELL_WARNING(stderr, "error: line %d: 0 is wrong flag id\n", af->getlinenum());
        }


        dest[index] = (unsigned short)value;

        src = endptr;
        if (*src == ',') {
          src++;
        }
      }
      break;