unsigned short* dest = *result;
const char* src = flags.c_str();
while (src < flags.c_str() + flags.size()) {
  char* end;
  unsigned long num = strtoul(src, &end, 10);
  if (end == src) {
    HUNSPELL_WARNING(stderr, "error: line %d: bad flagvector\n", af->getlinenum());
    break;
  }
  if (num >= DEFAULTFLAGS) {
    HUNSPELL_WARNING(stderr, "error: line %d: flag id %lu is too large (max: %d)\n", af->getlinenum(), num, DEFAULTFLAGS - 1);
    num = 0;
  }
  *dest = (unsigned short)num;
  dest++;
  src = end;
  if (*src == ',')
    src++;
}