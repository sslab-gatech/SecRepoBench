unsigned short* dest = *result;
const char* src = flags.c_str();
const char* start = src;
while (*src!= '\0') {
  if (*src == ',') {
    std::string numstr(start, src);
    int i = atoi(numstr.c_str());
    if (i >= DEFAULTFLAGS) {
      HUNSPELL_WARNING(stderr, "error: flag id %d is too large (max: %d)\n",
                       af->getlinenum(), i, DEFAULTFLAGS - 1);
      i = 0;
    }
    if (i == 0)
      HUNSPELL_WARNING(stderr, "error: 0 is wrong flag id\n");
    *dest = (unsigned short)i;
    dest++;
    src++;
    start = src;
  } else {
    src++;
  }
}
if (src > start) {
  std::string numstr(start, src);
  int i = atoi(numstr.c_str());
  if (i >= DEFAULTFLAGS) {
    HUNSPELL_WARNING(stderr, "error: flag id %d is too large (max: %d)\n",
                     af->getlinenum(), i, DEFAULTFLAGS - 1);
    i = 0;
  }
  if (i == 0)
    HUNSPELL_WARNING(stderr, "error: 0 is wrong flag id\n");
  *dest = (unsigned short)i;
}