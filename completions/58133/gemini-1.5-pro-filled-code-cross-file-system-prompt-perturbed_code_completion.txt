while (src && *src) {
        char* endptr = NULL;
        unsigned long flagl = strtoul(src, &endptr, 10);
        if (flagl > USHRT_MAX) {
          flagl = 0;
          HUNSPELL_WARNING(stderr, "error: line %d: flag id is too large\n", af->getlinenum());
        }

        unsigned short flag = (unsigned short)flagl;

        if (flag >= DEFAULTFLAGS) {
          HUNSPELL_WARNING(stderr,
                           "error: line %d: flag id %d is too large (max: %d)\n",
                           af->getlinenum(), flag, DEFAULTFLAGS - 1);
          flag = 0;
        } else if (flag == 0 && af != NULL) {
          HUNSPELL_WARNING(stderr, "error: line %d: 0 is wrong flag id\n", af->getlinenum());
        }

        *dest++ = flag;

        if (endptr && *endptr == ',') {
          src = endptr + 1;
        } else {
          src = NULL; // Stop parsing if no comma or end of string is reached
        }
      }
      break;