for (int index = 0; index < len; index++) {
  // Skip any leading whitespace
  while (*src && isspace(*src))
    src++;
  // Convert the number starting at src
  int num = atoi(src);
  if (num >= DEFAULTFLAGS) {
    HUNSPELL_WARNING(stderr, "error: flag id %d is too large (max: %d)\n",
                     num, DEFAULTFLAGS - 1);
    num = 0;
  }
  if (num == 0)
    HUNSPELL_WARNING(stderr, "error: 0 is wrong flag id\n");
  dest[index] = static_cast<unsigned short>(num);
  // Advance src to the next comma or end of string
  while (*src && *src != ',')
    src++;
  if (*src == ',')
    src++;
}