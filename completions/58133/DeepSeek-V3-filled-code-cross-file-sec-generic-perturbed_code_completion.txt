const char* end = flags.c_str() + flags.size();
      while (src < end) {
        char* next;
        unsigned short flag = (unsigned short)strtoul(src, &next, 10);
        if (next == src) {
          if (af != NULL) {
            HUNSPELL_WARNING(stderr, "error: line %d: bad flagvector\n",
                             af->getlinenum());
          }
          flag = 0;
        }
        if (flag >= DEFAULTFLAGS && af != NULL) {
          HUNSPELL_WARNING(stderr,
                           "error: line %d: flag id %d is too large (max: %d)\n",
                           af->getlinenum(), flag, DEFAULTFLAGS - 1);
          flag = 0;
        }
        if (flag == 0 && af != NULL) {
          HUNSPELL_WARNING(stderr, "error: line %d: 0 is wrong flag id\n",
                           af->getlinenum());
        }
        *dest++ = flag;
        src = next;
        if (*src == ',') {
          src++;
        } else if (src < end) {
          if (af != NULL) {
            HUNSPELL_WARNING(stderr, "error: line %d: bad flagvector\n",
                             af->getlinenum());
          }
          break;
        }
      }