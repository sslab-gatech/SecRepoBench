for (int i = 0; i < len; ++i) {
        char* endptr = nullptr;
        unsigned long num = strtoul(src, &endptr, 10);
        if (endptr == src || num > USHRT_MAX) {
          // Handle invalid number or overflow
          HUNSPELL_WARNING(stderr, "error: line %d: invalid flag number\n", af->getlinenum());
          dest[i] = 0; // or another appropriate default value
        } else {
          dest[i] = (unsigned short)num;
          if (dest[i] >= DEFAULTFLAGS && af != NULL) {
            HUNSPELL_WARNING(stderr, "error: line %d: flag id %d is too large (max: %d)\n",
                             af->getlinenum(), dest[i], DEFAULTFLAGS - 1);
            dest[i] = 0;
          }
        }

        // Advance src past the current number and any following comma
        src = endptr;
        while (*src == ',') {
          src++;
        }
      }
      break;