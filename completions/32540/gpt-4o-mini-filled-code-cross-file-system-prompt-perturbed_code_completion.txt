if (indexlookup >= done_lookups_glyph_count->length)
    return false;

if (done_lookups_glyph_count->get(indexlookup) > 0)
    return true;

hb_set_t *current_glyph_set = done_lookups_glyph_set->get(indexlookup);
if (!current_glyph_set)
{
    current_glyph_set = hb_set_create();
    done_lookups_glyph_set->set(indexlookup, current_glyph_set);
}

if (hb_set_is_subset(parent_active_glyphs(), current_glyph_set))
    return true;

done_lookups_glyph_count->set(indexlookup, parent_active_glyphs()->length);