if (indexlookup >= done_lookups_glyph_count->size() || 
    indexlookup >= done_lookups_glyph_set->size()) {
    return false; // Invalid index
}

if (done_lookups_glyph_count->at(indexlookup) > 0) {
    return true; // Already processed
}

done_lookups_glyph_count->at(indexlookup) = 1; // Mark as processed
done_lookups_glyph_set->at(indexlookup).clear(); // Clear the glyph set
done_lookups_glyph_set->at(indexlookup) = obtain_glyph_set(indexlookup); // Initialize with the new glyph set

if (hb_set_is_subset(parent_active_glyphs(), done_lookups_glyph_set->at(indexlookup))) {
    return true; // Parent active glyphs are a subset
}