if (!hb_set_has (done_lookups_glyph_set->get (indexlookup), HB_SET_VALUE_INVALID_GLYPH))
    {
      unsigned int glyph_count = done_lookups_glyph_count->get (indexlookup);
      if (glyph_count == 0)
      {
        done_lookups_glyph_count->set (indexlookup, 1);
        done_lookups_glyph_set->set (indexlookup, hb_set_create ());
        hb_set_clear (done_lookups_glyph_set->get (indexlookup));
      }

      hb_set_t *glyph_set = done_lookups_glyph_set->get (indexlookup);
      if (hb_set_is_subset (parent_active_glyphs (), glyph_set))
        return true;
    }
    else
    {
      done_lookups_glyph_count->set (indexlookup, 1);
      done_lookups_glyph_set->set (indexlookup, hb_set_create ());
      hb_set_clear (done_lookups_glyph_set->get (indexlookup));

      hb_set_t *glyph_set = done_lookups_glyph_set->get (indexlookup);
      if (hb_set_is_subset (parent_active_glyphs (), glyph_set))
        return true;
    }