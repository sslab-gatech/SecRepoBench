if (!done_lookups_glyph_count->has_key (indexlookup) || !done_lookups_glyph_set->has_key (indexlookup))
{
  // The glyph count or glyph set for the given lookup index has not been initialized yet
  done_lookups_glyph_count->set (indexlookup, 0);
  done_lookups_glyph_set->set (indexlookup, hb_set_create ());
}

hb_set_t* lookup_glyph_set = done_lookups_glyph_set->get (indexlookup);
if (hb_set_is_subset (parent_active_glyphs (), lookup_glyph_set))
{
  // The parent active glyphs are a subset of the glyph set for the given lookup index,
  // so the lookup is done
  return true;
}

// The lookup is not done yet, so update the glyph count and glyph set
done_lookups_glyph_count->set (indexlookup, done_lookups_glyph_count->get (indexlookup) + 1);
hb_set_union (lookup_glyph_set, parent_active_glyphs ());