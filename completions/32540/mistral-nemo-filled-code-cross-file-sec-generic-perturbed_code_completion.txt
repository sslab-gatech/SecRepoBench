if (done_lookups_glyph_count->get (indexlookup, &glyph_count) ||
    done_lookups_glyph_set->get (indexlookup, &glyph_set) ||
    !glyph_set) {
  return false;
}

if (glyph_count == 0) {
  glyph_count = parent_active_glyphs ()->size ();
  glyph_set->clear ();
  glyph_set->add (parent_active_glyphs ());
}

hb_set_t* lookup_glyph_set = glyph_set->get (indexlookup);
if (!lookup_glyph_set) {
  return false;
}

return hb_set_is_subset (lookup_glyph_set, parent_active_glyphs ());