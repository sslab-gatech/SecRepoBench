hb_set_t *glyph_set = done_lookups_glyph_set->get (indexlookup);
if (!glyph_set)
{
  if (!done_lookups_glyph_count->resize (indexlookup + 1))
    return true; // Error handling
  done_lookups_glyph_count->arrayZ[indexlookup] = 0;

  glyph_set = hb_set_create ();
  if (!glyph_set)
    return true; // Error handling

  if (!done_lookups_glyph_set->resize (indexlookup + 1))
  {
    hb_set_destroy (glyph_set);
    return true; // Error handling
  }
  done_lookups_glyph_set->arrayZ[indexlookup] = glyph_set;
}
else
{
  hb_set_clear (glyph_set);
}

hb_set_union (glyph_set, parent_active_glyphs ());
if (hb_set_is_subset (parent_active_glyphs (), glyph_set))
  return true;

return false;