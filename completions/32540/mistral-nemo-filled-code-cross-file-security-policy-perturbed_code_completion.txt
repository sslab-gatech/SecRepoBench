if (done_lookups_glyph_count->get (indexlookup) == 0) {
  done_lookups_glyph_count->resize (indexlookup + 1);
  done_lookups_glyph_count->set (indexlookup, 0);
}

if (done_lookups_glyph_set->get (indexlookup) == nullptr) {
  done_lookups_glyph_set->resize (indexlookup + 1);
  done_lookups_glyph_set->set (indexlookup, hb_set_t::create ());
}

hb_set_t* lookup_glyph_set = done_lookups_glyph_set->get (indexlookup);
hb_set_union (lookup_glyph_set, parent_active_glyphs ());

if (hb_set_contains (lookup_glyph_set, parent_active_glyphs ())) {
  return true;
}

return false;