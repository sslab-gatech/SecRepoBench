if (indexlookup >= done_lookups_glyph_count->length)
{
  if (!done_lookups_glyph_count->resize(indexlookup + 1) ||
      !done_lookups_glyph_set->resize(indexlookup + 1))
    return true;
}

unsigned int current_count = hb_set_get_population(parent_active_glyphs());

// If the glyph count hasn’t changed, check if the parent active glyphs are already covered.
if (done_lookups_glyph_count->array[indexlookup] == current_count)
{
  hb_set_t* lookup_set = done_lookups_glyph_set->array[indexlookup];
  if (lookup_set && hb_set_is_subset(parent_active_glyphs(), lookup_set))
    return true;
}

// Update the glyph count for this lookup index.
done_lookups_glyph_count->array[indexlookup] = current_count;

// Ensure the glyph set for this lookup index is initialized.
hb_set_t* lookup_set = done_lookups_glyph_set->array[indexlookup];
if (!lookup_set)
{
  lookup_set = hb_set_create();
  done_lookups_glyph_set->array[indexlookup] = lookup_set;
}
else
{
  hb_set_clear(lookup_set);
}

// Incorporate the current parent active glyphs into the lookup’s glyph set.
hb_set_union(lookup_set, parent_active_glyphs());