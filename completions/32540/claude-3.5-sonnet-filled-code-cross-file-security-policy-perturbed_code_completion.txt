if (indexlookup >= done_lookups_glyph_count->length)
{
  if (!done_lookups_glyph_count->resize(indexlookup + 1))
    return true;
}

if ((*done_lookups_glyph_count)[indexlookup] != glyphs->get_population())
{
  (*done_lookups_glyph_count)[indexlookup] = glyphs->get_population();

  if (indexlookup >= done_lookups_glyph_set->length)
  {
    if (!done_lookups_glyph_set->resize(indexlookup + 1))
      return true;
  }

  if (!(*done_lookups_glyph_set)[indexlookup])
  {
    (*done_lookups_glyph_set)[indexlookup] = hb_set_create();
    if (!(*done_lookups_glyph_set)[indexlookup])
      return true;
  }
  else
  {
    hb_set_clear((*done_lookups_glyph_set)[indexlookup]);
  }

  hb_set_t* lookup_glyph_set = (*done_lookups_glyph_set)[indexlookup];
  hb_set_t* parent_glyphs = parent_active_glyphs();

  if (hb_set_is_subset(parent_glyphs, lookup_glyph_set))
    return true;
}