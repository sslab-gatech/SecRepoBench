if (done_lookups_glyph_set->has (indexlookup)) {
  return true;
}

unsigned int glyph_count = 0;
if (!done_lookups_glyph_count->get (indexlookup, glyph_count)) {
  glyph_count = 0;
}

if (glyph_count == 0) {
  done_lookups_glyph_count->set (indexlookup, 1);
  if (!done_lookups_glyph_set->resize (indexlookup + 1)) {
    return false;
  }
  done_lookups_glyph_set->clear (indexlookup);
}

hb_set_t *glyph_set = done_lookups_glyph_set->get (indexlookup);
if (!glyph_set) {
  return false;
}

if (hb_set_is_subset (parent_active_glyphs (), glyph_set)) {
  return true;
}