if (done_lookups_glyph_count->in_error () ||
    done_lookups_glyph_set->in_error ())
  return true;

if (done_lookups_glyph_count->get (indexlookup) == 0) {
  done_lookups_glyph_count->set (indexlookup, 1);
  if (!done_lookups_glyph_set->in_error ()) {
    if (!done_lookups_glyph_set->is_initialized (indexlookup)) {
      done_lookups_glyph_set->init (indexlookup);
    }
    done_lookups_glyph_set->clear (indexlookup);
    done_lookups_glyph_set->add (indexlookup, parent_active_glyphs ());
  }
}

hb_set_union (covered_glyph_set, parent_active_glyphs ());
return done_lookups_glyph_set->is_subset (indexlookup, covered_glyph_set);