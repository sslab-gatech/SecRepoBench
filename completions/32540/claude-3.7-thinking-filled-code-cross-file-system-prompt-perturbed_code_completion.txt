if (indexlookup >= done_lookups_glyph_count->get_population ())
{
  if (!done_lookups_glyph_count->resize (indexlookup + 1))
    return true;
}

if (done_lookups_glyph_count->get (indexlookup) != glyphs->get_population ())
{
  done_lookups_glyph_count->set (indexlookup, glyphs->get_population ());

  if (indexlookup >= done_lookups_glyph_set->get_population ())
  {
    if (!done_lookups_glyph_set->resize (indexlookup + 1))
      return true;
  }

  hb_set_t *covered_glyph_set = done_lookups_glyph_set->get (indexlookup);
  if (unlikely (!covered_glyph_set))
    return true;

  covered_glyph_set->clear ();
}

hb_set_t *covered_glyph_set = done_lookups_glyph_set->get (indexlookup);
if (hb_set_is_subset (parent_active_glyphs (), covered_glyph_set))
  return true;