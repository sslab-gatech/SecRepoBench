unsigned current_glyph_count = parent_active_glyphs()->get_population();

if (done_lookups_glyph_count->has (indexlookup) &&
    done_lookups_glyph_count->get (indexlookup) >= current_glyph_count)
{
  if (!done_lookups_glyph_set->has (indexlookup))
  {
    covered_glyph_set = hb_set_create ();
    done_lookups_glyph_set->set (indexlookup, covered_glyph_set);
  }
  else
  {
    covered_glyph_set = done_lookups_glyph_set->get (indexlookup);
  }

  if (hb_set_is_subset (parent_active_glyphs (), covered_glyph_set))
    return true;
}

done_lookups_glyph_count->set (indexlookup, current_glyph_count);

if (!done_lookups_glyph_set->has (indexlookup))
{
  covered_glyph_set = hb_set_create ();
  done_lookups_glyph_set->set (indexlookup, covered_glyph_set);
}
else
{
  covered_glyph_set = done_lookups_glyph_set->get (indexlookup);
  hb_set_clear (covered_glyph_set);
}