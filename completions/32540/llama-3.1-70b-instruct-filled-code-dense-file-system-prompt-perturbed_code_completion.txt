unsigned int lookup_index = indexlookup;
if (is_lookup_visited (lookup_index))
  return true;

if (done_lookups_glyph_count->has (lookup_index)) {
  if (done_lookups_glyph_set->has (lookup_index)) {
    hb_set_t *glyph_set = done_lookups_glyph_set->get (lookup_index);
    if (hb_set_is_subset (parent_active_glyphs (), glyph_set))
      return true;
  }
} else {
  done_lookups_glyph_count->add (lookup_index);
  done_lookups_glyph_set->add (lookup_index);
  hb_set_t *glyph_set = done_lookups_glyph_set->get (lookup_index);
  glyph_set->clear ();
  // Assuming get_glyph_set is a function that returns the glyph set associated with the lookup index
  hb_set_t *lookup_glyph_set = get_glyph_set (lookup_index);
  glyph_set->union_ (lookup_glyph_set);
}