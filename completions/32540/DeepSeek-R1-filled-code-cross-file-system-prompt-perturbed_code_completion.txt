if (indexlookup >= done_lookups_glyph_count->length)
{
  if (!done_lookups_glyph_count->resize (indexlookup + 1))
    return true;
}

unsigned int &count = done_lookups_glyph_count->arrayZ[indexlookup];
if (count == 0)
{
  count = 1;
  if (indexlookup >= done_lookups_glyph_set->length &&
      !done_lookups_glyph_set->resize (indexlookup + 1))
    return true;

  hb_set_t* &glyph_set = done_lookups_glyph_set->arrayZ[indexlookup];
  if (!glyph_set)
    glyph_set = hb_set_create ();
  hb_set_clear (glyph_set);
}

hb_set_t* lookup_glyph_set = done_lookups_glyph_set->arrayZ[indexlookup];
if (hb_set_is_subset (parent_active_glyphs (), lookup_glyph_set))
  return true;