unsigned old_count = done_lookups_glyph_count->get (indexlookup);
unsigned new_count = hb_set_get_population (parent_active_glyphs ());

if (old_count == new_count)
{
  hb_set_t *existing_set = done_lookups_glyph_set->get (indexlookup);
  if (existing_set && hb_set_is_subset (parent_active_glyphs (), existing_set))
    return true;
}

done_lookups_glyph_count->set (indexlookup, new_count);

if (!done_lookups_glyph_set->ensure (indexlookup))
  return true;

hb_set_t *lookup_set = done_lookups_glyph_set->get (indexlookup);
hb_set_clear (lookup_set);
hb_set_union (lookup_set, parent_active_glyphs ());