unsigned int glyph_count = done_lookups_glyph_count->get (indexlookup);
    if (!glyph_count)
    {
      done_lookups_glyph_count->set (indexlookup, hb_set_get_population (parent_active_glyphs ()));
      hb_set_t *set = done_lookups_glyph_set->get (indexlookup);
      if (!set)
      {
        set = hb_set_create ();
        if (unlikely (!set))
          return true;
        done_lookups_glyph_set->set (indexlookup, set);
      }
      else
        hb_set_clear (set);
      hb_set_add (set, HB_SET_ALL);
    }

    hb_set_t *set = done_lookups_glyph_set->get (indexlookup);
    if (unlikely (!set))
      return true;

    if (hb_set_is_subset (parent_active_glyphs (), set))
      return true;