if (done_lookups_glyph_count->get (indexlookup) == glyphs->get_population ())
{
  hb_set_t *covered_glyph_set = done_lookups_glyph_set->get (indexlookup);
  if (unlikely (!covered_glyph_set))
  {
    covered_glyph_set = hb_set_create ();
    if (unlikely (!covered_glyph_set))
      return true;
    if (!done_lookups_glyph_set->set (indexlookup, covered_glyph_set))
    {
      hb_set_destroy (covered_glyph_set);
      return true;
    }
  }

  if (hb_set_is_subset (parent_active_glyphs (), covered_glyph_set))
    return true;
}
else
{
  done_lookups_glyph_count->set (indexlookup, glyphs->get_population ());
  hb_set_t *covered_glyph_set = done_lookups_glyph_set->get (indexlookup);
  if (unlikely (!covered_glyph_set))
  {
    covered_glyph_set = hb_set_create ();
    if (unlikely (!covered_glyph_set))
      return true;
    if (!done_lookups_glyph_set->set (indexlookup, covered_glyph_set))
    {
      hb_set_destroy (covered_glyph_set);
      return true;
    }
  }
  else
    hb_set_clear (covered_glyph_set);
}

hb_set_t *covered_glyph_set = done_lookups_glyph_set->get (indexlookup);