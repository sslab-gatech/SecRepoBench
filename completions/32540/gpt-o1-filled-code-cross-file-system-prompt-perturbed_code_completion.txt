unsigned int processed_count = done_lookups_glyph_count->get (indexlookup);
if (!processed_count)
{
  done_lookups_glyph_count->set (indexlookup, 1);
  if (!done_lookups_glyph_set->ensure (indexlookup + 1))
    return true;
  hb_set_t *glyph_set = done_lookups_glyph_set->get (indexlookup);
  if (glyph_set)
    hb_set_clear (glyph_set);
}

hb_set_t *glyph_set = done_lookups_glyph_set->get (indexlookup);
if (glyph_set && hb_set_is_subset (parent_active_glyphs (), glyph_set))
  return true;