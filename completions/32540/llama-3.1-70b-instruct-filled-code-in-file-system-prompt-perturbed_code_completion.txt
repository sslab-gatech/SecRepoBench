// Check if the current set of glyphs for the given lookup index has already been processed.
// If not, update the glyph count for this lookup index and ensure the glyph set is initialized
// and cleared as needed. Then, obtain the glyph set associated with the lookup index.
// Determine if the parent active glyphs are a subset of the obtained glyph set.
// If they are a subset, return true to indicate the lookup is done; otherwise, return false.
if (done_lookups_glyph_count->has (indexlookup) &&
    done_lookups_glyph_set->has (indexlookup))
{
  const hb_set_t *glyph_set = done_lookups_glyph_set->get (indexlookup);
  return hb_set_is_subset (parent_active_glyphs (), glyph_set);
}

// Update the glyph count for this lookup index.
done_lookups_glyph_count->set (indexlookup, glyphs->get_population ());

// Ensure the glyph set is initialized and cleared as needed.
hb_set_t *glyph_set = done_lookups_glyph_set->get (indexlookup);
if (!glyph_set)
{
  glyph_set = hb_set_create ();
  done_lookups_glyph_set->set (indexlookup, glyph_set);
}
else
{
  hb_set_clear (glyph_set);
}

// Obtain the glyph set associated with the lookup index.
hb_set_union (glyph_set, glyphs);

// Determine if the parent active glyphs are a subset of the obtained glyph set.
return hb_set_is_subset (parent_active_glyphs (), glyph_set);