switch (content->type) {
        case XML_ELEMENT_CONTENT_PCDATA:
            strcat(buf, "#PCDATA");
            break;
        case XML_ELEMENT_CONTENT_ELEMENT:
            if ((content->prefix != NULL) && (content->name != NULL)) {
                int len_before = strlen(buf);
                strcat(buf, (char *) content->prefix);
                strcat(buf, ":");
                strcat(buf, (char *) content->name);
                if (strlen(buf) > capacity) {
                    buf[len_before] = 0;
                    strcat(buf, " ...");
                    return;
                }

            } else if (content->name != NULL) {
                strcat(buf, (char *) content->name);
            }
            break;
        case XML_ELEMENT_CONTENT_SEQ:
            xmlSnprintfElementContent(buf, capacity, content->c1, 1);
            strcat(buf, ", ");
            xmlSnprintfElementContent(buf, capacity, content->c2, 1);
            break;
        case XML_ELEMENT_CONTENT_OR:
            xmlSnprintfElementContent(buf, capacity, content->c1, 1);
            strcat(buf, " | ");
            xmlSnprintfElementContent(buf, capacity, content->c2, 1);
            break;
        default:
            strcat(buf, "?");
            break;
    }