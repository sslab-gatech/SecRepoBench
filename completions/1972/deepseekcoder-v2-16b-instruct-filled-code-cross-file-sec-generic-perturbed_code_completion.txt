switch (content->type) {
        case XML_ELEMENT_CONTENT_PCDATA:
            strcat(buf, "#PCDATA");
            break;
        case XML_ELEMENT_CONTENT_ELEMENT:
            if (content->name != NULL) {
                if (content->ns != NULL && content->ns->prefix != NULL) {
                    char prefix[50];
                    xmlChar *fullname = xmlBuildQName(content->name, content->ns->prefix, prefix, 50);
                    if (fullname != NULL) {
                        strcat(buf, fullname);
                        xmlFree(fullname);
                    }
                } else {
                    strcat(buf, content->name);
                }
            }
            break;
        case XML_ELEMENT_CONTENT_SEQ:
            if (englob) strcat(buf, "(");
            xmlElementContentPtr subcontent = content->subContent;
            while (subcontent != NULL) {
                xmlSnprintfElementContent(buf, capacity - len, subcontent, 1);
                subcontent = subcontent->next;
                if (subcontent != NULL) {
                    strcat(buf, ",");
                }
            }
            if (englob) strcat(buf, ")");
            break;
        case XML_ELEMENT_CONTENT_OR:
            if (englob) strcat(buf, "(");
            xmlElementContentPtr subcontent = content->subContent;
            while (subcontent != NULL) {
                xmlSnprintfElementContent(buf, capacity - len, subcontent, 1);
                subcontent = subcontent->next;
                if (subcontent != NULL) {
                    strcat(buf, "|");
                }
            }
            if (englob) strcat(buf, ")");
            break;
    }