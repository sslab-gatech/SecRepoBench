switch (content->type) {
    case XML_ELEMENT_CONTENT_PCDATA:
        strcat(buf, "#PCDATA");
        break;
    case XML_ELEMENT_CONTENT_ELEMENT:
        if (content->prefix != NULL && content->prefix[0] != 0) {
            strcat(buf, (char *)content->prefix);
            strcat(buf, ":");
        }
        strcat(buf, (char *)content->name);
        break;
    case XML_ELEMENT_CONTENT_SEQ:
        if (content->c1 != NULL) {
            xmlSnprintfElementContent(buf, capacity, content->c1, 
                (content->c1->type == XML_ELEMENT_CONTENT_OR) ||
                (content->c1->type == XML_ELEMENT_CONTENT_SEQ));
        }
        len = strlen(buf);
        if (capacity - len < 50) {
            if ((capacity - len > 4) && (buf[len - 1] != '.'))
                strcat(buf, " ...");
            return;
        }
        if (content->c2 != NULL) {
            strcat(buf, ", ");
            xmlSnprintfElementContent(buf, capacity, content->c2, 
                (content->c2->type == XML_ELEMENT_CONTENT_OR) ||
                (content->c2->type == XML_ELEMENT_CONTENT_SEQ));
        }
        break;
    case XML_ELEMENT_CONTENT_OR:
        if (content->c1 != NULL) {
            xmlSnprintfElementContent(buf, capacity, content->c1, 
                (content->c1->type == XML_ELEMENT_CONTENT_OR) ||
                (content->c1->type == XML_ELEMENT_CONTENT_SEQ));
        }
        len = strlen(buf);
        if (capacity - len < 50) {
            if ((capacity - len > 4) && (buf[len - 1] != '.'))
                strcat(buf, " ...");
            return;
        }
        if (content->c2 != NULL) {
            strcat(buf, " | ");
            xmlSnprintfElementContent(buf, capacity, content->c2, 
                (content->c2->type == XML_ELEMENT_CONTENT_OR) ||
                (content->c2->type == XML_ELEMENT_CONTENT_SEQ));
        }
        break;
}