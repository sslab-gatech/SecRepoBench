switch (content->type) {
       case XML_ELEMENT_CONTENT_PCDATA:
       {
           const char *pcdata = "#PCDATA";
           int current = strlen(buf);
           if (capacity - current > (int)strlen(pcdata))
               strcat(buf, pcdata);
           else if (capacity - current > 4)
               strcat(buf, " ...");
       }
       break;
       case XML_ELEMENT_CONTENT_ELEMENT:
       {
           char qname[128];
           int current = strlen(buf);
           if (content->name != NULL) {
               if (content->prefix != NULL)
                   snprintf(qname, sizeof(qname), "%s:%s", content->prefix, content->name);
               else
                   snprintf(qname, sizeof(qname), "%s", content->name);
               if (capacity - current > (int)strlen(qname))
                   strcat(buf, qname);
               else if (capacity - current > 4)
                   strcat(buf, " ...");
           }
       }
       break;
       case XML_ELEMENT_CONTENT_SEQ:
       {
           if (content->c1 != NULL)
               xmlSnprintfElementContent(buf, capacity, content->c1, 1);
           int current = strlen(buf);
           if (content->c2 != NULL) {
               if (capacity - current > 1)
                   strcat(buf, ",");
               xmlSnprintfElementContent(buf, capacity, content->c2, 1);
           }
       }
       break;
       case XML_ELEMENT_CONTENT_OR:
       {
           if (content->c1 != NULL)
               xmlSnprintfElementContent(buf, capacity, content->c1, 1);
           int current = strlen(buf);
           if (content->c2 != NULL) {
               if (capacity - current > 1)
                   strcat(buf, "|");
               xmlSnprintfElementContent(buf, capacity, content->c2, 1);
           }
       }
       break;
       default:
           break;
   }