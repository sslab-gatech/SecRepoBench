if (content->ocur == XML_ELEMENT_CONTENT_PCDATA) {
        if (capacity - len < 10) {
            strcat(buf, " ...");
            return;
        }
        strcat(buf, "#PCDATA");
    } else if (content->ocur == XML_ELEMENT_CONTENT_ELEMENT) {
        if (capacity - len < strlen(content->name) + 10) {
            strcat(buf, " ...");
            return;
        }
        strcat(buf, content->name);
    } else if (content->ocur == XML_ELEMENT_CONTENT_SEQ) {
        xmlElementContentPtr first = content->children;
        xmlElementContentPtr second = first ? first->next : NULL;

        if (first) {
            xmlSnprintfElementContent(buf, capacity, first, 0);
            if (second) {
                if (capacity - len < 2) {
                    strcat(buf, " ...");
                    return;
                }
                strcat(buf, ", ");
                xmlSnprintfElementContent(buf, capacity, second, 0);
            }
        }
    } else if (content->ocur == XML_ELEMENT_CONTENT_OR) {
        xmlElementContentPtr first = content->children;
        xmlElementContentPtr second = first ? first->next : NULL;

        if (first) {
            xmlSnprintfElementContent(buf, capacity, first, 0);
            if (second) {
                if (capacity - len < 2) {
                    strcat(buf, " ...");
                    return;
                }
                strcat(buf, " | ");
                xmlSnprintfElementContent(buf, capacity, second, 0);
            }
        }
    }