switch (content->type) {
    case XML_ELEMENT_CONTENT_PCDATA:
        strcat(buf, "#PCDATA");
        break;
    case XML_ELEMENT_CONTENT_ELEMENT:
        if (content->prefix != NULL) {
            strcat(buf, (char *) content->prefix);
            strcat(buf, ":");
        }
        strcat(buf, (char *) content->name);
        break;
    case XML_ELEMENT_CONTENT_SEQ:
        if ((content->c1 == NULL) && (content->c2 == NULL))
            strcat(buf, "EMPTY");
        else if (content->c1 != NULL) {
            int tmp = strlen(buf);
            xmlSnprintfElementContent(buf, capacity, content->c1, 
                ((content->c1->type == XML_ELEMENT_CONTENT_SEQ) ||
                 (content->c1->type == XML_ELEMENT_CONTENT_OR)));
            if (content->c2 != NULL) {
                if (strlen(buf) > tmp) strcat(buf, ", ");
                xmlSnprintfElementContent(buf, capacity, content->c2, 
                    ((content->c2->type == XML_ELEMENT_CONTENT_SEQ) ||
                    (content->c2->type == XML_ELEMENT_CONTENT_OR)));
            }
        }
        break;
    case XML_ELEMENT_CONTENT_OR:
        if ((content->c1 == NULL) && (content->c2 == NULL))
            strcat(buf, "EMPTY");
        else if (content->c1 != NULL) {
            int tmp = strlen(buf);
            xmlSnprintfElementContent(buf, capacity, content->c1, 
                ((content->c1->type == XML_ELEMENT_CONTENT_SEQ) ||
                 (content->c1->type == XML_ELEMENT_CONTENT_OR)));
            if (content->c2 != NULL) {
                if (strlen(buf) > tmp) strcat(buf, " | ");
                xmlSnprintfElementContent(buf, capacity, content->c2, 
                    ((content->c2->type == XML_ELEMENT_CONTENT_SEQ) ||
                    (content->c2->type == XML_ELEMENT_CONTENT_OR)));
            }
        }
        break;
}