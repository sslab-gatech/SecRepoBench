// <MASK>
if (content->type == XML_ELEMENT_CONTENT_PCDATA) {
    len = strlen(buf);
    if (capacity - len >= 7) {
        strcat(buf, "#PCDATA");
    } else if (capacity - len > 4) {
        strcat(buf, " ...");
    }
} else if (content->type == XML_ELEMENT_CONTENT_ELEMENT) {
    if (content->name != NULL) {
        len = strlen(buf);
        if (capacity - len >= strlen(content->name) + 1) {
            if (content->prefix != NULL) {
                char tmp[50];
                snprintf(tmp, sizeof(tmp), "%s:%s", content->prefix, content->name);
                strcat(buf, tmp);
            } else {
                strcat(buf, content->name);
            }
        } else if (capacity - len > 4) {
            strcat(buf, " ...");
        }
    }
} else if (content->type == XML_ELEMENT_CONTENT_SEQ) {
    xmlSnprintfElementContent(buf, capacity, content->c1, 1);
    strcat(buf, ",");
    xmlSnprintfElementContent(buf, capacity, content->c2, 1);
} else if (content->type == XML_ELEMENT_CONTENT_OR) {
    xmlSnprintfElementContent(buf, capacity, content->c1, 1);
    strcat(buf, "|");
    xmlSnprintfElementContent(buf, capacity, content->c2, 1);
} else {
    len = strlen(buf);
    if (capacity - len > 4) {
        strcat(buf, " ...");
    }
}