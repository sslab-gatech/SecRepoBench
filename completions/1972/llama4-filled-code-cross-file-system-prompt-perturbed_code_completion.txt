switch (content->type) {
    case XML_ELEMENT_CONTENT_PCDATA:
        if (englob) strcat(buf, "#PCDATA");
        break;
    case XML_ELEMENT_CONTENT_ELEMENT:
        {
            xmlChar *name;
            if (content->name != NULL) {
                if (content->ns != NULL) {
                    xmlChar fn[50];
                    name = xmlBuildQName(content->name, content->ns->prefix, fn, 50);
                    if (name == NULL) {
                        // Handle memory allocation error
                    } else {
                        strcat(buf, (const char *)name);
                        if (name != fn)
                            xmlFree(name);
                    }
                } else {
                    strcat(buf, (const char *)content->name);
                }
            }
        }
        break;
    case XML_ELEMENT_CONTENT_SEQ:
    case XML_ELEMENT_CONTENT_OR:
        if (content->children != NULL) {
            int need_comma = 0;
            xmlElementContentPtr child = content->children;
            while (child != NULL) {
                if (need_comma) {
                    if (content->type == XML_ELEMENT_CONTENT_SEQ)
                        strcat(buf, ",");
                    else if (content->type == XML_ELEMENT_CONTENT_OR)
                        strcat(buf, "|");
                }
                xmlSnprintfElementContent(buf, capacity, child, 1);
                need_comma = 1;
                child = child->next;
                if (capacity - strlen(buf) < 50) {
                    if ((capacity - strlen(buf) > 4) && (buf[strlen(buf) - 1] != '.'))
                        strcat(buf, " ...");
                    break;
                }
            }
        }
        break;
}