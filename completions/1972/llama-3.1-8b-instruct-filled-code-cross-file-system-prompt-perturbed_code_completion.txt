if (content->ocur == XML_ELEMENT_CONTENT_ONCE) {
    if (content->type == XML_ELEMENT_CONTENT_PCDATA) {
        strcat(buf, "#PCDATA");
    } else if (content->type == XML_ELEMENT_CONTENT_ELEMENT) {
        if (content->elem->ns!= NULL && content->elem->ns->prefix!= NULL) {
            xmlChar fn[50];
            xmlChar *fullname = xmlBuildQName(content->elem->name,
                                             content->elem->ns->prefix, fn, 50);
            if (fullname!= NULL) {
                strcat(buf, fullname);
                xmlFree(fullname);
            } else {
                strcat(buf, content->elem->name);
            }
        } else {
            strcat(buf, content->elem->name);
        }
    } else if (content->type == XML_ELEMENT_CONTENT_SEQ) {
        xmlElementContentPtr seq = content->seq;
        if (seq->elem!= NULL) {
            xmlSnprintfElementContent(buf, capacity, seq->elem, 0);
            if (seq->next!= NULL) {
                strcat(buf, ",");
            }
        }
    } else if (content->type == XML_ELEMENT_CONTENT_OR) {
        xmlElementContentPtr or = content->or;
        if (or->elem!= NULL) {
            xmlSnprintfElementContent(buf, capacity, or->elem, 0);
            if (or->next!= NULL) {
                strcat(buf, "|");
            }
        }
    }
} else if (content->ocur == XML_ELEMENT_CONTENT_OPT) {
    xmlSnprintfElementContent(buf, capacity, content->opt, 0);
    strcat(buf, "?");
} else if (content->ocur == XML_ELEMENT_CONTENT_MULT) {
    xmlSnprintfElementContent(buf, capacity, content->mult, 0);
    strcat(buf, "*");
} else if (content->ocur == XML_ELEMENT_CONTENT_PLUS) {
    xmlSnprintfElementContent(buf, capacity, content->plus, 0);
    strcat(buf, "+");
}