switch (content->type) {
        case XML_ELEMENT_CONTENT_PCDATA:
            if (capacity - len > 8) {
                strcat(buf, "#PCDATA");
            } else {
                strcat(buf, " ...");
                return;
            }
            break;
        case XML_ELEMENT_CONTENT_ELEMENT:
            if (content->prefix != NULL) {
                if (capacity - len > (int)(strlen((const char *)content->prefix) + strlen((const char *)content->name) + 2)) {
                    strcat(buf, (const char *)content->prefix);
                    strcat(buf, ":");
                    strcat(buf, (const char *)content->name);
                } else {
                    strcat(buf, " ...");
                    return;
                }
            } else {
                if (capacity - len > (int)strlen((const char *)content->name)) {
                    strcat(buf, (const char *)content->name);
                } else {
                    strcat(buf, " ...");
                    return;
                }
            }
            break;
        case XML_ELEMENT_CONTENT_SEQ:
        case XML_ELEMENT_CONTENT_OR:
            if (content->c1 != NULL) {
                xmlSnprintfElementContent(buf, capacity, content->c1, 1);
            }
            if (capacity - strlen(buf) < 3) {
                strcat(buf, " ...");
                return;
            }
            strcat(buf, (content->type == XML_ELEMENT_CONTENT_SEQ) ? "," : "|");
            if (content->c2 != NULL) {
                xmlSnprintfElementContent(buf, capacity, content->c2, 1);
            }
            break;
        default:
            break;
    }