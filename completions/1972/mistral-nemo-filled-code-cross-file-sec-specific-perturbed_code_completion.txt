switch (content->type) {
        case XML_ELEMENT_CONTENT_PCDATA:
            strcat(buf, "#PCDATA");
            break;
        case XML_ELEMENT_CONTENT_ELEMENT:
            if (content->name != NULL) {
                if (content->ns != NULL && content->ns->prefix != NULL) {
                    xmlChar fn[50];
                    xmlChar *fullname;

                    fullname = xmlBuildQName(content->name, content->ns->prefix, fn, 50);
                    if (fullname == NULL) {
                        ret = -1;
                        goto fail;
                    }
                    strcat(buf, fullname);
                    if ((fullname != fn) && (fullname != content->name))
                        xmlFree(fullname);
                } else {
                    strcat(buf, (const char *)content->name);
                }
            }
            break;
        case XML_ELEMENT_CONTENT_SEQ:
            if (content->c1 != NULL) {
                xmlSnprintfElementContent(buf, capacity - len, content->c1, 0);
                strcat(buf, ",");
            }
            if (content->c2 != NULL) {
                xmlSnprintfElementContent(buf, capacity - len, content->c2, 0);
            }
            break;
        case XML_ELEMENT_CONTENT_OR:
            if (content->c1 != NULL) {
                xmlSnprintfElementContent(buf, capacity - len, content->c1, 0);
                strcat(buf, "|");
            }
            if (content->c2 != NULL) {
                xmlSnprintfElementContent(buf, capacity - len, content->c2, 0);
            }
            break;
        default:
            break;
    }