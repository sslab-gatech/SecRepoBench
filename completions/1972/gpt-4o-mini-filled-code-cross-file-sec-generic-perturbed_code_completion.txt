switch (content->type) {
        case XML_ELEMENT_CONTENT_PCDATA:
            if (capacity - len < 10) {
                strcat(buf, " ...");
                return;
            }
            strcat(buf, "#PCDATA");
            break;
        case XML_ELEMENT_CONTENT_ELEMENT:
            if (capacity - len < 10) {
                strcat(buf, " ...");
                return;
            }
            if (content->name != NULL) {
                strcat(buf, (const char *)content->name);
            }
            break;
        case XML_ELEMENT_CONTENT_SEQ:
            if (englob) strcat(buf, "(");
            for (xmlElementContentPtr child = content->children; child != NULL; child = child->next) {
                xmlSnprintfElementContent(buf, capacity, child, 0);
                if (child->next != NULL) {
                    strcat(buf, ", ");
                }
            }
            if (englob) strcat(buf, ")");
            break;
        case XML_ELEMENT_CONTENT_OR:
            if (englob) strcat(buf, "(");
            for (xmlElementContentPtr child = content->children; child != NULL; child = child->next) {
                xmlSnprintfElementContent(buf, capacity, child, 0);
                if (child->next != NULL) {
                    strcat(buf, " | ");
                }
            }
            if (englob) strcat(buf, ")");
            break;
    }