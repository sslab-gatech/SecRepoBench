switch (content->type) {
    case XML_ELEMENT_CONTENT_PCDATA: {
        len = strlen(buf);
        if (capacity - len < 8) {
            if ((capacity - len > 4) && (buf[len - 1] != '.'))
                strcat(buf, " ...");
            return;
        }
        strcat(buf, "#PCDATA");
        break;
    }
    case XML_ELEMENT_CONTENT_ELEMENT: {
        if (content->prefix != NULL) {
            len = strlen(buf);
            if (capacity - len < (int)strlen((const char *)content->prefix) + 2) {
                if ((capacity - len > 4) && (buf[len - 1] != '.'))
                    strcat(buf, " ...");
                return;
            }
            strcat(buf, (const char *)content->prefix);
            strcat(buf, ":");
        }
        if (content->name != NULL) {
            len = strlen(buf);
            if (capacity - len < (int)strlen((const char *)content->name) + 2) {
                if ((capacity - len > 4) && (buf[len - 1] != '.'))
                    strcat(buf, " ...");
                return;
            }
            strcat(buf, (const char *)content->name);
        }
        break;
    }
    case XML_ELEMENT_CONTENT_SEQ: {
        int paren = (content->c1->type == XML_ELEMENT_CONTENT_OR ||
                     content->c1->type == XML_ELEMENT_CONTENT_SEQ);
        xmlSnprintfElementContent(buf, capacity, content->c1, paren);
        len = strlen(buf);
        if (capacity - len < 5) {
            if ((capacity - len > 4) && (buf[len - 1] != '.'))
                strcat(buf, " ...");
            return;
        }
        strcat(buf, " , ");
        paren = (content->c2->type == XML_ELEMENT_CONTENT_OR ||
                ((content->c2->type == XML_ELEMENT_CONTENT_SEQ) &&
                 (content->c2->ocur != XML_ELEMENT_CONTENT_ONCE)));
        xmlSnprintfElementContent(buf, capacity, content->c2, paren);
        break;
    }
    case XML_ELEMENT_CONTENT_OR: {
        int paren = (content->c1->type == XML_ELEMENT_CONTENT_OR ||
                     content->c1->type == XML_ELEMENT_CONTENT_SEQ);
        xmlSnprintfElementContent(buf, capacity, content->c1, paren);
        len = strlen(buf);
        if (capacity - len < 5) {
            if ((capacity - len > 4) && (buf[len - 1] != '.'))
                strcat(buf, " ...");
            return;
        }
        strcat(buf, " | ");
        paren = ((content->c2->type == XML_ELEMENT_CONTENT_SEQ) ||
                ((content->c2->type == XML_ELEMENT_CONTENT_OR) &&
                 (content->c2->ocur != XML_ELEMENT_CONTENT_ONCE)));
        xmlSnprintfElementContent(buf, capacity, content->c2, paren);
        break;
    }
    default:
        /* Fallback or error handling if needed */
        break;
}