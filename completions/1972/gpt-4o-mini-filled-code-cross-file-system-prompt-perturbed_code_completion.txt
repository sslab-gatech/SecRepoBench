switch (content->type) {
        case XML_ELEMENT_CONTENT_PCDATA:
            if (capacity - len < 10) {
                strcat(buf, " ...");
                return;
            }
            strcat(buf, "#PCDATA");
            break;
        case XML_ELEMENT_CONTENT_ELEMENT:
            if (capacity - len < 10) {
                strcat(buf, " ...");
                return;
            }
            if (content->name != NULL) {
                strcat(buf, (const char *)content->name);
            }
            break;
        case XML_ELEMENT_CONTENT_SEQ:
            if (capacity - len < 10) {
                strcat(buf, " ...");
                return;
            }
            strcat(buf, "(");
            xmlSnprintfElementContent(buf, capacity, content->children, 0);
            strcat(buf, ", ");
            xmlSnprintfElementContent(buf, capacity, content->next, 0);
            strcat(buf, ")");
            break;
        case XML_ELEMENT_CONTENT_OR:
            if (capacity - len < 10) {
                strcat(buf, " ...");
                return;
            }
            strcat(buf, "(");
            xmlSnprintfElementContent(buf, capacity, content->children, 0);
            strcat(buf, " | ");
            xmlSnprintfElementContent(buf, capacity, content->next, 0);
            strcat(buf, ")");
            break;
    }