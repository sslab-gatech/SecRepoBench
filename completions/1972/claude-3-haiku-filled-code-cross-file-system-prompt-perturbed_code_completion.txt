if (content->type == XML_ELEMENT_CONTENT_ELEMENT) {
    if (content->name != NULL) {
        if (content->prefix != NULL) {
            char fullname[50];
            xmlChar *prefixedName = xmlBuildQName(content->name, content->prefix, fullname, 50);
            if (prefixedName != NULL) {
                strcat(buf, (const char *)prefixedName);
                if (prefixedName != fullname && prefixedName != content->name)
                    xmlFree(prefixedName);
            } else {
                strcat(buf, (const char *)content->name);
            }
        } else {
            strcat(buf, (const char *)content->name);
        }
    }
} else if (content->type == XML_ELEMENT_CONTENT_PCDATA) {
    strcat(buf, "#PCDATA");
} else if (content->type == XML_ELEMENT_CONTENT_SEQ) {
    xmlSnprintfElementContent(buf, capacity, content->c1, 1);
    strcat(buf, ", ");
    xmlSnprintfElementContent(buf, capacity, content->c2, 1);
} else if (content->type == XML_ELEMENT_CONTENT_OR) {
    xmlSnprintfElementContent(buf, capacity, content->c1, 1);
    strcat(buf, " | ");
    xmlSnprintfElementContent(buf, capacity, content->c2, 1);
}