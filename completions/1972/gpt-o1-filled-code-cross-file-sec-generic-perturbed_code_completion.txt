switch (content->type) {
        case XML_ELEMENT_CONTENT_PCDATA: {
            len = strlen(buf);
            if (capacity - len < 8) {
                if ((capacity - len > 4) && (buf[len - 1] != '.'))
                    strcat(buf, " ...");
                return;
            }
            strcat(buf, "#PCDATA");
            break;
        }
        case XML_ELEMENT_CONTENT_ELEMENT: {
            if (content->name) {
                len = strlen(buf);
                if (capacity - len < (int)strlen((const char *)content->name) + 8) {
                    if ((capacity - len > 4) && (buf[len - 1] != '.'))
                        strcat(buf, " ...");
                    return;
                }
                strcat(buf, (const char *)content->name);
            }
            break;
        }
        case XML_ELEMENT_CONTENT_SEQ:
        case XML_ELEMENT_CONTENT_OR: {
            int subEnglob1 = 0, subEnglob2 = 0;
            if (content->c1 && (content->c1->type == XML_ELEMENT_CONTENT_SEQ ||
                                content->c1->type == XML_ELEMENT_CONTENT_OR))
                subEnglob1 = 1;
            if (content->c2 && (content->c2->type == XML_ELEMENT_CONTENT_SEQ ||
                                content->c2->type == XML_ELEMENT_CONTENT_OR))
                subEnglob2 = 1;

            if (content->c1) {
                xmlSnprintfElementContent(buf, capacity, content->c1, subEnglob1);
            }

            len = strlen(buf);
            if (capacity - len < 8) {
                if ((capacity - len > 4) && (buf[len - 1] != '.'))
                    strcat(buf, " ...");
                return;
            }

            if (content->type == XML_ELEMENT_CONTENT_SEQ)
                strcat(buf, ",");
            else
                strcat(buf, "|");

            if (content->c2) {
                xmlSnprintfElementContent(buf, capacity, content->c2, subEnglob2);
            }
            break;
        }
        default:
            break;
    }