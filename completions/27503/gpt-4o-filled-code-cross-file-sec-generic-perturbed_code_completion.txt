switch (tag) {
            case ID_SCE: // Single Channel Element
                elementInstanceTag = BitBufferReadSmall(bits, 4);
                status = DecodeMono(p, bits, sampleBuffer, numSamples, channelIndex);
                RequireNoErr(status, goto Exit;);
                channelIndex++;
                break;

            case ID_CPE: // Channel Pair Element
                elementInstanceTag = BitBufferReadSmall(bits, 4);
                RequireAction(channelIndex + 1 < numChannels, status = kALAC_ParamError; goto Exit;);
                status = DecodeStereo(p, bits, sampleBuffer, numSamples, channelIndex);
                RequireNoErr(status, goto Exit;);
                channelIndex += 2;
                break;

            case ID_LFE: // Low-Frequency Effects
                elementInstanceTag = BitBufferReadSmall(bits, 4);
                status = DecodeMono(p, bits, sampleBuffer, numSamples, channelIndex);
                RequireNoErr(status, goto Exit;);
                channelIndex++;
                break;

            case ID_END: // End of Stream
                goto NoMoreChannels;

            default:
                // Unsupported element, skip it
                status = kALAC_ParamError;
                goto Exit;
        }

        // Align the bitstream to byte boundaries
        BitBufferByteAlign(bits, false);