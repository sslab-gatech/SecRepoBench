// Decode audio data from the bitstream based on the element type specified by the tag.
switch (tag)
{
    case ID_SCE:
        // Mono or low-frequency element
        // Read and process header parameters, handling both compressed and uncompressed frames
        status = DecodeMono(p, bits, sampleBuffer, channelIndex, numSamples, &bytesShifted);
        break;
    case ID_CPE:
        // Stereo channel pair
        // Ensure channel limit is not exceeded and process each channel separately, similar to mono elements
        status = DecodeStereo(p, bits, sampleBuffer, channelIndex, numSamples, &bytesShifted);
        break;
    case ID_LFE:
        // LFE channel (subwoofer)
        // Read and process header parameters, handling both compressed and uncompressed frames
        status = DecodeMono(p, bits, sampleBuffer, channelIndex, numSamples, &bytesShifted);
        break;
    default:
        // Unsupported element
        status = kALAC_UnsupportedElementType;
        goto NoMoreChannels;
}

// Align the bitstream to byte boundaries
BitBufferByteAlign(bits, false);

// Increment the channel index
channelIndex += (tag == ID_CPE) ? 2 : 1;

// Check if all channels have been processed
if (channelIndex >= numChannels)
    goto NoMoreChannels;