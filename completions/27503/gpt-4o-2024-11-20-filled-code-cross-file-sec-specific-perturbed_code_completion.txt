switch (tag)
        {
            case ID_SCE: // Single Channel Element
                elementInstanceTag = BitBufferReadSmall(bits, 4);
                RequireAction(channelIndex < numChannels, status = kALAC_ParamError; goto Exit;);

                status = dyn_decomp(&agParams, bits, sampleBuffer + channelIndex, numSamples, MAX_SAMPLE_VALUE, &extraBits);
                RequireNoErr(status, goto Exit;);

                channelIndex++;
                break;

            case ID_CPE: // Channel Pair Element
                elementInstanceTag = BitBufferReadSmall(bits, 4);
                RequireAction((channelIndex + 1) < numChannels, status = kALAC_ParamError; goto Exit;);

                status = dyn_decomp(&agParams, bits, sampleBuffer + channelIndex, numSamples, MAX_SAMPLE_VALUE, &extraBits);
                RequireNoErr(status, goto Exit;);

                status = dyn_decomp(&agParams, bits, sampleBuffer + channelIndex + 1, numSamples, MAX_SAMPLE_VALUE, &extraBits);
                RequireNoErr(status, goto Exit;);

                channelIndex += 2;
                break;

            case ID_LFE: // Low-Frequency Effects Channel
                elementInstanceTag = BitBufferReadSmall(bits, 4);
                RequireAction(channelIndex < numChannels, status = kALAC_ParamError; goto Exit;);

                status = dyn_decomp(&agParams, bits, sampleBuffer + channelIndex, numSamples, MAX_SAMPLE_VALUE, &extraBits);
                RequireNoErr(status, goto Exit;);

                channelIndex++;
                break;

            case ID_FIL: // Fill Element
                escapeFlag = BitBufferReadSmall(bits, 4);
                if (escapeFlag == 0)
                {
                    // Skip fill bytes
                    uint32_t fillBytes = BitBufferRead(bits, 8);
                    BitBufferAdvance(bits, fillBytes * 8);
                }
                else
                {
                    status = kALAC_UnsupportedElement;
                    goto Exit;
                }
                break;

            case ID_END: // End of Stream
                goto NoMoreChannels;

            default: // Unsupported Element
                status = kALAC_UnsupportedElement;
                goto Exit;
        }

        // Align bitstream to byte boundary
        BitBufferByteAlign(bits, false);