while (status == ALAC_noErr)
{
	// bail if we ran off the end of the buffer
	RequireAction (bits->cur < bits->end, status = kALAC_ParamError ; goto Exit ;) ;

	// copy global decode params for this element
	pb = p->mConfig.pb ;

	// read element tag
	tag = BitBufferReadSmall (bits, 3) ;

	switch (tag)
	{
		case 0:
			// mono or low-frequency element
			status = alac_fill_element (bits) ;
			break ;
		case 1:
			// stereo channel pair
			status = alac_data_stream_element (bits) ;
			break ;
		case 2:
			// compressed frame
			status = alac_data_stream_element (bits) ;
			break ;
		case 3:
			// partial frame
			status = alac_data_stream_element (bits) ;
			break ;
		case 4:
			// shifted value
			status = alac_data_stream_element (bits) ;
			break ;
		case 5:
			// unsupported element
			status = kALAC_UnsupportedElement ;
			break ;
		default:
			// unsupported element
			status = kALAC_UnsupportedElement ;
			break ;
	}

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamError)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_UnsupportedElement)
		goto NoMoreChannels ;

	// if we get here and haven't decoded all of the requested channels, fill the remaining channels with zeros
	if (status == kALAC_ParamErro