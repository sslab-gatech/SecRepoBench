switch (tag) {
            case ID_SCE:
                // Mono channel
                elementInstanceTag = BitBufferReadSmall(bits, 4);
                status = DecodeMono(p, bits, sampleBuffer, numSamples, channelIndex, &agParams);
                RequireNoErr(status, goto Exit;);
                channelIndex++;
                break;

            case ID_CPE:
                // Stereo channel pair
                elementInstanceTag = BitBufferReadSmall(bits, 4);
                RequireAction(channelIndex + 1 < numChannels, status = kALAC_ParamError; goto Exit;);
                status = DecodeStereo(p, bits, sampleBuffer, numSamples, channelIndex, &agParams);
                RequireNoErr(status, goto Exit;);
                channelIndex += 2;
                break;

            case ID_LFE:
                // LFE channel
                elementInstanceTag = BitBufferReadSmall(bits, 4);
                status = DecodeMono(p, bits, sampleBuffer, numSamples, channelIndex, &agParams);
                RequireNoErr(status, goto Exit;);
                channelIndex++;
                break;

            case ID_END:
                // End of frame
                goto NoMoreChannels;

            default:
                // Unsupported element
                status = kALAC_ParamError;
                goto Exit;
        }

        // Align the bitstream to byte boundaries
        BitBufferByteAlign(bits, false);