switch (tag)
		{
			case 0: // ID_SCE (Single Channel Element)
			case 1: // ID_CPE (Channel Pair Element)
			case 2: // ID_CCE (Coupling Channel Element)
			case 3: // ID_LFE (Low Frequency Effects Element)
				// Read and process the header parameters
				elementInstanceTag = BitBufferReadSmall(bits, 4);
				partialFrame = BitBufferReadOne(bits);
				escapeFlag = BitBufferReadOne(bits);
				headerByte = BitBufferReadSmall(bits, 3);

				// Read the number of bits for each channel
				chanBits = BitBufferReadSmall(bits, 4) + 1;

				// Read the number of samples
				if (partialFrame)
					numSamples = BitBufferReadSmall(bits, 16);
				else
					numSamples = p->mConfig.frameLength;

				// Ensure we don't exceed the buffer size
				RequireAction(numSamples <= *outNumSamples, status = kALAC_ParamError; goto Exit;);

				// Process each channel
				for (channelIndex = 0; channelIndex < numChannels; channelIndex++)
				{
					out32 = sampleBuffer + channelIndex;

					// Read the samples
					for (i = 0; i < numSamples; i++)
					{
						val = BitBufferReadSmall(bits, chanBits);
						*out32 = val;
						out32 += numChannels;
					}
				}
				break;

			case 4: // ID_DSE (Data Stream Element)
				status = alac_data_stream_element(bits);
				break;

			case 5: // ID_PCE (Program Config Element)
				// Not supported, skip
				status = kALAC_UnsupportedElement;
				break;

			case 6: // ID_FIL (Fill Element)
				status = alac_fill_element(bits);
				break;

			case 7: // ID_END (End Element)
				goto NoMoreChannels;

			default:
				status = kALAC_UnsupportedElement;
				break;
		}

		// Align to byte boundary
		BitBufferByteAlign(bits, false);