// decode audio data from the bitstream based on the element type specified by the tag
switch (tag)
{
    case ID_SCE:
        // mono or low-frequency elements
        status = DecodeMono (p, bits, sampleBuffer, numSamples, channelIndex, &out32, &chanBits, &partialFrame) ;
        break ;

    case ID_CPE:
        // stereo channel pairs
        status = DecodeStereo (p, bits, sampleBuffer, numSamples, channelIndex, &out32, &chanBits, &partialFrame) ;
        break ;

    case ID_LFE:
        // LFE channel (subwoofer)
        status = DecodeMono (p, bits, sampleBuffer, numSamples, channelIndex, &out32, &chanBits, &partialFrame) ;
        break ;

    case ID_FIL:
        // fill element
        status = DecodeFill (p, bits, sampleBuffer, numSamples, channelIndex, &out32, &chanBits, &partialFrame) ;
        break ;

    case ID_END:
        // end of frame
        status = ALAC_noErr ;
        goto Exit ;

    default:
        // unsupported element
        status = kALAC_UnsupportedElement ;
        break ;
}

RequireNoErr (status, break ;) ;

// update channel index and sample buffer pointer
channelIndex++ ;
sampleBuffer += numSamples ;