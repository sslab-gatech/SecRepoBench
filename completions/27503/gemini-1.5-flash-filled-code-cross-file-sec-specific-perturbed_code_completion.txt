switch (tag)
		{
			case ID_SCE:
				// mono
				elementInstanceTag = BitBufferReadSmall (bits, 4) ;
				status = alac_decode_mono (p, bits, sampleBuffer + channelIndex, numSamples, outNumSamples) ;
				channelIndex++ ;
				break ;

			case ID_CPE:
				// stereo
				elementInstanceTag = BitBufferReadSmall (bits, 4) ;
				if (channelIndex + 1 >= numChannels)
				{
					status = kALAC_ParamError ;
					goto NoMoreChannels ;
				}
				status = alac_decode_stereo (p, bits, sampleBuffer + channelIndex, numSamples, outNumSamples) ;
				channelIndex += 2 ;
				break ;

			case ID_LFE:
				// LFE channel (subwoofer)
				elementInstanceTag = BitBufferReadSmall (bits, 4) ;
				status = alac_decode_lfe (p, bits, sampleBuffer + channelIndex, numSamples, outNumSamples) ;
				channelIndex++ ;
				break ;

			case ID_FILL:
				// ignore fill elements
				elementInstanceTag = BitBufferReadSmall (bits, 4) ;
				break ;

			default:
				status = kALAC_UnsupportedOperation ;
				goto Exit ;
		}

		// byte-align the bitstream
		BitBufferByteAlign (bits, true) ;
		if (status != ALAC_noErr)
			goto Exit ;

		// check if we've decoded all the channels
		if (channelIndex >= numChannels)
			goto NoMoreChannels ;