switch (tag)
		{
			case ID_SCE:
				// mono
				elementInstanceTag = BitBufferReadSmall(bits, 4);
				status = DecodeMono(p, bits, sampleBuffer, numSamples, channelIndex);
				RequireNoErr(status, goto Exit;);
				channelIndex++;
				break;

			case ID_CPE:
				// stereo
				elementInstanceTag = BitBufferReadSmall(bits, 4);
				RequireAction(channelIndex + 1 < numChannels, status = kALAC_ParamError; goto Exit;);
				status = DecodeStereo(p, bits, sampleBuffer, numSamples, channelIndex);
				RequireNoErr(status, goto Exit;);
				channelIndex += 2;
				break;

			case ID_LFE:
				// LFE channel (subwoofer)
				elementInstanceTag = BitBufferReadSmall(bits, 4);
				status = DecodeMono(p, bits, sampleBuffer, numSamples, channelIndex);
				RequireNoErr(status, goto Exit;);
				channelIndex++;
				break;

			case ID_END:
				goto NoMoreChannels;

			default:
				status = kALAC_ParamError;
				goto Exit;
		}

		// Align the bitstream to byte boundaries
		BitBufferByteAlign(bits, false);