switch (tag)
        {
            case ID_SCE: // Single Channel Element (Mono)
                elementInstanceTag = BitBufferReadSmall(bits, 4);
                RequireAction(channelIndex < numChannels, status = kALAC_ParamError; goto Exit;);

                // Decode mono channel
                status = DecodeMono(p, bits, sampleBuffer, numSamples, channelIndex);
                RequireNoErr(status, goto Exit;);

                channelIndex++;
                break;

            case ID_CPE: // Channel Pair Element (Stereo)
                elementInstanceTag = BitBufferReadSmall(bits, 4);
                RequireAction((channelIndex + 1) < numChannels, status = kALAC_ParamError; goto Exit;);

                // Decode stereo channel pair
                status = DecodeStereo(p, bits, sampleBuffer, numSamples, channelIndex);
                RequireNoErr(status, goto Exit;);

                channelIndex += 2;
                break;

            case ID_LFE: // Low-Frequency Effects Channel
                elementInstanceTag = BitBufferReadSmall(bits, 4);
                RequireAction(channelIndex < numChannels, status = kALAC_ParamError; goto Exit;);

                // Decode LFE channel
                status = DecodeMono(p, bits, sampleBuffer, numSamples, channelIndex);
                RequireNoErr(status, goto Exit;);

                channelIndex++;
                break;

            case ID_FIL: // Fill Element
                // Skip fill elements
                escapeFlag = BitBufferReadSmall(bits, 1);
                if (escapeFlag)
                {
                    extraBits = BitBufferRead(bits, 8);
                    BitBufferAdvance(bits, extraBits * 8);
                }
                else
                {
                    while (BitBufferReadSmall(bits, 1) == 1)
                    {
                        // Continue reading until no more fill bits
                    }
                }
                break;

            case ID_END: // End of Stream
                goto NoMoreChannels;

            default: // Unsupported Element
                status = kALAC_UnsupportedElement;
                goto Exit;
        }

        // Align bitstream to byte boundary
        BitBufferByteAlign(bits, false);