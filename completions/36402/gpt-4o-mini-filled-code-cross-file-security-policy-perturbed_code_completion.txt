if (tables.len <= 10) { // Assuming 10 is the threshold for small collections
        // Perform a linear search
        for (unsigned int i = 0; i < tables.len; i++) {
            if (tables.arrayZ[i].tag == hb_tag) {
                *table_index = i;
                return true;
            }
        }
    } else {
        // Perform a binary search
        const TableRecord *result = tables.bsearch(hb_tag);
        if (result) {
            *table_index = result - tables.arrayZ; // Calculate index from pointer
            return true;
        }
    }
    return false; // Tag not found