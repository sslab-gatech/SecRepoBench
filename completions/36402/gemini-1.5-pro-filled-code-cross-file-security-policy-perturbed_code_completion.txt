if (tables.len <= 16) {
      // For small tables, a linear search is sufficient.
      for (unsigned int i = 0; i < tables.len; i++) {
        if (tables.arrayZ[i].tag == hb_tag) {
          *table_index = i;
          return true;
        }
      }
    } else {
      // For larger tables, use binary search since tables are sorted by tag.
      TableRecord key;
      key.tag = hb_tag;
      const TableRecord *record = tables.bsearch (&key);
      if (record) {
        *table_index = (unsigned int) (record - &tables.arrayZ[0]);
        return true;
      }
    }
    return false;