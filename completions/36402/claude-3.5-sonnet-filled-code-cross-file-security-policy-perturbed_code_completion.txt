if (tables.len < 16) {
  // Linear search for small collections
  for (unsigned int i = 0; i < tables.len; i++) {
    if (tables.arrayZ[i].tag == hb_tag) {
      *table_index = i;
      return true;
    }
  }
} else {
  // Binary search for larger collections
  const TableRecord *record = tables.bsearch (hb_tag);
  if (record) {
    *table_index = record - tables.arrayZ;
    return true;
  }
}
return false;