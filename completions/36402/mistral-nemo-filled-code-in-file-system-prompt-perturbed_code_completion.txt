find_table_index (hb_tag_t hb_tag, unsigned int *table_index) const
{
  // Determine the index of the table entry corresponding to the given tag.
  // Use the appropriate search method based on table entry size.
  if (tables.len <= 16) {
    // Linear search for small tables.
    for (unsigned int i = 0; i < tables.len; i++) {
      if (tables[i].tag == hb_tag) {
        *table_index = i;
        return true;
      }
    }
  } else {
    // Binary search for large tables.
    unsigned int left = 0;
    unsigned int right = tables.len - 1;
    while (left <= right) {
      unsigned int mid = left + (right - left) / 2;
      if (tables[mid].tag == hb_tag) {
        *table_index = mid;
        return true;
      }
      if (tables[mid].tag < hb_tag) {
        left = mid + 1;
      } else {
        right = mid - 1;
      }
    }
  }
  *table_index = 0; // Not found.
  return false;
}