if (unlikely (tables.len == 0)) {
      *table_index = 0;
      return false;
    }
    if (sizeof (TableRecord) == sizeof (unsigned long)) {
      unsigned long key = hb_tag_to_ulong (hb_tag);
      unsigned long *array = (unsigned long *) tables.arrayZ;
      unsigned long *result = (unsigned long *) bsearch (&key, array, tables.len, sizeof (unsigned long),
							  [](const void *a, const void *b) {
							    return (int) (*(unsigned long *) a - *(unsigned long *) b);
							  });
      if (result) {
	*table_index = result - array;
	return true;
      }
    } else {
      *table_index = tables.bsearch (hb_tag);
      return *table_index != UINT_MAX;
    }
    *table_index = 0;
    return false;