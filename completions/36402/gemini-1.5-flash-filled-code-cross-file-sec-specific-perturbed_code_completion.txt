if (unlikely (table_index == nullptr)) return false;

    if (sizeof (table_entry_t) == 1) {
      unsigned int index = hb_tag_to_u32 (hb_tag);
      if (index >= table.length) return false;
      *table_index = index;
      return true;
    } else {
      // Binary search for the table entry.
      unsigned int low = 0;
      unsigned int high = table.length - 1;
      while (low <= high) {
        unsigned int mid = low + (high - low) / 2;
        int cmp = hb_tag_compare (hb_tag, table.arrayZ[mid].tag);
        if (cmp < 0) {
          high = mid - 1;
        } else if (cmp > 0) {
          low = mid + 1;
        } else {
          *table_index = mid;
          return true;
        }
      }
      return false;
    }