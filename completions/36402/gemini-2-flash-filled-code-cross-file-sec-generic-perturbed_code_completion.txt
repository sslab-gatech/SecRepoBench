if (table_entry_size == 2)
    {
      const HBUINT16 *table_entry = (const HBUINT16 *) table_records;
      unsigned int num_tables = table_records_length / 2;

      for (unsigned int i = 0; i < num_tables; ++i)
      {
        if (hb_tag == hb_tag_t (hb_uint16_swap (table_entry[i])))
        {
          *table_index = i;
          return true;
        }
      }
    }
    else
    {
      const TableRecord *table_entry = (const TableRecord *) table_records;
      unsigned int num_tables = table_records_length / sizeof (TableRecord);

      for (unsigned int i = 0; i < num_tables; ++i)
      {
        if (hb_tag == table_entry[i].tag)
        {
          *table_index = i;
          return true;
        }
      }
    }

    return false;