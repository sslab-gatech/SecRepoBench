if (m_table_entry_size == sizeof(hb_tag_t)) {
      // Linear search for small tables.
      for (unsigned int i = 0; i < m_table_size; ++i) {
        if (m_table[i] == hb_tag) {
          *table_index = i;
          return true;
        }
      }
    } else {
      // Binary search for large tables.  Requires that the table is sorted.
      unsigned int low = 0;
      unsigned int high = m_table_size - 1;
      while (low <= high) {
        unsigned int mid = low + (high - low) / 2;
        hb_tag_t mid_tag = m_table[mid];
        if (mid_tag == hb_tag) {
          *table_index = mid;
          return true;
        } else if (mid_tag < hb_tag) {
          low = mid + 1;
        } else {
          high = mid - 1;
        }
      }
    }
    return false;