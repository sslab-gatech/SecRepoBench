if (!table_index)
  return false;

// Assuming 'tables' is an array of table records sorted by tag and that 'tables.len'
// returns the number of table entries.
unsigned int count = tables.len;
if (count == 0)
  return false;

// Use binary search if there are enough entries.
unsigned int lo = 0, hi = count;
while (lo < hi)
{
  unsigned int mid = lo + ((hi - lo) >> 1);
  hb_tag_t mid_tag = tables.arrayZ[mid].tag;  // table record's tag field
  if (mid_tag == hb_tag)
  {
    *table_index = mid;
    return true;
  }
  if (mid_tag < hb_tag)
    lo = mid + 1;
  else
    hi = mid;
}

return false;