if (is_long_table_)
    {
      // Binary search.
      unsigned int min = 0;
      unsigned int max = num_table_entries_ - 1;
      while (min <= max)
        {
          unsigned int mid = (min + max) / 2;
          hb_tag_t entry_tag = table_long_[mid].tag;
          if (entry_tag == hb_tag)
            {
              *table_index = mid;
              return true;
            }
          if (entry_tag < hb_tag)
            min = mid + 1;
          else
            max = mid - 1;
        }
    }
  else
    {
      // Linear search.
      for (unsigned int i = 0; i < num_table_entries_; ++i)
        {
          if (table_short_[i].tag == hb_tag)
            {
              *table_index = i;
              return true;
            }
        }
    }
  return false;