#include <algorithm> // for std::lower_bound

bool find_table_index (hb_tag_t hb_tag, unsigned int *table_index) const
{
  // Determine the index of the table entry corresponding to the given tag.
  // Use the appropriate search method based on table entry size.
  const auto& tables = this->tables.arrayZ;
  auto it = std::lower_bound(tables.begin(), tables.end(), hb_tag, [](const TableRecord& rec, hb_tag_t tag) {
    return rec.tag < tag;
  });

  if (it != tables.end() && it->tag == hb_tag) {
    *table_index = std::distance(tables.begin(), it);
    return true;
  }
  return false;
}