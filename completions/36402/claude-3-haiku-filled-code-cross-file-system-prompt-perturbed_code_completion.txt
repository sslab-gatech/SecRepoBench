unsigned int start = 0, end = table_size;
while (start < end)
{
  unsigned int mid = start + (end - start) / 2;
  hb_tag_t mid_tag = table[mid].tag;
  if (mid_tag < hb_tag)
    start = mid + 1;
  else if (mid_tag > hb_tag)
    end = mid;
  else
  {
    *table_index = mid;
    return true;
  }
}
*table_index = end;
return false;