if (tables.len <= 10) {
  for (unsigned int i = 0; i < tables.len; i++) {
    if (tables.arrayZ[i].tag == hb_tag) {
      *table_index = i;
      return true;
    }
  }
  return false;
} else {
  TableRecord *rec = std::lower_bound(tables.arrayZ.begin(), tables.arrayZ.end(), hb_tag, [](const TableRecord &a, hb_tag_t b) {
    return a.tag < b;
  });
  if (rec != tables.arrayZ.end() && rec->tag == hb_tag) {
    *table_index = std::distance(tables.arrayZ.begin(), rec);
    return true;
  }
  return false;
}