switch (sizeof(TableEntry)) {
  case sizeof(uint16_t):
    return binarySearch<uint16_t>(hb_tag, table_index);
  case sizeof(uint32_t):
    return binarySearch<uint32_t>(hb_tag, table_index);
  default:
    return false;
}

template <typename T>
bool binarySearch(hb_tag_t hb_tag, unsigned int *table_index) {
  int left = 0;
  int right = num_table_entries - 1;

  while (left <= right) {
    int mid = left + (right - left) / 2;
    T current_tag = static_cast<T>(table[mid].tag);

    if (current_tag == hb_tag) {
      *table_index = mid;
      return true;
    } else if (current_tag < hb_tag) {
      left = mid + 1;
    } else {
      right = mid - 1;
    }
  }

  return false;
}