// Calculate the number of vertices
  number_vertices = 0;
  for (i = 0; primitive_info[i].primitive != UndefinedPrimitive; i++)
    number_vertices++;
  if (number_vertices < 2)
    return MagickFalse;

  // Allocate memory for the dash_polygon array
  dash_polygon = (PrimitiveInfo *) AcquireQuantumMemory(2 * number_vertices, sizeof(*dash_polygon));
  if (dash_polygon == (PrimitiveInfo *) NULL)
    return MagickFalse;

  // Clone the draw_info structure
  clone_info = CloneDrawInfo((ImageInfo *) NULL, draw_info);
  if (clone_info == (DrawInfo *) NULL)
  {
    dash_polygon = (PrimitiveInfo *) RelinquishMagickMemory(dash_polygon);
    return MagickFalse;
  }

  // Set miter limit to zero for line joins
  clone_info->miterlimit = 0.0;

  // Initialize the first element of dash_polygon
  dash_polygon[0] = primitive_info[0];

  // Calculate the scale factor
  scale = ExpandAffine(&draw_info->affine) * draw_info->stroke_width;

  // Initialize dash length and offset
  dash_offset = draw_info->dash_offset;
  length = scale * draw_info->dash_pattern[0];