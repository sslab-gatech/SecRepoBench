/* Count the number of vertices in the primitive. */
  for (i = 0; primitive_info[i].primitive != UndefinedPrimitive; i++)
    ;
  number_vertices = (size_t) i;

  /* If there are not enough vertices, nothing to do. */
  if (number_vertices < 2)
    return(MagickTrue);

  /* Allocate memory for the dashed polygon. */
  dash_polygon = (PrimitiveInfo *) AcquireQuantumMemory((size_t) (2UL*number_vertices + 1UL),
    sizeof(*dash_polygon));
  if (dash_polygon == (PrimitiveInfo *) NULL)
    ThrowBinaryException(ResourceLimitError,"MemoryAllocationFailed",image->filename);

  /* Clone the current draw info but remove stroke settings to just fill. */
  clone_info = CloneDrawInfo((ImageInfo *) NULL, draw_info);
  clone_info->stroke_width = 0.0; /* no stroke width in dashed segments */

  /* Compute the scale factor and dash offset. */
  scale = ExpandAffine(&draw_info->affine) * draw_info->stroke_width;
  dash_offset = draw_info->dash_offset;
  if (dash_offset < 0.0)
    dash_offset = 0.0;

  /* Assume success unless an error occurs. */
  status = MagickTrue;