// Fill the masked region with a color
void FillMaskedRegion(Image *image, const DrawInfo *draw_info, ExceptionInfo *exception) {
  MagickPixel
    pixel;

  ssize_t
    y;

  for (y=0; y < (ssize_t) image->rows; y++) {
    register ssize_t
      x;

    for (x=0; x < (ssize_t) image->columns; x++) {
      if (IsMaskedPixel(image, x, y)) {
        pixel = GetPixel(image, x, y);
        if (IsOpaquePixel(&pixel)) {
          SetPixel(image, x, y, draw_info->fill_color);
        }
      }
    }
  }
}