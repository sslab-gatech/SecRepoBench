assert(draw_info != (DrawInfo *) NULL);
  if (image->debug != MagickFalse)
    (void) LogMagickEvent(DrawEvent,GetMagickModule(),"    begin draw-dash");

  /*
    Determine number of vertices.
  */
  for (number_vertices=0; primitive_info[number_vertices].primitive != UndefinedPrimitive; number_vertices++)
    ;

  /*
    Allocate memory for the dash_polygon array.
  */
  dash_polygon=(PrimitiveInfo *) AcquireQuantumMemory((size_t) (2UL*number_vertices+2UL),
    sizeof(*dash_polygon));
  if (dash_polygon == (PrimitiveInfo *) NULL)
    return(MagickFalse);

  /*
    Clone the draw_info structure.
  */
  clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);
  if (clone_info == (DrawInfo *) NULL)
    {
      dash_polygon=(PrimitiveInfo *) RelinquishMagickMemory(dash_polygon);
      return(MagickFalse);
    }
  clone_info->miterlimit=0.0;

  /*
    Initialize the first element and compute scale factor.
  */
  dash_polygon[0]=primitive_info[0];
  scale=ExpandAffine(&draw_info->affine);

  /*
    Set initial dash_offset and length.
  */
  dash_offset=scale*draw_info->dash_offset;
  length=0.0;
  n=0;