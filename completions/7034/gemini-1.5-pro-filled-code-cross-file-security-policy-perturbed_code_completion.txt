dash_polygon=(PrimitiveInfo *) AcquireQuantumMemory((size_t) (2*number_vertices+1),sizeof(*dash_polygon));
  if (dash_polygon == (PrimitiveInfo *) NULL)
    return(MagickFalse);
  clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);
  clone_info->miterlimit=0;
  dash_polygon[0]=primitive_info[0];
  scale=ExpandAffine(&draw_info->affine);
  if (draw_info->dash_pattern == (double *) NULL)
    {
      dash_polygon[0].coordinates=1;
      dash_polygon[1]=primitive_info[number_vertices-1];
      dash_polygon[1].coordinates=1;
      dash_polygon[2].primitive=UndefinedPrimitive;
      status=DrawStrokePolygon(image,clone_info,dash_polygon,exception);
      dash_polygon=(PrimitiveInfo *) RelinquishMagickMemory(dash_polygon);
      clone_info=DestroyDrawInfo(clone_info);
      return(status != 0 ? MagickTrue : MagickFalse);
    }
  length=scale*draw_info->dash_pattern[0]-0.5;
  dash_offset=fabs(draw_info->dash_offset) >= DrawEpsilon ? scale*
    draw_info->dash_offset : 0.0;
  if (fabs(dash_offset) > DrawEpsilon)
    {
      if (dash_offset < 0.0)
        for (i=0; i < (ssize_t) draw_info->number_dashes; i++)
          draw_info->dash_pattern[i]=(-draw_info->dash_pattern[i]);
       dash_offset=fmod(dash_offset,scale*
         draw_info->dash_pattern[draw_info->number_dashes-1]);
      if (dash_offset < 0.0)
        dash_offset+=scale*draw_info->dash_pattern[draw_info->number_dashes-1];
      for (i=0; i < (ssize_t) draw_info->number_dashes; i++)
        draw_info->dash_pattern[i]=fabs(draw_info->dash_pattern[i]);
    }