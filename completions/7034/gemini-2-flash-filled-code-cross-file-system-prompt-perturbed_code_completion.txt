number_vertices=0;
  for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++)
  {
    number_vertices++;
    if (i > (ssize_t) (MaxTextExtent-1))
      break;
  }
  dash_polygon=(PrimitiveInfo *) AcquireQuantumMemory((size_t)
    (2*number_vertices+1),sizeof(*dash_polygon));
  if (dash_polygon == (PrimitiveInfo *) NULL)
    return(MagickFalse);
  clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);
  clone_info->miterlimit=0;
  dash_polygon[0]=primitive_info[0];
  scale=ExpandAffine(&draw_info->affine);
  if (draw_info->dash_pattern == (double *) NULL)
    draw_info->dash_pattern=(double *) AcquireQuantumMemory(2UL,
      sizeof(double));
  if (draw_info->dash_pattern == (double *) NULL)
    {
      dash_polygon=(PrimitiveInfo *) RelinquishMagickMemory(dash_polygon);
      clone_info=DestroyDrawInfo(clone_info);
      return(MagickFalse);
    }
  if (draw_info->dash_pattern[0] == 0.0)
    draw_info->dash_pattern[0]=1.0;
  dash_offset=scale*draw_info->dash_offset;
  n=0;