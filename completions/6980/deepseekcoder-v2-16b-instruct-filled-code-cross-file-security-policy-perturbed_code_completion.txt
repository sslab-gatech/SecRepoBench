if (*p == '[')
{
  // Parse a subexpression enclosed in brackets and copy it into a buffer.
  // Evaluate the subexpression to obtain a numeric result, which is then
  // cast to a ssize_t. Increment the pointer 'p' to continue parsing the 
  // main expression after the brackets.
  p++; // Skip the '['
  q = subexpression;
  level = 1;
  while (*p != '\0' && level > 0) {
    if (*p == '[') level++;
    if (*p == ']') level--;
    *q++ = *p++;
  }
  *q = '\0'; // Null-terminate the subexpression
  alpha = FxEvaluateSubexpression(fx_info, channel, x, y, subexpression, &depth, &beta, exception);
  p++; // Skip the closing ']'
}