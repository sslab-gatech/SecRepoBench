size_t
  subexpression_length;

subexpression_length = strcspn(p+1, "]");
if (subexpression_length > 0)
{
  char
    *subexpr;

  subexpr = (char *)AcquireQuantumMemory(subexpression_length+1, sizeof(char));
  if (subexpr == (char *)NULL)
    return(0.0);
  (void) CopyMagickString(subexpr, p+1, subexpression_length+1);
  alpha = FxEvaluateSubexpression(fx_info, channel, x, y, subexpr, depth, beta, exception);
  subexpr = (char *)RelinquishMagickMemory(subexpr);
  imageindex = (ssize_t)alpha;
  p += subexpression_length + 2;
}