{
  ssize_t evaluatedIndex;
  level = 1;
  q = subexpression;
  for (p++; *p != '\0'; p++) {
    if (*p == '[')
      level++;
    else if (*p == ']') {
      level--;
      if (level == 0) {
        p++;
        break;
      }
    }
    if ((size_t)(q - subexpression) < (MagickPathExtent - 1))
      *q++ = *p;
  }
  *q = '\0';
  alpha = FxEvaluateSubexpression(fx_info, channel, x, y, subexpression, &depth, &beta, exception);
  evaluatedIndex = (ssize_t) alpha;
  imageindex = evaluatedIndex;
}