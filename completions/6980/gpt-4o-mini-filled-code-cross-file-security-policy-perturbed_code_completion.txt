q=subexpression;
              while (*p != '\0' && *p != ']')
              {
                *q++ = *p++;
              }
              *q = '\0';
              if (*p == ']')
                p++;