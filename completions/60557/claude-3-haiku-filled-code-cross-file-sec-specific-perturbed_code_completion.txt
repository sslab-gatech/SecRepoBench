char *filename = NULL;
int i;

if(http_packet_struct->content_disposition_line.ptr[attachment_len] == '\"') {
    for(i = attachment_len + 1; i < http_packet_struct->content_disposition_line.len; i++) {
        if(http_packet_struct->content_disposition_line.ptr[i] == '\"') {
            filename = (char *)malloc(i - attachment_len);
            if(filename != NULL) {
                strncpy(filename, (char *)&http_packet_struct->content_disposition_line.ptr[attachment_len + 1], i - attachment_len - 1);
                filename[i - attachment_len - 1] = '\0';
            }
            break;
        }
    }
}