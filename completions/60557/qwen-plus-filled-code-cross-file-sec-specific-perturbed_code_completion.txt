char *filename = NULL;

/* Allocate memory for filename with an extra byte for the null terminator */
filename = (char *)malloc(filename_len + 1);
if(filename != NULL) {
  /* Skip past "attachment; filename=" and the quote character */
  memcpy(filename, &http_packet_struct->content_disposition_line.ptr[attachment_len + 1], filename_len - 2);
  
  /* Null-terminate the string */
  filename[filename_len - 2] = '\0';
  
  /* Perform further processing with the extracted filename */
  // ... existing code logic ...

  /* Free allocated memory after use */
  free(filename);
}