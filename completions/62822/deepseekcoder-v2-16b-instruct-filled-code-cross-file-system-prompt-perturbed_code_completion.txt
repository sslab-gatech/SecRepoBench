// Unpack the binary data from the source into a string representation of bits.
  // The binary data is read from the source pointer, `src`, and the number of bits to unpack is determined by `count`.
  // If `count` is not specified, it defaults to the length of the source data multiplied by 8.
  // Create a new string `dst` to hold the unpacked bit representation with a length of `count`.
  // Iterate over each bit in the specified range and convert it to a character '0' or '1' based on the value of each bit.
  // Handle the conversion based on the specified `flags`, where `PACK_FLAG_LSB` indicates whether to read the least significant or most significant bits first.
  // Append the resulting string to the array `ary` and return the number of bytes read from the source.
  const char *sptr = (const char*)src;
  const char *sptr0 = sptr;
  char *dptr = (char*)mrb_malloc(mrbstate, (size_t)count);
  char *dptr0 = dptr;

  for (int i = 0; i < count; i++) {
    unsigned char byte = 0;
    for (int j = 0; j < 8; j++) {
      byte |= (*sptr & 1) << (7 - j);
      sptr++;
    }
    *dptr++ = (char)(byte & 0xff);
  }

  dst = mrb_str_new(mrbstate, (const char*)dptr0, (mrb_int)(dptr - dptr0));
  mrb_free(mrbstate, dptr0);
  mrb_ary_push(mrbstate, ary, dst);
  return (int)(sptr - sptr0);