def pack(a)
  str = ""
  a.each do |e|
    case e
    when String
      str << e.bytesize.chr('C')
      str << e
    when Integer, Float
      str << e.chr('L')
    when true
      str << 1.chr('C')
    else
      str << e.inspect.chr('C')
    end
  end
  str
end

def unpack(str)
  result = []
  i = 0
  while i < str.bytesize
    case str[i]
    when 'C'
      result << str[i+1, i+2]
      i += 2
    when 'L'
      result << str[i+1, i+5].unpack('L')
      i += 5
    else
      result << str[i, i+1]
      i += 2
    end
  end
  result
end