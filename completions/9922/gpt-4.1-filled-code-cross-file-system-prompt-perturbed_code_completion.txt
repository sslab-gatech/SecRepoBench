if (uc == endptr)
	goto out;
switch (*uc++) {
case '"':
case '\\':
case '/':
case 'b':
case 'f':
case 'n':
case 'r':
case 't':
	/* valid simple escapes, continue */
	break;
case 'u':
	/* expect 4 hex digits */
	for (i = 0; i < 4; i++) {
		if (uc == endptr)
			goto out;
		if (!((uc[i] >= '0' && uc[i] <= '9') ||
		      (uc[i] >= 'a' && uc[i] <= 'f') ||
		      (uc[i] >= 'A' && uc[i] <= 'F')))
			goto out;
	}
	uc += 4;
	break;
default:
	goto out;
}
break;