switch (*uc) {
    case '\\':
    case '"':
    case '/':
    case 'b':
    case 'f':
    case 'n':
    case 'r':
    case 't':
        uc++;
        break;
    case 'u':
        uc++;
        for (i = 0; i < 4 && uc < endptr; i++, uc++) {
            if (!json_isxdigit(*uc)) {
                goto out;
            }
        }
        break;
    default:
        goto out;
}
if (uc >= endptr) {
    goto out;
}