if (uc >= endptr) // Check if we reached the end of data
    goto out;

switch (*uc) {
case '\\':
case '"':
case '/':
    uc++; // These escape sequences represent a single character
    break;
case 'b':
case 'f':
case 'n':
case 'r':
case 't':
    uc++; // These escape sequences represent special characters
    break;
case 'u':
    // Unicode escape sequence: \uXXXX, where X is a hexadecimal digit
    uc++; // Skip the 'u'
    // Check if we have 4 more characters for the hex digits
    if (uc + 4 > endptr)
        goto out;
    // Verify that the next 4 characters are hexadecimal digits
    for (i = 0; i < 4; i++) {
        unsigned char c = uc[i];
        if (!((c >= '0' && c <= '9') || 
              (c >= 'a' && c <= 'f') || 
              (c >= 'A' && c <= 'F')))
            goto out;
    }
    uc += 4; // Skip the 4 hex digits
    break;
default:
    // Invalid escape sequence
    goto out;
}