if (uc >= endptr)
    goto out;
switch (*uc) {
    case '\\': case '"': case '/': case 'b':
    case 'f': case 'n': case 'r': case 't':
        uc++;
        break;
    case 'u':
        if (uc + 5 > endptr)
            goto out;
        for (i = 1; i <= 4; i++) {
            if (!json_isxdigit(uc[i]))
                goto out;
        }
        uc += 5;
        break;
    default:
        goto out;
}