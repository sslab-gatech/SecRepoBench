{
	if (uc == endptr)
		goto out;
	switch (*uc++) {
	case '"':
	case '\\':
	case '/':
	case 'b':
	case 'f':
	case 'n':
	case 'r':
	case 't':
		/* Valid single-char escape, nothing else to do. */
		break;
	case 'u':
		/* Expect 4 hex digits. */
		if ((endptr - uc) < 4)
			goto out;
		for (i = 0; i < 4; i++) {
			if (!isxdigit(uc[i]))
				goto out;
		}
		uc += 4;
		break;
	default:
		/* Invalid escape sequence. */
		goto out;
	}
}