ref = xmlXIncludeNewRef(include_context, cur);
            if (ref == NULL) {
                xmlXIncludeErr(include_context, cur, XML_XINCLUDE_NO_HREF,
                               "failed to create XInclude reference\n", NULL);
                return(-1);
            }
            if (xmlXIncludeLoadNode(include_context, ref) < 0) {
                xmlXIncludeErr(include_context, cur, XML_XINCLUDE_NO_HREF,
                               "failed to load XInclude node\n", NULL);
                return(-1);
            }
            include_context->incTotal++;
            if (include_context->incTotal > XML_XINCLUDE_MAX_DEPTH) {
                xmlXIncludeErr(include_context, cur, XML_XINCLUDE_RECURSION,
                               "XInclude recursion detected\n", NULL);
                return(-1);
            }
            ref->inc = xmlXIncludeCopyRange(include_context, ref->range);
            if (ref->inc == NULL) {
                xmlXIncludeErr(include_context, cur, XML_XINCLUDE_NO_HREF,
                               "failed to copy XInclude range\n", NULL);
                return(-1);
            }
            ref->replace = 1;