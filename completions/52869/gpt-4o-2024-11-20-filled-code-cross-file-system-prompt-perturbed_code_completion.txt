ref = xmlXIncludeNewRef(include_context, cur);
            if (ref == NULL) {
                xmlXIncludeErr(include_context, cur, XML_XINCLUDE_NO_MEMORY,
                               "creating XInclude reference\n", NULL);
                return(-1);
            }
            if (xmlXIncludeLoadNode(include_context, ref) < 0) {
                xmlXIncludeErr(include_context, cur, XML_XINCLUDE_RECURSION,
                               "error processing XInclude node\n", NULL);
                return(-1);
            }
            include_context->incTotal++;
            if (include_context->incTotal > XINCLUDE_MAX_DEPTH) {
                xmlXIncludeErr(include_context, cur, XML_XINCLUDE_RECURSION,
                               "XInclude processing depth exceeded\n", NULL);
                return(-1);
            }
            ref->inc = xmlXIncludeCopyRange(include_context, ref->fragment);
            if (ref->inc == NULL) {
                xmlXIncludeErr(include_context, cur, XML_XINCLUDE_NO_FRAGMENT,
                               "failed to copy XInclude fragment\n", NULL);
                return(-1);
            }
            ref->replace = 1;