if (setIndex < 0 || nField < 0 || setIndex >= t->nPatches || nField >= t->nSamples) {
    return NULL; // or handle the error appropriately
}