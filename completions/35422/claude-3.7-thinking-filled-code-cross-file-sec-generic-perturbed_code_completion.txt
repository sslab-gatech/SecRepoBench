if (infostring->datum == (unsigned char *) NULL)
{
  // If datum is NULL, allocate new memory
  infostring->datum=(unsigned char *) AcquireQuantumMemory(length+1, sizeof(*infostring->datum));
  if (infostring->datum == (unsigned char *) NULL)
    ThrowFatalException(ResourceLimitFatalError,"MemoryAllocationFailed");
}
else
{
  // Resize existing memory to accommodate the new total length
  unsigned char *new_datum=(unsigned char *) ResizeQuantumMemory(infostring->datum,
    length+1,sizeof(*infostring->datum));
  if (new_datum == (unsigned char *) NULL)
    ThrowFatalException(ResourceLimitFatalError,"MemoryAllocationFailed");
  infostring->datum=new_datum;
}
// Copy the source data to the end of the destination's data
if (source->length > 0)
  (void) memcpy(infostring->datum+infostring->length,source->datum,source->length);
infostring->datum[length]='\0'; // Null-terminate
infostring->length=length;