char *new_data;

if (infostring->datum == (unsigned char *) NULL)
  {
    new_data = (char *) AcquireQuantumMemory(length + 1, sizeof(*new_data));
    if (new_data == (char *) NULL)
      ThrowFatalException(ResourceLimitFatalError, "MemoryAllocationFailed");
    infostring->datum = (unsigned char *) new_data;
  }
else
  {
    new_data = (char *) ResizeQuantumMemory(infostring->datum, length + 1, sizeof(*new_data));
    if (new_data == (char *) NULL)
      ThrowFatalException(ResourceLimitFatalError, "MemoryAllocationFailed");
    infostring->datum = (unsigned char *) new_data;
  }

(void) memcpy(infostring->datum + infostring->length, source->datum, source->length);
infostring->length += source->length;
infostring->datum[infostring->length] = '\0';