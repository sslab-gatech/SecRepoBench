if (infostring->datum == (unsigned char *) NULL)
{
  // Allocate new memory if datum is NULL
  infostring->datum=(unsigned char *) AcquireQuantumMemory(length+1, 
    sizeof(*infostring->datum));
  if (infostring->datum == (unsigned char *) NULL)
    ThrowFatalException(ResourceLimitFatalError,"MemoryAllocationFailed");
  (void) memcpy(infostring->datum,source->datum,source->length);
}
else
{
  // Resize existing memory by allocating new memory, copying, and freeing old
  unsigned char *new_datum;
  new_datum=(unsigned char *) AcquireQuantumMemory(length+1,
    sizeof(*infostring->datum));
  if (new_datum == (unsigned char *) NULL)
    ThrowFatalException(ResourceLimitFatalError,"MemoryAllocationFailed");
  (void) memcpy(new_datum,infostring->datum,infostring->length);
  (void) memcpy(new_datum+infostring->length,source->datum,source->length);
  infostring->datum=(unsigned char *) RelinquishMagickMemory(infostring->datum);
  infostring->datum=new_datum;
}
infostring->length=length;
infostring->datum[length]='\0'; // Ensure null termination