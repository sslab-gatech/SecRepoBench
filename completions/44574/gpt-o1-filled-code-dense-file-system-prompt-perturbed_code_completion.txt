} else if (!strncmp("null", str_val, str_len)) {
    /* Create a node representing a null value */
    primitive_value = plist_new_null();
} else {
    /* Attempt to parse as a number (integer or floating point) */
    char buf[str_len + 1];
    memcpy(buf, str_val, str_len);
    buf[str_len] = '\0';

    char *endptr = NULL;
    errno = 0;
    long long llval = strtoll(buf, &endptr, 10);
    if ((endptr == buf + str_len) && (errno != ERANGE)) {
        /* Successfully parsed an integer */
        primitive_value = plist_new_int(llval);
    } else {
        /* Try parsing as a floating point */
        errno = 0;
        endptr = NULL;
        double dval = strtod(buf, &endptr);
        if ((endptr == buf + str_len) && (errno != ERANGE)) {
            /* Successfully parsed a float */
            primitive_value = plist_new_real(dval);
        } else {
            /* Parsing failed */
            PLIST_JSON_ERR("%s: invalid primitive value '%.*s'\n", __func__, (int)str_len, str_val);
        }
    }