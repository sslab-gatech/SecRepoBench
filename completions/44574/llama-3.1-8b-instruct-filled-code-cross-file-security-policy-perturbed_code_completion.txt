// <MASK>
if (!strncmp("null", str_val, str_len)) {
    primitive_value = plist_new_null();
} else {
    char* endptr = NULL;
    long long int value = strtoll(str_val, &endptr, 10);
    if (endptr!= NULL && *endptr == '\0') {
        if (value >= INT_MIN && value <= INT_MAX) {
            primitive_value = plist_new_int((int)value);
        } else {
            double double_value = (double)value;
            if (double_value >= LLONG_MIN && double_value <= LLONG_MAX) {
                primitive_value = plist_new_real(double_value);
            } else {
                PLIST_JSON_ERR("%s: value out of range\n", __func__);
                return NULL;
            }
        }
    } else {
        char* endptr_exp = NULL;
        double double_value = strtod(str_val, &endptr_exp);
        if (endptr_exp!= NULL && *endptr_exp == '\0') {
            if (double_value >= LLONG_MIN && double_value <= LLONG_MAX) {
                primitive_value = plist_new_real(double_value);
            } else {
                PLIST_JSON_ERR("%s: value out of range\n", __func__);
                return NULL;
            }
        } else {
            PLIST_JSON_ERR("%s: invalid number format\n", __func__);
            return NULL;
        }
    }
}
(*index)++;
return primitive_value;
// </MASK>