if (!strncmp("null", str_val, str_len)) {
    primitive_value = plist_new_null();
} else {
    // Try to parse as a number
    if (*str_val == '-' || isdigit(*str_val) || 
        (*str_val == '+' && str_len > 1 && isdigit(str_val[1]))) {
        // Check if it's a floating point value
        int is_float = 0;
        for (size_t i = 0; i < str_len; i++) {
            if (str_val[i] == '.' || str_val[i] == 'e' || str_val[i] == 'E') {
                is_float = 1;
                break;
            }
        }
        
        if (is_float) {
            // Parse as floating point
            char* temp_str = strndup(str_val, str_len);
            if (!temp_str) {
                PLIST_JSON_ERR("%s: out of memory\n", __func__);
                return NULL;
            }
            char* endptr = NULL;
            double val = strtod(temp_str, &endptr);
            if (endptr == temp_str + str_len) {
                // Valid floating point number
                primitive_value = plist_new_real(val);
            } else {
                PLIST_JSON_ERR("%s: invalid floating point value '%s'\n", __func__, temp_str);
            }
            free(temp_str);
        } else {
            // Parse as integer
            char* ep = NULL;
            int64_t val = parse_decimal(str_val, str_end, &ep);
            if (ep == str_end) {
                // Valid integer
                primitive_value = plist_new_uint(val);
            } else {
                PLIST_JSON_ERR("%s: invalid integer value '%.*s'\n", __func__, (int)str_len, str_val);
            }
        }
    } else {
        PLIST_JSON_ERR("%s: unrecognized primitive value '%.*s'\n", __func__, (int)str_len, str_val);
    }
}