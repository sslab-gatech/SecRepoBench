if (!strncmp("null", str_val, str_len)) {
    primitive_value = plist_new_null();
} else {
    // Try to parse as number (integer or real)
    char numbuf[64];
    size_t copylen = (str_len < sizeof(numbuf)-1) ? str_len : sizeof(numbuf)-1;
    memcpy(numbuf, str_val, copylen);
    numbuf[copylen] = '\0';

    char* endptr = NULL;
    // Try integer first
    long long int_val = strtoll(numbuf, &endptr, 10);
    if (endptr && *endptr == '\0') {
        primitive_value = plist_new_int(int_val);
    } else {
        // Try double
        endptr = NULL;
        double real_val = strtod(numbuf, &endptr);
        if (endptr && *endptr == '\0') {
            primitive_value = plist_new_real(real_val);
        } else {
            PLIST_JSON_ERR("%s: invalid primitive value: %.*s\n", __func__, (int)str_len, str_val);
            primitive_value = NULL;
        }
    }
}