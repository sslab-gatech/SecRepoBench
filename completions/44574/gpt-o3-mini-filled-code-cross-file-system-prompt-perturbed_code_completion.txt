else if (!strncmp("null", str_val, str_len)) {
    primitive_value = plist_new_null();
} else {
    char *num_str = (char *)malloc(str_len + 1);
    if (!num_str) {
        PLIST_JSON_ERR("%s: Out of memory while parsing number\n", __func__);
        return NULL;
    }
    memcpy(num_str, str_val, str_len);
    num_str[str_len] = '\0';

    if (strchr(num_str, '.') || strchr(num_str, 'e') || strchr(num_str, 'E')) {
        char *endptr = NULL;
        double d = strtod(num_str, &endptr);
        if (*endptr != '\0') {
            PLIST_JSON_ERR("%s: error parsing floating point number\n", __func__);
            free(num_str);
            return NULL;
        }
        primitive_value = plist_new_real(d);
    } else {
        char *endptr = NULL;
        long long int i = strtoll(num_str, &endptr, 10);
        if (*endptr != '\0') {
            PLIST_JSON_ERR("%s: error parsing integer number\n", __func__);
            free(num_str);
            return NULL;
        }
        primitive_value = plist_new_int(i);
    }
    free(num_str);
}