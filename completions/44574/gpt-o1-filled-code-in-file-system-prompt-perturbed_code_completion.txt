else if (!strncmp("null", str_val, str_len)) {
    /* Handle JSON null */
    primitive_value = plist_new_null();
} else {
    /* Attempt to distinguish between integer and floating-point */
    int is_float = 0;
    for (const char* c = str_val; c < str_end; c++) {
        if (*c == '.' || *c == 'e' || *c == 'E') {
            is_float = 1;
            break;
        }
    }
    if (is_float) {
        /* Parse as floating-point number */
        char* endptr = NULL;
        double dval = strtod(str_val, &endptr);
        if (endptr != str_end) {
            PLIST_JSON_ERR("Failed to parse float: '%.*s'\n", (int)str_len, str_val);
        } else {
            primitive_value = plist_new_real(dval);
        }
    } else {
        /* Parse as integer */
        char* endptr = NULL;
        int64_t ival = parse_decimal(str_val, str_end, &endptr);
        if (endptr != str_end) {
            PLIST_JSON_ERR("Failed to parse integer: '%.*s'\n", (int)str_len, str_val);
        } else {
            if (ival >= 0) {
                primitive_value = plist_new_uint((uint64_t)ival);
            } else {
                /* Assumes libplist provides plist_new_int to handle negative values */
                primitive_value = plist_new_int(ival);
            }
        }
    }
}