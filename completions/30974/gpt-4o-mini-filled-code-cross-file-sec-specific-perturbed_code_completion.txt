int32_t off_nbytes = (int32_t)(container->len - header_len - cbytes);
    uint8_t* off_start = malloc((size_t)off_nbytes);
    if (off_start == NULL) {
        BLOSC_TRACE_ERROR("Memory allocation failed for offsets.");
        return NULL;
    }
    fread(off_start, 1, (size_t)off_nbytes, fp);
    if (ferror(fp)) {
        BLOSC_TRACE_ERROR("Error reading offsets from frame.");
        free(off_start);
        return NULL;
    }