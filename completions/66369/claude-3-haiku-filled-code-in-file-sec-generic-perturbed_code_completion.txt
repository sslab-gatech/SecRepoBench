// <MASK>
int r = 0;
khint_t k;
int key;
cram_codec *cd;

if (c->tags_used) {
    for (k = kh_begin(c->tags_used); k != kh_end(c->tags_used); k++) {
        if (!kh_exist(c->tags_used, k))
            continue;

        key = kh_key(c->tags_used, k);
        cd = kh_val(c->tags_used, k)->codec;

        r |= (fd->vv.varint_put32_blk(map, key) <= 0);
        if (-1 == cd->store(cd, map, NULL, fd->version))
            return NULL;

        mc++;
    }
}