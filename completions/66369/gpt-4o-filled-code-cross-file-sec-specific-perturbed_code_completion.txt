// Process each auxiliary tag
        while (aux < aux_end) {
            char *tag = aux;
            int tag_len = 2; // Tag is 2 characters long
            int type_len = 1; // Type is 1 character long
            int data_len = 0;

            // Ensure we have enough space for tag and type
            if (aux_end - aux < tag_len + type_len)
                goto err;

            aux += tag_len + type_len;

            // Determine the length of the data based on the type
            switch (aux[-1]) {
                case 'A': case 'c': case 'C':
                    data_len = 1;
                    break;
                case 's': case 'S':
                    data_len = 2;
                    break;
                case 'i': case 'I': case 'f':
                    data_len = 4;
                    break;
                case 'd':
                    data_len = 8;
                    break;
                case 'Z': case 'H':
                    while (aux < aux_end && *aux != '\0')
                        aux++;
                    if (aux < aux_end)
                        data_len = aux - tag + 1;
                    break;
                case 'B':
                    if (aux_end - aux < 5)
                        goto err;
                    data_len = 5 + bam_auxB_len(aux);
                    break;
                default:
                    goto err;
            }

            // Ensure we have enough space for the data
            if (aux_end - aux < data_len)
                goto err;

            // Process the tag
            // (This is where you would handle specific tags like RG, MD, NM, etc.)
            // For now, we just skip over the data
            aux += data_len;
        }