// RG:Z
if (aux[0] == 'R' && aux[1] == 'G' && aux[2] == 'Z') {
    int32_t id = (aux[0]<<16) | (aux[1]<<8) | aux[2];
    cram_map *m = map_find(c->comp_hdr->tag_encoding_map, aux, id);
    if (!m) goto err;

    // Add integer key to tag map
    int32_t key = m->key;
    BLOCK_APPEND_CHAR(td_b, key>>24);
    BLOCK_APPEND_CHAR(td_b, key>>16);
    BLOCK_APPEND_CHAR(td_b, key>>8);
    BLOCK_APPEND_CHAR(td_b, key);

    // Store tag data in slice aux block
    BLOCK_APPEND(s->aux_blk, aux, 3);
    aux += 3;

    // Decode and store tag value
    if (!m->codec) goto err;
    int out_sz = 1;
    if (m->codec->decode(s, m->codec, NULL, (char *)s->aux_blk, &out_sz)) {
        goto err;
    }

    // Update tag size
    cr->aux_size += out_sz + 3;

    // Update aux pointer
    aux += out_sz;
} else {
    // Handle other tags
    int32_t id = (aux[0]<<16) | (aux[1]<<8) | aux[2];
    cram_map *m = map_find(c->comp_hdr->tag_encoding_map, aux, id);
    if (!m) goto err;

    // Add integer key to tag map
    int32_t key = m->key;
    BLOCK_APPEND_CHAR(td_b, key>>24);
    BLOCK_APPEND_CHAR(td_b, key>>16);
    BLOCK_APPEND_CHAR(td_b, key>>8);
    BLOCK_APPEND_CHAR(td_b, key);

    // Store tag data in slice aux block
    BLOCK_APPEND(s->aux_blk, aux, 3);
    aux += 3;

    // Decode and store tag value
    if (!m->codec) goto err;
    int out_sz = 1;
    if (m->codec->decode(s, m->codec, NULL, (char *)s->aux_blk, &out_sz)) {
        goto err;
    }

    // Update tag size
    cr->aux_size += out_sz + 3;

    // Update aux pointer
    aux += out_sz;
}