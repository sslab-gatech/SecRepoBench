if (entry_result->astr && TESTAFF(entry_result->astr, compoundforbidflag, entry_result->alen)) {
          st[i] = ch;
          break; // Skip this entry if it is forbidden in compound words
        }

        // Check if the entry is valid for compound words
        if (entry_result && (compoundflag && TESTAFF(entry_result->astr, compoundflag, entry_result->alen))) {
          // Valid compound entry found, proceed with further checks
          // Check if the entry has the required flags for compound words
          if (TESTAFF(entry_result->astr, compoundbegin, entry_result->alen) || 
              TESTAFF(entry_result->astr, compoundmiddle, entry_result->alen)) {
            // Valid compound word found, return the entry
            return entry_result;
          }
        }

        // If the entry is not valid, continue to the next homonym
        entry_result = entry_result->next_homonym;