if (entry_result && entry_result->astr) {
          if (TESTAFF(entry_result->astr, compoundforbidflag, entry_result->alen) &&
              !hu_mov_rule) {
            entry_result = NULL;
            break;  // exit the loop if the entry is forbidden
          }

          // Check if the entry is valid for compound words
          if (TESTAFF(entry_result->astr, compoundflag, entry_result->alen) ||
              (compoundbegin && wordnum == 0 && 
               TESTAFF(entry_result->astr, compoundbegin, entry_result->alen)) ||
              (compoundmiddle && wordnum > 0 && 
               TESTAFF(entry_result->astr, compoundmiddle, entry_result->alen))) {
            // Valid entry found, proceed with further checks
            checked_prefix = 1;
          } else {
            // If the entry is not valid, check for homonyms
            entry_result = entry_result->next_homonym;
            continue;  // continue searching for valid homonyms
          }
        } else {
          // If no entry found, check for prefix and suffix conditions
          if (onlycpdrule) {
            break;  // exit if only checking compound rules
          }
        }