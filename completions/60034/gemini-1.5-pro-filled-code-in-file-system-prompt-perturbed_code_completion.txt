{
          while (entry_result &&
                 (TESTAFF(entry_result->astr, compoundforbidflag, entry_result->alen) && !hu_mov_rule)) {
            if (!simplifiedcpd)
              break;
            if (i > 1) {
              if (utf8) {
                int charlen =
                    utf8charlen(word[i - 1]) + utf8charlen(word[i - 2]);
                if (i > charlen)
                  i -= charlen;
                else
                  break;
              } else
                i -= 2;
            } else
              break;
            st[i] = '\0';
            entry_result = lookup(st.c_str(), i);
          }

          while (entry_result && !hu_mov_rule &&
                 ((needaffix && TESTAFF(entry_result->astr, needaffix, entry_result->alen)) ||
                  !((compoundflag && !words &&
                     TESTAFF(entry_result->astr, compoundflag, entry_result->alen)) ||
                    ((oldwordnum == 0) && compoundbegin &&
                     TESTAFF(entry_result->astr, compoundbegin, entry_result->alen)) ||
                    ((oldwordnum > 0) && !words && compoundmiddle &&
                     TESTAFF(entry_result->astr, compoundmiddle, entry_result->alen)) ||
                    (!defcpdtable.empty() && words &&
                     defcpd_check(&words, wnum, entry_result, NULL, 0))) ||
                  (scpd != 0 && checkcpdtable[scpd - 1].cond != FLAG_NULL &&
                   !TESTAFF(entry_result->astr, checkcpdtable[scpd - 1].cond,
                            entry_result->alen)))) {
            entry_result = entry_result->next_homonym;
          }
        }