// Check if the current dictionary entry is forbidden in compound words
        if (entry_result && entry_result->astr &&
            TESTAFF(entry_result->astr, compoundforbidflag, entry_result->alen) &&
            !hu_mov_rule) {
          st[i] = ch;
          break;
        }

        // Iterate through homonyms to find one with the required compound conditions
        while (entry_result) {
          if ((compoundflag && TESTAFF(entry_result->astr, compoundflag, entry_result->alen)) ||
              (compoundbegin && wordnum == 0 &&
               TESTAFF(entry_result->astr, compoundbegin, entry_result->alen)) ||
              (compoundmiddle && wordnum > 0 &&
               TESTAFF(entry_result->astr, compoundmiddle, entry_result->alen)) ||
              (checkcpdtable.empty() || scpd == 0 ||
               (scpd > 0 && TESTAFF(entry_result->astr, checkcpdtable[scpd - 1].cond, entry_result->alen)))) {
            break;
          }
          entry_result = entry_result->next_homonym;
        }

        // If no valid entry is found, continue to the next iteration
        if (!entry_result) {
          st[i] = ch;
          continue;
        }