if (entry_result && entry_result->astr &&
            TESTAFF(entry_result->astr, compoundforbidflag, entry_result->alen) &&
            !hu_mov_rule) {
          st[i] = ch;
          break;
        }

        // check compoundbegin flag
        if (entry_result && !hu_mov_rule && compoundbegin &&
            TESTAFF(entry_result->astr, compoundbegin, entry_result->alen) &&
            (wordnum > 0)) {
          st[i] = ch;
          break;
        }

        // check compoundmiddle flag
        if (entry_result && !hu_mov_rule && compoundmiddle &&
            TESTAFF(entry_result->astr, compoundmiddle, entry_result->alen) &&
            (wordnum == 0)) {
          st[i] = ch;
          break;
        }

        // check compoundend flag
        if (entry_result && !hu_mov_rule && compoundend &&
            TESTAFF(entry_result->astr, compoundend, entry_result->alen)) {
          st[i] = ch;
          break;
        }

        // check compoundflag
        if (entry_result && !hu_mov_rule && compoundflag &&
            !TESTAFF(entry_result->astr, compoundflag, entry_result->alen)) {
          st[i] = ch;
          break;
        }

        hentry* tmp = entry_result;
        while (tmp) {
          if (!hu_mov_rule && compoundforbidflag &&
              TESTAFF(tmp->astr, compoundforbidflag, tmp->alen)) {
            entry_result = NULL;
            break;
          }
          if (!hu_mov_rule && compoundbegin &&
              TESTAFF(tmp->astr, compoundbegin, tmp->alen) && (wordnum > 0)) {
            entry_result = NULL;
            break;
          }
          if (!hu_mov_rule && compoundmiddle &&
              TESTAFF(tmp->astr, compoundmiddle, tmp->alen) && (wordnum == 0)) {
            entry_result = NULL;
            break;
          }
          if (!hu_mov_rule && compoundend &&
              TESTAFF(tmp->astr, compoundend, tmp->alen)) {
            entry_result = NULL;
            break;
          }
          if (!hu_mov_rule && compoundflag &&
              !TESTAFF(tmp->astr, compoundflag, tmp->alen)) {
            entry_result = NULL;
            break;
          }
          if (checkcpdtable.size() > 0 && scpd > 0 &&
              checkcpdtable[scpd - 1].cond != FLAG_NULL &&
              !TESTAFF(tmp->astr, checkcpdtable[scpd - 1].cond, tmp->alen)) {
            entry_result = NULL;
            break;
          }
          break;
          tmp = tmp->next_homonym;
        }