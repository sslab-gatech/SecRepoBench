while (entry_result) {
  // If this homonym is forbidden in compounds and we're not using the Hungarian
  // movement rule, skip to the next one to avoid forming invalid compounds.
  if (compoundforbidflag && !hu_mov_rule &&
      TESTAFF(entry_result->astr, compoundforbidflag, entry_result->alen)) {
    entry_result = entry_result->next_homonym;
    // If no more homonyms remain, revert temporary changes and break out or
    // continue searching based on simplified compound processing.
    if (!entry_result) {
      st[i] = ch;  // restore character boundary
      if (simplifiedcpd) {
        break;  // break out of the current loop
      }
      continue;  // continue searching under other conditions
    }
  } else {
    // Found a potential valid compound segment or Hungarian rule applies.
    // Proceed with the existing entry_result.
    break;
  }
}

// If there are remaining homonyms, iterate through them to ensure
// they meet compound flags (compoundflag, compoundbegin, compoundmiddle)
// or any pattern constraints before final acceptance:
//
// while (entry_result && !meetsCompoundCriteria(entry_result)) {
//   entry_result = entry_result->next_homonym;
// }