if (entry_result->astr && TESTAFF(entry_result->astr, compoundforbidflag, entry_result->alen)) {
          st[i] = ch;
          break; // exit the loop if the entry is forbidden
        }

        // Check if the entry is valid for compound words
        if (entry_result && (compoundflag && TESTAFF(entry_result->astr, compoundflag, entry_result->alen))) {
          // Valid compound entry found, proceed with further checks
          // Check if the entry is allowed in compound words
          if (compoundbegin && (oldwordnum == 0) && !hu_mov_rule) {
            if (!TESTAFF(entry_result->astr, compoundbegin, entry_result->alen)) {
              entry_result = NULL; // Not allowed as a compound beginning
            }
          } else if (compoundmiddle && (oldwordnum > 0) && !hu_mov_rule) {
            if (!TESTAFF(entry_result->astr, compoundmiddle, entry_result->alen)) {
              entry_result = NULL; // Not allowed as a compound middle
            }
          }
        }

        // If the entry is still valid, check for additional conditions
        if (entry_result) {
          // Check for specific compound patterns
          if (!checkcpdtable.empty() && scpd == 0) {
            if (cpdpat_check(word, i, rv_first, entry_result, affixed)) {
              entry_result = NULL; // Invalid compound pattern
            }
          }
        }