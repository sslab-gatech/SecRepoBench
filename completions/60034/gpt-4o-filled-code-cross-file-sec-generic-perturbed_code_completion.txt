// Check if the current dictionary entry is forbidden in compound words
        if (entry_result && entry_result->astr &&
            TESTAFF(entry_result->astr, compoundforbidflag, entry_result->alen) &&
            !hu_mov_rule) {
          // If the entry is forbidden and Hungarian movement rule is not applied,
          // break out of the loop to avoid infinite loop or invalid compound.
          break;
        }

        // Iterate through homonyms to find a valid compound entry
        while (entry_result) {
          // Check if the entry has the required compound conditions
          if ((compoundflag && TESTAFF(entry_result->astr, compoundflag, entry_result->alen)) ||
              (compoundbegin && wordnum == 0 && TESTAFF(entry_result->astr, compoundbegin, entry_result->alen)) ||
              (compoundmiddle && wordnum > 0 && TESTAFF(entry_result->astr, compoundmiddle, entry_result->alen))) {
            // Valid compound entry found, break the loop
            break;
          }
          // Move to the next homonym
          entry_result = entry_result->next_homonym;
        }

        // If no valid entry is found, continue to the next iteration
        if (!entry_result) {
          st[i] = ch;
          continue;
        }