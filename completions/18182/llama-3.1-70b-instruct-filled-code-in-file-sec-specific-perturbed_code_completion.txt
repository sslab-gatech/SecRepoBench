if ((TIFFGetField(tiff,TIFFTAG_XMLPACKET,&length,&profile) == 1) &&
    (profile!= (unsigned char *) NULL))
{
  const char *dng = "\x00\x00\x00\x00dc:format=\"image/dng\"";
  if (LocaleCompare((const char *) profile, dng, 24) == 0)
    (void) SetImageFormat(image, "DNG");
}