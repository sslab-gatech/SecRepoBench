StringInfo
        *profileInfo;

      profileInfo=AcquireStringInfo((size_t) length);
      if (profileInfo == (StringInfo *) NULL)
        {
          TIFFClose(tiff);
          ThrowReaderException(ResourceLimitError,"MemoryAllocationFailed");
        }
      SetStringInfo(profileInfo,(char *) profile);
      if (strstr(GetStringInfo(profileInfo),"dc:format=\"image/dng\"") !=
          (char *) NULL)
        (void) SetImageProperty(img,"format","DNG",exception);
      (void) ReadProfile(img,"xmp",GetStringInfo(profileInfo),
        GetStringInfoLength(profileInfo),exception);
      profileInfo=DestroyStringInfo(profileInfo);