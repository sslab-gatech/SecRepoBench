StringInfo *xmp_profile = AcquireStringInfo(length);
      if (xmp_profile != (StringInfo *) NULL)
      {
        SetStringInfoDatum(xmp_profile, profile);
        if (StringInfoLength(xmp_profile) >= 20) // Check if the profile is long enough
        {
          if (LocaleNCompare((char *) GetStringInfoDatum(xmp_profile), "dc:format=\"image/dng\"", 20) == 0)
            SetImageFormat(img, "DNG");
        }
        xmp_profile = RelinquishStringInfo(xmp_profile);
      }