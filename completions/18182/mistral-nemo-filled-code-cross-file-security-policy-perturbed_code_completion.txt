{
  char
    *profile;

  uint32
    length;

  unsigned char
    *pixels;

  if (TIFFGetField(tiff,TIFFTAG_XMLPACKET,&length,&profile) == 1)
    {
      // The block reads the XMP profile from a TIFF image, checking if the profile contains the string
      // "dc:format=\"image/dng\"". If the string is found, it sets the image's format to "DNG".
      // <MASK>
      if (strstr(profile, "dc:format=\"image/dng\"") != NULL)
      {
        (void) SetImageProperty(image,"format","DNG",exception);
      }
      // </MASK>
    }
}