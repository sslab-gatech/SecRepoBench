// The block reads the XMP profile from a TIFF image, checking if the profile contains the string 
// "dc:format=\"image/dng\"". If the string is found, it sets the image's format to "DNG".
if ((profile != (unsigned char *) NULL) && (length > 0))
{
  StringInfo *xmp_profile = AcquireStringInfo(length);
  SetStringInfoDatum(xmp_profile, profile, length);
  if (strstr((const char *)GetStringInfoDatum(xmp_profile), "dc:format=\"image/dng\"") != NULL)
    SetImageFormat(image, "DNG", exception);
  xmp_profile = DestroyStringInfo(xmp_profile);
}