char
        *dng_profile;

      size_t
        i;

      if (length > 1024)
        length=1024;
      dng_profile=(char *) AcquireQuantumMemory(length+1,sizeof(*dng_profile));
      if (dng_profile != (char *) NULL)
        {
          (void) CopyMagickString(dng_profile,(char *) profile,length+1);
          for (i=0; i < length; i++)
          {
            if (dng_profile[i] == 'd')
              if (LocaleNCompare(dng_profile+i,"dc:format=\"image/dng\"",20) == 0)
                {
                  (void) CopyMagickString(img->magick,"DNG",MagickPathExtent);
                  break;
                }
          }
          dng_profile=(char *) RelinquishMagickMemory(dng_profile);
        }