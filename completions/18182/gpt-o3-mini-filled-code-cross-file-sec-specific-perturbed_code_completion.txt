{
  const char signature[] = "dc:format=\"image/dng\"";
  size_t sig_length = sizeof(signature) - 1;  /* exclude terminating null */
  size_t i;
  int found = 0;
  for (i = 0; i <= (size_t)length - sig_length; i++)
  {
    if (memcmp(profile + i, signature, sig_length) == 0)
    {
      found = 1;
      break;
    }
  }
  if (found)
  {
    /* Safely update the image format to "DNG" */
    (void) CopyMagickString(img->magick, "DNG", MagickPathExtent);
  }
}