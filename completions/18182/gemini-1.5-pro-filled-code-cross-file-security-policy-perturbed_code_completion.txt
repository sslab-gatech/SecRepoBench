StringInfo * profile_info;

      profile_info=AcquireStringInfo((size_t) length);
      memcpy(GetStringInfoDatum(profile_info),profile,(size_t) length);
      if (strstr((char *) GetStringInfoDatum(profile_info),"dc:format=\"image/dng\"") != (char *) NULL)
        {
          (void) SetImageFormat(img,"DNG",exception);
          (void) CopyMagickString(image->magick_filename,image_info->filename,
            MagickPathExtent);
          (void) ConcatenateMagickString(image->magick_filename,".dng",
            MagickPathExtent);
          (void) SetImageInfo(image_info,0,exception);
        }
      (void) ReadProfile(img,"xmp",GetStringInfoDatum(profile_info),(ssize_t) GetStringInfoLength(profile_info),exception);
      profile_info=DestroyStringInfo(profile_info);