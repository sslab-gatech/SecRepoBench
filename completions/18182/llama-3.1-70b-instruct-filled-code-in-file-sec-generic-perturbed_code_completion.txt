if ((TIFFGetField(tiff,TIFFTAG_XMLPACKET,&length,&profile) == 1) &&
    (profile!= (unsigned char *) NULL))
{
  // The block reads the XMP profile from a TIFF image, checking if the profile contains the string 
  // "dc:format=\"image/dng\"". If the string is found, it sets the image's format to "DNG".
  const char *xmp_profile = (const char *) profile;
  if (xmp_profile!= NULL && strstr(xmp_profile, "dc:format=\"image/dng\"")!= NULL)
  {
    (void) CopyMagickString(img->magick,"DNG",MagickPathExtent);
  }
}