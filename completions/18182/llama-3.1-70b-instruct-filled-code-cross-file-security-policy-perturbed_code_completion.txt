StringInfo *profile_info;

profile_info = StringInfoNew(length);
if (profile_info == (StringInfo *) NULL)
  return;
(void) StringInfoAppend(profile_info, (const char *) profile, (size_t) length);
if (LocaleCompare((const char *) StringInfoData(profile_info), "dc:format=\"image/dng\"") == 0)
  (void) SetImageProperty(img, "format", "DNG", exception);
StringInfoDestroy(profile_info);