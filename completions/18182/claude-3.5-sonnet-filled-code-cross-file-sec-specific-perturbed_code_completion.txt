char
  *xmp_profile;

xmp_profile=(char *) NULL;
if (strstr((char *) profile,"dc:format=\"image/dng\"") != (char *) NULL)
  (void) SetImageFormat(image,"DNG");
(void) ReadProfile(img,"xmp",profile,(size_t) length,exception);