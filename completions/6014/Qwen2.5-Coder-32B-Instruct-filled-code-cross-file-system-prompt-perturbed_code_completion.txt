q=p;
      while (*p != '\0')
      {
        while (*p == ' ')
          p++;
        if (*p != '\0')
        {
          if (q != p)
            *q = *p;
          q++;
          p++;
          while (*p != ' ' && *p != '\0')
          {
            *q = *p;
            q++;
            p++;
          }
        }
      }
      if (q > p && *(q - 1) == ' ')
        q--;
      *q = '\0';