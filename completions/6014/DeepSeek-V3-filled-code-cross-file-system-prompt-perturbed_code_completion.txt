char *r = p;
      char *w = p;
      while (*r != '\0')
      {
        if (*r == ' ')
        {
          if ((w > p) && (*(w-1) != ' '))
            *w++=' ';
          r++;
        }
        else
          *w++=*r++;
      }
      if ((w > p) && (*(w-1) == ' '))
        w--;
      *w='\0';