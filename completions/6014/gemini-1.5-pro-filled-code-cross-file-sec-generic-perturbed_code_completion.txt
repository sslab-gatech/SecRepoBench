p = xml;
      for (q = xml; *q != '\0'; q++)
      {
        *p = *q;
        if (isspace((int) ((unsigned char) *p)) != 0)
        {
          while (isspace((int) ((unsigned char) *(q + 1))) != 0)
            q++;
        }
        p++;
      }
      *p = '\0';

      /*
        Remove trailing space.
      */
      if ((p > xml) && (isspace((int) ((unsigned char) *(p-1))) != 0))
        *(--p) = '\0';
      xml=p;