{
  register char
    *r,
    *s;

  /*
    Remove leading spaces.
  */
  r=p;
  while (isspace((int) ((unsigned char) *r)))
    r++;
  s=p;
  while (*r != '\0')
  {
    if (isspace((int) ((unsigned char) *r)))
    {
      *s++=' ';
      while (isspace((int) ((unsigned char) *r)))
        r++;
    }
    else
      *s++ = *r++;
  }
  *s='\0';
  /*
    Remove trailing space.
  */
  if ((s > p) && (*(s-1) == ' '))
    *(s-1)='\0';
}