// Normalize spaces for non-CDATA attributes.
      p = xml;
      while (*p != '\0') {
        while (isspace((unsigned char)*p) && *p != '\0') {
          p++;
        }
        q = p;
        while (!isspace((unsigned char)*q) && *q != '\0') {
          q++;
        }
        if (q > p) {
          memmove(p, q, strlen(q) + 1);
        }
      }