char *src = p;
      char *dst = p;
      while (*src != '\0') {
        while (isspace((unsigned char)*src) && isspace((unsigned char)*(src + 1))) {
          src++;
        }
        *dst++ = *src++;
      }
      *dst = '\0';
      if (dst > p && isspace((unsigned char)*(dst - 1))) {
        *(dst - 1) = '\0';
      }