char *r = p;
      char *w = p;
      while (*r != '\0')
      {
        if (*r != ' ')
          *w++ = *r++;
        else
        {
          *w++ = ' ';
          while (*r == ' ')
            r++;
        }
      }
      *w = '\0';
      if ((w > p) && (*(w - 1) == ' '))
        *(w - 1) = '\0';