char *start = p;
      char *end = p;
      int in_word = 0;

      while (*end != '\0') {
        if (!isspace((int) ((unsigned char) *end))) {
          if (!in_word) {
            if (start != end) {
              *start = ' ';
              start++;
            }
            in_word = 1;
          }
          *start = *end;
          start++;
        } else {
          in_word = 0;
        }
        end++;
      }
      *start = '\0';