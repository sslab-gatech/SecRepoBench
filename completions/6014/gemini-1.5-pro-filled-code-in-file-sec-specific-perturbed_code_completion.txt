char
  *q;

q=xml;
while (isspace((int) ((unsigned char) *q)) != 0)
  q++;
for (p=q; *q != '\0'; q++)
{
  if (isspace((int) ((unsigned char) *q)) != 0)
    {
      while (isspace((int) ((unsigned char) *(q+1))) != 0)
        q++;
      *p++=' ';
    }
  else
    *p++=*q;
}
*p='\0';
if ((p > xml) && (*(p-1) == ' '))
  *(--p)='\0';