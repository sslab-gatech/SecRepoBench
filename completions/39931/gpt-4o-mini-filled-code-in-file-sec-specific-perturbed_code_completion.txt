if (argcount < 0) {
      mrb_raise(mrb, E_ARGUMENT_ERROR, "negative argument count");
    }

    if (argcount > MRB_FUNCALL_ARGC_MAX) {
      mrb_raise(mrb, E_ARGUMENT_ERROR, "Too long arguments. (limit=" MRB_STRINGIZE(MRB_FUNCALL_ARGC_MAX) ")");
    }

    mrb_stack_extend(mrb, argcount + 2); // Extend stack for arguments and block
    ci->stack[0] = self; // Set the receiver
    if (argcount > 0) {
      stack_copy(ci->stack + 1, argv, argcount); // Copy arguments to stack
    }
    ci->stack[argcount + 1] = blk; // Set the block