if (argcount < 0) {
      mrb_value exc = mrb_exc_new_str(mrb, E_ARGUMENT_ERROR, "negative argument count");
      mrb_exc_set(mrb, exc);
      goto L_RAISE;
    }

    if (argcount > MRB_CALL_MAXARGS) {
      mrb_value args = mrb_ary_new_capa(mrb, argcount);
      for (mrb_int i = 0; i < argcount; i++) {
        mrb_ary_push(mrb, args, argv[i]);
      }
      argv = RARRAY_PTR(args);
      argcount = MRB_CALL_MAXARGS;
    }

    mrb_stack_extend(mrb, argcount + 2);