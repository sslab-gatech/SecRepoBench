if (checkcompoundrep || forbiddenword) {
  std::string modified = compound_word;
  modified[i] = '\0';
  if (checkcompoundrep && cpdrep_check(modified.c_str(), i))
    return NULL;
  if (forbiddenword) {
    int j = i;
    if (utf8) {
      for (; j > 0 && (modified[j] & 0xc0) == 0x80; j--)
        ;
    }
    if (j > 0 && is_forbidden(modified.substr(0, j)))
      return NULL;
  }
  modified[i] = compound_word[i];
}