if ((checkcompoundrep && cpdrep_check(compound_word.c_str(), len)) ||
    cpdwordpair_check(compound_word.c_str(), len))
  return NULL;

// Check if the compound word contains repetitions of characters or patterns.
// If such a pattern is found, return NULL to indicate an invalid compound word.
// Compare the first part of the compound word with the current segment.
// If they match, temporarily modify the string to check for repetitions or
// forbidden word patterns in the modified segment.
// If a forbidden pattern or word is detected, restore the modified character
// and continue to the next iteration.
// If no issues are detected, restore the modified character and proceed.
std::string temp = compound_word.substr(0, i);
if (temp == compound_word.substr(i, len - i)) {
  // Check for repetitions of characters
  for (int j = 0; j < len - i; j++) {
    if (compound_word[i + j] == compound_word[i + j + 1]) {
      return NULL;
    }
  }

  // Check for forbidden word patterns
  if (check_forbidden(temp)) {
    return NULL;
  }
}

// Restore the modified character
compound_word[i] = ch;

return rv_first;