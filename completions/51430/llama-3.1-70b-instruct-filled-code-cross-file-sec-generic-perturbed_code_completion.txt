// Check if the compound word contains repetitions of characters or patterns.
// If such a pattern is found, return NULL to indicate an invalid compound word.
// Compare the first part of the compound word with the current segment.
// If they match, temporarily modify the string to check for repetitions or
// forbidden word patterns in the modified segment.
// If a forbidden pattern or word is detected, restore the modified character
// and continue to the next iteration.
// If no issues are detected, restore the modified character and proceed.

if (checkcompoundrep || forbiddenword) {
  size_t first_part_len = i;
  std::string first_part = compound_word.substr(0, first_part_len);
  std::string segment = compound_word.substr(i);

  // Check if the first part and the segment are identical
  if (first_part == segment) {
    // Temporarily modify the string to check for repetitions or forbidden word patterns
    std::string modified_segment = segment;
    modified_segment[0] = '\0';  // Null-terminate the modified segment

    // Check for forbidden words
    if (check_forbidden(modified_segment)) {
      return NULL;
    }

    // Check for repetitions of characters or patterns
    if (checkcompoundrep && cpdrep_check(modified_segment.c_str(), modified_segment.size())) {
      return NULL;
    }
  }
}