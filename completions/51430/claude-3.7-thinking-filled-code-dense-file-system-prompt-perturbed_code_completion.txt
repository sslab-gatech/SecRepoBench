// Temporarily restore the original character in st for checking
char ch_save = st[i];
st[i] = compound_word[i];

// Check if the compound word has repetitions of characters
if (checkcompoundrep && cpdrep_check(st.c_str(), len)) {
  st[i] = ch_save;
  return NULL;
}

// Check if it's a forbidden word pattern
if (forbiddenword && 
    (rv) && rv->astr && 
    TESTAFF(rv->astr, forbiddenword, rv->alen)) {
  st[i] = ch_save;
  return NULL;
}

// Restore the modified character
st[i] = ch_save;