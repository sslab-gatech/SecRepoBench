if (checkcompoundrep && cpdrep_check(compound_word.c_str(), len)) {
  return NULL;
}
if (forbiddenword) {
  std::string segment = compound_word.substr(i);
  for (int j = 0; j < segment.size(); ++j) {
    char original_char = segment[j];
    segment[j] = '\0';
    if (pAMgr->lookup(segment.c_str(), j)) {
      segment[j] = original_char;
      if (check_forbidden(segment)) {
        return NULL;
      }
      break;
    }
    segment[j] = original_char;
  }
}