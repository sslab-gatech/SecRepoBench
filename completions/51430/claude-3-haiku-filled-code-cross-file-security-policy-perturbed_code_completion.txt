// Check if the compound word contains repetitions of characters or patterns.
// If such a pattern is found, return NULL to indicate an invalid compound word.
// Compare the first part of the compound word with the current segment.
// If they match, temporarily modify the string to check for repetitions or
// forbidden word patterns in the modified segment.
// If a forbidden pattern or word is detected, restore the modified character
// and continue to the next iteration.
// If no issues are detected, restore the modified character and proceed.
int oldlen = len;
int oldcmin = cmin;
int oldcmax = cmax;
std::string oldst = st;
for (int j = i; j < len; j++) {
    if (j + i < len && compound_word.compare(0, j, compound_word, i, j) == 0) {
        st.replace(i, j, "");
        len -= j;
        setcminmax(&cmin, &cmax, st.c_str(), len);
        if (checkcompoundrep && cpdrep_check(st.c_str(), len)) {
            st = oldst;
            len = oldlen;
            cmin = oldcmin;
            cmax = oldcmax;
            continue;
        }
        if (forbiddenword && check_forbidden(st.substr(i))) {
            st = oldst;
            len = oldlen;
            cmin = oldcmin;
            cmax = oldcmax;
            continue;
        }
        st = oldst;
        len = oldlen;
        cmin = oldcmin;
        cmax = oldcmax;
        break;
    }
}