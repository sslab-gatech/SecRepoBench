if (checkcompoundrep || forbiddenword) {
  std::string modified_compound = compound_word;
  modified_compound[i] = '\0';
  
  if (checkcompoundrep && cpdrep_check(modified_compound.c_str(), i)) {
    return NULL;
  }
  
  if (forbiddenword) {
    struct hentry* rv = lookup(modified_compound.c_str(), i);
    if (rv && rv->astr && TESTAFF(rv->astr, forbiddenword, rv->alen)) {
      return NULL;
    }
  }
  
  modified_compound[i] = ch;
}