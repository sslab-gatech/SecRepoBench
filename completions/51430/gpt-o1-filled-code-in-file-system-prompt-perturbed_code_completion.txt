{
    // Check if the compound word contains a typical error pattern
    // (e.g., from the REP table) or is forbidden based on a dictionary entry.
    if (checkcompoundrep && cpdrep_check(compound_word.c_str(), len)) {
        return NULL;
    }
    if (forbiddenword) {
        // Look up the resulting string; if it is flagged as forbidden,
        // block this compound formation.
        struct hentry* h = lookup(compound_word.c_str(), len);
        while (h) {
            if (h->astr && TESTAFF(h->astr, forbiddenword, h->alen)) {
                return NULL;
            }
            h = h->next_homonym;
        }
    }
}