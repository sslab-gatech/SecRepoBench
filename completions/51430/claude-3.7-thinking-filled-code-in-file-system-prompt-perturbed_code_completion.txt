if (checkcompoundrep && cpdrep_check(compound_word.c_str(), len))
  return NULL;

if (forbiddenword) {
  // Check if the first part of the compound word is a forbidden word
  char c = st[i-1];
  st[i-1] = '\0';
  struct hentry* hw = lookup(st.c_str(), i-1);
  if (hw && hw->astr && TESTAFF(hw->astr, forbiddenword, hw->alen)) {
    st[i-1] = c;
    return NULL;
  }
  st[i-1] = c;
}