if (checkcompoundrep) {
  // Get the first part of the compound word (up to index i)
  std::string firstpart = compound_word.substr(0, i);
  
  // Check if the second part starts with the same characters as the first part
  if (i + firstpart.size() <= compound_word.size() && 
      compound_word.compare(i, firstpart.size(), firstpart) == 0) {
      
    // Temporarily modify the string to check for repetitive patterns
    char remember = st[i + firstpart.size()];
    st[i + firstpart.size()] = '\0';
    
    if (cpdrep_check(st.c_str(), i + firstpart.size())) {
      st[i + firstpart.size()] = remember;
      return NULL;
    }
    
    st[i + firstpart.size()] = remember;
  }
}

if (forbiddenword) {
  // Check if the first part of the compound word is a forbidden word
  char remember = st[i];
  st[i] = '\0';
  
  struct hentry* rv_temp = lookup(st.c_str(), i);
  if (rv_temp && rv_temp->astr && 
      TESTAFF(rv_temp->astr, forbiddenword, rv_temp->alen)) {
    st[i] = remember;
    return NULL;
  }
  
  st[i] = remember;
}