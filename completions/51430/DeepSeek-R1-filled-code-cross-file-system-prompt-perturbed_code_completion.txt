if (checkcompoundrep) {
    // Check if the compound word is a repetition of the first part
    if (i * 2 == len && compound_word.compare(0, i, compound_word, i, i) == 0) {
        return NULL;
    }
}

// Check if the second part is a forbidden word
std::string part = compound_word.substr(i);
struct hentry* rv_part = lookup(part.c_str(), part.size());
if (rv_part && TESTAFF(rv_part->astr, forbiddenword, rv_part->alen)) {
    return NULL;
}