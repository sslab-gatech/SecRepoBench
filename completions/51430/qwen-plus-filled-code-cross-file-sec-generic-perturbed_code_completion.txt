if (checkcompoundrep && cpdrep_check(st.substr(0, i).c_str(), i)) {
  return NULL;
}
if (forbiddenword) {
  std::string tmp = st.substr(0, i);
  if (check_forbidden(tmp)) {
    return NULL;
  }
}
char original_char = st[i];
st[i] = ch; // restore the character