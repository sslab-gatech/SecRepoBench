std::string first_part = compound_word.substr(0, i);
std::string current_segment = compound_word.substr(i);

if (first_part == current_segment) {
    char original_char = compound_word[i];
    compound_word[i] = '*';
    
    if ((checkcompoundrep && cpdrep_check(compound_word.c_str(), len)) ||
        (forbiddenword && check_forbidden(compound_word))) {
        compound_word[i] = original_char;
        continue;
    }
    
    compound_word[i] = original_char;
}