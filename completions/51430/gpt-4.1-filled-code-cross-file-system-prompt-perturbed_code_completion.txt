if (i > 0 && (checkcompoundrep || forbiddenword)) {
    // Temporarily replace the character at position i with '\0'
    char tmpch = st[i];
    st[i] = '\0';

    // Check for repeated patterns in the first part of the compound word
    if (checkcompoundrep && cpdrep_check(st.c_str(), i)) {
        st[i] = tmpch;
        return NULL;
    }

    // Check for forbidden words in the first part of the compound word
    if (forbiddenword) {
        struct hentry* tmp_rv = lookup(st.c_str(), i);
        while (tmp_rv) {
            if (tmp_rv->astr && TESTAFF(tmp_rv->astr, forbiddenword, tmp_rv->alen)) {
                st[i] = tmpch;
                return NULL;
            }
            tmp_rv = tmp_rv->next_homonym;
        }
    }

    // Restore the original character
    st[i] = tmpch;
}