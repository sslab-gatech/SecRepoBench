// masked region
struct hentry* AffixMgr::prefix_check(const std::string& word,
                                      int start,
                                      int len,
                                      char in_compound,
                                      const FLAG needflag) {
  struct hentry* rv = NULL;
  pfx = NULL;
  sfx = NULL;
  sfxappnd = NULL;
  sfxextra = 0;

  // first handle the special case of 0 length prefixes
  PfxEntry* pe = pStart[0];
  while (pe) {
    if (// fogemorpheme
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), onlyincompound, pe->getContLen())))) &&
            // needaffix on prefix or first suffix
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), needaffix, pe->getContLen())) ||
               (ppfx &&
                !(ppfx->getCont() &&
                  (TESTAFF(ppfx->getCont(), needaffix, ppfx->getContLen()))))) &&
            // permit prefixes in compounds
            ((in_compound != IN_CPD_END) ||
             (pe->getCont() &&
              (TESTAFF(pe->getCont(), compoundpermitflag, pe->getContLen())))) &&
            // compoundforbidflag in prefix and suffix
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundforbidflag, pe->getContLen())))) &&
            // compoundend flag in prefix and suffix
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundend, pe->getContLen())))) &&
            // compoundmiddle flag in prefix and suffix
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundmiddle, pe->getContLen())))) &&
            // check forbiddenwords
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), forbiddenword, pe->getContLen())) ||
               (ppfx &&
                !(ppfx->getCont() &&
                  (TESTAFF(ppfx->getCont(), forbiddenword, ppfx->getContLen()))))) &&
            // check needaffix flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), needaffix, pe->getContLen())) ||
               (ppfx &&
                !(ppfx->getCont() &&
                  (TESTAFF(ppfx->getCont(), needaffix, ppfx->getContLen()))))) &&
            // check compoundroot flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundroot, pe->getContLen())))) &&
            // check compoundflag flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundflag, pe->getContLen())))) &&
            // check compoundbegin flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundbegin, pe->getContLen())))) &&
            // check compoundmiddle flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundmiddle, pe->getContLen())))) &&
            // check compoundend flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundend, pe->getContLen())))) &&
            // check compoundpermitflag flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundpermitflag, pe->getContLen())))) &&
            // check compoundforbidflag flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundforbidflag, pe->getContLen())))) &&
            // check compoundroot flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundroot, pe->getContLen())))) &&
            // check nosuggest flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), nosuggest, pe->getContLen())))) &&
            // check nongramsuggest flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), nongramsuggest, pe->getContLen())))) &&
            // check substandard flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), substandard, pe->getContLen())))) &&
            // check compoundforbidflag flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundforbidflag, pe->getContLen())))) &&
            // check compoundend flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundend, pe->getContLen())))) &&
            // check compoundmiddle flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundmiddle, pe->getContLen())))) &&
            // check compoundbegin flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundbegin, pe->getContLen())))) &&
            // check compoundroot flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundroot, pe->getContLen())))) &&
            // check compoundpermitflag flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundpermitflag, pe->getContLen())))) &&
            // check compoundforbidflag flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundforbidflag, pe->getContLen())))) &&
            // check compoundroot flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundroot, pe->getContLen())))) &&
            // check nosuggest flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), nosuggest, pe->getContLen())))) &&
            // check nongramsuggest flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), nongramsuggest, pe->getContLen())))) &&
            // check substandard flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), substandard, pe->getContLen())))) &&
            // check compoundforbidflag flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundforbidflag, pe->getContLen())))) &&
            // check compoundend flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundend, pe->getContLen())))) &&
            // check compoundmiddle flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundmiddle, pe->getContLen())))) &&
            // check compoundbegin flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundbegin, pe->getContLen())))) &&
            // check compoundroot flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundroot, pe->getContLen())))) &&
            // check compoundpermitflag flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundpermitflag, pe->getContLen())))) &&
            // check compoundforbidflag flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundforbidflag, pe->getContLen())))) &&
            // check compoundroot flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundroot, pe->getContLen())))) &&
            // check nosuggest flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), nosuggest, pe->getContLen())))) &&
            // check nongramsuggest flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), nongramsuggest, pe->getContLen())))) &&
            // check substandard flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), substandard, pe->getContLen())))) &&
            // check compoundforbidflag flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundforbidflag, pe->getContLen())))) &&
            // check compoundend flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundend, pe->getContLen())))) &&
            // check compoundmiddle flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundmiddle, pe->getContLen())))) &&
            // check compoundbegin flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundbegin, pe->getContLen())))) &&
            // check compoundroot flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundroot, pe->getContLen())))) &&
            // check compoundpermitflag flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundpermitflag, pe->getContLen())))) &&
            // check compoundforbidflag flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundforbidflag, pe->getContLen())))) &&
            // check compoundroot flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundroot, pe->getContLen())))) &&
            // check nosuggest flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), nosuggest, pe->getContLen())))) &&
            // check nongramsuggest flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), nongramsuggest, pe->getContLen())))) &&
            // check substandard flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), substandard, pe->getContLen())))) &&
            // check compoundforbidflag flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundforbidflag, pe->getContLen())))) &&
            // check compoundend flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundend, pe->getContLen())))) &&
            // check compoundmiddle flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundmiddle, pe->getContLen())))) &&
            // check compoundbegin flag
            ((in_compound != IN_CPD_NOT) ||
             !(pe->getCont() &&
               (TESTAFF(pe->getCont(), compoundbegin, pe->getContLen())))) &&
            // check compoundroo