if (endp == str_end) {
    // No fractional part detected; treat as an integer value.
    primitivevalue = plist_new_uint((uint64_t)intpart);
} else {
    // Fractional or exponent part detected; treat as a floating-point value.
    errno = 0;
    double realval = strtod(str_val, &endp);
    if (errno == ERANGE || endp != str_end) {
        PLIST_JSON_ERR("%s: invalid floating point number '%.*s'\n", __func__, (int)str_len, str_val);
        return NULL;
    }
    primitivevalue = plist_new_real(realval);
}