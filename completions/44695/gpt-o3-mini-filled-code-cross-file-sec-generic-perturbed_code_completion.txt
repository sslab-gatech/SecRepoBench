if (endp == str_end) {
    primitivevalue = plist_new_uint((uint64_t)intpart);
} else {
    errno = 0;
    char num_buf[64];
    if (str_len >= sizeof(num_buf)) {
        PLIST_JSON_ERR("%s: numeric value too long\n", __func__);
        return NULL;
    }
    memcpy(num_buf, str_val, str_len);
    num_buf[str_len] = '\0';
    char* float_end = NULL;
    double dbl_val = strtod(num_buf, &float_end);
    if (errno == ERANGE) {
        PLIST_JSON_ERR("%s: floating point value out of range\n", __func__);
        return NULL;
    }
    if ((size_t)(float_end - num_buf) != str_len) {
        PLIST_JSON_ERR("%s: invalid numeric format\n", __func__);
        return NULL;
    }
    primitivevalue = plist_new_real(dbl_val);
}