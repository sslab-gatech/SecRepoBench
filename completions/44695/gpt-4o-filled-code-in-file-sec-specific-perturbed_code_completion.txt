if (endp < str_end && *endp == '.') {
            endp++;
            double frac = 0.0;
            double base = 0.1;
            while (endp < str_end && isdigit(*endp)) {
                frac += (*endp - '0') * base;
                base *= 0.1;
                endp++;
            }
            intpart += (is_neg ? -frac : frac);
        }

        if (endp < str_end && (*endp == 'e' || *endp == 'E')) {
            endp++;
            int exp_is_neg = 0;
            if (*endp == '-') {
                exp_is_neg = 1;
                endp++;
            } else if (*endp == '+') {
                endp++;
            }
            int exp = 0;
            while (endp < str_end && isdigit(*endp)) {
                exp = exp * 10 + (*endp - '0');
                endp++;
            }
            double exp_factor = pow(10, exp_is_neg ? -exp : exp);
            intpart *= exp_factor;
        }

        if (endp == str_val || endp != str_end) {
            PLIST_JSON_ERR("%s: invalid numeric value '%.*s' encountered\n", __func__, (int)str_len, str_val);
        } else {
            primitivevalue = plist_new_real(intpart);
        }