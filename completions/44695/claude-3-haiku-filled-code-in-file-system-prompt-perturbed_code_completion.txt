char* endp = (char*)str_val;
double realpart = 0.0;
int64_t intpart = parse_decimal(str_val, str_end, &endp);
if (endp < str_end && *endp == '.') {
    endp++;
    realpart = parse_decimal(endp, str_end, &endp);
    realpart /= pow(10, endp - (str_val + ti->tokens[*index].start));
}
if (realpart != 0.0) {
    primitivevalue = plist_new_real(intpart + realpart);
} else {
    primitivevalue = plist_new_uint(intpart);
}
if (endp < str_end) {
    PLIST_JSON_ERR("%s: invalid character '%c' in numeric value\n", __func__, *endp);
    plist_free(primitivevalue);
    primitivevalue = NULL;
}