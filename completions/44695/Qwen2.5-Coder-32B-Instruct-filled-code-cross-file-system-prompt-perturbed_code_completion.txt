if (*endp == '\0') {
    // No fractional or exponent part, treat as integer
    primitivevalue = plist_new_uint(intpart);
} else if (*endp == '.' || *endp == 'e' || *endp == 'E') {
    // Parse as floating point
    double floatpart = strtod(str_val, &endp);
    if (*endp == '\0') {
        primitivevalue = plist_new_real(floatpart);
    } else {
        PLIST_JSON_ERR("%s: invalid numeric value '%.*s' encountered\n", __func__, (int)str_len, str_val);
    }
} else {
    PLIST_JSON_ERR("%s: invalid numeric value '%.*s' encountered\n", __func__, (int)str_len, str_val);
}