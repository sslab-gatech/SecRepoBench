if (endp < str_end && *endp == '.') {
            endp++;
            char* strendp = NULL;
            double fractional = strtod(endp, &strendp);
            if (strendp == endp) {
                PLIST_JSON_ERR("%s: invalid floating point value '%.*s'\n", __func__, (int)str_len, str_val);
                return NULL;
            }
            endp = strendp;
            double exp = 1.0;
            if (endp < str_end && (*endp == 'e' || *endp == 'E')) {
                endp++;
                int64_t exp_val = parse_decimal(endp, str_end, &endp);
                exp = pow(10, exp_val);
            }
            if (endp != str_end) {
                PLIST_JSON_ERR("%s: invalid floating point value '%.*s'\n", __func__, (int)str_len, str_val);
                return NULL;
            }
            double realval = (intpart + fractional) * exp;
            if (!isfinite(realval)) {
                PLIST_JSON_ERR("%s: floating point value '%.*s' is not representable\n", __func__, (int)str_len, str_val);
                return NULL;
            }
            primitivevalue = plist_new_real(realval);
        } else {
            if (endp != str_end) {
                PLIST_JSON_ERR("%s: invalid integer value '%.*s'\n", __func__, (int)str_len, str_val);
                return NULL;
            }
            primitivevalue = plist_new_uint(intpart);
        }