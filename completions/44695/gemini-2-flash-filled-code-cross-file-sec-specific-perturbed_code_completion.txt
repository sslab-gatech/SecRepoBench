if (endp > str_val && endp < str_end) {
            if (*endp == '.' || *endp == 'e' || *endp == 'E') {
                char* endptr;
                double floatpart = strtod(str_val, &endptr);
                if (endptr == str_val) {
                    PLIST_JSON_ERR("%s: invalid floating point value '%.*s'\n", __func__, (int)str_len, str_val);
                    return NULL;
                } else if (errno == ERANGE) {
                    PLIST_JSON_ERR("%s: floating point value '%.*s' out of range\n", __func__, (int)str_len, str_val);
                    return NULL;
                } else if (endptr != str_end) {
                    PLIST_JSON_ERR("%s: invalid character in floating point value '%.*s'\n", __func__, (int)str_len, str_val);
                    return NULL;
                }
                primitivevalue = plist_new_real(floatpart);
            } else {
                PLIST_JSON_ERR("%s: invalid character in numeric value '%.*s'\n", __func__, (int)str_len, str_val);
                return NULL;
            }
        } else {
            primitivevalue = plist_new_integer(intpart);
        }