if (endp < str_end && *endp == '.') {
            // Parse fractional part
            endp++;
            double fraction = 0.0;
            double divisor = 10.0;
            while (endp < str_end && isdigit(*endp)) {
                fraction += (*endp - '0') / divisor;
                divisor *= 10.0;
                endp++;
            }
            double value = intpart + (intpart < 0 ? -fraction : fraction);

            // Parse exponent part if present
            if (endp < str_end && (*endp == 'e' || *endp == 'E')) {
                endp++;
                int exp_sign = 1;
                if (*endp == '-') {
                    exp_sign = -1;
                    endp++;
                } else if (*endp == '+') {
                    endp++;
                }
                int exponent = 0;
                while (endp < str_end && isdigit(*endp)) {
                    exponent = exponent * 10 + (*endp - '0');
                    endp++;
                }
                value *= pow(10, exp_sign * exponent);
            }

            if (endp == str_end) {
                primitivevalue = plist_new_real(value);
            } else {
                PLIST_JSON_ERR("%s: invalid characters in floating-point value\n", __func__);
            }
        } else if (endp == str_end) {
            // Successfully parsed an integer
            if (intpart >= 0) {
                primitivevalue = plist_new_uint((uint64_t)intpart);
            } else {
                primitivevalue = plist_new_int(intpart);
            }
        } else {
            PLIST_JSON_ERR("%s: invalid characters in numeric value\n", __func__);
        }