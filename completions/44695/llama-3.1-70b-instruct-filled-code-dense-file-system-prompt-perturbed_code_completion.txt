if (endp == str_val) {
    PLIST_JSON_ERR("%s: failed to parse numeric value\n", __func__);
    return NULL;
}
if (*endp == '.') {
    double fractional = parse_fractional(str_val, str_end, &endp);
    if (endp == str_val) {
        PLIST_JSON_ERR("%s: failed to parse fractional part\n", __func__);
        return NULL;
    }
    if (*endp == 'e' || *endp == 'E') {
        int exponent = parse_exponent(str_val, str_end, &endp);
        if (endp == str_val) {
            PLIST_JSON_ERR("%s: failed to parse exponent\n", __func__);
            return NULL;
        }
        double real_value = intpart * pow(10, exponent) + fractional * pow(10, exponent);
        plist_data_t data = plist_new_plist_data();
        data->type = PLIST_REAL;
        data->real = real_value;
        primitivevalue = plist_new_node(data);
    } else {
        double real_value = intpart + fractional;
        plist_data_t data = plist_new_plist_data();
        data->type = PLIST_REAL;
        data->real = real_value;
        primitivevalue = plist_new_node(data);
    }
} else if (*endp == 'e' || *endp == 'E') {
    int exponent = parse_exponent(str_val, str_end, &endp);
    if (endp == str_val) {
        PLIST_JSON_ERR("%s: failed to parse exponent\n", __func__);
        return NULL;
    }
    double real_value = intpart * pow(10, exponent);
    plist_data_t data = plist_new_plist_data();
    data->type = PLIST_REAL;
    data->real = real_value;
    primitivevalue = plist_new_node(data);
} else {
    plist_data_t data = plist_new_plist_data();
    data->type = PLIST_UINT;
    data->uint = intpart;
    primitivevalue = plist_new_node(data);
}