if (endp < str_end && *endp == '.') {
            (*endp)++;
            double realpart = intpart;
            double fracpart = 0.0;
            double pow10 = 0.1;
            while (endp < str_end && isdigit(**endp)) {
                fracpart += pow10 * (**endp - '0');
                pow10 *= 0.1;
                (*endp)++;
            }
            realpart += fracpart;
            if (endp < str_end && (*endp == 'e' || *endp == 'E')) {
                (*endp)++;
                int exp = 0;
                int is_exp_neg = 0;
                if (*endp == '-') {
                    is_exp_neg = 1;
                    (*endp)++;
                } else if (*endp == '+') {
                    (*endp)++;
                }
                while (endp < str_end && isdigit(**endp)) {
                    exp = exp * 10 + (**endp - '0');
                    (*endp)++;
                }
                if (is_exp_neg) {
                    exp = -exp;
                }
                realpart *= pow(10, exp);
            }
            primitivevalue = plist_new_real(realpart);
        } else {
            primitivevalue = plist_new_uint(intpart);
        }