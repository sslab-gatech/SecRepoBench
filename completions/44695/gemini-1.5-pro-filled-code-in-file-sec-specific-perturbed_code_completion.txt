if (endp < str_end && *endp == '.') {
            endp++;
            char* strendp = NULL;
            double fractpart = strtod(endp, &strendp);
            if (strendp == endp) {
                PLIST_JSON_ERR("%s: invalid floating point value '%.*s'\n", __func__, (int)str_len, str_val);
                return NULL;
            }
            endp = strendp;
            double realval = (double)intpart + fractpart;
            if (endp < str_end && (*endp == 'e' || *endp == 'E')) {
                endp++;
                int64_t exp = parse_decimal(endp, str_end, &endp);
                realval = realval * pow(10, exp);
            }
            if (endp != str_end) {
                PLIST_JSON_ERR("%s: invalid floating point value '%.*s'\n", __func__, (int)str_len, str_val);
                return NULL;
            }
            primitivevalue = plist_new_real(realval);
        } else if (endp != str_end) {
            PLIST_JSON_ERR("%s: invalid integer value '%.*s'\n", __func__, (int)str_len, str_val);
            return NULL;
        } else {
            primitivevalue = plist_new_uint(intpart);
        }