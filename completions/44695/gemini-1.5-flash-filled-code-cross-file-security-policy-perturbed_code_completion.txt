char* fendp = (char*)str_end;
        double realpart;
        if (endp == str_val) {
            PLIST_JSON_ERR("%s: invalid number format\n", __func__);
            return NULL;
        }
        if (endp < fendp && *endp == '.') {
            endp++;
            if (endp == fendp) {
                PLIST_JSON_ERR("%s: invalid number format\n", __func__);
                return NULL;
            }
            double fraction = parse_decimal(endp, fendp, &endp);
            if (endp == (char*)str_val) {
                PLIST_JSON_ERR("%s: invalid number format\n", __func__);
                return NULL;
            }
            realpart = intpart + fraction;
        } else {
            realpart = (double)intpart;
        }
        if (endp < fendp && (*endp == 'e' || *endp == 'E')) {
            endp++;
            if (endp == fendp) {
                PLIST_JSON_ERR("%s: invalid number format\n", __func__);
                return NULL;
            }
            int64_t exponent = parse_decimal(endp, fendp, &endp);
            if (endp == (char*)str_val) {
                PLIST_JSON_ERR("%s: invalid number format\n", __func__);
                return NULL;
            }
            realpart *= pow(10, exponent);
        }
        if (endp != fendp) {
            PLIST_JSON_ERR("%s: invalid number format\n", __func__);
            return NULL;
        }
        primitivevalue = plist_new_real(realpart);