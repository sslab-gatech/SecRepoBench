static plist_t parse_primitive(const char* js, jsmntok_info_t* ti, int* index)
{
    // ... (previous code)

    if (isdigit(str_val[0]) || (str_val[0] == '-' && str_val+1 < str_end && isdigit(str_val[1]))) {
        char* endp = (char*)str_val;
        int64_t intpart = parse_decimal(str_val, str_end, &endp);

        // Check if the parsed value is an integer or a floating point number
        if (endp == str_end || (*endp == '.' && endp+1 < str_end && isdigit(endp[1]))) {
            // Parse the fractional part and the exponent part if present
            double realpart = (double)intpart;
            if (*endp == '.') {
                realpart += parse_decimal(endp+1, str_end, &endp);
                if (endp == str_end || (*endp == 'e' || *endp == 'E')) {
                    int64_t exp = parse_decimal(endp+1, str_end, &endp);
                    realpart *= pow(10, exp);
                }
            }

            plist_t node;
            plist_data_t data = plist_new_plist_data();
            data->type = PLIST_REAL;
            data->realval = realpart;
            node = plist_new_node(data);

            (*index)++;
            return node;
        } else {
            // Create a plist node for an unsigned integer
            plist_t node;
            plist_data_t data = plist_new_plist_data();
            data->type = PLIST_UINT;
            data->length = (intpart < 0) ? 64 : 32;
            data->intval = (intpart < 0) ? -(uint64_t)intpart : (uint64_t)intpart;
            node = plist_new_node(data);

            (*index)++;
            return node;
        }
    }

    // ... (rest of the function)
}