if (endp < str_end && *endp == '.') {
            endp++;
            char* strendp = NULL;
            double fractional = strtod(endp, &strendp);
            if (strendp == endp || strendp < str_end) {
                PLIST_JSON_ERR("%s: invalid floating point value '%.*s'\n", __func__, (int)str_len, str_val);
                break;
            }
            double realval = intpart + fractional;
            primitivevalue = plist_new_real(realval);
        } else if (endp < str_end && (*endp == 'e' || *endp == 'E')) {
            endp++;
            char* strendp = NULL;
            int64_t exponent = strtol(endp, &strendp, 10);
            if (strendp == endp || strendp < str_end) {
                PLIST_JSON_ERR("%s: invalid floating point value '%.*s'\n", __func__, (int)str_len, str_val);
                break;
            }
            double realval = intpart * pow(10, exponent);
            primitivevalue = plist_new_real(realval);

        } else if (intpart > UINT64_MAX || (intpart == UINT64_MAX && is_neg)) {
            double realval = intpart;
            primitivevalue = plist_new_real(realval);
        }
        else if (intpart >= 0) {
            primitivevalue = plist_new_uint(intpart);
        } else {
            primitivevalue = plist_new_uint(intpart);
        }