char* endp = (char*)str_val;
        double floatpart = parse_decimal(str_val, str_end, &endp);
        if (endp == str_val) {
            // The entire string is a number, but it's not a valid floating point number.
            PLIST_JSON_ERR("%s: invalid numeric value '%.*s' encountered\n", __func__, (int)str_len, str_val);
            return NULL;
        }

        // Check if the parsed number is an integer.
        if (*endp == '\0') {
            // It's an integer.
            uint64_t intval = (uint64_t)intpart;
            primitivevalue = plist_new_uint(intval);
        } else {
            // It's a floating point number.
            primitivevalue = plist_new_real(floatpart);
        }