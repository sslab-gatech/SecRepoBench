ret = flb_time_pop_from_msgpack(&tms, &result, &obj);

if (root.type != MSGPACK_OBJECT_ARRAY) {
    return -1;
}

/* decode expected timestamp only (integer, float or ext) */
o = root.via.array.ptr[0];
if (o.type != MSGPACK_OBJECT_POSITIVE_INTEGER &&
    o.type != MSGPACK_OBJECT_FLOAT &&
    o.type != MSGPACK_OBJECT_EXT) {
    return -1;
}

/* This is a Fluent Bit record, just do the proper unpacking/printing */
flb_time_pop_from_msgpack(&tms, &result, &obj);

fprintf(stdout, "[%zd] [%"PRIu32".%09lu, ", cnt,
        (uint32_t) tms.tm.tv_sec, tms.tm.tv_nsec);
msgpack_object_print(stdout, *obj);
fprintf(stdout, "]\n");

return 0;