if (result.data.type!= MSGPACK_OBJECT_ARRAY) {
    msgpack_unpacked_destroy(&result);
    return NULL;
}

if (result.data.via.array.size!= 2) {
    msgpack_unpacked_destroy(&result);
    return NULL;
}

parsed_object = result.data.via.array.ptr[0];
if (parsed_object.type!= MSGPACK_OBJECT_POSITIVE_INTEGER &&
    parsed_object.type!= MSGPACK_OBJECT_FLOAT &&
    parsed_object.type!= MSGPACK_OBJECT_EXT) {
    msgpack_unpacked_destroy(&result);
    return NULL;
}

flb_time_pop_from_msgpack(&tms, &result, &obj);

map = result.data.via.array.ptr[1];
if (map.type!= MSGPACK_OBJECT_MAP) {
    msgpack_unpacked_destroy(&result);
    return NULL;
}

map_size = map.via.map.size;