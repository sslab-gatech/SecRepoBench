// Extract the root object from the unpacked result and ensure it is an array
// with exactly two elements: a timestamp and a record. If these conditions
// are not met, skip the current iteration.
if (parsed_object.type!= MSGPACK_OBJECT_ARRAY ||
    parsed_object.via.array.size!= 2) {
    continue;
}

// Unpack the timestamp using a helper function
obj = &parsed_object.via.array.ptr[0];
if (flb_time_pop_from_msgpack(&tms, &result, obj)!= 0) {
    continue;
}

// Assign the second element of the array to a map object
map = parsed_object.via.array.ptr[1];

// Determine the size of the map
map_size = map.via.map.size;
if (date_key!= NULL) {
    map_size++;
}