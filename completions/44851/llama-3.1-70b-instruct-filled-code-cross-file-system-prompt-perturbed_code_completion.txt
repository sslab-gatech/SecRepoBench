if (p->scanline!= (double) ycoordinate)
  {
    p->scanline=(double) ycoordinate;
    p->highwater=(size_t) i;
  }
if ((x < p->points[i-1].x)!= (x < p->points[i].x))
  {
    if (p->points[i-1].y == p->points[i].y)
      {
        if (p->points[i-1].y == ycoordinate)
          {
            if (p->points[i-1].x < p->points[i].x)
              winding_number++;
            else
              winding_number--;
          }
        continue;
      }
    if (p->points[i-1].y < p->points[i].y)
      {
        if (p->points[i-1].y <= ycoordinate)
          {
            if (p->points[i].y > ycoordinate)
              {
                if (p->points[i-1].x < p->points[i].x)
                  winding_number++;
                else
                  winding_number--;
              }
          }
      }
    else
      {
        if (p->points[i].y <= ycoordinate)
          {
            if (p->points[i-1].y > ycoordinate)
              {
                if (p->points[i-1].x < p->points[i].x)
                  winding_number--;
                else
                  winding_number++;
              }
          }
      }
  }