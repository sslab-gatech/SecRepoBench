for (i = 0; i < (ssize_t)p->number_points; i++) {
  if (((double)x <= p->points[i].x) && ((double)ycoordinate >= p->points[i].y) && ((double)ycoordinate < p->points[(i + 1) % p->number_points].y))
    winding_number += p->direction ? 1 : -1;
  else if (((double)x > p->points[i].x) && ((double)ycoordinate >= p->points[i].y) && ((double)ycoordinate < p->points[(i+1) % p->number_points].y))
    winding_number += p->direction ? -1 : 1;
}