for (i=0; i < (ssize_t) p->number_points; i++)
{
  if ((ycoordinate <= p->points[i].y) && (ycoordinate > p->points[i+1].y))
  {
    if (x <= (p->points[i].x + (p->points[i+1].x - p->points[i].x) *
        (ycoordinate - p->points[i].y) / (p->points[i+1].y - p->points[i].y)))
    {
      if (p->points[i].y > p->points[i+1].y)
        winding_number++;
      else
        winding_number--;
    }
  }
}