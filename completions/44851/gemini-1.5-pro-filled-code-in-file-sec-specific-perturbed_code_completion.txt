for (i = 0; i < (ssize_t)p->number_points; i++)
{
  if (i == 0)
  {
    if ((double)x <= ((p->points[i].x)))
      winding_number += p->direction ? 1 : -1;
  }
  else
    if (((double)x <= (p->points[i].x)) &&
        ((double)x > (p->points[i - 1].x)))
    {
      winding_number += p->direction ? 1 : -1;
    }
}