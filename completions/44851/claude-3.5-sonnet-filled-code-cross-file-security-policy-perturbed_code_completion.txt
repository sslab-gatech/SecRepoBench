for (i = 0; i < (ssize_t) p->number_points; i++)
{
  if ((double) ycoordinate <= (p->points[i-1].y-mid-0.5))
    break;
  if ((double) ycoordinate > (p->points[i].y+mid+0.5))
    continue;
  if (p->scanline != (double) ycoordinate)
    {
      p->scanline = (double) ycoordinate;
      p->highwater = (size_t) i;
    }
  if ((p->points[i-1].y <= ycoordinate) && (p->points[i].y > ycoordinate))
    {
      if (p->points[i-1].x > p->points[i].x)
        winding_number--;
      else
        if (p->points[i-1].x < p->points[i].x)
          winding_number++;
    }
  else
    if ((p->points[i-1].y > ycoordinate) && (p->points[i].y <= ycoordinate))
      {
        if (p->points[i-1].x < p->points[i].x)
          winding_number--;
        else
          if (p->points[i-1].x > p->points[i].x)
            winding_number++;
      }
}