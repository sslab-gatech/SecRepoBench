for (i = 1; i < (ssize_t) p->number_points; i++)
{
  double y1 = p->points[i-1].y;
  double y2 = p->points[i].y;
  double isLeft;
  if (y1 <= (double) ycoordinate)
  {
    if (y2 > (double) ycoordinate)
    {
      isLeft = (p->points[i].x - p->points[i-1].x) *
               ((double) ycoordinate - p->points[i-1].y) -
               ((double)x - p->points[i-1].x) * (p->points[i].y - p->points[i-1].y);
      if (isLeft > 0.0)
        winding_number++;
    }
  }
  else
  {
    if (y2 <= (double) ycoordinate)
    {
      isLeft = (p->points[i].x - p->points[i-1].x) *
               ((double) ycoordinate - p->points[i-1].y) -
               ((double)x - p->points[i-1].x) * (p->points[i].y - p->points[i-1].y);
      if (isLeft < 0.0)
        winding_number--;
    }
  }
}