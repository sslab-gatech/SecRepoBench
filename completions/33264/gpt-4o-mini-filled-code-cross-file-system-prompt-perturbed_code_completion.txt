int stop = start + nitems;
if (nitems <= 0) {
  return 0;  // No items to process
}
if (destsize < nitems * hdr->typesize) {
  return BLOSC2_ERROR_DESTSIZE;  // Destination buffer too small
}
int32_t* bstarts = context->bstarts;
bool memcpyed = context->header_flags & (uint8_t)BLOSC_MEMCPYED;
if (memcpyed) {
  // Handle memcpyed data
  // No need for block starts, just copy directly
  memcpy(dest, _src + context->header_overhead + start * hdr->typesize, nitems * hdr->typesize);
  return nitems * hdr->typesize;
}