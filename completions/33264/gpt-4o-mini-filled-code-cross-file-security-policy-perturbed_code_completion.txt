if (nitems <= 0 || destsize <= 0) {
    return BLOSC2_ERROR_INVALID_PARAM; // Handle invalid parameters
}

if (nitems * hdr->typesize > destsize) {
    return BLOSC2_ERROR_BUFFER_TOO_SMALL; // Ensure destination buffer is large enough
}

int stop = start + nitems; // Calculate stop position
if (stop > hdr->nitems) {
    stop = hdr->nitems; // Adjust stop if it exceeds the number of items
}