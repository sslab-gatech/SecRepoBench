int32_t ntbytes = 0;
  int32_t startb, stopb, bsize2, j;
  bool memcpyed = context->header_flags & (uint8_t)BLOSC_MEMCPYED;

  if (nitems == 0) {
    return 0;
  }

  if ((size_t)nitems * hdr->typesize > (size_t)destsize) {
    BLOSC_TRACE_ERROR("Destination buffer not large enough for decompressed data.");
    return -1; // Return error code
  }

  if (start < 0 || nitems < 0 || start + nitems > srcsize / hdr->typesize) {
    BLOSC_TRACE_ERROR("Invalid start or number of items specified.");
    return -1; // Return error code
  }