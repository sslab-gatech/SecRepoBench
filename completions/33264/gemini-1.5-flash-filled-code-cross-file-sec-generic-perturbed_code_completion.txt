int32_t j, bsize, ebsize, bsize2, startb, stopb, leftoverblock;
  int32_t ntbytes = 0;
  int32_t stop = start + nitems;
  bool memcpyed = hdr->flags & (uint8_t)BLOSC_MEMCPYED;
  if (nitems <= 0) {
    return 0;
  }
  if (destsize < (size_t)nitems * hdr->typesize) {
    return BLOSC2_ERROR_DEST_BUFFER_TOO_SMALL;
  }
  if (start < 0 || stop > hdr->nbytes) {
    return BLOSC2_ERROR_INVALID_RANGE;
  }
  if (memcpyed || hdr->typesize == 0) {
    size_t nbytes = (size_t)nitems * hdr->typesize;
    memcpy(dest, _src + start * hdr->typesize, nbytes);
    return (int32_t)nbytes;
  }