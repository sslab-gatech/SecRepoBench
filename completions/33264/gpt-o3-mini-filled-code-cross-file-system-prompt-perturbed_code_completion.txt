int stop = start + nitems;
if (nitems <= 0) {
  return 0;
}
if (destsize < nitems * hdr->typesize) {
  BLOSC_TRACE_ERROR("Destination buffer is not large enough for the requested decompressed data");
  return BLOSC2_ERROR_BUFFER;
}
if (start < 0 || stop > hdr->nitems) {
  BLOSC_TRACE_ERROR("Requested range [%d, %d) is out of bounds (total items: %d)", start, stop, hdr->nitems);
  return BLOSC2_ERROR_ITEM_RANGE;
}

int32_t ntbytes = 0;
bool memcpyed = ((hdr->flags & (uint8_t)BLOSC_MEMCPYED) != 0);
if (!context->do_compress && context->special_type) {
  memcpyed = true;
}