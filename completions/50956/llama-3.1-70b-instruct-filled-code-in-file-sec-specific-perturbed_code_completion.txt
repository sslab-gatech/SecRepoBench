_cmsStageMatrixData* m1 = (_cmsStageMatrixData*) cmsStageData(Matrix1);
_cmsStageMatrixData* m2 = (_cmsStageMatrixData*) cmsStageData(Matrix2);

// Retrieve data from two matrix stages in the pipeline.
// Ensure that the input offset of the first matrix is zero.
// Multiply the matrices to combine them into a single result matrix.
// Determine if the resulting matrix is an identity matrix and whether the offset is null.
// Set the appropriate flags to indicate if the matrix can be optimized away due to being an identity matrix.

memcpy(&res, m2->Double, sizeof(res));
_cmsMAT3per(&res, (cmsMAT3*)m2->Double, (cmsMAT3*)m1->Double);

Offset = m2->Offset;

if (m1->Offset!= NULL) {
    return FALSE; // Input offset of the first matrix is not zero.
}

if (_cmsMAT3isIdentity(&res) && Offset == NULL) {
    // We can get rid of full matrix
    isIdentityMatrix = TRUE;
}