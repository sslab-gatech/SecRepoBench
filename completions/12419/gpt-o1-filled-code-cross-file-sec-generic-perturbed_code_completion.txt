if (idtable == NULL)
        return(-1);

    ID = xmlNodeListGetString(doc, attr->children, 1);
    if (ID == NULL)
        return(-1);

    id = xmlHashLookup(idtable, ID);
    xmlFree(ID);
    if (id == NULL || id->attr != attr)
        return(-1);

    if (id->value != NULL)
        xmlFree(id->value);
    id->value = xmlStrdup(attr->name);
    if (id->value == NULL)
        return(-1);

    id->attr = NULL;
    return(0);