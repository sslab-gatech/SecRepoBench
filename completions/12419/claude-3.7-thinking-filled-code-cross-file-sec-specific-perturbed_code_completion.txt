if (idtable == NULL)
    return(-1);

ID = xmlNodeListGetString(doc, attr->children, 1);
if (ID == NULL)
    return(-1);

id = xmlHashLookup(idtable, ID);
if (id == NULL || id->attr != attr) {
    xmlFree(ID);
    return(-1);
}

// Disassociate the attribute from the ID entry
id->attr = NULL;
xmlFree(ID);

// Update the attribute type
attr->atype = 0;
return(0);