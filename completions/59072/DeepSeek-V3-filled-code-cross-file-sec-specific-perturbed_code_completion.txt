if (op1_string == op2_string) {
    result_str = zend_string_extend(op1_string, result_len, 0);
    if (shouldfreeopstring) {
        shouldfreeopstring = false;
    }
} else {
    result_str = zend_string_extend(op1_string, result_len, 0);
    if (shouldfreeopstring) {
        zend_string_release(op1_string);
        shouldfreeopstring = false;
    }
}
if (result == orig_op1) {
    i_zval_ptr_dtor(result);
}