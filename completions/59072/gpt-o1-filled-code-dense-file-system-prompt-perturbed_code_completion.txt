{
	/* Attempt in-place extension of op1_string to accommodate the concatenation */
	result_str = zend_string_extend(op1_string, result_len, 0);

	/* If we are about to reuse the original result zval, free it but keep the string alive */
	if (result == orig_op1) {
		i_zval_ptr_dtor(result);
	}

	/*
	 * If op1_string and op2_string point to the same zend_string (e.g. $a .= $a),
	 * then ensure op2_string also points to the new extended string so it won't
	 * be released twice at the end.
	 */
	if (op1_string == op2_string) {
		op2_string = result_str;
	}
}