if (result == op1) {
		if (UNEXPECTED(op1 == op2)) {
			op2_string = op1_string;
			goto has_op2_string;
		}
		zend_string *temp_str = zend_string_concat(op1_string, op2_string, 0);
		if (UNEXPECTED(EG(exception))) {
			zend_string_release(op1_string);
			zend_string_release(op2_string);
			if (orig_op1 != result) {
				ZVAL_UNDEF(result);
			}
			return FAILURE;
		}
		zend_string_release(op1_string);
		zend_string_release(op2_string);
		op1_string = temp_str;
		shouldfreeopstring = false;
	} else {
		zend_string *temp_str = zend_string_concat(op1_string, op2_string, 0);
		if (UNEXPECTED(EG(exception))) {
			zend_string_release(op1_string);
			zend_string_release(op2_string);
			if (orig_op1 != result) {
				ZVAL_UNDEF(result);
			}
			return FAILURE;
		}
		zend_string_release(op1_string);
		zend_string_release(op2_string);
		ZVAL_STR(result, temp_str);
		temp_str = NULL;
	}