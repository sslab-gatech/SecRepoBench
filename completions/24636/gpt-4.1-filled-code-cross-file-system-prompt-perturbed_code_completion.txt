if (decodercontext->has_ppm) {
    // If PPM (Packed Packet Headers, Main header) is present, initialize the packed_headers_stream
    bytestream2_init(&decodercontext->packed_headers_stream, decodercontext->packed_headers, decodercontext->packed_headers_size);
}
if (decodercontext->has_ppt && tile->tp_idx == 0) {
    // If PPT (Packed Packet Headers, Tile-part header) is present and this is the first tile-part, initialize the packed_headers_stream
    bytestream2_init(&decodercontext->packed_headers_stream, decodercontext->packed_headers, decodercontext->packed_headers_size);
}
{
    // Set up the data stream for the current tile-part
    int size = tp->tp_end - bytestream2_tell(&decodercontext->g);
    if (size < 0 || bytestream2_get_bytes_left(&decodercontext->g) < size) {
        av_log(decodercontext->avctx, AV_LOG_ERROR, "Invalid tile-part size\n");
        return AVERROR_INVALIDDATA;
    }
    bytestream2_init(&tp->data, bytestream2_peek_buffer(&decodercontext->g), size);
    bytestream2_skip(&decodercontext->g, size);
}
continue;