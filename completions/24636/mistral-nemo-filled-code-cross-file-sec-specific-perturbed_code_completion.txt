// Initialize the bytestream for tile-part headers using packed header streams if PPM is present.
    // Initialize the bytestream for packed packet headers if PPT is present and it's the first tile-part.
    // Set up the data stream for the current tile-part by calculating its size and skipping to its end in the buffer.
    // Continue to the next iteration of the loop to process more headers or reach the end marker.

    if (s->has_ppm) {
        bytestream2_init(&s->packed_headers_stream, s->packed_headers, s->packed_headers_size);
        bytestream2_skip(&s->packed_headers_stream, s->packed_headers_stream.buffer - s->g.buffer);
    }

    if (s->first_tp && s->has_ppt) {
        bytestream2_init(&s->packed_pkt_stream, s->packed_pkt, s->packed_pkt_size);
        bytestream2_skip(&s->packed_pkt_stream, s->packed_pkt_stream.buffer - s->g.buffer);
    }

    s->tp_end = s->g.buffer + s->g.size;
    if (s->has_ppm || s->has_ppt)
        s->tp_end = s->packed_pkt_stream.buffer + s->packed_pkt_stream.size;

    // Continue to the next iteration of the loop to process more headers or reach the end marker.