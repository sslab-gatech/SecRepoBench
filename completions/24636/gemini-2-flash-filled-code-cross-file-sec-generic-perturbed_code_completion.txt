if (decodercontext->has_ppm) {
                bytestream2_init(&tp->packet_header_data,
                                  decodercontext->packed_headers_stream.buffer + bytestream2_tell(&decodercontext->packed_headers_stream),
                                  decodercontext->packed_headers_stream.buffer_end - decodercontext->packed_headers_stream.buffer - bytestream2_tell(&decodercontext->packed_headers_stream));
            } else if (decodercontext->has_ppt && !tile->tp_idx) {
                bytestream2_init(&tp->packet_header_data,
                                  decodercontext->ppt_data,
                                  decodercontext->ppt_size);
            }

            tp->data = decodercontext->g.buffer;
            tp->size = tp->tp_end - decodercontext->g.buffer;
            if (tp->size < 0) {
                av_log(decodercontext->avctx, AV_LOG_ERROR, "Invalid tp_size %d\n", tp->size);
                return AVERROR_INVALIDDATA;
            }
            bytestream2_skip(&decodercontext->g, tp->size);
            tile->tp_idx++;
            continue;