if (s->has_ppm) {
    tile->tile_part[tile->tp_idx].header_tpg = s->packed_headers_stream;
} else if (tile->has_ppt) {
    bytestream2_init(&tile->packed_headers_stream, tile->packed_headers, tile->packed_headers_size);
}

tp->tpg = decodercontext->g;
decodercontext->g.buffer = tp->tp_end;
decodercontext->g.buffer_end = decodercontext->g.buffer_start + decodercontext->g.buffer_size;
decodercontext->g.pos = decodercontext->g.buffer - decodercontext->g.buffer_start;
continue;