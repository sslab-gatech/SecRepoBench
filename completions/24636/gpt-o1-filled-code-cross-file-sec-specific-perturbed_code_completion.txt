if (!tile->tp_idx) {
    // Initialize the tile for decoding; return on failure
    ret = init_tile(decodercontext, decodercontext->curtileno);
    if (ret < 0)
        return ret;
}

// If there's packed packet header data (PPT) for this tile-part and it's the first one, initialize it
if (tile->ppt_data && tile->ppt_data_size && !tile->tp_idx) {
    bytestream2_init(&tile->ppt_stream, tile->ppt_data, tile->ppt_data_size);
}

// Calculate how many bytes to skip to reach the end of this tile-part in the buffer
{
    int64_t curpos = bytestream2_tell(&decodercontext->g);
    int64_t endpos = tp->tp_end - decodercontext->g.buffer;
    bytestream2_skip(&decodercontext->g, endpos - curpos);
}

// Move to the next tile-part and continue parsing headers
tile->tp_idx++;
continue;