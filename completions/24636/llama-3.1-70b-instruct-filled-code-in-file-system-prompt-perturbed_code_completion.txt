tp->header_tpg = s->g;
if (tp->tp_end < s->g.buffer) {
    av_log(s->avctx, AV_LOG_ERROR, "Invalid tpend\n");
    return AVERROR_INVALIDDATA;
}
if (s->has_ppm) {
    bytestream2_init(&tp->header_tpg, s->packed_headers, s->packed_headers_size);
} else if (tile->has_ppt) {
    bytestream2_init(&tp->header_tpg, tile->packed_headers, tile->packed_headers_size);
}
bytestream2_init(&s->g, tp->tp_end, bytestream2_get_bytes_left(&s->g) - (tp->tp_end - s->g.buffer));