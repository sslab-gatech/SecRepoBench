if (LocaleCompare(token, graphic_context[graphiccontextindex]->id) == 0)
              break;
            mvg_class = (const char *) GetValueFromSplayTree(macros, token);
            if (mvg_class != (const char *) NULL)
            {
              size_t new_length = strlen(mvg_class) + strlen(q) + 1;
              char *elements = (char *) AcquireQuantumMemory(new_length, sizeof(*elements));
              if (elements == (char *) NULL)
              {
                primitive = DestroyString(primitive);
                ThrowBinaryException(ResourceLimitError, "MemoryAllocationFailed", image->filename);
              }
              (void) CopyMagickString(elements, mvg_class, new_length);
              (void) ConcatenateMagickString(elements, q, new_length);
              primitive = DestroyString(primitive);
              primitive = elements;
              q = primitive;
            }