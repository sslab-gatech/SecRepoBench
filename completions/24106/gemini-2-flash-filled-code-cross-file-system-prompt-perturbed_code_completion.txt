if (LocaleCompare(token,graphic_context[graphiccontextindex]->id) == 0)
              break;
            mvg_class=(const char *) GetValueFromSplayTree(macros,token);
            if (mvg_class != (const char *) NULL)
              {
                char
                  *elements;

                size_t
                  class_length,
                  remaining_length;

                /*
                  Inject the class elements into the stream.
                */
                class_length=strlen(mvg_class);
                remaining_length=strlen(q);
                elements=(char *) AcquireQuantumMemory(class_length+
                  remaining_length+MagickPathExtent,sizeof(*elements));
                if (elements == (char *) NULL)
                  {
                    status=MagickFalse;
                    break;
                  }
                (void) CopyMagickString(elements,mvg_class,class_length+1);
                (void) CopyMagickString(elements+class_length,q,
                  remaining_length+1);
                primitive=DestroyString(primitive);
                primitive=elements;
                token=AcquireString(primitive);
                q=primitive+class_length;
              }