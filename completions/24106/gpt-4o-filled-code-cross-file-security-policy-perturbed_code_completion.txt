mvg_class = (const char *) GetValueFromSplayTree(macros, token);
if (mvg_class != (const char *) NULL) {
  size_t new_length = strlen(primitive) + strlen(mvg_class) + 1;
  char *elements = (char *) AcquireQuantumMemory(new_length, sizeof(*elements));
  if (elements == (char *) NULL) {
    primitive = DestroyString(primitive);
    ThrowBinaryException(ResourceLimitError, "MemoryAllocationFailed", image->filename);
  }
  (void) CopyMagickString(elements, primitive, new_length);
  (void) ConcatenateMagickString(elements, mvg_class, new_length);
  (void) ConcatenateMagickString(elements, q, new_length);
  primitive = DestroyString(primitive);
  primitive = elements;
  q = primitive + (p - primitive) + strlen(mvg_class);
}