if (graphic_context[graphiccontextindex]->id != (char *) NULL && LocaleCompare(token, graphic_context[graphiccontextindex]->id) == 0)
                break;
            mvg_class = (const char *) GetValueFromSplayTree(macros, token);
            if (mvg_class != (const char *) NULL)
              {
                char
                  *elements;

                const char
                  *remaining;

                size_t
                  prefix_length;

                prefix_length = (size_t) (p - primitive);
                remaining = q;
                elements = AcquireString(primitive);
                elements[prefix_length] = '\0';
                (void) ConcatenateMagickString(elements, mvg_class);
                (void) ConcatenateMagickString(elements, remaining);
                primitive = DestroyString(primitive);
                primitive = elements;
                q = primitive + prefix_length;
              }