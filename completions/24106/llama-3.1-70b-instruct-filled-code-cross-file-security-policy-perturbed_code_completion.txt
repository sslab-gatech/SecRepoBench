if (LocaleCompare(token, graphic_context[graphiccontextindex]->id) == 0)
  break;
const char *mvg_class = (const char *) GetValueFromSplayTree(macros, token);
if (mvg_class!= (const char *) NULL)
{
  size_t length = strlen(primitive) + strlen(mvg_class) + 1;
  char *new_primitive = AcquireString((const char *) NULL);
  if (new_primitive == (char *) NULL)
  {
    ThrowBinaryException(ResourceLimitError, "MemoryAllocationFailed", image->filename);
  }
  (void) CopyMagickString(new_primitive, primitive, length);
  (void) ConcatenateMagickString(new_primitive, mvg_class, length);
  primitive = DestroyString(primitive);
  primitive = new_primitive;
  p = primitive + strlen(primitive);
  q = p;
}