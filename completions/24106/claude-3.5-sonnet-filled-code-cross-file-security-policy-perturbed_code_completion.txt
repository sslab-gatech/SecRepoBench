if (LocaleCompare(token, graphic_context[graphiccontextindex]->id) == 0)
  break;
mvg_class = (const char *) GetValueFromSplayTree(macros, token);
if (mvg_class != (const char *) NULL)
{
  char *elements;
  size_t length;

  length = strlen(q) + strlen(mvg_class) + 1;
  elements = AcquireString(mvg_class);
  if (elements == (char *) NULL)
    ThrowFatalException(ResourceLimitFatalError, "MemoryAllocationFailed");
  (void) ConcatenateString(&elements, q);
  q = elements;
  primitive_extent = (double) length;
}