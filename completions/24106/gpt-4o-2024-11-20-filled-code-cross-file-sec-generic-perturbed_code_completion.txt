if (graphic_context[graphiccontextindex]->id != (char *) NULL &&
    LocaleCompare(graphic_context[graphiccontextindex]->id, token) == 0)
  break;

const char *mvg_class = (const char *) GetValueFromSplayTree(macros, token);
if (mvg_class != (const char *) NULL)
{
  size_t elements_length = strlen(mvg_class) + strlen(q) + 1;
  char *elements = (char *) AcquireQuantumMemory(elements_length, sizeof(*elements));
  if (elements == (char *) NULL)
  {
    status = MagickFalse;
    break;
  }

  (void) CopyMagickString(elements, mvg_class, elements_length);
  (void) ConcatenateMagickString(elements, q, elements_length);

  primitive = DestroyString(primitive);
  primitive = elements;

  q = primitive + strlen(mvg_class);
}