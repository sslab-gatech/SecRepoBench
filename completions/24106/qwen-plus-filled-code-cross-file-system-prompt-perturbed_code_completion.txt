if (LocaleCompare(graphic_context[graphiccontextindex]->id, token) == 0)
    break;
const char *mvg_class = (const char *) GetValueFromSplayTree(macros, token);
if (mvg_class != (const char *) NULL)
{
    size_t len = strlen(primitive);
    primitive = (char *) ResizeQuantumMemory(primitive, len + strlen(mvg_class) + 1, sizeof(*primitive));
    if (primitive == (char *) NULL)
        break;
    memmove(primitive + strlen(mvg_class), primitive, len + 1);
    memcpy(primitive, mvg_class, strlen(mvg_class));
    q = primitive + strlen(mvg_class);
}