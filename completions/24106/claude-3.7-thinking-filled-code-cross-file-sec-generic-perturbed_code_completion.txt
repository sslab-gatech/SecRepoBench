if (token == (char *) NULL || *token == '\0')
  {
    status=MagickFalse;
    break;
  }
if (graphic_context[graphiccontextindex]->id != (char *) NULL &&
    LocaleCompare(graphic_context[graphiccontextindex]->id,token) == 0)
  break;
mvg_class=(const char *) GetValueFromSplayTree(macros,token);
if (mvg_class != (const char *) NULL)
  {
    char
      *elements;

    elements=AcquireString(mvg_class);
    if (elements == (char *) NULL)
      {
        (void) ThrowMagickException(exception,GetMagickModule(),
          ResourceLimitError,"MemoryAllocationFailed","`%s'",
          image->filename);
        status=MagickFalse;
        break;
      }
    (void) ConcatenateString(&elements,q);
    primitive=DestroyString(primitive);
    primitive=elements;
    primitive_extent=(double) strlen(primitive);
    q=primitive;
  }