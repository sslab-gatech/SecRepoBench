// Fill in the masked region with the specified color
void FillMaskedRegion(Image *image, DrawInfo *draw_info, const char *color_name, ExceptionInfo *exception) {
  PixelInfo
    color;

  if (QueryColorCompliance(color_name,AllCompliance,&color,exception) == MagickFalse)
    return;

  // Get the mask image
  Image
    *mask_image;

  mask_image = DrawCompositeMask(image, draw_info, "mask", color_name, exception);
  if (mask_image == (Image *) NULL)
    return;

  // Set the mask image as the composite mask for the draw info
  draw_info->composite_mask = mask_image;

  // Set the mask image as the clipping mask for the image
  SetImageMask(image, CompositePixelMask, mask_image, exception);

  // Draw the image with the mask applied
  DrawImage(image, draw_info, exception);

  // Destroy the mask image
  mask_image = DestroyImage(mask_image);
}