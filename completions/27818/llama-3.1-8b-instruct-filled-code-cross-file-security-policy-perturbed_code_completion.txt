if ((length=(token & MAX_SHORT_LITLEN)) == MAX_SHORT_LITLEN) {
    // Extract the length of the literals from the token.
    // If the extracted length indicates it is a special case, read the actual literal length from the input stream.
    // Adjust the length by adding a predefined constant to account for the special case.
    // Move the pointer in the input stream to account for the bytes read.
    if (unlikely(ctx->flagsPtr + 1 > ctx->flagsEnd)) { LIZARD_LOG_DECOMPRESS_LIZv1("offset outside buffers\n"); goto _output_error; }   /* Error : offset outside buffers */
    length = MEM_readLE16(ctx->flagsPtr + 1);
    ctx->flagsPtr += 2;
    if (length == 0xFFFF) {
        // Special case: read the actual literal length from the input stream.
        if (unlikely(ctx->flagsPtr + 2 > ctx->flagsEnd)) { LIZARD_LOG_DECOMPRESS_LIZv1("offset outside buffers\n"); goto _output_error; }   /* Error : offset outside buffers */
        length = MEM_readLE32(ctx->flagsPtr + 2);
        ctx->flagsPtr += 4;
    } else {
        // Adjust the length by adding a predefined constant to account for the special case.
        length += 0x10000;
    }
}