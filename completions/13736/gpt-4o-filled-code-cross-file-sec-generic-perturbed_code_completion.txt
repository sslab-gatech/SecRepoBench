unsigned int *offsets = c->allocate_array<unsigned int> (fdCount + 1);
    if (unlikely (!offsets)) return_trace (false);

    unsigned int currentOffset = 0;
    for (unsigned int i = 0; i < fdCount; i++)
    {
      if (fdmap.includes (i))
      {
        offsets[i] = currentOffset;
        currentOffset += fontDicts[i].get_serialized_size ();
      }
      else
      {
        offsets[i] = 0; // or some other appropriate value indicating absence
      }
    }
    offsets[fdCount] = currentOffset; // Mark the end of the serialized data
    this->offsets.set (offsets, fdCount + 1);