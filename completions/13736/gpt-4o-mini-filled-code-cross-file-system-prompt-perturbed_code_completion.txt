unsigned int totalSize = 0;
    hb_vector_t<unsigned int> offsets(fdCount);
    for (unsigned int i = 0; i < fdCount; i++)
    {
        if (fdmap.includes(i))
        {
            offsets[i] = totalSize;
            totalSize += FontDict::calculate_serialized_size(fontDicts[i], opszr);
        }
        else
        {
            offsets[i] = 0; // or some other value indicating not included
        }
    }
    this->offsets.set(offsets);