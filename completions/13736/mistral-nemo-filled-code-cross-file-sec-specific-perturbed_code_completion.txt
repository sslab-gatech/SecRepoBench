unsigned int offSize = 0;
hb_vector_t<unsigned int> dictSizes;
calculate_serialized_size (offSize, fontDicts, fdCount, fdmap, opszr);
this->offSize.set (offSize);
this->offsets.set (offSize);
unsigned int lastOffset = 0;
for (unsigned int i = 0; i < fontDicts.length; i++)
  if (fdmap.includes (i))
  {
    FontDict *dict = c->start_embed<FontDict> ();
    if (unlikely (!dict->serialize (c, fontDicts[i], opszr, privateInfos[fdmap[i]])))
      return_trace (false);
    this->offsets.set (lastOffset, dictSizes[i]);
    lastOffset += dictSizes[i];
  }