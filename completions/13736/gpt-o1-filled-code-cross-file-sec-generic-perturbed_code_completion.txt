{
  this->offset.allocate (fdCount + 1);
  if (unlikely (!this->offset)) return_trace (false);

  unsigned int currentOffset = 1;
  unsigned int idx = 0;
  for (unsigned int i = 0; i < fontDicts.length; i++)
  {
    if (fdmap.includes (i))
    {
      this->offset[idx].set (currentOffset, offsetSize);
      currentOffset += FontDict::calculate_serialized_size (fontDicts[i], opszr);
      idx++;
    }
  }

  /* Set final offset indicating end of last dictionary's data. */
  this->offset[fdCount].set (currentOffset, offsetSize);
}