unsigned int *offsets = c->allocate_size<unsigned int> (fdCount);
    if (unlikely (!offsets)) return_trace (false);
    unsigned int lastOffset = 0;

    for (unsigned int i = 0; i < fontDicts.length; i++) {
      if (fdmap.includes(i)) {
        offsets[fdmap[i]] = lastOffset;
	unsigned int dictSize = FontDict::calculate_serialized_size (fontDicts[i], opszr, privateInfos[fdmap[i]]);
        lastOffset += dictSize;
      }
    }

    if (unlikely (!c->extend_min (lastOffset))) return_trace (false);

    this->offsetArray.set (offsets, fdCount);