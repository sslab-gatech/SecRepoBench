if (!unlikely (c->allocate_size<HBUINT8> (offsetSize * (fdCount + 1))))
  return_trace (false);

/* serialize font dict offsets */
unsigned int offset = 1;
unsigned int subset_fid = 0;
for (unsigned int fid = 0; fid < fontDicts.length; fid++)
{
  if (fdmap.includes (fid))
  {
    CFFIndexOf<COUNT, FontDict>::set_offset_at (subset_fid, offset);
    offset += FontDict::calculate_serialized_size (fontDicts[fid], opszr);
    subset_fid++;
  }
}
CFFIndexOf<COUNT, FontDict>::set_offset_at (fdCount, offset);