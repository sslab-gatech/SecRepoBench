unsigned int lastOffset = 0;
    unsigned int *offsets = (unsigned int *) calloc (fdCount, offsetSize);
    if (unlikely (!offsets)) return_trace (false);
    for (unsigned int i = 0; i < fontDicts.length; i++)
    {
      if (fdmap.includes (i))
      {
	unsigned int currentOffset = lastOffset;
        if (offsetSize == 2)
	  this->offsets.set ((HBUINT16) currentOffset, i);
	else
	  this->offsets.set ((HBUINT32) currentOffset, i);
	unsigned int dictSize = fontDicts[i].size;
	lastOffset += dictSize;
      }
    }
    free (offsets);