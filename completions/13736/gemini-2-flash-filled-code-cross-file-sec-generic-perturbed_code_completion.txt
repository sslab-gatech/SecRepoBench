unsigned int offset = 1;
    unsigned int *offsets = (unsigned int *) c->allocate (sizeof (unsigned int) * (fdCount + 1));
    if (unlikely (!offsets)) return_trace (false);

    offsets[0] = offset;
    for (unsigned int i = 0, j = 0; i < fontDicts.length; i++)
      if (fdmap.includes (i))
      {
	unsigned int dictSize = FontDict::calculate_serialized_size (fontDicts[i], opszr);
	offset += dictSize;
	offsets[++j] = offset;
      }

    for (unsigned int i = 0; i <= fdCount; i++)
      if (unlikely (!this->offsets[i].set_serialize (c, offsets[i], offsetSize)))
	return_trace (false);