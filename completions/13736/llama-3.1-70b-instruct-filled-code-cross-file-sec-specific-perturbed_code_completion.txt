// Allocate memory for storing offsets of font dictionaries based on the offset size and count of font dictionaries.
unsigned int *offsets = c->allocate_array<unsigned int> (fdCount + 1);

// Initialize offset tracking variables for serialization of font dictionary offsets.
unsigned int offset = 0;

// Iterate through each font dictionary, checking if it is included in the remap.
for (unsigned int i = 0; i < fontDicts.length; i++)
  if (fdmap.includes (i))
  {
    // For included font dictionaries, set their respective offsets in a serializable format.
    offsets[fdmap[i]] = offset;

    // Compute and accumulate the serialized size of each included font dictionary into the offset variable.
    FontDict *dict = c->start_embed<FontDict> ();
    offset += dict->calculate_serialized_size (fontDicts[i], opszr, privateInfos[fdmap[i]]);
  }

// Update the last offset to mark the end of the serialized data for font dictionaries.
offsets[fdCount] = offset;