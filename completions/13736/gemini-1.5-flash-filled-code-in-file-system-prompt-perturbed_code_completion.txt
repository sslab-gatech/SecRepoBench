if (!unlikely (c->allocate_size<HBUINT8> (offsetSize * (fdCount + 1))))
      return_trace (false);

    /* serialize font dict offsets */
    unsigned int  offset = 1;
    unsigned int fid = 0;
    for (; fid < fdCount; fid++)
    {
      CFFIndexOf<COUNT, FontDict>::set_offset_at (fid, offset);
      offset += FontDict::calculate_serialized_size (fontDicts[fdmap[fid]], opszr, privateInfos[fdmap[fid]]);
    }
    CFFIndexOf<COUNT, FontDict>::set_offset_at (fid, offset);