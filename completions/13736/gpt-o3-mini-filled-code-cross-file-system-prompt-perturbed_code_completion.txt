unsigned int current_offset = 1;
unsigned int pos = 0;
for (unsigned int i = 0; i < fontDicts.length; i++)
{
  if (fdmap.includes (i))
  {
    // Record the starting offset for this embedded font dictionary.
    this->offsets.set (pos, current_offset);
    // Increment the current offset by the serialized size of the current font dictionary.
    current_offset += FontDict::calculate_serialized_size (fontDicts[i], opszr);
    pos++;
  }
}
// Set the final offset to mark the end of the font dictionaries.
this->offsets.set (fdCount, current_offset);