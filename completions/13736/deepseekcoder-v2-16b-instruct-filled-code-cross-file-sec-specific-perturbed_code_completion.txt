// Allocate memory for storing offsets of font dictionaries based on the offset size and count of font dictionaries.
    unsigned int totalSize = 0;
    for (unsigned int i = 0; i < fontDicts.length; i++) {
        if (fdmap.includes(i)) {
            totalSize += FontDict::calculate_serialized_size(fontDicts[i], opszr);
        }
    }
    unsigned int offsetSize = calcOffSize(totalSize);
    this->offsets.resize(fdCount, offsetSize);

    // Initialize offset tracking variables for serialization of font dictionary offsets.
    unsigned int currentOffset = 0;

    // Iterate through each font dictionary, checking if it is included in the remap.
    // For included font dictionaries, set their respective offsets in a serializable format.
    // Compute and accumulate the serialized size of each included font dictionary into the offset variable.
    // Update the last offset to mark the end of the serialized data for font dictionaries.
    for (unsigned int i = 0; i < fontDicts.length; i++) {
        if (fdmap.includes(i)) {
            unsigned int dictSize = FontDict::calculate_serialized_size(fontDicts[i], opszr);
            this->offsets[i] = currentOffset;
            currentOffset += dictSize;
        }
    }

    // Write the offsets to the serialization context.
    for (unsigned int i = 0; i < fontDicts.length; i++) {
        if (fdmap.includes(i)) {
            c->set_offset(this->offsets[i]);
            if (unlikely(!fontDicts[i].serialize(c, fontDicts[i], opszr, privateInfos[fdmap[i]]))) {
                return_trace(false);
            }
        }
    }