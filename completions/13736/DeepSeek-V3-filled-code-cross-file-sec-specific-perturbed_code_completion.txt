unsigned int offset = 1;
    unsigned int *offsets = (unsigned int *) hb_calloc (fdCount + 1, sizeof (unsigned int));
    if (unlikely (!offsets)) return_trace (false);
    offsets[0] = 1;

    for (unsigned int i = 0; i < fontDicts.length; i++)
    {
      if (fdmap.includes (i))
      {
        offsets[fdmap[i] + 1] = offset;
        unsigned int size = fontDicts[i].get_size (opszr, privateInfos[fdmap[i]]);
        offset += size;
      }
    }
    offsets[fdCount] = offset;

    if (unlikely (!c->check_assign (this->offsets, offsets, fdCount + 1)))
    {
      hb_free (offsets);
      return_trace (false);
    }
    hb_free (offsets);