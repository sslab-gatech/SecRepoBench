if (!unlikely (c->allocate_size<HBUINT8> (offsetSize * (fdCount + 1))))
  return_trace (false);

/* serialize font dict offsets */
unsigned int offset = 1;
unsigned int fid = 0;
for (unsigned int i = 0; i < fontDicts.length; i++)
  if (fdmap.includes (i))
  {
    CFFIndexOf<COUNT, FontDict>::set_offset_at (fid, offset);
    offset += FontDict::calculate_serialized_size (fontDicts[i], opszr);
    fid++;
  }
CFFIndexOf<COUNT, FontDict>::set_offset_at (fid, offset);

/* serialize font dicts */