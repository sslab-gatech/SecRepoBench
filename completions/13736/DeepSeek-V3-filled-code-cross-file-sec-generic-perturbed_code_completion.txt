unsigned int offset = 1;
    unsigned int *offsetArray = (unsigned int *) hb_calloc (fdCount, sizeof (unsigned int));
    if (unlikely (!offsetArray)) return_trace (false);

    for (unsigned int i = 0; i < fdCount; i++)
    {
      offsetArray[i] = offset;
      if (fdmap.includes (i))
      {
        unsigned int dictSize = FontDict::calculate_serialized_size (fontDicts[i], opszr, privateInfos[fdmap[i]]);
        offset += dictSize;
      }
    }

    if (unlikely (!c->check_assign (this->offsetArray, offsetArray, fdCount)))
    {
      hb_free (offsetArray);
      return_trace (false);
    }

    hb_free (offsetArray);