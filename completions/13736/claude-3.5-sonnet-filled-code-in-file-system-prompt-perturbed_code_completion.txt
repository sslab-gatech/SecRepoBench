if (!unlikely (c->allocate_size<HBUINT8> (offsetSize * (fdCount + 1))))
  return_trace (false);

unsigned int offset = 1;
unsigned int fid = 0;
for (; fid < fontDicts.length; fid++)
{
  if (fdmap.includes (fid))
  {
    CFFIndexOf<COUNT, FontDict>::set_offset_at (fdmap[fid], offset);
    offset += FontDict::calculate_serialized_size (fontDicts[fid], opszr, privateInfos[fdmap[fid]]);
  }
}
CFFIndexOf<COUNT, FontDict>::set_offset_at (fdCount, offset);