if (unlikely (!c->allocate_size (offsetSize * (fdCount + 1))))
  return_trace (false);

unsigned char* const offsets = (unsigned char*)(this + 1);
unsigned int current_offset = 1;
for (unsigned int j = 0; j <= fdCount; j++)
{
  for (unsigned int k = 0; k < offsetSize; k++)
  {
    const unsigned shift = (offsetSize - 1 - k) * 8;
    offsets[j * offsetSize + k] = (current_offset >> shift) & 0xFF;
  }
  if (j < fdCount)
    current_offset += privateInfos[j].size;
}