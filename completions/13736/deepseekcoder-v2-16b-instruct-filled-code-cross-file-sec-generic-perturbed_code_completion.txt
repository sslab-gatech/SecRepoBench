// Allocate memory for storing offsets of font dictionaries based on the offset size and count of font dictionaries.
    unsigned int totalSize = 0;
    for (unsigned int i = 0; i < fontDicts.length; i++) {
        if (fdmap.includes(i)) {
            unsigned int dictSize = FontDict::calculate_serialized_size(fontDicts[i], opszr);
            totalSize += dictSize;
        }
    }
    this->offsets.resize(fdCount * offsetSize);

    unsigned int currentOffset = 0;
    for (unsigned int i = 0; i < fontDicts.length; i++) {
        if (fdmap.includes(i)) {
            unsigned int dictSize = FontDict::calculate_serialized_size(fontDicts[i], opszr);
            for (unsigned int j = 0; j < dictSize; j++) {
                this->offsets[currentOffset++] = currentOffset;
            }
        }
    }
    this->lastOffset.set(currentOffset);