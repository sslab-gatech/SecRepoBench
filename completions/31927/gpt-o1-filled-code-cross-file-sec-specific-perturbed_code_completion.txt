while (index < ptr->sampleCount) {
				switch (ptr->sampleSize) {
					case 4: {
						u8 val = gf_bs_read_u8(bs);
						ptr->sizes[index] = (val >> 4) & 0x0F;
						if (ptr->max_size < ptr->sizes[index]) ptr->max_size = ptr->sizes[index];
						ptr->total_size += ptr->sizes[index];
						ptr->total_samples++;
						index++;
						if (index < ptr->sampleCount) {
							ptr->sizes[index] = val & 0x0F;
							if (ptr->max_size < ptr->sizes[index]) ptr->max_size = ptr->sizes[index];
							ptr->total_size += ptr->sizes[index];
							ptr->total_samples++;
							index++;
						}
						break;
					}
					case 8: {
						u8 val = gf_bs_read_u8(bs);
						ptr->sizes[index] = val;
						if (ptr->max_size < ptr->sizes[index]) ptr->max_size = ptr->sizes[index];
						ptr->total_size += ptr->sizes[index];
						ptr->total_samples++;
						index++;
						break;
					}
					case 16: {
						u16 val = gf_bs_read_u16(bs);
						ptr->sizes[index] = val;
						if (ptr->max_size < ptr->sizes[index]) ptr->max_size = ptr->sizes[index];
						ptr->total_size += ptr->sizes[index];
						ptr->total_samples++;
						index++;
						break;
					}
					default: {
						return GF_ISOM_INVALID_FILE;
					}
				}
			}