if (ptr->sampleSize == 4) {
				u8 byte;
				u32 sample1, sample2;
				while (index < ptr->sampleCount) {
					byte = gf_bs_read_u8(bs);
					sample1 = (byte >> 4) & 0x0F;
					sample2 = byte & 0x0F;
					ptr->sizes[index++] = sample1;
					if (ptr->max_size < sample1)
						ptr->max_size = sample1;
					ptr->total_size += sample1;
					ptr->total_samples++;
					if (index < ptr->sampleCount) {
						ptr->sizes[index++] = sample2;
						if (ptr->max_size < sample2)
							ptr->max_size = sample2;
						ptr->total_size += sample2;
						ptr->total_samples++;
					}
				}
			} else {
				for (; index < ptr->sampleCount; index++) {
					if (ptr->sampleSize == 8)
						ptr->sizes[index] = gf_bs_read_u8(bs);
					else
						ptr->sizes[index] = gf_bs_read_u16(bs);

					if (ptr->max_size < ptr->sizes[index])
						ptr->max_size = ptr->sizes[index];
					ptr->total_size += ptr->sizes[index];
					ptr->total_samples++;
				}
			}