if (tlvDataBasePtr == nullptr || tlvDataLength == 0) {
    TLVRecordType nullRecord;
    nullRecord.assign(nullptr);
    return nullRecord;
}

uint8_t* currentPtr = tlvDataBasePtr;
size_t remainingLength = tlvDataLength;

// Read the first TLV record header
uint8_t tag = *currentPtr++;
uint8_t length = *currentPtr++;
size_t valueLength = length & 0x7F;
if (length & 0x80) {
    // Length is in the next byte
    valueLength = *currentPtr++;
}

if (currentPtr + valueLength > tlvDataBasePtr + tlvDataLength) {
    // Invalid length, return a null TLVRecordType
    TLVRecordType nullRecord;
    nullRecord.assign(nullptr);
    return nullRecord;
}

// Create a TLVRecordType instance with the read data
TLVRecordType firstRecord;
firstRecord.assign(currentPtr, currentPtr + valueLength);
firstRecord.setType(tag);
firstRecord.setLength(valueLength);

return firstRecord;