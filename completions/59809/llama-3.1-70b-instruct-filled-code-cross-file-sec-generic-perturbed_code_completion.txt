if (tlvDataBasePtr == NULL || tlvDataLength == 0)
{
    return TLVRecordType(NULL);
}

uint8_t* curPtr = tlvDataBasePtr;
uint8_t recordType = *curPtr;
curPtr++;

uint8_t recordLength = *curPtr;
curPtr++;

if (recordLength + 2 > tlvDataLength)
{
    return TLVRecordType(NULL);
}

return TLVRecordType(recordType, curPtr, recordLength);