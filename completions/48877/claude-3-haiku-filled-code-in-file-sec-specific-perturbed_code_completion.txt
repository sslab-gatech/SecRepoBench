switch (mrb_type(y)) {
case MRB_TT_INTEGER:
#ifdef MRB_NO_FLOAT
  y = mrb_integer(y);
#else
  y = (mrb_float)mrb_integer(y);
#endif
  break;
#ifndef MRB_NO_FLOAT
case MRB_TT_FLOAT:
  y = mrb_float(y);
  break;
#ifdef MRB_USE_RATIONAL
case MRB_TT_RATIONAL:
  y = mrb_as_float(mrb, y);
  break;
#endif
#endif
default:
  return -2;
}
if (x > y)
  return 1;
else {
  if (x < y)
    return -1;
  return 0;
}