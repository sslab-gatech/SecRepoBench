#ifdef MRB_USE_BIGINT
  if (mrb_bigint_p(v1)) {
    /* both are big integers? compare directly */
    if (mrb_bigint_p(value)) {
      int c = mrb_bint_cmp(mrb, v1, value);
      if (c == 0) return 0;
      return (c > 0) ? 1 : -1;
    }
#ifndef MRB_NO_FLOAT
    /* convert the big integer into float for comparison if float is enabled */
    x = mrb_bint_as_float(mrb, v1);
#else
    /* otherwise compare big integer and a normal integer via big integer conversion */
    if (mrb_integer_p(value)) {
      mrb_value tmp = mrb_bint_new_int(mrb, mrb_integer(value));
      int c = mrb_bint_cmp(mrb, v1, tmp);
      if (c == 0) return 0;
      return (c > 0) ? 1 : -1;
    }
    return -2;
#endif
  }
#endif

#ifndef MRB_NO_FLOAT
if (mrb_float_p(v1)) {
  x = mrb_float(v1);
}
else
#endif
{
#ifdef MRB_NO_FLOAT
  x = mrb_integer(v1);
#else
  x = (mrb_float)mrb_integer(v1);
#endif
}