mrb_float x, y;

#ifdef MRB_USE_BIGINT
  if (mrb_bigint_p(v1)) {
    x = mrb_bint_as_float(mrb, v1);
  }
  else
#endif
  {
    switch (mrb_type(v1)) {
    case MRB_TT_INTEGER:
      x = (mrb_float)mrb_integer(v1);
      break;
#ifndef MRB_NO_FLOAT
    case MRB_TT_FLOAT:
      x = mrb_float(v1);
      break;
#ifdef MRB_USE_RATIONAL
    case MRB_TT_RATIONAL:
      x = mrb_as_float(mrb, v1);
      break;
#endif
#endif
    default:
      return -2;
    }
  }