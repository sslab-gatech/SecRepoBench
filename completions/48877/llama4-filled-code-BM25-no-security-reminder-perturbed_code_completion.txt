// Check if either value is a big integer and handle this case separately using a specific comparison function for big integers.
#ifdef MRB_USE_BIGINT
  if (mrb_bigint_p(v1)) {
    return mrb_bint_cmp(mrb, v1, value);
  }
  if (mrb_bigint_p(value)) {
    return -mrb_bint_cmp(mrb, value, v1);
  }
#endif

// Determine the type of the first value and convert it into a numerical form suitable for comparison.
#ifdef MRB_NO_FLOAT
  x = mrb_integer(v1);
#else
  if (mrb_float_p(v1)) {
    x = (mrb_float)mrb_integer(v1);
  } else {
    x = mrb_integer(v1);
  }
#endif