// Here is the code snippet to fill in the masked region:

// Calculate the extent of points needed for a path primitive.
// Iterate over the token string, converting each segment to a double.
// For each successful conversion, increment the points_extent counter.
// Scale the points_extent by a factor related to BezierQuantum.

points_extent = 0;
p = q;
while (*q != '\0') {
    GetNextToken(q, &q, extent, primitive_token);
    if (IsPoint(primitive_token)) {
        points_extent++;
    }
    GetNextToken(q, (const char **)NULL, extent, primitive_token);
}
points_extent *= BezierQuantum;