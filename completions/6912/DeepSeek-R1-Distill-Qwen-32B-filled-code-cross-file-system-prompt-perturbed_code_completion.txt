Compare("text",token) == 0)
              {
                (void) WriteBlobString(image,"</text>\n");
                break;
              }
            status=MagickFalse;
            break;
          }
        if (LocaleCompare("push",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            if (LocaleCompare("clip-path",token) == 0)
              {
                GetNextToken(q,&q,extent,token);
                (void) FormatLocaleString(message,MagickPathExtent,
                  "<clipPath id=\"%s\">\n",token);
                (void) WriteBlobString(image,message);
                break;
              }
            if (LocaleCompare("gradient",token) == 0)
              {
                GetNextToken(q,&q,extent,token);
                (void) FormatLocaleString(message,MagickPathExtent,
                  "<%sGradient id=\"%s\">\n",type,token);
                (void) WriteBlobString(image,message);
                break;
              }
            if (LocaleCompare("pattern",token) == 0)
              {
                GetNextToken(q,&q,extent,token);
                (void) FormatLocaleString(message,MagickPathExtent,
                  "<pattern id=\"%s\">\n",token);
                (void) WriteBlobString(image,message);
                break;
              }
            if (LocaleCompare("text",token) == 0)
              {
                GetNextToken(q,&q,extent,token);
                (void) FormatLocaleString(message,MagickPathExtent,
                  "<text id=\"%s\">\n",token);
                (void) WriteBlobString(image,message);
                break;
              }
            if (LocaleCompare("graphic-context",token) == 0)
              {
                n++;
                (void) WriteBlobString(image,"<g>\n");
                break;
              }
            if (LocaleCompare("defs",token) == 0)
              {
                (void) WriteBlobString(image,"<defs>\n");
                break;
              }
            status=MagickFalse;
            break;
          }
        status=MagickFalse;
        break;
      }
      case 'r':
      case 'R':
      {
        if (LocaleCompare("rectangle",keyword) == 0)
          {
            primitive_type=RectanglePrimitive;
            break;
          }
        if (LocaleCompare("rotate",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            affine.rx=sin(DegreesToRadians(StringToDouble(token,&next_token)));
            affine.ry=(-sin(DegreesToRadians(StringToDouble(token,&next_token))));
            affine.sx=cos(DegreesToRadians(StringToDouble(token,&next_token)));
            affine.sy=cos(DegreesToRadians(StringToDouble(token,&next_token)));
            break;
          }
        if (LocaleCompare("roundRectangle",keyword) == 0)
          {
            primitive_type=RoundRectanglePrimitive;
            break;
          }
        status=MagickFalse;
        break;
      }
      case 's':
      case 'S':
      {
        if (LocaleCompare("scale",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            affine.sx=StringToDouble(token,&next_token);
            GetNextToken(q,&q,extent,token);
            if (*token == ',')
              GetNextToken(q,&q,extent,token);
            affine.sy=StringToDouble(token,&next_token);
            break;
          }
        if (LocaleCompare("skewX",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            affine.ry=tan(DegreesToRadians(StringToDouble(token,&next_token)));
            break;
          }
        if (LocaleCompare("skewY",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            affine.rx=tan(DegreesToRadians(StringToDouble(token,&next_token)));
            break;
          }
        if (LocaleCompare("stroke",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            (void) FormatLocaleString(message,MagickPathExtent,"stroke:%s;",
              token);
            (void) WriteBlobString(image,message);
            break;
          }
        if (LocaleCompare("stroke-antialias",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            (void) FormatLocaleString(message,MagickPathExtent,
              "stroke-antialias:%s;",token);
            (void) WriteBlobString(image,message);
            break;
          }
        if (LocaleCompare("stroke-dasharray",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            (void) FormatLocaleString(message,MagickPathExtent,
              "stroke-dasharray:%s;",token);
            (void) WriteBlobString(image,message);
            break;
          }
        if (LocaleCompare("stroke-dashoffset",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            (void) FormatLocaleString(message,MagickPathExtent,
              "stroke-dashoffset:%s;",token);
            (void) WriteBlobString(image,message);
            break;
          }
        if (LocaleCompare("stroke-linecap",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            (void) FormatLocaleString(message,MagickPathExtent,
              "stroke-linecap:%s;",token);
            (void) WriteBlobString(image,message);
            break;
          }
        if (LocaleCompare("stroke-linejoin",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            (void) FormatLocaleString(message,MagickPathExtent,
              "stroke-linejoin:%s;",token);
            (void) WriteBlobString(image,message);
            break;
          }
        if (LocaleCompare("stroke-miterlimit",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            (void) FormatLocaleString(message,MagickPathExtent,
              "stroke-miterlimit:%s;",token);
            (void) WriteBlobString(image,message);
            break;
          }
        if (LocaleCompare("stroke-opacity",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            (void) FormatLocaleString(message,MagickPathExtent,
              "stroke-opacity:%s;",token);
            (void) WriteBlobString(image,message);
            break;
          }
        if (LocaleCompare("stroke-width",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            (void) FormatLocaleString(message,MagickPathExtent,
              "stroke-width:%s;",token);
            (void) WriteBlobString(image,message);
            break;
          }
        status=MagickFalse;
        break;
      }
      case 't':
      case 'T':
      {
        if (LocaleCompare("text",keyword) == 0)
          {
            primitive_type=TextPrimitive;
            break;
          }
        if (LocaleCompare("text-antialias",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            (void) FormatLocaleString(message,MagickPathExtent,
              "text-antialias:%s;",token);
            (void) WriteBlobString(image,message);
            break;
          }
        if (LocaleCompare("text-undercolor",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            (void) FormatLocaleString(message,MagickPathExtent,
              "textUnderColor:%s;",token);
            (void) WriteBlobString(image,message);
            break;
          }
        if (LocaleCompare("translate",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            affine.tx=StringToDouble(token,&next_token);
            GetNextToken(q,&q,extent,token);
            if (*token == ',')
              GetNextToken(q,&q,extent,token);
            affine.ty=StringToDouble(token,&next_token);
            break;
          }
        status=MagickFalse;
        break;
      }
      case 'v':
      case 'V':
      {
        if (LocaleCompare("viewbox",keyword) == 0)
          {
            GetNextToken(q,&q,extent,token);
            (void) FormatLocaleString(message,MagickPathExtent,
              "viewBox=\"%s\" ",token);
            (void) WriteBlobString(image,message);
            break;
          }
        status=MagickFalse;
        break;
      }
      default:
        status=MagickFalse;
        break;
    }
    if (status == MagickFalse)
      break;
    if (active == MagickFalse)
      {
        AffineToTransform(image,&affine);
        active=MagickTrue;
      }
    if (primitive_type == UndefinedPrimitive)
      continue;
    switch (primitive_type)
    {
      case PointPrimitive:
      {
        GetNextToken(q,&q,extent,token);
        point.x=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        if (*token == ',')
          GetNextToken(q,&q,extent,token);
        point.y=StringToDouble(token,&next_token);
        (void) FormatLocaleString(message,MagickPathExtent,
          "<circle cx=\"%.20g\" cy=\"%.20g\" r=\"0\" />\n",point.x,point.y);
        (void) WriteBlobString(image,message);
        break;
      }
      case LinePrimitive:
      {
        GetNextToken(q,&q,extent,token);
        point.x=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        if (*token == ',')
          GetNextToken(q,&q,extent,token);
        point.y=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        point.x=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        if (*token == ',')
          GetNextToken(q,&q,extent,token);
        point.y=StringToDouble(token,&next_token);
        (void) FormatLocaleString(message,MagickPathExtent,
          "<line x1=\"%.20g\" y1=\"%.20g\" x2=\"%.20g\" y2=\"%.20g\" />\n",
          point.x,point.y,point.x,point.y);
        (void) WriteBlobString(image,message);
        break;
      }
      case RectanglePrimitive:
      {
        GetNextToken(q,&q,extent,token);
        point.x=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        if (*token == ',')
          GetNextToken(q,&q,extent,token);
        point.y=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        point.x=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        if (*token == ',')
          GetNextToken(q,&q,extent,token);
        point.y=StringToDouble(token,&next_token);
        (void) FormatLocaleString(message,MagickPathExtent,
          "<rect x=\"%.20g\" y=\"%.20g\" width=\"%.20g\" height=\"%.20g\" />\n",
          point.x,point.y,point.x,point.y);
        (void) WriteBlobString(image,message);
        break;
      }
      case RoundRectanglePrimitive:
      {
        GetNextToken(q,&q,extent,token);
        point.x=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        if (*token == ',')
          GetNextToken(q,&q,extent,token);
        point.y=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        point.x=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        if (*token == ',')
          GetNextToken(q,&q,extent,token);
        point.y=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        point.x=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        if (*token == ',')
          GetNextToken(q,&q,extent,token);
        point.y=StringToDouble(token,&next_token);
        (void) FormatLocaleString(message,MagickPathExtent,
          "<rect x=\"%.20g\" y=\"%.20g\" width=\"%.20g\" height=\"%.20g\" rx=\"%.20g\" ry=\"%.20g\" />\n",
          point.x,point.y,point.x,point.y,point.x,point.y);
        (void) WriteBlobString(image,message);
        break;
      }
      case ArcPrimitive:
      {
        GetNextToken(q,&q,extent,token);
        point.x=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        if (*token == ',')
          GetNextToken(q,&q,extent,token);
        point.y=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        point.x=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        if (*token == ',')
          GetNextToken(q,&q,extent,token);
        point.y=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        point.x=StringToDouble(token,&next_token);
        GetNextToken(q,&q,extent,token);
        if (*token == ',')
          GetNextToken(q,&q,extent,token);
        point.y=StringToDouble(token,&next_token);
        (void) FormatLocaleString(message,MagickPathExtent,
          "<path d=\"M %.20g %.20g A %.20g %.20g %.20g %.20g %.20g %.20g %.20g\" />\n",
          point.x