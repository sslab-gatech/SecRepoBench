static size_t TracePath(PrimitiveInfo *primitive_info,const char *path,
  ExceptionInfo *exception)
{
  // ...
  for (p=path; *p != '\0'; )
  {
    // ...
    case 'p':
    case 'P':
    {
      // Calculate the extent of points needed for a path primitive.
      // Iterate over the token string, converting each segment to a double.
      // For each successful conversion, increment the points_extent counter.
      // Scale the points_extent by a factor related to BezierQuantum.
      char *s, *t;
      points_extent = 1;
      t = primitive_token;
      while (*t != '\0') {
        if (IsPoint(t)) {
          points_extent++;
        }
        while (*t != '\0' && *t != ',') {
          t++;
        }
        if (*t == ',') {
          t++;
        }
      }
      points_extent *= BezierQuantum;
      break;
    }
    // ...
  }
  // ...
}