mrb_value val = GETARG();
        double fval;
        char fbuf[68];
        mrb_int need;
        int n;

        fval = mrb_to_flo(mrb, val);
        if (ISNAN(fval)) {
          const char *s = "NaN";
          int len = 3;
          if (flags & FPLUS || flags & FSPACE) {
            char c = (flags & FPLUS) ? '+' : ' ';
            PUSH(&c, 1);
            width--;
          }
          if (width > len) FILL(' ', width - len);
          PUSH(s, len);
          break;
        }
        if (ISINF(fval)) {
          const char *s = (fval > 0) ? "Inf" : "-Inf";
          int len = (fval > 0) ? 3 : 4;
          if (flags & FPLUS || flags & FSPACE) {
            char c = (flags & FPLUS) ? '+' : ' ';
            PUSH(&c, 1);
            width--;
          }
          if (width > len) FILL(' ', width - len);
          PUSH(s, len);
          break;
        }