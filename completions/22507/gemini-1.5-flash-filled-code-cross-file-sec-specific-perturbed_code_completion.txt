mrb_value val = GETARG();
        double fval;
        char fbuf[64];
        mrb_int need;
        int n;

        fval = mrb_to_flo(mrb, val);
        if (!isfinite(fval)) {
          const char *s;
          if (isnan(fval)) s = "NaN";
          else if (isinf(fval) && fval > 0) s = "Inf";
          else s = "-Inf";
          int len = strlen(s);
          if (flags & FPLUS || flags & FSPACE) len++;
          if (flags & FWIDTH && width > len) {
            if (flags & FMINUS) {
              PUSH(s, len);
              FILL(' ', width - len);
            }
            else {
              FILL(' ', width - len);
              PUSH(s, len);
            }
          }
          else {
            PUSH(s, len);
          }
          break;
        }