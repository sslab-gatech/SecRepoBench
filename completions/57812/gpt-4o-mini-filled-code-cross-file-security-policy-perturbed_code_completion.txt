if (pictureparameterset->num_ref_loc_offsets > MAX_REF_LOC_OFFSETS) {
        av_log(avctx, AV_LOG_ERROR, "num_ref_loc_offsets exceeds maximum allowed value.\n");
        return AVERROR_INVALIDDATA;
    }

    for (int i = 0; i < pictureparameterset->num_ref_loc_offsets; i++) {
        if (i >= MAX_REF_LOC_OFFSETS) {
            av_log(avctx, AV_LOG_ERROR, "Reference location offset index out of bounds.\n");
            return AVERROR_INVALIDDATA;
        }
        pictureparameterset->ref_loc_offset_layer_id[i] = get_bits(gb, 6);
        // Additional processing for flags and offsets can be added here
    }