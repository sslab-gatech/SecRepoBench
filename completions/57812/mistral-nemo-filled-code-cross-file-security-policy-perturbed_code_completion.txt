if (pictureparameterset->num_ref_loc_offsets > 0) {
        pictureparameterset->ref_loc_offset_layer_id = av_malloc_array(pictureparameterset->num_ref_loc_offsets, sizeof(*pictureparameterset->ref_loc_offset_layer_id));
        if (!pictureparameterset->ref_loc_offset_layer_id)
            return AVERROR(ENOMEM);

        for (int i = 0; i < pictureparameterset->num_ref_loc_offsets; i++) {
            pictureparameterset->ref_loc_offset_layer_id[i] = get_bits(gb, 6);
            if (pictureparameterset->ref_loc_offset_layer_id[i] >= REFERENCE_LAYERS) {
                av_log(avctx, AV_LOG_ERROR, "ref_loc_offset_layer_id shall be in the range [0, %d].\n", REFERENCE_LAYERS - 1);
                return AVERROR_INVALIDDATA;
            }
        }
    }