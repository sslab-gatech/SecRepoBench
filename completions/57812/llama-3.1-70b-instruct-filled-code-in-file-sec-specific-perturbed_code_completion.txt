for (int i = 0; i < pps->num_ref_loc_offsets; i++) {
    int layer_id = get_bits(gb, 6);
    if (layer_id >= sps->vps->vps_max_layers) {
        av_log(avctx, AV_LOG_ERROR, "layer_id %d is out of range\n", layer_id);
        return AVERROR_INVALIDDATA;
    }
    int scaled_ref_layer_offset_present_flag = get_bits1(gb);
    if (scaled_ref_layer_offset_present_flag) {
        int scaled_ref_layer_offset = get_ue_golomb_long(gb);
        if (scaled_ref_layer_offset < 0 || scaled_ref_layer_offset > 128) {
            av_log(avctx, AV_LOG_ERROR, "scaled_ref_layer_offset %d is out of range\n", scaled_ref_layer_offset);
            return AVERROR_INVALIDDATA;
        }
    }
    int reference_region_offset_present_flag = get_bits1(gb);
    if (reference_region_offset_present_flag) {
        int reference_region_offset = get_ue_golomb_long(gb);
        if (reference_region_offset < 0 || reference_region_offset > 128) {
            av_log(avctx, AV_LOG_ERROR, "reference_region_offset %d is out of range\n", reference_region_offset);
            return AVERROR_INVALIDDATA;
        }
    }
    int resample_phase_set_present_flag = get_bits1(gb);
    if (resample_phase_set_present_flag) {
        int resample_phase_set = get_bits(gb, 5);
        if (resample_phase_set < 0 || resample_phase_set > 31) {
            av_log(avctx, AV_LOG_ERROR, "resample_phase_set %d is out of range\n", resample_phase_set);
            return AVERROR_INVALIDDATA;
        }
        int resample_phase_set_luma = resample_phase_set;
        int resample_phase_set_chroma = get_bits(gb, 5);
        if (resample_phase_set_chroma < 0 || resample_phase_set_chroma > 31) {
            av_log(avctx, AV_LOG_ERROR, "resample_phase_set_chroma %d is out of range\n", resample_phase_set_chroma);
            return AVERROR_INVALIDDATA;
        }
    }
}