// Initialize counters for records and tapemarks
int records = 0, tapemarks = 0;

// Iterate through the byte data
while (uc < end_pointer) {
    // Extract the record length using the `getlen` function
    int len = getlen(uc, end_pointer);
    if (len < 0) {
        // Invalid data, return 0
        return 0;
    }
    uc += 4; // Skip the length bytes

    // Check for the End of Medium (EOM) marker
    if (len == 0xFFFFFFFF) {
        break;
    }

    // Check if the record length matches its complementary length
    if (getlen(uc + len, end_pointer)!= len) {
        // Invalid data, return 0
        return 0;
    }

    // Increment the record counter
    records++;

    // Check for tapemarks
    if (len == 0) {
        tapemarks++;
        if (tapemarks >= SIMH_TAPEMARKS) {
            // Stop processing further if the tapemark limit is reached
            break;
        }
    }

    // Move to the next record
    uc += len;
}

// Return 1 if valid SIMH data is found, otherwise 0
return records > 0? 1 : 0;