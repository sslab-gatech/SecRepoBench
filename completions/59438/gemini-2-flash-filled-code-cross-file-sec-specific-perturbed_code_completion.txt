uint32_t len, complen;
	int tapemarks = 0;
	int records = 0;

	while (uc < end_pointer) {
		len = getlen(uc);
		uc += 4;

		if (len == 0xFFFFFFFF) {
			return (records > 0); /* End of Medium */
		}

		if (uc + len > end_pointer) {
			return 0; /* Invalid data */
		}

		complen = getlen(uc + len);
		uc += len + 4;

		if (len == ~complen) {
			records++;
		} else if (len == 0) {
			tapemarks++;
			if (tapemarks > SIMH_TAPEMARKS)
				return 1;
		} else {
			return 0; /* Invalid data */
		}
	}

	return (records > 0);