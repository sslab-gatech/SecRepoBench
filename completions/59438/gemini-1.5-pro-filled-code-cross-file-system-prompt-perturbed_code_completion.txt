uint32_t len, len2;
	int records = 0, tapemarks = 0;

	while (uc < end_pointer) {
		len = getlen(uc, end_pointer);
		if (len == 0)
			return 0;	// Invalid length
		uc += 4;
		if (len == 0xFFFFFFFF) {
			// EOM marker
			break;
		}
		if (uc + len > end_pointer)
			return 0;	// Incomplete record
		if (len != getlen(uc + len - 4, end_pointer))
			return 0;	// Length mismatch
		records++;
		uc += len - 4;
		len2 = getlen(uc, end_pointer);
		if (len2 == 0)
			return 0;	// Invalid length
		uc += 4;
		if (len2 == 0xFFFFFFFF) {
			// EOM marker
			break;
		}
		if (len2 != 12)
			return 0;	// Invalid tapemark length
		tapemarks++;
		if (tapemarks == SIMH_TAPEMARKS)
			break;		// Stop after a certain number of tapemarks
		uc += len2;
	}
	return records > 0 ? 1 : 0;	// Return 1 if valid SIMH data found