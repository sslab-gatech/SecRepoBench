int record_count = 0;
	int tapemark_count = 0;

	while (uc < end_pointer) {
		uint32_t len = getlen(&uc);
		if (len == 0xffffffff) {
			break; // End of Medium
		}
		if (uc + len > end_pointer) {
			return 0; // Invalid data
		}
		record_count++;

		// Check for tapemark (assuming tapemark is a specific pattern)
		if (len == 0) {
			tapemark_count++;
			if (tapemark_count >= SIMH_TAPEMARKS) {
				break; // Reached tapemark limit
			}
		}

		uc += len; // Move to the next record
	}

	return 1; // Valid SIMH data found