int record_count = 0;
	int tapemark_count = 0;

	while (uc < end_pointer) {
		uint32_t length = getlen(&uc);
		if (length == 0xffffffff) {
			break; // End of Medium
		}

		if (uc + length > end_pointer) {
			return 0; // Invalid data
		}

		// Process the record here (e.g., check for tapemarks)
		record_count++;

		// Example check for tapemarks (this logic may vary based on actual requirements)
		if (/* condition to identify a tapemark */) {
			tapemark_count++;
			if (tapemark_count >= SIMH_TAPEMARKS) {
				break; // Reached the limit of tapemarks
			}
		}

		uc += length; // Move to the next record
	}

	return 1; // Valid SIMH data found