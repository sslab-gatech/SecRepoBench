// Initialize variables
	int records = 0, tapemarks = 0;
	const unsigned char *current = uc;

	while (current < end_pointer) {
		// Check if we have enough bytes for a record length
		if (end_pointer - current < 4)
			return 0;

		// Read the record length
		uint32_t length = getlen(current);
		current += 4;

		// Check for End of Medium (EOM) marker
		if (length == 0xFFFFFFFF)
			break;

		// Check if the length is valid
		if (length > (end_pointer - current))
			return 0;

		// Move the pointer forward by the length of the record
		current += length;

		// Check if we have enough bytes for the complementary length
		if (end_pointer - current < 4)
			return 0;

		// Read the complementary length
		uint32_t comp_length = getlen(current);
		current += 4;

		// Validate the complementary length
		if (length != comp_length)
			return 0;

		// Increment the record count
		records++;

		// Check for tapemark (length == 0)
		if (length == 0) {
			tapemarks++;
			if (tapemarks >= SIMH_TAPEMARKS)
				break;
		}
	}

	// Return 1 if valid SIMH data is found, otherwise 0
	return (records > 0 && tapemarks > 0) ? 1 : 0;