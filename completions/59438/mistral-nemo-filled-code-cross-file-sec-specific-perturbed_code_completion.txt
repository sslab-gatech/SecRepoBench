size_t records = 0, tapemarks = 0;
while (uc < end_pointer) {
    size_t len = getlen(uc, end_pointer);
    if (len == 0) {
        if (*uc == 0xFFFFFFFF) {
            // End of Medium marker found, break the loop
            break;
        } else {
            // Invalid data record length, return 0
            return 0;
        }
    }
    if (len > 0) {
        records++;
        if (*uc == 0xFFFFFFFF) {
            tapemarks++;
            if (tapemarks >= SIMH_TAPEMARKS) {
                // Tapemark limit reached, stop processing further
                break;
            }
        }
    }
    uc += len;
}
return records > 0 && tapemarks > 0;