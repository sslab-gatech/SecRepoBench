const unsigned char *current = uc;
	size_t record_count = 0;
	size_t tapemark_count = 0;

	while (current < end_pointer) {
		// Check for End of Medium (EOM) marker
		if (current + 4 <= end_pointer && memcmp(current, "\xFF\xFF\xFF\xFF", 4) == 0) {
			break; // EOM found
		}

		// Get the length of the current record
		size_t record_length = getlen(current);
		if (record_length == 0 || current + record_length > end_pointer) {
			return 0; // Invalid record length
		}

		// Process the record
		record_count++;

		// Move the pointer to the next record
		current += record_length;

		// Check for tapemarks
		if (is_tapemark(current)) {
			tapemark_count++;
			if (tapemark_count >= SIMH_TAPEMARKS) {
				break; // Limit reached
			}
		}
	}

	return (record_count > 0) ? 1 : 0; // Return 1 if valid data found, otherwise 0