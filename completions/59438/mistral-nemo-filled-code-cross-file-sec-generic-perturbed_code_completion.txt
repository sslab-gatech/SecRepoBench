int len, tapemarks = 0;
while (uc < end_pointer) {
    if ((len = getlen(uc)) == -1)
        return 0;
    if (len == 0xFFFFFFFF) {
        // End of Medium (EOM) marker found, terminate parsing
        return 1;
    }
    if (len == 0)
        tapemarks++;
    else {
        // Check if the data record length matches its complementary length
        if (getlen(uc + len) != len)
            return 0;
    }
    if (tapemarks >= SIMH_TAPEMARKS)
        // Reached the predefined limit of tapemarks, stop processing further
        break;
    uc += len;
}
return tapemarks > 0;