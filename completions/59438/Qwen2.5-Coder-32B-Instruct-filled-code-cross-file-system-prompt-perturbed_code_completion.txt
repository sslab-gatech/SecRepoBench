int records = 0;
	int tapemarks = 0;
	uint32_t len;

	while (uc < end_pointer) {
		if (uc + 4 > end_pointer)
			return 0; // Not enough data for a length field

		len = getlen(uc); // Assuming getlen extracts a 32-bit length
		uc += 4;

		if (len == 0xFFFFFFFF) {
			// End of Medium marker
			break;
		}

		if (uc + len + 4 > end_pointer)
			return 0; // Not enough data for the record and its complement

		uint32_t complement_len = getlen(uc + len);
		if (len != complement_len)
			return 0; // Lengths do not match

		uc += len + 4; // Move past the data and its complement length
		records++;

		if (uc + 4 <= end_pointer && getlen(uc) == 0) {
			// Tapemark detected
			tapemarks++;
			uc += 4;
			if (tapemarks >= SIMH_TAPEMARKS)
				break;
		}
	}

	return records > 0; // Return 1 if at least one record was found