int record_count = 0;
	int tapemark_count = 0;

	while (uc < end_pointer) {
		uint32_t len = getlen(&uc);
		if (len == 0xffffffff) { // End of Medium
			break;
		}

		if (len > (end_pointer - uc)) {
			DPRINTF("Invalid record length: %u\n", len);
			return 0; // Invalid data
		}

		record_count++;

		// Check for tapemark (assuming tapemark is a specific pattern)
		if (len == 0) {
			tapemark_count++;
			if (tapemark_count >= SIMH_TAPEMARKS) {
				break; // Reached the limit of tapemarks
			}
		}

		uc += len; // Move to the next record
	}

	return 1; // Valid SIMH data found