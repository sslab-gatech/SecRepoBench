if (codeccontext->codec_id == AV_CODEC_ID_H264 ||
    codeccontext->codec_id == AV_CODEC_ID_VP8 ||
    codeccontext->codec_id == AV_CODEC_ID_VP9 ||
    codeccontext->codec_id == AV_CODEC_ID_HEVC) {
    
    // For low resolution videos, ensure height is a multiple of 2
    // to accommodate motion compensation edge cases
    if (*height < 720) {
        *height = FFALIGN(*height, 2);
    }
    
    // Ensure width is at least 32 for edge emulation during
    // out-of-frame motion vector processing
    if (*width < 32)
        *width = 32;
}