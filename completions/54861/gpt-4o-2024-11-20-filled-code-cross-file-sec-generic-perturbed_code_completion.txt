// Ensure width is at least 32 for edge emulation during motion vector processing
    *width = FFMAX(*width, 32);

    // Adjust height for specific codecs or low resolution cases
    if (codeccontext->codec_id == AV_CODEC_ID_H264 ||
        codeccontext->codec_id == AV_CODEC_ID_VP8  ||
        codeccontext->codec_id == AV_CODEC_ID_VP9  ||
        codeccontext->lowres) {
        *height = FFALIGN(*height + 2, h_align);
    }