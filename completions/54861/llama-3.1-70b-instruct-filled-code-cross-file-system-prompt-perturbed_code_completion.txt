if (codeccontext->codec_id == AV_CODEC_ID_H264 ||
    codeccontext->codec_id == AV_CODEC_ID_VC1 ||
    codeccontext->codec_id == AV_CODEC_ID_MPEG4 ||
    codeccontext->codec_id == AV_CODEC_ID_MSMPEG4V3 ||
    codeccontext->codec_id == AV_CODEC_ID_WMV3 ||
    codeccontext->codec_id == AV_CODEC_ID_VP3 ||
    codeccontext->codec_id == AV_CODEC_ID_VP5 ||
    codeccontext->codec_id == AV_CODEC_ID_VP6 ||
    codeccontext->codec_id == AV_CODEC_ID_VP6A ||
    codeccontext->codec_id == AV_CODEC_ID_VP6F ||
    codeccontext->codec_id == AV_CODEC_ID_VP8 ||
    codeccontext->codec_id == AV_CODEC_ID_VP9 ||
    codeccontext->width * codeccontext->height < 640*480) {
    *height = FFALIGN(*height, 2 * h_align);
}
*width = FFMAX(*width, 32);