if (codeccontext->codec_id == AV_CODEC_ID_H264 ||
    codeccontext->codec_id == AV_CODEC_ID_VP5 ||
    codeccontext->codec_id == AV_CODEC_ID_VP6 ||
    codeccontext->codec_id == AV_CODEC_ID_VP6F ||
    codeccontext->codec_id == AV_CODEC_ID_VP6A ||
    codeccontext->codec_id == AV_CODEC_ID_MPEG1VIDEO ||
    codeccontext->codec_id == AV_CODEC_ID_MPEG2VIDEO ||
    codeccontext->codec_id == AV_CODEC_ID_VC1 ||
    codeccontext->codec_id == AV_CODEC_ID_RV30 ||
    codeccontext->codec_id == AV_CODEC_ID_RV40 ||
    codeccontext->codec_id == AV_CODEC_ID_SVQ3) {
    // Adjust height for certain codecs
    *height += 2;

    // Ensure minimum width for edge emulation
    *width = FFMAX(*width, 32);
}

// Ensure width and height are positive to prevent integer overflow
*width = FFMAX(*width, 1);
*height = FFMAX(*height, 1);