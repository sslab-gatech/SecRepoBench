// Ensure the width is at least 32 for edge emulation
    *width = FFMAX(*width, 32);

    // If the codec is H.264 or similar, adjust height for motion compensation
    if (codeccontext->codec_id == AV_CODEC_ID_H264 ||
        codeccontext->codec_id == AV_CODEC_ID_VP8  ||
        codeccontext->codec_id == AV_CODEC_ID_VP9  ||
        codeccontext->lowres) {
        *height += 2;
    }