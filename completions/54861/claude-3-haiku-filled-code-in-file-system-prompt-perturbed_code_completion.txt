// Adjust the height by 2 to accommodate certain motion compensation edge cases, and ensure the width is at least 32 to provide enough temporary space for edge emulation during out-of-frame motion vector processing.
if (codeccontext->codec_id == AV_CODEC_ID_H264 ||
    codeccontext->codec_id == AV_CODEC_ID_VP8 ||
    codeccontext->codec_id == AV_CODEC_ID_VP9 ||
    codeccontext->codec_id == AV_CODEC_ID_AV1 ||
    codeccontext->width < 32) {
    *height = FFALIGN(*height, 2);
}