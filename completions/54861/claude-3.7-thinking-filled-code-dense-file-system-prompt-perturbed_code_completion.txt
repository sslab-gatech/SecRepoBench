if (codeccontext->codec_id == AV_CODEC_ID_H264 ||
    codeccontext->codec_id == AV_CODEC_ID_VP8 ||
    codeccontext->codec_id == AV_CODEC_ID_VP9 ||
    codeccontext->codec_id == AV_CODEC_ID_HEVC ||
    codeccontext->codec_id == AV_CODEC_ID_AV1 ||
    codeccontext->lowres) {
    // Adjust height by 2 for motion compensation edge cases
    *height = FFALIGN(*height, 2);
}

// Ensure width is at least 32 for edge emulation during out-of-frame motion vector processing
if (codeccontext->codec_id == AV_CODEC_ID_H264 ||
    codeccontext->codec_id == AV_CODEC_ID_VP8 ||
    codeccontext->codec_id == AV_CODEC_ID_VP9 ||
    codeccontext->codec_id == AV_CODEC_ID_HEVC ||
    codeccontext->codec_id == AV_CODEC_ID_AV1) {
    *width = FFMAX(*width, 32);
}