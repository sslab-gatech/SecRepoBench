if (codeccontext->codec_id == AV_CODEC_ID_H264 ||
    codeccontext->codec_id == AV_CODEC_ID_VP5 ||
    codeccontext->codec_id == AV_CODEC_ID_VP6 ||
    codeccontext->codec_id == AV_CODEC_ID_VP6F ||
    codeccontext->codec_id == AV_CODEC_ID_VP6A ||
    codeccontext->codec_id == AV_CODEC_ID_MPEG1VIDEO ||
    codeccontext->codec_id == AV_CODEC_ID_MPEG2VIDEO ||
    codeccontext->codec_id == AV_CODEC_ID_MPEG4 ||
    codeccontext->codec_id == AV_CODEC_ID_VC1 ||
    codeccontext->codec_id == AV_CODEC_ID_WMV3 ||
    codeccontext->codec_id == AV_CODEC_ID_RV30 ||
    codeccontext->codec_id == AV_CODEC_ID_RV40) {
    if (*height < 720) {
        *height = FFALIGN(*height, 2);
    }
}

if (*width < 32) {
    *width = 32;
}