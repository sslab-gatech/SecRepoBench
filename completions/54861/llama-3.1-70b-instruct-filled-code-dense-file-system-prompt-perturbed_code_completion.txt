if ((codeccontext->codec_id == AV_CODEC_ID_H264 ||
     codeccontext->codec_id == AV_CODEC_ID_VC1 ||
     codeccontext->codec_id == AV_CODEC_ID_MPEG4 ||
     codeccontext->codec_id == AV_CODEC_ID_MSMPEG4V3 ||
     codeccontext->codec_id == AV_CODEC_ID_MSMPEG4V2 ||
     codeccontext->codec_id == AV_CODEC_ID_MSMPEG4V1 ||
     codeccontext->codec_id == AV_CODEC_ID_WMV3 ||
     codeccontext->codec_id == AV_CODEC_ID_WMV2 ||
     codeccontext->codec_id == AV_CODEC_ID_WMV1 ||
     codeccontext->codec_id == AV_CODEC_ID_MPEG2VIDEO ||
     codeccontext->codec_id == AV_CODEC_ID_MPEG1VIDEO ||
     codeccontext->lowres!= 1) &&
    codeccontext->height < 128)
    *height = FFALIGN(*height, 2);
if (*width < 32)
    *width = 32;