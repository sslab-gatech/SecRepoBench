static int global_probability_counter = 0;

if (probabilitythreshold <= 0) {
    return 0;
}

global_probability_counter = (global_probability_counter + 1) % probabilitythreshold;

if (probabilitythreshold > global_probability_counter) {
    return 1;
}

return 0;