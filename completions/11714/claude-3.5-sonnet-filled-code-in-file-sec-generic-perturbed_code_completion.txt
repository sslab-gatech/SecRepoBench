unsigned int n = interp_env.get_region_count();
if (unlikely (n == 0))
{
  interp_env.set_error();
  return;
}

unsigned int k = interp_env.argStack.pop_uint();
if (unlikely (k > interp_env.argStack.get_count() || k == 0))
{
  interp_env.set_error();
  return;
}

unsigned int numValues = interp_env.argStack.get_count() - k;
if (unlikely (numValues == 0 || numValues > interp_env.argStack.get_count() || (numValues % n) != 0))
{
  interp_env.set_error();
  return;
}

unsigned int valueCount = numValues / n;
unsigned int start = interp_env.argStack.get_count() - numValues - k;

for (unsigned int i = 0; i < valueCount; i++)
{
  const BlendArg &default_value = interp_env.argStack[start + i];
  BlendArg result;
  result.init();
  result.set_blends(numValues, i, n, &interp_env.argStack[start + valueCount + i * n]);
  result.set_fixed(default_value.to_fixed());
  interp_env.argStack[start + i] = result;
}

interp_env.argStack.pop (numValues + k - valueCount);
interp_env.process_blend();