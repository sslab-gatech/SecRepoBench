int numBlends = interp_env.argStack.pop ();
int regionCount = interp_env.argStack.pop ();

unsigned int stack_required = numBlends * (regionCount + 1);
if (interp_env.argStack.get_count() < stack_required) {
    interp_env.set_error ();
    return;
}

param.defaults.resize(numBlends);
param.blendDeltas.resize(regionCount * numBlends);

for (int i = 0; i < numBlends; i++)
    param.defaults[i] = interp_env.argStack[i];

for (int i = 0; i < regionCount * numBlends; i++)
    param.blendDeltas[i] = interp_env.argStack[numBlends + i];

for (int i = 0; i < numBlends; i++) {
    for (int j = 0; j < regionCount; j++) {
        param.defaults[i] += param.blendDeltas[j * numBlends + i] * interp_env.get_region_weight(j);
    }
}

interp_env.argStack.pop (stack_required);

for (int i = 0; i < numBlends; i++)
    interp_env.argStack.push (param.defaults[i]);