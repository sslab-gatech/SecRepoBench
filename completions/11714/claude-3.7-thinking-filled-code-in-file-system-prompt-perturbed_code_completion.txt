unsigned int numRegions = interp_env.pop_arg().to_int();
if (unlikely (numRegions > interp_env.get_region_count()))
{
  interp_env.set_error();
  return;
}

interp_env.process_blend();

unsigned int argCount = interp_env.argStack.get_count();
if (unlikely (argCount % (numRegions + 1) != 0))
{
  interp_env.set_error();
  return;
}
unsigned int numValues = argCount / (numRegions + 1);

for (unsigned int i = 0; i < numValues; i++)
  interp_env.argStack[i].set_blends(numValues, i, numRegions, &interp_env.argStack[numValues + i * numRegions]);

interp_env.argStack.resize(numValues);