unsigned int n = interp_env.argStack.pop_uint ();
unsigned int numRegions = interp_env.get_region_count ();
if (numRegions == 0)
{
  interp_env.clear_args ();
  return;
}

if (n == 0 || n >= interp_env.argStack.get_count ())
{
  interp_env.clear_args ();
  return;
}

unsigned int blendCount = n * numRegions;
if (blendCount > interp_env.argStack.get_count () - n)
{
  interp_env.clear_args ();
  return;
}

/* Push the default values onto the blend array in reverse order */
for (unsigned int i = 0; i < n; i++)
{
  unsigned int k = interp_env.argStack.get_count () - n - blendCount + i;
  interp_env.set_blend_coord (i, interp_env.argStack[k]);
}

/* Add the blend values from the blend array */
for (unsigned int i = 0; i < n; i++)
{
  for (unsigned int j = 0; j < numRegions; j++)
  {
    unsigned int k = interp_env.argStack.get_count () - blendCount + (i * numRegions) + j;
    interp_env.add_blend_coord (i, j, interp_env.argStack[k]);
  }
}

/* Pop all blend values and default values */
interp_env.argStack.pop (blendCount + n);

/* Push the blended values back onto the stack */
for (unsigned int i = 0; i < n; i++)
  interp_env.argStack.push (interp_env.get_blend_coord (i));