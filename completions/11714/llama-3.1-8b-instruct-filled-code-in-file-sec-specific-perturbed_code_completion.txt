static inline void process_blend (CFF2CSInterpEnv &interp_env, PARAM& param)
{
  unsigned int num_values = interp_env.argStack.pop_uint ();
  unsigned int value_index = interp_env.argStack.pop_uint ();
  unsigned int num_blends = interp_env.argStack.pop_uint ();
  const BlendArg *blends = reinterpret_cast<const BlendArg*>(interp_env.argStack.pop_ptr ());

  if (unlikely (num_blends > interp_env.scalars.len))
  {
    interp_env.set_error ();
    return;
  }

  interp_env.process_blend ();
  interp_env.scalars.resize (num_blends);
  for (unsigned int i = 0; i < num_blends; i++)
  {
    interp_env.scalars[i] = blends[i].to_real ();
  }

  interp_env.argStack.push (num_values);
  interp_env.argStack.push (value_index);
}