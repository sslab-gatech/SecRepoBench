unsigned int num_regions = env.argStack.pop_uint ();
unsigned int num_values = env.argStack.pop_uint ();

if (unlikely (num_regions == 0 || num_values == 0))
  return;

unsigned int num_blends = num_regions * num_values;
if (unlikely (env.argStack.get_count () < num_blends))
  return;

for (unsigned int i = 0; i < num_values; i++)
{
  param.blend_array[i] = env.argStack[num_blends - num_values + i];
  for (unsigned int j = 0; j < num_regions; j++)
  {
    param.blend_array[i] += env.argStack[j * num_values + i] * env.get_region_scalar (j);
  }
}

env.argStack.pop (num_blends);