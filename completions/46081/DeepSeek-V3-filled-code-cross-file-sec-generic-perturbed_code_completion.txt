quantum=quantumdata->depth;
  if (quantumdata->format == FloatingPointQuantumFormat)
    quantum=32;
  else if (quantumdata->format == SignedQuantumFormat)
    quantum=quantum < 8 ? 8 : quantum;
  else
    quantum=quantum < 8 ? 8 : quantum;
  quantumdata->pad=(quantum % 8) != 0 ? 8-(quantum % 8) : 0;
  quantumdata->quantum=quantum+quantumdata->pad;
  extent=image->columns*image->rows*quantumdata->quantum/8;
  if (quantumdata->extent < extent)
    {
      if (quantumdata->pixels != (unsigned char *) NULL)
        quantumdata->pixels=(unsigned char *) RelinquishMagickMemory(
          quantumdata->pixels);
      quantumdata->pixels=(unsigned char *) AcquireQuantumMemory(extent,
        sizeof(*quantumdata->pixels));
      if (quantumdata->pixels == (unsigned char *) NULL)
        return(MagickFalse);
      quantumdata->extent=extent;
    }
  return(MagickTrue);