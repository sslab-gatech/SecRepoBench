/*
  Adjust the quantum depth based on the format and specified depth,
  particularly for floating point formats.
*/
if ((quantumdata->format == FloatingPointQuantumFormat) ||
    (quantumdata->format == DoublePrecisionQuantumFormat))
  quantumdata->depth=64;
extent=image->columns*image->rows;
quantum=quantumdata->depth*image->number_channels;
if (quantumdata->pack == MagickFalse)
  quantum+=(quantum % 8);
if (quantumdata->endian == MSBEndian)
  quantum=(quantum+7) & ~7;
if (quantumdata->depth > 8)
  quantum=(quantum+7) & ~7;
if (image->matte == MagickFalse)
  quantum-=quantumdata->depth;
if ((quantumdata->storage_class == PseudoClass) ||
    (quantumdata->storage_class == DirectClass))
  {
    if (quantumdata->depth <= 8)
      {
        if (quantumdata->pack == MagickFalse)
          quantum=(quantum+7) & ~7;
      }
    else
      {
        if (quantumdata->pack == MagickFalse)
          quantum=(quantum+7) & ~7;
      }
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
else
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }
if (quantumdata->depth <= 8)
  {
    if (quantumdata->pack == MagickFalse)
      quantum=(quantum+7) & ~7;
  }