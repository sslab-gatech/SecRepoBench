MagickBooleanType SetQuantumDepth(const Image *image,
  QuantumInfo *quantumdata,const size_t depth)
{
  size_t
    extent,
    quantum;

  /*
    Allocate the quantum pixel buffer.
  */
  assert(image!= (Image *) NULL);
  assert(image->signature == MagickCoreSignature);
  if (image->debug!= MagickFalse)
    (void) LogMagickEvent(TraceEvent,GetMagickModule(),"%s",image->filename);
  assert(quantumdata!= (QuantumInfo *) NULL);
  assert(quantumdata->signature == MagickCoreSignature);
  quantumdata->depth=MagickMin(depth,64);
  extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
  quantum=extent*quantumdata->depth;
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(image,quantumdata,quantumdata->format);
      quantum=extent*quantumdata->depth;
    }
  if (quantum > image->columns*image->rows)
    {
      quantumdata->depth=MagickMin((size_t) (quantum/image->columns/image->rows+7)/8,
        64);
      extent=GetQuantumExtent(imag