extent=GetQuantumExtent(image,quantumdata->depth,quantumdata->format);
  if (extent == 0)
    return(MagickFalse);
  quantum=image->columns*extent;
  if (quantumdata->pixels != (Quantum *) NULL)
    {
      if (quantumdata->length < quantum)
        {
          quantumdata->pixels=(Quantum *) RelinquishMagickMemory(quantumdata->pixels);
          if (quantumdata->pixels == (Quantum *) NULL)
            return(MagickFalse);
        }
    }
  if (quantumdata->pixels == (Quantum *) NULL)
    {
      quantumdata->pixels=(Quantum *) AcquireQuantumMemory(image->columns,
        quantum);
      if (quantumdata->pixels == (Quantum *) NULL)
        return(MagickFalse);
      quantumdata->length=quantum;
    }
  quantumdata->storage=quantum;
  return(MagickTrue);