quantum = quantumdata->depth;
switch (quantumdata->format)
{
  case FloatingPointQuantumFormat:
  {
    quantum = (size_t) (sizeof(float)*8);
    if (quantum == 16)
      quantum = 16;
    else if (quantum == 24)
      quantum = 24;
    else
      quantum = 32;
    break;
  }
  case DoubleQuantumFormat:
  {
    quantum = (size_t) (sizeof(double)*8);
    if (quantum == 64)
      quantum = 64;
    else
      quantum = 32;
    break;
  }
  default:
    break;
}
extent = (quantum+7)/8;
if (quantumdata->pack == MagickFalse)
  extent = (size_t) (quantum+7)/8;
extent = (size_t) (quantum*image->number_channels+7)/8;
if (extent < ((size_t) quantum*image->number_channels))
  extent = (size_t) quantum*image->number_channels;
if (quantumdata->pixels == (MemoryInfo **) NULL)
  {
    quantumdata->pixels=(MemoryInfo **) AcquireQuantumMemory(
      GetMagickResourceLimit(ThreadResource),sizeof(*quantumdata->pixels));
    if (quantumdata->pixels == (MemoryInfo **) NULL)
      return(MagickFalse);
  }
return(AcquireQuantumPixels(quantumdata,extent));