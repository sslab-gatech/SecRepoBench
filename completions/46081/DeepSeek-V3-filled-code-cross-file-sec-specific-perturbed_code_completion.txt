quantum=quantumdata->depth;
  if (quantumdata->format == FloatingPointQuantumFormat)
    quantum=32;
  else if (quantumdata->format == SignedQuantumFormat)
    quantum++;
  quantumdata->pad=(quantum % 8) != 0 ? 8-(quantum % 8) : 0;
  quantum+=quantumdata->pad;
  quantumdata->minimum_quantum=(size_t) (quantum/8);
  if (quantumdata->format == FloatingPointQuantumFormat)
    quantumdata->minimum_quantum=4;
  extent=image->columns*image->rows*quantumdata->minimum_quantum*
    GetImageChannels(image);
  if (quantumdata->extent < extent)
    {
      if (quantumdata->pixels != (unsigned char *) NULL)
        quantumdata->pixels=(unsigned char *) RelinquishMagickMemory(
          quantumdata->pixels);
      quantumdata->pixels=(unsigned char *) AcquireQuantumMemory(extent,
        sizeof(*quantumdata->pixels));
      if (quantumdata->pixels == (unsigned char *) NULL)
        return(MagickFalse);
      quantumdata->extent=extent;
    }
  return(MagickTrue);