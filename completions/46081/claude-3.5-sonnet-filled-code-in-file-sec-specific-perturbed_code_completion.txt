quantum=quantumdata->quantum;
switch (quantumdata->format)
{
  case FloatingPointQuantumFormat:
  {
    if (quantumdata->depth == 16)
      quantum=16;
    else if (quantumdata->depth == 24)
      quantum=24;
    else if (quantumdata->depth == 32)
      quantum=32;
    else if (quantumdata->depth == 64)
      quantum=64;
    break;
  }
  default:
    break;
}
extent=(quantum*image->columns+7)/8;
if (extent < (size_t) ((quantum+7)/8))
  extent=(size_t) ((quantum+7)/8);
extent=GetQuantumExtent(image,quantumdata,GetQuantumType(image,NULL));
if (extent < (image->columns*image->rows))
  extent=image->columns*image->rows;
if (quantumdata->pixels != (MemoryInfo **) NULL)
  {
    if (extent > quantumdata->extent)
      {
        DestroyQuantumPixels(quantumdata);
        quantumdata->pixels=(MemoryInfo **) NULL;
      }
  }
if (quantumdata->pixels == (MemoryInfo **) NULL)
  {
    quantumdata->extent=extent;
    return(AcquireQuantumPixels(quantumdata,extent));
  }
return(MagickTrue);