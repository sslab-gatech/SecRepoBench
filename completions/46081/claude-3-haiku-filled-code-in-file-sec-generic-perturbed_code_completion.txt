static MagickBooleanType SetQuantumDepth(const Image *image,
  QuantumInfo *quantumdata,const size_t depth)
{
  size_t
    extent,
    quantum;

  /*
    Allocate the quantum pixel buffer.
  */
  assert(image != (Image *) NULL);
  assert(image->signature == MagickCoreSignature);
  if (image->debug != MagickFalse)
    (void) LogMagickEvent(TraceEvent,GetMagickModule(),"%s",image->filename);
  assert(quantumdata != (QuantumInfo *) NULL);
  assert(quantumdata->signature == MagickCoreSignature);
  quantumdata->depth=MagickMin(depth,64);
  quantum=quantumdata->depth;
  if (quantumdata->format == FloatingPointQuantumFormat)
    quantum=sizeof(float)*8;
  else if (quantumdata->format == FloatingPointSampleQuantumFormat)
    quantum=sizeof(double)*8;
  extent=GetQuantumExtent(image,quantumdata,GetQuantumType(image,
    (ExceptionInfo *) NULL));
  if (AcquireQuantumPixels(quantumdata,extent) == MagickFalse)
    return(MagickFalse);
  return(MagickTrue);
}