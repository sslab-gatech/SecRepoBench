quantum = quantumdata->depth;
  if (quantumdata->format == FloatingPointQuantumFormat)
    {
      if (quantum <= 16)
        quantum = 16;
      else if (quantum <= 24)
        quantum = 24;
      else
        quantum = 32;
    }
  extent = GetQuantumExtent((Image *) image, quantumdata, GetQuantumType((Image *) image, (ExceptionInfo *) NULL));
  if (extent == 0)
    return MagickFalse;
  if (quantumdata->pixels == (MemoryInfo **) NULL)
    {
      if (AcquireQuantumPixels(quantumdata, extent) == MagickFalse)
        return MagickFalse;
    }
  else
    {
      if (quantumdata->extent < extent)
        {
          DestroyQuantumPixels(quantumdata);
          if (AcquireQuantumPixels(quantumdata, extent) == MagickFalse)
            return MagickFalse;
        }
    }
  return MagickTrue;