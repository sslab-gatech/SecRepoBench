MagickBooleanType SetQuantumDepth(const Image *image,
  QuantumInfo *quantum_info,const size_t depth)
{
  size_t
    extent,
    quantum;

  assert(image != (Image *) NULL);
  assert(image->signature == MagickCoreSignature);
  if (image->debug != MagickFalse)
    (void) LogMagickEvent(TraceEvent,GetMagickModule(),"%s",image->filename);
  assert(quantum_info != (QuantumInfo *) NULL);
  assert(quantum_info->signature == MagickCoreSignature);
  quantum_info->depth=MagickMin(depth,64);

  // Calculate the extent based on the image dimensions and quantum depth
  extent = (image->columns * image->rows * quantum_info->depth + 7) / 8;

  // Allocate the quantum pixel buffer
  if (AcquireQuantumPixels(quantum_info, extent) == MagickFalse)
    return MagickFalse;

  return MagickTrue;
}