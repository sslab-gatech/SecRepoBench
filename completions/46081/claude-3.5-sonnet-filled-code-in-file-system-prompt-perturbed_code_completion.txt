quantum=quantumdata->quantum;
switch (quantumdata->format)
{
  case FloatingPointQuantumFormat:
  {
    quantum=32;
    if (quantumdata->depth == 16)
      quantum=16;
    else if (quantumdata->depth == 64)
      quantum=64;
    break;
  }
  case SignedQuantumFormat:
  case UnsignedQuantumFormat:
  {
    quantum=(size_t) quantumdata->depth;
    break;
  }
  default:
    break;
}
extent=(quantum*image->columns+7)/8;
if (quantumdata->pack == MagickFalse)
  extent=(quantum*image->columns)/8;
if (extent < (size_t) SSIZE_MAX)
  extent=(extent+1) & ~1;
if (quantumdata->pixels != (MemoryInfo **) NULL)
  {
    if (quantumdata->extent < extent)
      {
        DestroyQuantumPixels(quantumdata);
        quantumdata->pixels=(MemoryInfo **) NULL;
      }
  }
if (quantumdata->pixels == (MemoryInfo **) NULL)
  {
    quantumdata->extent=extent;
    return(AcquireQuantumPixels(quantumdata,extent));
  }
return(MagickTrue);