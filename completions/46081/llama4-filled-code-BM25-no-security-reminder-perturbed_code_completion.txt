// Adjust the quantum depth based on the format and specified depth,
// particularly for floating point formats. Calculate the memory
// required for quantum pixels based on the image's channels, padding,
// and depth. Determine the necessary buffer size by comparing it to
// the product of the image's dimensions and memory requirement per
// pixel. Ensure memory allocation for quantum pixels is sufficient;
// if not, reallocate as needed. Return whether the allocation was
// successful.
quantumdata->extent=0;
if (quantumdata->format == FloatingPointQuantumFormat)
  quantumdata->depth=32;  /* 32-bit floating-point numbers */
extent=MagickMax(image->columns,1UL) * MagickMax(image->rows,1UL);
quantum=ExtentQuantumPixels(quantumdata);
extent*=quantum;
if (quantumdata->pixels == (unsigned char *) NULL)
  quantumdata->pixels=(unsigned char *) AcquireQuantumMemory(extent,
    sizeof(unsigned char));
else
  quantumdata->pixels=(unsigned char *) ResizeQuantumMemory(
    quantumdata->pixels,extent,sizeof(unsigned char));
if (quantumdata->pixels == (unsigned char *) NULL)
  return(MagickFalse);
quantumdata->extent=extent;
return(MagickTrue);