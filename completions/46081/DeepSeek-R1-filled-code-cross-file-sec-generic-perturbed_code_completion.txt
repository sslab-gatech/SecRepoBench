quantumdata->depth=MagickMin(depth,64);
if (quantumdata->format == FloatingPointQuantumFormat)
  quantumdata->depth=(quantumdata->depth <= 32) ? 32 : 64;
quantum=(image->channels*quantumdata->depth)+quantumdata->pad;
bytes_per_pixel=(quantum+7)/8;
if (MagickSafeMult(&required_size,image->columns,image->rows) == MagickFalse)
  return(MagickFalse);
if (MagickSafeMult(&required_size,required_size,bytes_per_pixel) == MagickFalse)
  return(MagickFalse);
if (required_size > quantumdata->extent)
  {
    unsigned char
      *pixels;

    pixels=(unsigned char *) AcquireQuantumMemory(required_size,sizeof(*pixels));
    if (pixels == (unsigned char *) NULL)
      return(MagickFalse);
    quantumdata->pixels=RelinquishMagickMemory(quantumdata->pixels);
    quantumdata->pixels=pixels;
    quantumdata->extent=required_size;
  }
return(MagickTrue);