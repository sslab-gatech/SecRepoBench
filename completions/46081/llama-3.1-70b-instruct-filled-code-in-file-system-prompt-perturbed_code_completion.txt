quantum=quantumdata->quantum;
if (quantumdata->format == FloatingPointQuantumFormat)
  {
    if (quantumdata->depth <= 16)
      quantum=16;
    else
      if (quantumdata->depth <= 32)
        quantum=32;
      else
        quantum=64;
  }
extent=image->columns*GetQuantumExtent(image,quantumdata,GetQuantumType(image,
  (ExceptionInfo *) NULL));
if (quantumdata->format == FloatingPointQuantumFormat)
  {
    if (quantumdata->depth <= 16)
      extent*=2;
    else
      if (quantumdata->depth <= 32)
        extent*=4;
      else
        extent*=8;
  }
if (quantumdata->pack == MagickFalse)
  extent=(size_t) ((extent+7)/8);
if (AcquireQuantumPixels(quantumdata,extent) == MagickFalse)
  return(MagickFalse);
return(MagickTrue);