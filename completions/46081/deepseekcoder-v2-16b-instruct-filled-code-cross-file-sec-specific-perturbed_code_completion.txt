/*
    Allocate the quantum pixel buffer.
  */
  extent = image->columns * image->rows * (image->depth * image->colorspace->colors / 8);
  quantum = MagickAlignMemory(extent, sizeof(Quantum));
  if (quantumdata->pixels != NULL)
    quantumdata->pixels = (Quantum *) RelinquishMagickMemory(quantumdata->pixels);
  quantumdata->pixels = (Quantum *) AcquireQuantumMemory(quantumdata->rows, quantum);
  if (quantumdata->pixels == NULL)
    return MagickFalse;
  quantumdata->length = quantum;
  return MagickTrue;