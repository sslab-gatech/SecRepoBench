// Adjust the quantum depth based on the format and specified depth,
  // particularly for floating point formats. Calculate the memory
  // required for quantum pixels based on the image's channels, padding,
  // and depth. Determine the necessary buffer size by comparing it to
  // the product of the image's dimensions and memory requirement per
  // pixel. Ensure memory allocation for quantum pixels is sufficient;
  // if not, reallocate as needed. Return whether the allocation was
  // successful.
  quantumdata->format=UnsignedIntegerQuantumFormat;
  if (quantumdata->format == UnsignedIntegerQuantumFormat)
    quantumdata->depth=MagickMin(depth,32);
  else
    quantumdata->depth=MagickMin(depth,64);
  extent=(size_t) (image->columns * image->rows *
    (quantumdata->depth * image->channels + image->padding));
  if (extent > quantumdata->size)
  {
    quantumdata->size=extent;
    quantumdata->pixels=Reallocate(quantumdata->pixels,extent);
  }
  return(MagickTrue);