/*
  Adjust the quantum depth based on the format and specified depth,
  particularly for floating point formats. Calculate the memory
  required for quantum pixels based on the image's channels, padding,
  and depth. Determine the necessary buffer size by comparing it to
  the product of the image's dimensions and memory requirement per
  pixel. Ensure memory allocation for quantum pixels is sufficient;
  if not, reallocate as needed. Return whether the allocation was
  successful.
*/
quantum = GetQuantumExtent(image,quantumdata,quantumdata->format);
extent = image->columns * image->rows * quantum;
if (quantumdata->extent < extent)
{
  quantumdata->pixels=(Quantum *) RelinquishMagickMemory(quantumdata->pixels);
  quantumdata->pixels=(Quantum *) AcquireAlignedMemory(1,extent);
  if (quantumdata->pixels == (Quantum *) NULL)
    return(MagickFalse);
  quantumdata->extent=extent;
}
return(MagickTrue);