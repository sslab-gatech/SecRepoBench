// Adjust the quantum depth based on the format and specified depth,
// particularly for floating point formats. Calculate the memory
// required for quantum pixels based on the image's channels, padding,
// and depth. Determine the necessary buffer size by comparing it to
// the product of the image's dimensions and memory requirement per
// pixel. Ensure memory allocation for quantum pixels is sufficient;
// if not, reallocate as needed. Return whether the allocation was
// successful.
extent = (size_t) image->columns * image->rows * image->depth;
quantumdata->buffer = (Quantum *) AcquireQuantumMemory(extent, sizeof(Quantum));
if (quantumdata->buffer == (Quantum *) NULL)
  return MagickFalse;
quantumdata->extent = extent;
quantumdata->depth = MagickMin(depth, 64);
quantumdata->format = image->format;
quantumdata->type = image->type;
quantumdata->channels = image->channels;
quantumdata->storage_class = image->storage_class;
quantumdata->min_is_white = image->min_is_white;
quantumdata->gamma = image->gamma;
quantumdata->red = image->red;
quantumdata->green = image->green;
quantumdata->blue = image->blue;
quantumdata->opacity = image->opacity;
quantumdata->alpha = image->alpha;
quantumdata->colorspace = image->colorspace;
quantumdata->endian = image->endian;
quantumdata->depth = image->depth;
quantumdata->columns = image->columns;
quantumdata->rows = image->rows;
quantumdata->page = image->page;
quantumdata->x_resolution = image->x_resolution;
quantumdata->y_resolution = image->y_resolution;
quantumdata->x_density = image->x_density;
quantumdata->y_density = image->y_density;
quantumdata->color = image->color;
quantumdata->matte_color = image->matte_color;
quantumdata->fill_color = image->fill_color;
quantumdata->fill_opacity = image->fill_opacity;
quantumdata->stroke_color = image->stroke_color;
quantumdata->stroke_opacity = image->stroke_opacity;
quantumdata->stroke_width = image->stroke_width;
quantumdata->stroke_line_cap = image->stroke_line_cap;
quantumdata->stroke_line_join = image->stroke_line_join;
quantumdata->stroke_miter_limit = image->stroke_miter_limit;
quantumdata->fill_rule = image->fill_rule;
quantumdata->clip_to_mask = image->clip_to_mask;
quantumdata->composite_oper = image->composite_oper;
quantumdata->fuzz = image->fuzz;
quantumdata->antialias = image->antialias;
quantumdata->interlace = image->interlace;
quantumdata->compress_type = image->compress_type;
quantumdata->compression = image->compression;
quantumdata->quality = image->quality;
quantumdata->treedepth = image->treedepth;
quantumdata->colors = image->colors;
quantumdata->colormap = image->colormap;
quantumdata->matte = image->matte;
quantumdata->transparent = image->transparent;
quantumdata->authenticate = image->authenticate;
quantumdata->authenticate_pass = image->authenticate_pass;
quantumdata->signature = MagickCoreSignature;
quantumdata->extent = extent;
quantumdata->columns = image->columns;
quantumdata->rows = image->rows;
quantumdata->depth = image->depth;
quantumdata->format = image->format;
quantumdata->type = image->type;
quantumdata->channels = image->channels;
quantumdata->storage_class = image->storage_class;
quantumdata->min_is_white = image->min_is_white;
quantumdata->gamma = image->gamma;
quantumdata->red = image->red;
quantumdata->green = image->green;
quantumdata->blue = image->blue;
quantumdata->opacity = image->opacity;
quantumdata->alpha = image->alpha;
quantumdata->colorspace = image->colorspace;
quantumdata->endian = image->endian;
quantumdata->x_resolution = image->x_resolution;
quantumdata->y_resolution = image->y_resolution;
quantumdata->x_density = image->x_density;
quantumdata->y_density = image->y_density;
quantumdata->color = image->color;
quantumdata->matte_color = image->matte_color;
quantumdata->fill_color = image->fill_color;
quantumdata->fill_opacity = image->fill_opacity;
quantumdata->stroke_color = image->stroke_color;
quantumdata->stroke_opacity = image->stroke_opacity;
quantumdata->stroke_width = image->stroke_width;
quantumdata->stroke_line_cap = image->stroke_line_cap;
quantumdata->stroke_line_join = image->stroke_line_join;
quantumdata->stroke_miter_limit = image->stroke_miter_limit;
quantumdata->fill_rule = image->fill_rule;
quantumdata->clip_to_mask = image->clip_to_mask;
quantumdata->composite_oper = image->composite_oper;
quantumdata->fuzz = image->fuzz;
quantumdata->antialias = image->antialias;
quantumdata->interlace = image->interlace;
quantumdata->compress_type = image->compress_type;
quantumdata->compression = image->compression;
quantumdata->quality = image->quality;
quantumdata->treedepth = image->treedepth;
quantumdata->colors = image->colors;
quantumdata->colormap = image->colormap;
quantumdata->matte = image->matte;
quantumdata->transparent = image->transparent;
quantumdata->authenticate = image->authenticate;
quantumdata->authenticate_pass = image->authenticate_pass;
quantumdata->signature = MagickCoreSignature;
quantumdata->extent = extent;
quantumdata->columns = image->columns;
quantumdata->rows = image->rows;
quantumdata->depth = image->depth;
quantumdata->format = image->format;
quantumdata->type = image->type;
quantumdata->channels = image->channels;
quantumdata->storage_class = image->storage_class;
quantumdata->min_is_white = image->min_is_white;
quantumdata->gamma = image->gamma;
quantumdata->red = image->red;
quantumdata->green = image->green;
quantumdata->blue = image->blue;
quantumdata->opacity = image->opacity;
quantumdata->alpha = image->alpha;
quantumdata->colorspace = image->colorspace;
quantumdata->endian = image->endian;
quantumdata->x_resolution = image->x_resolution;
quantumdata->y_resolution = image->y_resolution;
quantumdata->x_density = image->x_density;
quantumdata->y_density = image->y_density;
quantumdata->color = image->color;
quantumdata->matte_color = image->matte_color;
quantumdata->fill_color = image->fill_color;
quantumdata->fill_opacity = image->fill_opacity;
quantumdata->stroke_color = image->stroke_color;
quantumdata->stroke_opacity = image->stroke_opacity;
quantumdata->stroke_width = image->stroke_width;
quantumdata->stroke_line_cap = image->stroke_line_cap;
quantumdata->stroke_line_join = image->stroke_line_join;
quantumdata->stroke_miter_limit = image->stroke_miter_limit;
quantumdata->fill_rule = image->fill_rule;
quantumdata->clip_to_mask = image->clip_to_mask;
quantumdata->composite_oper = image->composite_oper;
quantumdata->fuzz = image->fuzz;
quantumdata->antialias = image->antialias;
quantumdata->interlace = image->interlace;
quantumdata->compress_type = image->compress_type;
quantumdata->compression = image->compression;
quantumdata->quality = image->quality;
quantumdata->treedepth = image->treedepth;
quantumdata->colors = image->colors;
quantumdata->colormap = image->colormap;
quantumdata->matte = image->matte;
quantumdata->transparent = image->transparent;
quantumdata->authenticate = image->authenticate;
quantumdata->authenticate_pass = image->authenticate_pass;
quantumdata->signature = MagickCoreSignature;
quantumdata->extent = extent;
quantumdata->columns = image->columns;
quantumdata->rows = image->rows;
quantumdata->depth = image->depth;
quantumdata->format = image->format;
quantumdata->type = image->type;
quantumdata->channels = image->channels;
quantumdata->storage_class = image->storage_class;
quantumdata->min_is_white = image->min_is_white;
quantumdata->gamma = image->gamma;
quantumdata->red = image->red;
quantumdata->green = image->green;
quantumdata->blue = image->blue;
quantumdata->opacity = image->opacity;
quantumdata->alpha = image->alpha;
quantumdata->colorspace = image->colorspace;
quantumdata->endian = image->endian;
quantumdata->x_resolution = image->x_resolution;
quantumdata->y_resolution = image->y_resolution;
quantumdata->x_density = image->x_density;
quantumdata->y_density = image->y_density;
quantumdata->color = image->color;
quantumdata->matte_color = image->matte_color;
quantumdata->fill_color = image->fill_color;
quantumdata->fill_opacity = image->fill_opacity;
quantumdata->stroke_color = image->stroke_color;
quantumdata->stroke_opacity = image->stroke_opacity;
quantumdata->stroke_width = image->stroke_width;
quantumdata->stroke_line_cap = image->stroke_line_cap;
quantumdata->stroke_line_join = image->stroke_line_join;
quantumdata->stroke_miter_limit = image->stroke_miter_limit;
quantumdata->fill_rule = image->fill_rule;
quantumdata->clip_to_mask = image->clip_to_mask;
quantumdata->composite_oper = image->composite_oper;
quantumdata->fuzz = image->fuzz;
quantumdata->antialias = image->antialias;
quantumdata->interlace = image->interlace;
quantumdata->compress_type = image->compress_type;
quantumdata->compression = image->compression;
quantumdata->quality = image->quality;
quantumdata->treedepth = image->treedepth;
quantumdata->colors = image->colors;
quantumdata->colormap = image->colormap;
quantumdata->matte = image->matte;
quantumdata->transparent = image->transparent;
quantumdata->authenticate = image->authenticate;
quantumdata->authenticate_pass = image->authenticate_pass;
quantumdata->signature = MagickCoreSignature;
quantumdata->extent = extent;
quantumdata->columns = image->columns;
quantumdata->rows = image->rows;
quantumdata->depth = image->depth;
quantumdata->format = image->format;
quantumdata->type = image->type;
quantumdata->channels = image->channels;
quantumdata->storage_class = image->storage_class;
quantumdata->min_is_white = image->min_is_white;
quantumdata->gamma = image->gamma;
quantumdata->red = image->red;
quantumdata->green = image->green;
quantumdata->blue = image->blue;
quantumdata->opacity = image->opacity;
quantumdata->alpha = image->alpha;
quantumdata->colorspace = image->colorspace;
quantumdata->endian = image->endian;
quantumdata->x_resolution = image->x_resolution;
quantumdata->y_resolution = image->y_resolution;
quantumdata->x_density = image->x_density;
quantumdata->y_density = image->y_density;
quantumdata->color = image->color;
quantumdata->matte_color = image->matte_color;
quantumdata->fill_color = image->fill_color;
quantumdata->fill_opacity = image->fill_opacity;
quantumdata->stroke_color = image->stroke_color;
quantumdata->stroke_opacity = image->stroke_opacity;
quantumdata->stroke_width = image->stroke_width;
quantumdata->stroke_line_cap = image->stroke_line_cap;
quantumdata->stroke_line_join = image->stroke_line_join;
quantumdata->stroke_miter_limit = image->stroke_miter_limit;
quantumdata->fill_rule = image->fill_rule;
quantumdata->clip_to_mask = image->clip_to_mask;
quantumdata->composite_oper = image->composite_oper;
quantumdata->fuzz = image->fuzz;
quantumdata->antialias = image->antialias;
quantumdata->interlace = image->interlace;
quantumdata->compress_type = image->compress_type;
quantumdata->compression = image->compression;
quantumdata->quality = image->quality;
quantumdata->treedepth = image->treedepth;
quantumdata->colors = image->colors;
quantumdata->colormap = image->colormap;
quantumdata->matte = image->matte;
quantumdata->transparent = image->transparent;
quantumdata->authenticate = image->authenticate;
quantumdata->authenticate_pass = image->authenticate_pass;
quantumdata->signature = MagickCoreSignature;
quantumdata->extent = extent;
quantumdata->columns = image->columns;
quantumdata->rows = image->rows;
quantumdata->depth = image->depth;
quantumdata->format = image->format;
quantumdata->type = image->type;
quantumdata->channels = image->channels;
quantumdata->storage_class = image->storage_class;
quantumdata->min_is_white = image->min_is_white;
quantumdata->gamma = image->gamma;
quantumdata->red = image->red;
quantumdata->green = image->green;
quantumdata->blue = imag