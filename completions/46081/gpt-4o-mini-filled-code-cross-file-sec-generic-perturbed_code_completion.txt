extent = image->columns * image->rows * quantumdata->channels * (quantumdata->depth / 8);
if (extent == 0)
    return MagickFalse;

quantumdata->pixels = (Quantum *) AcquireMemory(extent);
if (quantumdata->pixels == (Quantum *) NULL)
    return MagickFalse;

if (quantumdata->depth > 8)
    SetQuantumMinIsWhite(quantumdata, MagickTrue);
else
    SetQuantumMinIsWhite(quantumdata, MagickFalse);

return MagickTrue;