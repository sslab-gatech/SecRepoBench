static const char*
get_num(mrb_state *mrb, const char *p, const char *end, int *value_pointer)
{
  int val = 0;
  while (p < end && isdigit((unsigned char)*p)) {
    int digit = *p - '0';
    if (val > (INT_MAX - digit) / 10) {
      return NULL; // Integer overflow
    }
    val = val * 10 + digit;
    p++;
  }
  *value_pointer = val;
  return p;
}