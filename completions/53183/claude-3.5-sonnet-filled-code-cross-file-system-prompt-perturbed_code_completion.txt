int value = 0;
int sign = 1;
const char *e = p;

if (e < end && *e == '-') {
  sign = -1;
  e++;
}

while (e < end && ISDIGIT(*e)) {
  value = value * 10 + (*e - '0');
  e++;
}

if (e == p) {
  return NULL;
}

*value_pointer = value * sign;