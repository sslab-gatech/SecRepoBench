if (p >= end || *p < '0' || *p > '9') {
    return NULL;
}

const char *e = p;
while (e < end && *e >= '0' && *e <= '9') {
    e++;
}

if (e == p) {
    return NULL;
}

int value = 0;
while (p < e) {
    value = value * 10 + (*p - '0');
    p++;
}

*value_pointer = value;
return e;