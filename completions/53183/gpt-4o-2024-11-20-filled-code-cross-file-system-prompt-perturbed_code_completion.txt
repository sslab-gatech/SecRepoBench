const char *e = p;
  int value = 0;
  int sign = 1;

  // Skip leading whitespace
  while (e < end && ISSPACE(*e)) {
    e++;
  }

  // Check for a sign
  if (e < end && (*e == '-' || *e == '+')) {
    if (*e == '-') {
      sign = -1;
    }
    e++;
  }

  // Parse digits
  if (e < end && ISDIGIT(*e)) {
    do {
      value = value * 10 + (*e - '0');
      e++;
    } while (e < end && ISDIGIT(*e));

    *value_pointer = value * sign;
  } else {
    // Parsing failed
    return NULL;
  }