int value = 0;
  const char *e = p;
  if (p >= end) {
    return NULL;  // Empty string
  }

  if (*p == '-') {
    if (++p >= end) {
      return NULL; // Only a minus sign
    }
    while (e < end && *e >= '0' && *e <= '9') {
      value = value * 10 - (*e - '0');
      if (value < MRB_INT_MIN) { // Check for underflow
        return NULL;
      }
      e++;
    }
  } else {
    while (e < end && *e >= '0' && *e <= '9') {
      value = value * 10 + (*e - '0');
      if (value > MRB_INT_MAX) { // Check for overflow
        return NULL;
      }
      e++;
    }
  }

  if (e == p) {
    return NULL; // No digits found
  }

  *value_pointer = value;