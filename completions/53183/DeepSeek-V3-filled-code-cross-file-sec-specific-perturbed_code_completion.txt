const char *e;
  int value = 0;
  int sign = 1;

  if (p >= end) return NULL;

  if (*p == '-') {
    sign = -1;
    p++;
  }

  e = p;
  while (e < end && *e >= '0' && *e <= '9') {
    int digit = *e - '0';
    if (value > (INT_MAX - digit) / 10) {
      return NULL; // overflow
    }
    value = value * 10 + digit;
    e++;
  }

  if (e == p) return NULL; // no digits found

  *value_pointer = value * sign;
  return e;