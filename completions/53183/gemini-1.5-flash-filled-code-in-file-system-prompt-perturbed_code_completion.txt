char *e = (char *)p;
  int val = 0;
  int sign = 1;

  if (p >= end) return NULL;
  if (*p == '-') {
    sign = -1;
    p++;
  }
  if (p >= end) return NULL;
  while (p < end && isdigit(*p)) {
    int digit = *p - '0';
    if (val > INT_MAX / 10 || (val == INT_MAX / 10 && digit > INT_MAX % 10)) {
      return NULL; /* overflow */
    }
    val = val * 10 + digit;
    p++;
  }
  *value_pointer = val * sign;
  e = (char *)p;