const char *e = p;
char c;
int sign = 1;

if (*p == '-') {
  sign = -1;
  p++;
} else if (*p == '+') {
  p++;
}

*value_pointer = 0;
while (p < end) {
  c = *p++;
  if (!ISDIGIT(c)) {
    return NULL;
  }
  *value_pointer = *value_pointer * 10 + (c - '0');
}
*value_pointer *= sign;
return e;