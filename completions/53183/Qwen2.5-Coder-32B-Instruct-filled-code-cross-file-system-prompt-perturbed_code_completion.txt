const char *e = p;
int value = 0;
int sign = 1;

if (*e == '-') {
  sign = -1;
  e++;
} else if (*e == '+') {
  e++;
}

while (e < end && *e >= '0' && *e <= '9') {
  value = value * 10 + (*e - '0');
  e++;
}

*value_pointer = value * sign;

if (e == p) {
  return NULL;
}