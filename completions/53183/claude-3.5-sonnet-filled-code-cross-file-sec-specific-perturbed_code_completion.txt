const char *e = p;
long long num = 0;
int sign = 1;

if (e >= end) return NULL;

if (*e == '-') {
    sign = -1;
    e++;
}

if (e >= end || !isdigit((unsigned char)*e)) return NULL;

while (e < end && isdigit((unsigned char)*e)) {
    if (num > (LONG_MAX - (*e - '0')) / 10) {
        // Overflow detected
        return NULL;
    }
    num = num * 10 + (*e - '0');
    e++;
}

if (sign == -1) {
    if (num > (long long)INT_MAX + 1) {
        // Underflow detected
        return NULL;
    }
    *value_pointer = (int)(-num);
} else {
    if (num > INT_MAX) {
        // Overflow detected
        return NULL;
    }
    *value_pointer = (int)num;
}