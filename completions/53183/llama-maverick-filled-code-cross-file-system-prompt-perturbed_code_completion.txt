const char *e = p;
int minus = 0;
int base;
int value = 0;

if (e >= end) return NULL;
if (*e == '+') {
  e++;
}
else if (*e == '-') {
  e++;
  minus = 1;
}
if (e >= end || !ISDIGIT(*e)) return NULL;
do {
  base = *e - '0';
  if (value > (INT_MAX - base) / 10) return NULL;
  value = value * 10 + base;
  e++;
} while (e < end && ISDIGIT(*e));
if (minus) {
  value = -value;
}
*value_pointer = value;