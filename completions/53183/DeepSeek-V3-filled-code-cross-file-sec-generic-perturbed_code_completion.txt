const char *e;
  int value = 0;
  int sign = 1;

  if (p >= end) return NULL;

  if (*p == '-') {
    sign = -1;
    p++;
  } else if (*p == '+') {
    p++;
  }

  e = p;
  while (e < end && ISDIGIT(*e)) {
    value = value * 10 + (*e - '0');
    e++;
  }

  if (e == p) return NULL;  // no digits found

  *value_pointer = value * sign;
  return e;