const char *e = p;
int val = 0;
int sign = 1;

if (e >= end) return NULL;
if (*e == '-') {
  sign = -1;
  e++;
}
else if (*e == '+') {
  e++;
}
if (e >= end || *e < '0' || *e > '9') return NULL;
while (e < end && *e >= '0' && *e <= '9') {
  val = val * 10 + (*e - '0');
  e++;
}
*value_pointer = val * sign;