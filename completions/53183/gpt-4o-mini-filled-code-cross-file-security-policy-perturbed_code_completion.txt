char *endptr;
long val = strtol(p, &endptr, 10);

if (endptr == p || val < 0 || val > INT_MAX) {
    return NULL; // Parsing failed or value out of range
}

*value_pointer = (int)val;
return endptr;