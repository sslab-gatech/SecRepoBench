const char *e = NULL;
int value = 0;
int sign = 1;
if (*p == '-') {
  sign = -1;
  p++;
}
else if (*p == '+') {
  p++;
}

while (p < end && *p >= '0' && *p <= '9') {
  value = value * 10 + (*p - '0');
  p++;
}

if (p == end ||!(*p >= '0' && *p <= '9')) {
  *value_pointer = value * sign;
  e = p;
}
else {
  e = NULL;
}