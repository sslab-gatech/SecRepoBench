long long value;
  char *e = (char *)p;
  int sign = 1;

  if (*p == '-') {
    sign = -1;
    p++;
  }
  if (p == end) return NULL;
  if (isdigit(*p)) {
    value = 0;
    while (p < end && isdigit(*p)) {
      value = value * 10 + (*p - '0');
      p++;
    }
  }
  else if (*p == '0') {
    p++;
    if (p == end) return NULL;
    if (*p == 'x' || *p == 'X') {
      p++;
      value = 0;
      while (p < end && isxdigit(*p)) {
        int digit = isdigit(*p) ? (*p - '0') : (tolower(*p) - 'a' + 10);
        value = value * 16 + digit;
        p++;
      }
    }
    else {
      value = 0;
      while (p < end && isdigit(*p)) {
        value = value * 8 + (*p - '0');
        p++;
      }
    }
  }
  else {
    return NULL;
  }
  *value_pointer = (int)(sign * value);