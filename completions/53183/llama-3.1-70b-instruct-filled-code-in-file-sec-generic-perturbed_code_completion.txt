int n = 0;
const char *e = NULL;
while (p < end && isdigit(*p)) {
  n = n * 10 + (*p - '0');
  p++;
}
if (n > INT_MAX) {
  mrb_raise(mrb, E_ARGUMENT_ERROR, "value too big");
}
*value_pointer = n;
e = p;
return e;