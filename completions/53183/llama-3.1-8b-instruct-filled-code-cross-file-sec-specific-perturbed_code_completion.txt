static const char*
get_num(mrb_state *mrb, const char *p, const char *end, int *value_pointer)
{
  mrb_int value = 0;
  const char *ptr = p;

  // Skip leading whitespace
  while (p < end && ISSPACE(*p)) {
    p++;
  }

  // Check if the string starts with a minus sign
  if (p < end && *p == '-') {
    p++;
  }

  // Parse the integer
  while (p < end && ISDIGIT(*p)) {
    value = value * 10 + (*p - '0');
    p++;
  }

  // Check for overflow
  if (value > INT_MAX) {
    return NULL;
  }

  // Store the value in the value pointer
  *value_pointer = value;

  // Skip trailing whitespace
  while (p < end && ISSPACE(*p)) {
    p++;
  }

  return p;
}