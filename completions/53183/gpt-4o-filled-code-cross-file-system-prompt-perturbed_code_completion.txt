const char *e = p;
  int value = 0;
  int sign = 1;

  if (e < end && *e == '-') {
    sign = -1;
    e++;
  }

  if (e < end && *e == '+') {
    e++;
  }

  if (e >= end || !isdigit((unsigned char)*e)) {
    return NULL;
  }

  while (e < end && isdigit((unsigned char)*e)) {
    value = value * 10 + (*e - '0');
    e++;
  }

  *value_pointer = value * sign;
  return e;