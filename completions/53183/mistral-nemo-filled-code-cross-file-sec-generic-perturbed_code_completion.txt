for (; p < end && *p == ' '; p++); // Skip leading spaces
  if (p == end) return NULL; // No number found

  int sign = 1;
  if (*p == '-') {
    sign = -1;
    p++;
  }
  else if (*p == '+') {
    p++;
  }

  int value = 0;
  for (; p < end && isdigit(*p); p++) {
    value = value * 10 + (*p - '0');
  }

  *value_pointer = sign * value;
  return p;