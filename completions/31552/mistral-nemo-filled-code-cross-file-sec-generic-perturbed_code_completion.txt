/* Check if the token indicates a run of non-zero bytes */
    if (token == BLOSC_RUN_TOKEN) {
      if (srcsize < (signed)sizeof(int32_t)) {
        /* Not enough input to read run length */
        return BLOSC2_ERROR_READ_BUFFER;
      }
      srcsize -= sizeof(int32_t);
      int32_t run_length = sw32_(src);
      if (run_length < 0 || run_length > BLOSC_MAX_RUN_LENGTH) {
        /* Invalid run length */
        return BLOSC2_ERROR_DATA;
      }
      src += sizeof(int32_t);
      /* Use the token to determine the byte value for the run */
      uint8_t byte_value = src[0];
      src += 1;
      /* Fill the destination buffer with the byte value for the run */
      memset(comp_buffer, byte_value, (unsigned int)run_length);
      nbytes = run_length;
      /* Ensure the compressed bytes for this stream is zeroed, as it is fully encoded in the token */
      cbytes = 0;
    }
    else {
      /* The token does not indicate a run of non-zero bytes, so decompress as usual */
      // ... (rest of the code)
    }