// The token is the repeated byte value for the entire block
      // For safety, you could check if neblock exceeds some max limit here if needed
      if (token == 0) {
        // A run of zero bytes (though normally covered by cbytes == 0)
        memset(comp_buffer, 0, (unsigned int)neblock);
      } else {
        // A run of the 'token' byte
        memset(comp_buffer, token, (unsigned int)neblock);
      }
      nbytes = neblock;
      // Since all data was encoded by the token, there are no further compressed bytes to read
      cbytes = 0;