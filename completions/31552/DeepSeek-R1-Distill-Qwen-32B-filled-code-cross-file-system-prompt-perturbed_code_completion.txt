if (token == 0) {
        // Run of zeros
        memset(comp_buffer, 0, (unsigned int)neblock);
      } else {
        // Run of a specific byte
        memset(comp_buffer, token, (unsigned int)neblock);
      }
      nbytes = neblock;
      cbytes = 0;