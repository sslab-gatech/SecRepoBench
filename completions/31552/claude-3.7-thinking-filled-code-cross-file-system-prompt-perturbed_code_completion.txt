ctbytes += 1;  // Count the token byte
// Check if the token indicates a run of non-zero bytes
if (cbytes != -1) {
  // Only -1 is valid for this encoding
  return BLOSC2_ERROR_DATA;
}
// Use the token as the byte value for the run
memset(comp_buffer, token, (unsigned int)neblock);
nbytes = neblock;
// All the compressed bytes for this stream is spent
cbytes = 0;