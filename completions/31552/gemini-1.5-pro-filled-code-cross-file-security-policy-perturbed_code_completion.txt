ctbytes += (signed)sizeof(uint8_t);
if (token == 0) {
  // Run of 0s
  memset(comp_buffer, 0, (unsigned int)neblock);
  nbytes = neblock;
  cbytes = 0;            // cbytes was negative but now is a run of zeros
}
else if (token <= 255) {
  memset(comp_buffer, token, neblock);
  nbytes = neblock;
  cbytes = 0;            // cbytes was negative but now is a memset
}
else {
  return BLOSC2_ERROR_TOKEN_OUT_OF_BOUNDS;
}