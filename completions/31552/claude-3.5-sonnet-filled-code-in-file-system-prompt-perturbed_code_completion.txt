token = src[0];
src += 1;
// Increment the total compressed bytes counter by 1 for the token
ctbytes += 1;
// Check if the token indicates a run of non-zero bytes
if (token & 0x1) {
  // It's a run of non-zero bytes
  // Validate that the run length does not exceed a specific limit
  if (cbytes > neblock) {
    return BLOSC2_ERROR_WRITE_BUFFER;
  }
  // Use the token to determine the byte value for the run
  uint8_t value = (uint8_t)(cbytes * -1);
  // Fill the destination buffer with the value
  memset(comp_buffer, value, (unsigned int)neblock);
  nbytes = neblock;
} else {
  // It's a run of zeros
  memset(comp_buffer, 0, (unsigned int)neblock);
  nbytes = neblock;
}
// Set decompressed bytes to the number of elements in the block
cbytes = 0;