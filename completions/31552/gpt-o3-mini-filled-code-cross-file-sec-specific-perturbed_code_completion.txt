{
    /* In this run-length encoding, the token byte indicates the value to repeat.
       We fill the destination buffer (comp_buffer) with this byte for the whole block.
       This operation is safe as neblock was validated earlier. */
    memset(comp_buffer, token, (unsigned int)neblock);
    nbytes = neblock;
    /* All compressed bytes for this stream have been encoded in the token,
       so we reset cbytes to zero to indicate that no further bytes were consumed. */
    cbytes = 0;
}