// Check if the token indicates a run of non-zero bytes
if (token & 0x80) {
  // If so, validate that the run length does not exceed a specific limit
  if (cbytes < 1) {
    return BLOSC2_ERROR_READ_BUFFER;
  }
  // Use the token to determine the byte value for the run and fill the destination buffer with it
  uint8_t value = (uint8_t)(token & 0x7f);
  memset(comp_buffer, value, (unsigned int)neblock);
  // Set decompressed bytes to the number of elements in the block
  nbytes = neblock;
  // Ensure the compressed bytes for this stream is zeroed, as it is fully encoded in the token
  cbytes = 0;
}