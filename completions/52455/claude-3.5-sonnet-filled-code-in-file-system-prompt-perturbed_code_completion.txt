if (word.compare(i, compound_result->blen, compound_result->word, compound_result->blen) == 0) {
  char r = st[i + compound_result->blen];
  st[i + compound_result->blen] = '\0';

  if (checkcompoundrep && cpdrep_check(st.c_str(), i + compound_result->blen))
    return NULL;
  
  if (cpdwordpair_check(st.c_str(), i + compound_result->blen))
    return NULL;
  
  if (forbiddenword) {
    struct hentry* hw = lookup(st.c_str(), i + compound_result->blen);
    if (hw && hw->astr && TESTAFF(hw->astr, forbiddenword, hw->alen))
      return NULL;
  }

  st[i + compound_result->blen] = r;
}