if (cpdrep_check(st.c_str(), i + compound_result->blen)) {
  st[i + compound_result->blen] = r;
  continue;
}

if (forbiddenword) {
  hentry* rv = lookup(st.c_str(), i + compound_result->blen);
  if (rv && rv->astr && TESTAFF(rv->astr, forbiddenword, rv->alen)) {
    st[i + compound_result->blen] = r;
    return NULL;
  }
}

st[i + compound_result->blen] = r;