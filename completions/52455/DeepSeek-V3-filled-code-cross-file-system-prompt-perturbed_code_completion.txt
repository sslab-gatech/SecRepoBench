if (checkcompoundrep && cpdrep_check(st.c_str(), i + compound_result->blen))
    return NULL;

if (forbiddenword) {
    st[i + compound_result->blen] = r;
    if (lookup(st.c_str()))
        return NULL;
    st[i + compound_result->blen] = '\0';
}