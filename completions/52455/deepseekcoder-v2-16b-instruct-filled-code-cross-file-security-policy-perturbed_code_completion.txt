if (compound_result) {
    char r = st[i + compound_result->blen];
    st[i + compound_result->blen] = '\0';

    // Check if the current compound word part has a typical fault or forms a forbidden word pair.
    // If any such faults or forbidden word pairs are detected, reset the position in the string and continue the loop.
    // If the 'forbiddenword' flag is set, look up the entire word in the dictionary to see if it's forbidden.
    // If the word is found to be forbidden, return NULL to indicate the compound word is not acceptable.
    // Restore the original character at the current position after the checks.
    if (checkcompoundrep && cpdrep_check(st.c_str(), i)) {
        st[i + compound_result->blen] = r;
        continue;
    }

    // Check if the current compound word part forms a forbidden word pair.
    if (cpdwordpair_check(st.c_str(), i)) {
        st[i + compound_result->blen] = r;
        continue;
    }

    // If the 'forbiddenword' flag is set, look up the entire word in the dictionary to see if it's forbidden.
    if (forbiddenword) {
        struct hentry* rv = lookup(st.c_str(), i + compound_result->blen);
        if (rv && rv->astr && (TESTAFF(rv->astr, forbiddenword, rv->alen))) {
            st[i + compound_result->blen] = r;
            return NULL;
        }
    }

    st[i + compound_result->blen] = r;
}