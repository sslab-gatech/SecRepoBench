st[i + compound_result->blen] = r;

                  if (checkcompoundrep && cpdrep_check(st, len))
                    return NULL;

                  if (forbiddenword) {
                    hentry* forbiddenEntry = lookup(st.c_str(), len);
                    if (forbiddenEntry && forbiddenEntry->astr &&
                        TESTAFF(forbiddenEntry->astr, forbiddenword, forbiddenEntry->alen)) {
                      return NULL;
                    }
                  }