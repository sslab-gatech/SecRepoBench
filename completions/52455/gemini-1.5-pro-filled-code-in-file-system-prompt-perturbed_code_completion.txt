if (forbiddenword && compound_result->astr &&
    TESTAFF(compound_result->astr, forbiddenword, compound_result->alen)) {
  st[i + compound_result->blen] = r;
  continue;
}

if (cpdrep_check(st, i + compound_result->blen)) {
  st[i + compound_result->blen] = r;
  continue;
}
st[i + compound_result->blen] = r;