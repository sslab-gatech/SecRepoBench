// Check if the current compound word part has a typical fault or forms a forbidden word pair
if (checkcompoundrep && cpdrep_check(st.c_str(), i + compound_result->blen)) {
  st[i + compound_result->blen] = r;
  continue;
}

if (cpdwordpair_check(st.c_str(), i + compound_result->blen)) {
  st[i + compound_result->blen] = r;
  continue;
}

// If forbiddenword flag is set, look up the entire word in the dictionary to see if it's forbidden
if (forbiddenword) {
  hentry* hw = lookup(st.c_str(), i + compound_result->blen);
  if (hw && hw->astr && TESTAFF(hw->astr, forbiddenword, hw->alen)) {
    st[i + compound_result->blen] = r;
    return NULL;
  }
}

// Restore the original character at the current position after the checks
st[i + compound_result->blen] = r;