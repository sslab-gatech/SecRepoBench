if ((checkcompoundrep && cpdrep_check(word, len)) || cpdwordpair_check(word, len)) {
  st[i + compound_result->blen] = r;
  break;
}
if (compound_result && compound_result->astr &&
    TESTAFF(compound_result->astr, forbiddenword, compound_result->alen)) {
  struct hentry* rv = lookup(st.c_str(), st.size());
  if (rv && rv->astr &&
      TESTAFF(rv->astr, forbiddenword, rv->alen)) {
    st[i + compound_result->blen] = r;
    return NULL;
  }
}
st[i + compound_result->blen] = r;