// <MASK>
if (word.compare(i, compound_result->blen, compound_result->word, compound_result->blen) == 0) {
    char r = st[i + compound_result->blen];
    st[i + compound_result->blen] = '\0';

    // Check if the current compound word part has a typical fault or forms a forbidden word pair.
    if (checkcompoundrep && cpdrep_check(st.c_str(), i + compound_result->blen)) {
        st[i + compound_result->blen] = r;
        return NULL;
    }

    if (cpdwordpair_check(st.c_str(), i + compound_result->blen)) {
        st[i + compound_result->blen] = r;
        return NULL;
    }

    // If the 'forbiddenword' flag is set, look up the entire word in the dictionary to see if it's forbidden.
    if (forbiddenword && pAMgr->lookup(st.c_str())) {
        st[i + compound_result->blen] = r;
        return NULL;
    }

    st[i + compound_result->blen] = r;
}