if (checkcompoundrep && cpdrep_check(st, i + compound_result->blen)) {
    st[i + compound_result->blen] = r;
    return NULL;
}
if (forbiddenword) {
    struct hentry* fentry = lookup(st.c_str());
    if (fentry && TESTAFF(fentry->astr, forbiddenword, fentry->alen)) {
        st[i + compound_result->blen] = r;
        return NULL;
    }
}
st[i + compound_result->blen] = r;