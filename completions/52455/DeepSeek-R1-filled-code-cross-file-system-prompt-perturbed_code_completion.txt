if ((checkcompoundrep && cpdrep_check(st.c_str(), i + compound_result->blen)) ||
    cpdwordpair_check(st.c_str(), i + compound_result->blen)) {
    st[i + compound_result->blen] = r;
    continue;
}
st[i + compound_result->blen] = r;
if (forbiddenword) {
    struct hentry* fwd = lookup(st.c_str());
    if (fwd && TESTAFF(fwd->astr, forbiddenword, fwd->alen)) {
        return NULL;
    }
}