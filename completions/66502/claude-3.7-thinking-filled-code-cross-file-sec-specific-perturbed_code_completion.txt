xmlIDPtr existing;

existing = xmlHashLookup(table, value);
if (existing != NULL) {
    /* ID already exists in the hash table */
    attribute->atype = XML_ATTRIBUTE_ID;
    if (!streaming)
        attribute->id = existing;
    if (id != NULL)
        *id = existing;
    return(0);
}