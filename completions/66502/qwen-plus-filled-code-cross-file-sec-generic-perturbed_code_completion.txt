xmlIDPtr existing = (xmlIDPtr) xmlHashLookup(table, value);
if (existing != NULL) {
    if (existing->attr == NULL && attribute != NULL) {
        existing->attr = attribute;
    }
    attribute->atype = XML_ATTRIBUTE_ID;
    attribute->id = existing;
    return 0;
}