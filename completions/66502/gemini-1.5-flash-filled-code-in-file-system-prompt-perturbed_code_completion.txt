ret = xmlHashLookup(table, value);
        if (ret != NULL) {
            if (streaming) {
                /*
                 * Operating in streaming mode, attr is gonna disappear
                 */
                if (doc->dict != NULL)
                    ret->name = xmlDictLookup(doc->dict, attribute->name, -1);
                else
                    ret->name = xmlStrdup(attribute->name);
                if (ret->name == NULL)
                    return(-1);
                ret->attr = NULL;
            } else {
                ret->attr = attribute;
                ret->name = NULL;
            }
            attribute->atype = XML_ATTRIBUTE_ID;
            if (!streaming)
                attribute->id = ret;
            if (id != NULL)
                *id = ret;
            return(0);
        }