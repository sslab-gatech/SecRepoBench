xmlIDPtr existingID = xmlHashLookup(table, value);
        if (existingID != NULL) {
            if (attribute != existingID->attr) {
                /*
                 * Another attribute with the same ID exists.
                 * Update the attribute to point to the existing ID.
                 * This ensures that entities continue to function correctly.
                 */
                attribute->atype = XML_ATTRIBUTE_ID;
                if (existingID->attr != NULL) {
                    existingID->attr->id = NULL;
                }
                existingID->attr = attribute;
                attribute->id = existingID;
            }
            return (0);
        }