xmlIDPtr tmp;
tmp = xmlHashLookup(table, value);
if (tmp != NULL) {
    if (tmp->type == XML_ATTRIBUTE_ID) {
        if (attribute->type != XML_ATTRIBUTE_ID) {
            attribute->atype = XML_ATTRIBUTE_ID;
            attribute->id = tmp;
        }
        if (id != NULL)
            *id = tmp;
        return (0);
    } else {
        // Handle error: ID already exists but with a different type
        return (-1);
    }
}