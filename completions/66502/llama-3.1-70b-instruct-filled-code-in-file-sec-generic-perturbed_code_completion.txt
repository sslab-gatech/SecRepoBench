if (xmlHashLookup(table, value)!= NULL) {
    xmlIDPtr id = xmlHashLookup(table, value);
    if (id->attr!= NULL) {
        id->attr->id = NULL;
        id->attr->atype = 0;
    }
    xmlHashRemoveEntry(table, value, xmlFreeIDTableEntry);
    xmlFreeID(id);
    if (xmlHashAddEntry(table, value, ret) < 0) {
        xmlFreeID(ret);
        return(-1);
    }
    attribute->atype = XML_ATTRIBUTE_ID;
    if (!streaming)
        attribute->id = ret;
    if (id!= NULL)
        *id = ret;
    return(1);
}