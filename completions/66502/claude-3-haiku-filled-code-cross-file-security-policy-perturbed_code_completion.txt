// Check if the ID already exists in the hash table using the given value.
// If it exists, update the attribute to associate it with the existing ID,
// ensuring that entities continue to function correctly. Update the attribute
// type to indicate it is an ID and associate the attribute with the found ID.
// Return 0 to indicate that no new ID was created.
xmlIDPtr existingID = xmlHashLookup(table, value);
if (existingID != NULL) {
    if (streaming) {
        // In streaming mode, the attribute node may have been freed already,
        // so we can't directly update it. Instead, we'll update the ID
        // structure to point to the current attribute.
        existingID->attr = attribute;
        existingID->lineno = xmlGetLineNo(attribute->parent);
    } else {
        // In non-streaming mode, we can directly update the attribute
        attribute->atype = XML_ATTRIBUTE_ID;
        attribute->id = existingID;
    }
    return 0;
}