switch (v->type) {
    case MSGPACK_OBJECT_BOOLEAN:
        str_size = snprintf(str, sizeof(str), "%d", v->value.as Boolean);
        break;
    case MSGPACK_OBJECT_POSITIVE_INTEGER:
    case MSGPACK_OBJECT_NEGATIVE_INTEGER:
        str_size = snprintf(str, sizeof(str), "%lld", v->value.as Integer);
        break;
    case MSGPACK_OBJECT_FLOAT:
        str_size = snprintf(str, sizeof(str), "%g", v->value.as Float);
        break;
    case MSGPACK_OBJECT_STR:
        str_size = snprintf(str, sizeof(str), "%s", v->value.as String.ptr);
        break;
    case MSGPACK_OBJECT_ARRAY:
    case MSGPACK_OBJECT_MAP:
    case MSGPACK_OBJECT_NULL:
        str_size = snprintf(str, sizeof(str), "%s", flb_ra_type_to_str(v->type));
        break;
    default:
        str_size = snprintf(str, sizeof(str), "Unknown");
        break;
}

tmp = flb_sds_create_size(str_size + 1);
if (tmp) {
    memcpy(tmp, str, str_size + 1);
}