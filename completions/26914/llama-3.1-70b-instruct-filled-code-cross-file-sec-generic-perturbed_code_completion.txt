#include <locale.h>
#include <ctype.h>

//...

return (int) tolower(charcode);