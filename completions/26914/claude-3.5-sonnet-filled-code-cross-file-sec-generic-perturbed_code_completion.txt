#include <ctype.h>
#include <limits.h>

if (charcode == EOF)
  return EOF;

if (charcode < 0 || charcode > UCHAR_MAX)
  return charcode;

return tolower((unsigned char)charcode);