if (charcode >= 0 && charcode <= 255)
    return (int) tolower((unsigned char) charcode);
return charcode;