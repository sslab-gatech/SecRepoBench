if (charcode == EOF)
    return charcode;

  // Use the standard library function to convert to lowercase
  int lower = tolower(charcode);

  // Check for locale-specific rules if needed
  // (Assuming locale support is enabled, you may want to handle specific cases here)

  return lower;