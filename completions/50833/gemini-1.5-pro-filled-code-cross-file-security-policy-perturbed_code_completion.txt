(*InputFmt == 0 && *OutputFormat == 0) ?
            (*dwFlags |= cmsFLAGS_CAN_CHANGE_FORMATTER, p->FromInput = UnrollNothing, p->ToOutput = PackNothing) :
            (
                p->FromInput = _cmsGetFormatter(ContextID, *InputFmt, cmsFormatterInput, CMS_PACK_FLAGS_16BITS).Fmt16,
                p->ToOutput = _cmsGetFormatter(ContextID, *OutputFormat, cmsFormatterOutput, CMS_PACK_FLAGS_16BITS).Fmt16,

                (p->FromInput == NULL || p->ToOutput == NULL) ?
                (cmsSignalError(ContextID, cmsERROR_UNKNOWN_EXTENSION, "Unsupported raster format"), cmsDeleteTransform(p), NULL) :
                (void)0
            ),

        (*InputFmt != 0 && *OutputFormat != 0) ?
        (
            p->bytesPerPixelInput = T_BYTES(p->InputFormat),
            (*dwFlags |= (p->bytesPerPixelInput == 1 ? cmsFLAGS_CAN_CHANGE_FORMATTER : 0))
        ) : (void)0