(*InputFmt == 0 && *OutputFormat == 0) ?
            (*dwFlags |= cmsFLAGS_CAN_CHANGE_FORMATTER,
                p->FromInput = UnrollNothing,
                p->ToOutput = PackNothing) :
            (p->FromInput = _cmsGetFormatter(ContextID, *InputFmt, cmsFormatterInput, CMS_PACK_FLAGS_16BITS).Fmt16,
                p->ToOutput = _cmsGetFormatter(ContextID, *OutputFormat, cmsFormatterOutput, CMS_PACK_FLAGS_16BITS).Fmt16);
        if (p->FromInput == NULL || p->ToOutput == NULL) {
            cmsSignalError(ContextID, cmsERROR_UNKNOWN_EXTENSION, "Unsupported raster format");
            cmsDeleteTransform(p);
            return NULL;
        }

        // If formatters are using less than 16 bits, inhibit optimizations
        if (PixelSize(*InputFmt) < 2 || PixelSize(*OutputFormat) < 2)
            *dwFlags |= cmsFLAGS_NOOPTIMIZE;

        if ((*InputFmt != 0 && *OutputFormat != 0) || (*dwFlags & cmsFLAGS_COPY_ALPHA))
            *dwFlags |= cmsFLAGS_CAN_CHANGE_FORMATTER;