// Formats are intended to be changed before use
if (*dwFlags & cmsFLAGS_NULLTRANSFORM) {

    p ->xform = NullXFORM;
}
else {
    if (*dwFlags & cmsFLAGS_NOCACHE) {

        if (*dwFlags & cmsFLAGS_GAMUTCHECK)
            p ->xform = PrecalculatedXFORMGamutCheck;  // Gamut check, no cache
        else
            p ->xform = PrecalculatedXFORM;  // No cache, no gamut check
    }
    else {

        if (*dwFlags & cmsFLAGS_GAMUTCHECK)
            p ->xform = CachedXFORMGamutCheck;    // Gamut check, cache
        else
            p ->xform = CachedXFORM;  // No gamut check, cache

    }
}