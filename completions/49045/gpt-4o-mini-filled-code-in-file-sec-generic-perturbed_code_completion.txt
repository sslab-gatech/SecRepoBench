mrb_int base = 10; // Default base
  mrb_get_args(state, "|i", &base); // Get the base argument, default to 10

  if (base < 2 || base > 36) {
    mrb_raisef(state, E_ARGUMENT_ERROR, "invalid radix %i", base);
  }

  char buf[MRB_INT_BIT + 1];
  char *p = mrb_int_to_cstr(buf, sizeof(buf), mrb_integer(self), base);
  mrb_assert(p != NULL); // Ensure conversion was successful

  return mrb_str_new_cstr(state, p);