mrb_int base = 10;
  mrb_int num = mrb_integer(obj);
  mrb_value str;
  char buf[65]; // Enough to hold binary representation of a 64-bit integer

  mrb_get_args(mrb, "|i", &base);

  if (base < 2 || base > 36) {
    mrb_raise(mrb, E_ARGUMENT_ERROR, "base must be between 2 and 36");
  }

  snprintf(buf, sizeof(buf), "%lld", num);
  str = mrb_str_new_cstr(mrb, buf);

  return str;