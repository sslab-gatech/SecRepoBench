mrb_int base = 10;
  mrb_int n;
  char *buf;
  mrb_value num;
  mrb_get_args(mrb, "i|i", &n, &base);
  if (base < 2 || base > 36) {
    mrb_raise(mrb, E_ARGUMENT_ERROR, "base must be between 2 and 36");
  }
  num = mrb_fixnum_value(n);
  buf = mrb_malloc(mrb, 64); // Allocate sufficient memory. Adjust as needed.
  if (buf == NULL) {
    mrb_raise(mrb, E_RUNTIME_ERROR, "Memory allocation failed");
  }
  mrb_snprintf(buf, 64, "%"PRIdMAX, n);
  mrb_value str = mrb_str_new_cstr(mrb, buf);
  mrb_free(mrb, buf);
  return str;