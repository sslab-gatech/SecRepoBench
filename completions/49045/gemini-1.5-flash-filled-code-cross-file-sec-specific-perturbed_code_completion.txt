mrb_int base = 10;
  mrb_int n;
  char *buf;
  mrb_int len;

  mrb_get_args(state, "|i", &base);
  if (base < 2 || base > 36) {
    mrb_raise(state, E_ARGUMENT_ERROR, "base must be between 2 and 36");
  }
  n = mrb_integer(self);
  len = mrb_int_to_str(n, base, &buf);
  if (len < 0) {
    mrb_raise(state, E_RUNTIME_ERROR, "integer too large to convert to string");
  }
  return mrb_str_new(state, buf, len);