static mrb_value
int_to_s(mrb_state *mrb, mrb_value obj)
{
  // Converts an integer value to its string representation with an optional base.
  // The default base is 10 if no base is provided.
  mrb_int base = mrb_int(mrb, mrb_attr_get(mrb, obj, mrb_int_sym("base")));
  if (base == 0) base = 10;
  switch (mrb_type(obj)) {
  case MRB_TT_FIXNUM:
    return mrb_str_new_cstr(mrb, mrb_fixnum_to_s(mrb, mrb_fixnum(obj), base));
  case MRB_TT_BIGNUM:
    return mrb_str_new_cstr(mrb, mrb_bignum_to_s(mrb, mrb_bignum(obj), base));
  default:
    mrb_raise(mrb, E_TYPE_ERROR, "int_to_s: not an integer");
  }
}