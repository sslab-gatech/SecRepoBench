mrb_int base;
mrb_value str;

mrb_get_args(state, "|i", &base);

if (base < 2 || base > 36) {
  mrb_raise(state, E_ARGUMENT_ERROR, "invalid base");
}

str = mrb_str_new(state, 0, 0);
mrb_str_concat(state, str, mrb_fixnum_value(mrb_integer(self)));

if (base!= 10) {
  mrb_str_concat(state, str, mrb_str_new_cstr(state, " (base "));
  mrb_str_concat(state, str, mrb_fixnum_value(base));
  mrb_str_concat(state, str, mrb_str_new_cstr(state, ")"));
}

return str;