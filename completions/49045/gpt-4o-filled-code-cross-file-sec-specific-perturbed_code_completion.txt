mrb_int num;
  mrb_int base = 10;
  char buf[65]; // Enough to hold binary representation of a 64-bit integer plus null terminator
  char *str;

  mrb_get_args(state, "i|i", &num, &base);

  if (base < 2 || base > 36) {
    mrb_raise(state, E_ARGUMENT_ERROR, "base must be between 2 and 36");
  }

  str = mrb_int_to_str(state, num, base, buf, sizeof(buf));
  return mrb_str_new_cstr(state, str);