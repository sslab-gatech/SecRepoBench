char buf[MRB_INT_BIT + 1];
  mrb_int val = mrb_integer(self);
  mrb_int base = 10; // Default base

  if (mrb_get_args(mrb, "|i", &base) == 1) {
    if (base < 2 || base > 36) {
      mrb_raisef(mrb, E_ARGUMENT_ERROR, "invalid radix %i", base);
    }
  }

  const char *p = mrb_int_to_cstr(buf, sizeof(buf), val, base);
  mrb_assert(p != NULL);
  return mrb_str_new_cstr(mrb, p);