static mrb_value
int_to_s(mrb_state *state, mrb_value self)
{
  // Converts an integer value to its string representation with an optional base.
  // The default base is 10 if no base is provided.
  mrb_int base = 10;
  mrb_get_args(state, "i", &base);

  if (base < 2 || 36 < base) {
    mrb_raisef(state, E_ARGUMENT_ERROR, "invalid radix %i", base);
  }

  char buf[MRB_INT_BIT + 1];
  const char *p = mrb_int_to_cstr(buf, sizeof(buf), mrb_integer(self), base);
  mrb_assert(p != NULL);

  mrb_value str = mrb_str_new_cstr(state, p);
  RSTR_SET_ASCII_FLAG(mrb_str_ptr(str));
  return str;
}