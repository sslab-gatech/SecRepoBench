mrb_int base = 10;
  mrb_value str;
  mrb_int value;

  if (mrb_get_args(mrb, "|i", &base) == 1) {
    if (base < 2 || base > 36) {
      mrb_raisef(mrb, E_ARGUMENT_ERROR, "invalid radix %S", mrb_fixnum_value(base));
    }
  }

  value = mrb_integer(obj);

  if (value == 0) {
    return mrb_str_new_lit(mrb, "0");
  }

  if (value < 0) {
      str = mrb_str_new_lit(mrb, "-");
      value = -value; // Handle negative values
  } else {
      str = mrb_str_new_lit(mrb, "");
  }


  char buf[MRB_INT_BIT + 1]; // Add 1 for negative sign
  char *p = &buf[sizeof(buf) - 1];
  *p = '\0';

  while (value > 0) {
    p--;
    mrb_int digit = value % base;
    *p = (digit < 10) ? ('0' + digit) : ('a' + digit - 10);
    value /= base;
  }

  mrb_str_cat_cstr(mrb, str, p);
  return str;