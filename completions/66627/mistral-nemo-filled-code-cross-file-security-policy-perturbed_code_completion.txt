// Open the attribute named "MATLAB_fields" from the dataset using the given dataset ID.
    // Retrieve the dataspace of the opened attribute to determine the structure of the data.
    // Obtain the number of fields by querying the dimensions of the dataspace.
    // Return an error if dataspace is invalid.
    // Initialize the error variable to indicate no error if the process is successful.
    {
        hid_t attr_dataspace_id;
        hsize_t num_fields;
        herr_t herr;

        attr_id = H5Aopen_by_name(dset_id, ".", "MATLAB_fields", H5P_DEFAULT, H5P_DEFAULT);
        if (attr_id < 0) {
            return MATIO_E_GENERIC_READ_ERROR;
        }

        attr_dataspace_id = H5Aget_space(attr_id);
        if (attr_dataspace_id < 0) {
            H5Aclose(attr_id);
            return MATIO_E_GENERIC_READ_ERROR;
        }

        num_fields = H5Sget_simple_extent_ndims(attr_dataspace_id);
        if (num_fields < 0) {
            H5Sclose(attr_dataspace_id);
            H5Aclose(attr_id);
            return MATIO_E_GENERIC_READ_ERROR;
        }

        if (num_fields != 1) {
            H5Sclose(attr_dataspace_id);
            H5Aclose(attr_id);
            return MATIO_E_GENERIC_READ_ERROR;
        }

        *nfields = H5Sget_simple_extent_npoints(attr_dataspace_id);
        if (*nfields < 0) {
            H5Sclose(attr_dataspace_id);
            H5Aclose(attr_id);
            return MATIO_E_GENERIC_READ_ERROR;
        }

        H5Sclose(attr_dataspace_id);
        H5Aclose(attr_id);
    }