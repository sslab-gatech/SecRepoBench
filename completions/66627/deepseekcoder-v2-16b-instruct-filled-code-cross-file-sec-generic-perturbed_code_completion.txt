attr_id = H5Aopen_by_name(dset_id, ".", "MATLAB_fields", H5P_DEFAULT, H5P_DEFAULT);
        herr = H5Aget_space(attr_id, &dspace_id);
        if ( herr >= 0 ) {
            herr = H5Sget_simple_extent_dims(dspace_id, nfields, NULL);
            if ( herr >= 0 ) {
                *nfields = (hsize_t)*nfields;
            }
        }
        H5Sclose(dspace_id);
        H5Aclose(attr_id);