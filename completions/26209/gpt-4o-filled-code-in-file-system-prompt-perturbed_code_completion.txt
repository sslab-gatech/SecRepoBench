static const struct {
        int class;
        int index;
        const uint8_t *bits;
        const uint8_t *vals;
    } ht[] = {
        { 0, 0, avpriv_mjpeg_bits_dc_luminance, avpriv_mjpeg_val_dc },
        { 0, 1, avpriv_mjpeg_bits_dc_chrominance, avpriv_mjpeg_val_dc },
        { 1, 0, avpriv_mjpeg_bits_ac_luminance, avpriv_mjpeg_val_ac_luminance },
        { 1, 1, avpriv_mjpeg_bits_ac_chrominance, avpriv_mjpeg_val_ac_chrominance },
    };
    int i;

    for (i = 0; i < FF_ARRAY_ELEMS(ht); i++) {
        int class = ht[i].class;
        int index = ht[i].index;
        VLC *vlc = &mjpegdecodecontext->vlcs[class][index];
        const uint8_t *bits = ht[i].bits;
        const uint8_t *vals = ht[i].vals;
        int nb_codes = 0;

        for (int j = 1; j <= 16; j++)
            nb_codes += bits[j];

        if (build_vlc(vlc, bits, vals, nb_codes, 1, class > 0) < 0)
            return AVERROR(ENOMEM);

        if (class < 2) {
            memcpy(mjpegdecodecontext->raw_huffman_lengths[class][index], bits + 1, 16);
            memcpy(mjpegdecodecontext->raw_huffman_values[class][index], vals, 256);
        }
    }