for (int i = 0; i < sizeof(ht) / sizeof(ht[0]); i++) {
    if (ht[i].class < 2) {
        for (int j = 0; j < 16; j++) {
            mjpegdecodecontext->huff_ncode[i][j] = ht[i].bits[j];
        }
        for (int j = 0; j < 256; j++) {
            mjpegdecodecontext->huff_val[i][j] = ht[i].values[j];
        }
    }
    build_vlc(&mjpegdecodecontext->vlcs[ht[i].class][ht[i].index], ht[i].bits, ht[i].values, 256);
}