static const struct {
        int class;
        int index;
        const uint8_t *bits;
        const uint8_t *vals;
    } ht[] = {
        {0, 0, ff_mjpeg_bits_dc_luminance,   ff_mjpeg_val_dc},
        {0, 1, ff_mjpeg_bits_dc_chrominance, ff_mjpeg_val_dc},
        {1, 0, ff_mjpeg_bits_ac_luminance,   ff_mjpeg_val_ac_luminance},
        {1, 1, ff_mjpeg_bits_ac_chrominance, ff_mjpeg_val_ac_chrominance},
    };
    int i, j, k;

    for (i = 0; i < FF_ARRAY_ELEMS(ht); i++) {
        int class = ht[i].class;
        int index = ht[i].index;
        const uint8_t *bits = ht[i].bits;
        const uint8_t *vals = ht[i].vals;
        int n = 0;
        for (j = 1; j <= 16; j++)
            n += bits[j];
        if (build_vlc(&mjpegdecodecontext->vlcs[class][index], bits, vals, class) < 0)
            return AVERROR(ENOMEM);
        if (class < 2) {
            int pos = 0;
            for (j = 1; j <= 16; j++) {
                for (k = 0; k < bits[j]; k++) {
                    mjpegdecodecontext->raw_huffman[class][index].len[pos] = j;
                    mjpegdecodecontext->raw_huffman[class][index].val[pos] = vals[pos];
                    pos++;
                }
            }
            mjpegdecodecontext->raw_huffman[class][index].nb_codes = n;
        }
    }