if (cond[cond_index] != ']') {
    // Simple character comparison
    if (cond[cond_index] != strip[i]) {
        HUNSPELL_WARNING(stderr,
            "warning: line %d: incompatible stripping "
            "characters and condition\n",
            linenum);
        return 0;
    }
} else {
    // Handle character set in [...]
    in = 0;
    neg = 0;

    // Move one step left to start searching for '[' or '^'
    int j = cond_index - 1;
    // Find the matching '['
    while (j >= 0 && cond[j] != '[') {
        // Check if current strip character is in the set
        if (cond[j] == strip[i]) {
            in = 1;
        }
        j--;
    }
    // If '[' was not found, report error
    if (j < 0) {
        HUNSPELL_WARNING(stderr,
            "error: line %d: missing [ in condition:\n%s\n",
            linenum, cond.c_str());
        return 0;
    }
    // Determine if negation is in use ([^...])
    if ((j + 1 < condl) && cond[j + 1] == '^') {
        neg = 1;
    }
    // If the presence or absence of strip[i] doesn't match negation, warn
    if ((!neg && !in) || (neg && in)) {
        HUNSPELL_WARNING(stderr,
            "warning: line %d: incompatible stripping "
            "characters and condition\n",
            linenum);
        return 0;
    }
    // Skip past the '[' so outer loop resumes correctly
    cond_index = j - 1;
}