if (cond[cond_index] != ']') {
    if (cond[cond_index] != strip[i]) {
        HUNSPELL_WARNING(stderr,
                         "warning: line %d: incompatible stripping characters and condition\n",
                         linenum);
        return 0;
    }
} else {
    neg = 0;
    in = 0;
    int j;
    for (j = cond_index - 1; j >= 0 && cond[j] != '['; j--) ;
    if (j < 0) {
        HUNSPELL_WARNING(stderr,
                         "error: line %d: missing [ in condition:\n%s\n",
                         linenum, cond.c_str());
        return 0;
    }
    if ((j + 1 < condl) && (cond[j + 1] == '^')) {
        neg = 1;
        for (int k = j + 2; k <= cond_index - 1; k++) {
            if (strip[i] == cond[k]) {
                in = 1;
                break;
            }
        }
    } else {
        for (int k = j + 1; k <= cond_index - 1; k++) {
            if (strip[i] == cond[k]) {
                in = 1;
                break;
            }
        }
    }
    if ((!neg && !in) || (neg && in)) {
        HUNSPELL_WARNING(stderr,
                         "warning: line %d: incompatible stripping characters and condition\n",
                         linenum);
        return 0;
    }
    cond_index = j;
}