if (cond[cond_index] != ']') {
    if (cond[cond_index] != strip[i]) {
        HUNSPELL_WARNING(stderr,
                         "warning: line %d: incompatible stripping "
                         "characters and condition\n",
                         linenum);
        return 0;
    }
} else {
    int start_pos = cond_index;
    while (start_pos >= 0 && cond[start_pos] != '[')
        start_pos--;
    if (start_pos < 0) {
        HUNSPELL_WARNING(stderr,
                         "error: line %d: missing [ in condition:\n%s\n",
                         linenum, cond.c_str());
        return 0;
    }
    neg = (start_pos + 1 <= cond_index - 1 && cond[start_pos + 1] == '^') ? 1 : 0;
    in = 0;
    for (int k = start_pos + 1 + neg; k < cond_index; k++) {
        if (strip[i] == cond[k]) {
            in = 1;
            break;
        }
    }
    if ((!neg && !in) || (neg && in)) {
        HUNSPELL_WARNING(stderr,
                         "warning: line %d: incompatible stripping "
                         "characters and condition\n",
                         linenum);
        return 0;
    }
    cond_index = start_pos;
}