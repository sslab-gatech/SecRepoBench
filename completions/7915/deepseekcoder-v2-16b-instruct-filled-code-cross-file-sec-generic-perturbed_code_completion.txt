// Check the type of the first primitive in the input. If the primitive type
  // is not suitable for conversion, return a null pointer.
  // Count the number of primitives in the input array that are not undefined,
  // and use this count to allocate memory for the path information array.
  // Return null if memory allocation fails.
  // Initialize variables that will be used for tracking points and coordinates.
  if (primitive_info[0].primitive == UndefinedPrimitive) {
    return NULL;
  }

  n = 0;
  for (i = 0; primitive_info[i].primitive != UndefinedPrimitive; i++) {
    if (primitive_info[i].primitive != UndefinedPrimitive) {
      n++;
    }
  }

  path_info = (PathInfo *) AcquireQuantumMemory(n + 1, sizeof(PathInfo));
  if (path_info == NULL) {
    return NULL;
  }

  coordinates = 0;
  start_point = primitive_info[0].point;
  start = n;
  code = MoveToCode;