if ((primitive_info == (PrimitiveInfo *) NULL) ||
      (primitive_info[0].primitive == UndefinedPrimitive))
    return((PathInfo *) NULL);

  /*
    Count the number of valid primitives.
  */
  {
    size_t
      count = 0;

    for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++)
      count++;
    path_info=(PathInfo *) AcquireMagickMemory((count+2)*sizeof(*path_info));
  }
  if (path_info == (PathInfo *) NULL)
    return((PathInfo *) NULL);

  /*
    Initialize tracking variables.
  */
  n=0;
  coordinates=0;
  start=0;
  q.x=0.0;
  q.y=0.0;
  start_point.x=0.0;
  start_point.y=0.0;