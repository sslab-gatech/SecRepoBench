// Check the type of the first primitive in the input. If the primitive type
// is not suitable for conversion, return a null pointer.
if (primitive_info[0].primitive!= DrawPrimitive &&
    primitive_info[0].primitive!= PolygonPrimitive &&
    primitive_info[0].primitive!= ImagePrimitive &&
    primitive_info[0].primitive!= BezierPrimitive &&
    primitive_info[0].primitive!= ArcPrimitive)
  return((PathInfo *) NULL);
// Count the number of primitives in the input array that are not undefined,
// and use this count to allocate memory for the path information array.
// Return null if memory allocation fails.
n=0;
for (i=0; primitive_info[i].primitive!= UndefinedPrimitive; i++)
  n++;
path_info=(PathInfo *) AcquireQuantumMemory((size_t) (n+1),
  sizeof(*path_info));
if (path_info == (PathInfo *) NULL)
  return((PathInfo *) NULL);
// Initialize variables that will be used for tracking points and coordinates.
coordinates=0;
start=0;
q.x=(-1.0);
q.y=(-1.0);