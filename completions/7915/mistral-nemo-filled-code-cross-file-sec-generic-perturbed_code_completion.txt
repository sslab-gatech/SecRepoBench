// Allocate memory for the path information array.
  path_info = (PathInfo *) AcquireQuantumMemory(n, sizeof(PathInfo));
  if (path_info == (PathInfo *) NULL)
    {
      path_info = (PathInfo *) DestroyQuantumMemory(path_info, n * sizeof(PathInfo));
      return (PathInfo *) NULL;
    }

  // Initialize variables that will be used for tracking points and coordinates.
  n = 0;
  coordinates = 0;
  start = 0;
  q.x = q.y = 0.0;

  // <MASK>
  for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++)
  {
    // ... (rest of the function)
  }

  // Free the allocated memory for the path information array.
  path_info = (PathInfo *) DestroyQuantumMemory(path_info, n * sizeof(PathInfo));