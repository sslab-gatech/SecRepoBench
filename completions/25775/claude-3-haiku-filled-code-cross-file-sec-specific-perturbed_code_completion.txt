length -= 8;
if (length < 0) {
    return 0; // Return 0 to indicate failure if the length is negative
}