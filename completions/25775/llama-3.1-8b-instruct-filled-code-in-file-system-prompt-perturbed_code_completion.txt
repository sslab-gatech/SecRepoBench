if (length < 8)
    return 0;
i += 8;