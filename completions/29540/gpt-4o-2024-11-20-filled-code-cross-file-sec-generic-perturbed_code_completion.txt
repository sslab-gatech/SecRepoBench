if (nelems < 1 || nfields < 1) {
        return;
    }

    size_t nbytes = nelems * nfields * sizeof(matvar_t *);
    fields = (matvar_t **)malloc(nbytes);
    if (NULL == fields) {
        Mat_Critical("Error allocating memory for fields");
        return;
    }
    memset(fields, 0, nbytes);

    data_variable->data = fields;
    data_variable->nbytes = nbytes;
    data_variable->data_type = MAT_T_STRUCT;
    data_variable->class_type = MAT_C_STRUCT;