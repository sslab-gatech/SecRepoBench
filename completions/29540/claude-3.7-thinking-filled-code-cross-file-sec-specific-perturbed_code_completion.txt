if (nfields < 1 || nelems < 1) {
    return;
}

data_variable->data_size = sizeof(matvar_t *);
data_variable->nbytes = nfields * nelems * data_variable->data_size;

fields = (matvar_t **)malloc((size_t)(nfields * nelems) * sizeof(*fields));
if (fields == NULL) {
    Mat_Critical("Error allocating memory for matvar->data");
    return;
}

data_variable->data = fields;