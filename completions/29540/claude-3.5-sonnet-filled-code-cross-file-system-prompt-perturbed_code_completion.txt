if (nfields < 1 || nelems < 1) {
    return;
}

data_variable->internal->num_fields = (unsigned)nfields;
data_variable->nbytes = nelems * nfields * sizeof(matvar_t *);
fields = (matvar_t **)calloc(nelems * nfields, sizeof(matvar_t *));

if (fields == NULL) {
    Mat_Critical("Error allocating memory for matvar->data");
    return;
}

data_variable->data = fields;