// Check if the number of elements or fields is less than 1, and return if true.
if ( nelems < 1 || nfields < 1 ) {
    return;
}

// Calculate the total number of bytes needed for all fields and store it in nbytes in the matvar structure.
size_t nbytes = nfields * sizeof(matvar_t*);
data_variable->nbytes = nbytes;

// Allocate memory for the fields array based on the calculated number of bytes.
fields = (matvar_t**)calloc((size_t)nfields, sizeof(matvar_t*));
if ( NULL == fields ) {
    Mat_Critical("Error allocating memory for matvar->data");
    return;
}

// Assign the allocated memory to data in the matvar structure for further processing.
data_variable->data = fields;