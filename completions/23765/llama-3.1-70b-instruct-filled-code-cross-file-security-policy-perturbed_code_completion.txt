buf = in->cur;
len = in->end - in->cur;
if (len < 3) return(-1);
if (first!= 0) {
    if (*buf!= first) return(-1);
    buf++;
    len--;
}
if (next!= 0) {
    if (*buf!= next) return(-1);
    buf++;
    len--;
}
if (third!= 0) {
    if (*buf!= third) return(-1);
    buf++;
    len--;
}
if (iscomment) {
    incomment = 1;
    if (len < 2) return(-1);
    if ((*buf == '-') && (*(buf + 1) == '-')) {
        buf += 2;
        len -= 2;
    } else {
        return(-1);
    }
}
if (ignoreAttrValue) {
    if (len < 1) return(-1);
    if ((*buf == '"') || (*buf == '\'')) {
        valdellim = *buf;
        buf++;
        len--;
        invalue = 1;
    }
}
while ((len > 0) && (incomment || invalue)) {
    if (incomment) {
        if ((*buf == '-') && (*(buf + 1) == '-')) {
            incomment = 0;
            buf += 2;
            len -= 2;
        } else {
            buf++;
            len--;
        }
    } else if (invalue) {
        if (*buf == valdellim) {
            invalue = 0;
            buf++;
            len--;
        } else {
            buf++;
            len--;
        }
    } else {
        if (*buf == first) {
            if (next!= 0) {
                if (*(buf + 1) == next) {
                    if (third!= 0) {
                        if (*(buf + 2) == third) {
                            return((int) (buf - in->cur + 3));
                        }
                    } else {
                        return((int) (buf - in->cur + 2));
                    }
                }
            } else {
                return((int) (buf - in->cur + 1));
            }
        }
        buf++;
        len--;
    }
}
ctxt->checkIndex = (int) (buf - in->base);
return(-1);