if (ctxt->instate == XML_PARSER_START_TAG) {
    // Check if the current character is the start of a name
    if (!xmlIsNameStartChar(ctxt, CUR)) {
        htmlParseErr(ctxt, XML_ERR_NAME_START_CHAR,
                     "Name '%s' invalid, must start with a letter or '_'\n",
                     ctxt->name, NULL);
        ctxt->instate = XML_PARSER_CONTENT;
        break;
    }

    // Check if the current character is a valid name character
    if (!IS_LETTER(CUR) && (CUR != '_') && (CUR != ':') && (CUR != '-')) {
        htmlParseErr(ctxt, XML_ERR_NAME_CHAR,
                     "Name '%s' invalid, must contain only letters, digits, '.' or '_'\n",
                     ctxt->name, NULL);
        ctxt->instate = XML_PARSER_CONTENT;
        break;
    }

    // Check if the current character is a valid name character after a '-'
    if (CUR == '-' && (ctxt->checkIndex > 0) && (ctxt->name[ctxt->checkIndex - 1] == '-')) {
        htmlParseErr(ctxt, XML_ERR_NAME_CHAR,
                     "Name '%s' invalid, must not contain two consecutive '-' characters\n",
                     ctxt->name, NULL);
        ctxt->instate = XML_PARSER_CONTENT;
        break;
    }

    // Check if the current character is a valid name character after a ':'
    if (CUR == ':' && (ctxt->checkIndex > 0) && (ctxt->name[ctxt->checkIndex - 1] == ':')) {
        htmlParseErr(ctxt, XML_ERR_NAME_CHAR,
                     "Name '%s' invalid, must not contain two consecutive ':' characters\n",
                     ctxt->name, NULL);
        ctxt->instate = XML_PARSER_CONTENT;
        break;
    }

    // Check if the current character is a valid name character after a '.'
    if (CUR == '.' && (ctxt->checkIndex > 0) && (ctxt->name[ctxt->checkIndex - 1] == '.')) {
        htmlParseErr(ctxt, XML_ERR_NAME_CHAR,
                     "Name '%s' invalid, must not contain two consecutive '.' characters\n",
                     ctxt->name, NULL);
        ctxt->instate = XML_PARSER_CONTENT;
        break;
    }

    // Update the check index
    ctxt->checkIndex = 0;
}