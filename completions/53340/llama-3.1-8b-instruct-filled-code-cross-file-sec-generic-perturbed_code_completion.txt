if (max_matrix_channel + 1 > MAX_MATRIX_CHANNEL_MLP ||
    max_matrix_channel + 1 > MAX_MATRIX_CHANNEL_TRUEHD ||
    max_matrix_channel + 1 < min_channel)
    return AVERROR_INVALIDDATA;