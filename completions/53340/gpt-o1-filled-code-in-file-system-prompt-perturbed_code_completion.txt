if (max_matrix_channel > std_max_matrix_channel) {
    av_log(m->avctx, AV_LOG_ERROR,
           "max_matrix_channel %d exceeds supported maximum %d.\n",
           max_matrix_channel, std_max_matrix_channel);
    avpriv_request_sample(m->avctx,
                          "Too many matrix channels in substream");
    return AVERROR_INVALIDDATA;
}

if (maxaudiochannel + 1 > MAX_CHANNELS) {
    av_log(m->avctx, AV_LOG_ERROR,
           "Max channel index %d exceeds supported maximum %d.\n",
           maxaudiochannel, MAX_CHANNELS - 1);
    avpriv_request_sample(m->avctx,
                          "Too many channels in MLP/TrueHD substream");
} else if (maxaudiochannel + 1 < min_channel) {
    av_log(m->avctx, AV_LOG_ERROR,
           "Minimum channel %d is greater than available channels %d.\n",
           min_channel, maxaudiochannel + 1);
    avpriv_request_sample(m->avctx, "Invalid substream channel range");
}