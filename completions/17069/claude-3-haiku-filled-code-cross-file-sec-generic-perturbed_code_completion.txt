do {
    // Read the unary most significant bits (MSBs) and end bit
    if (!FLAC__bitreader_read_unary_unsigned(br, &msbs)) {
        return false;
    }

    // Read the binary least significant bits (LSBs)
    if (parameter <= ucbits) {
        ucbits -= parameter;
        b <<= parameter;
        lsbs = (FLAC__uint32)(b >> (FLAC__BITS_PER_WORD - parameter));
    } else {
        cwords++;
        if (cwords >= wordcount) {
            goto incomplete_lsbs;
        }
        b = br->buffer[cwords];
        ucbits += FLAC__BITS_PER_WORD - parameter;
        lsbs = (FLAC__uint32)(b >> ucbits);
        b <<= FLAC__BITS_PER_WORD - ucbits;
    }

    // Compose the signed value
    x = (msbs << parameter) | lsbs;
    *val++ = (int)(x >> 1) ^ -(int)(x & 1);

    // Update the internal state of the bitreader
    ucbits = (ucbits - parameter) % FLAC__BITS_PER_WORD;
    cwords += (ucbits == 0);
} while (cwords >= wordcount && val < end);