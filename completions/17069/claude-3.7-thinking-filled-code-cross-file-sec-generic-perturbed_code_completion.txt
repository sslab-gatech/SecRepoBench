/* need to update br state because we need to use FLAC__bitreader_* functions */
br->consumed_bits = FLAC__BITS_PER_WORD - ucbits;
br->consumed_words = cwords;

/* read the unary MSBs and end bit */
if(!FLAC__bitreader_read_unary_unsigned(br, &msbs))
    return false;

/* read the binary LSBs */
if(!FLAC__bitreader_read_raw_uint32(br, &lsbs, parameter))
    return false;

/* compose the value */
x = (msbs << parameter) | lsbs;
*val++ = (int)(x >> 1) ^ -(int)(x & 1);

/* update local state with consumed bits/words */
cwords = br->consumed_words;
ucbits = FLAC__BITS_PER_WORD - br->consumed_bits;
if(cwords < wordcount) { /* if we haven't consumed past the end of the buffer */
    b = br->buffer[cwords] << br->consumed_bits;
}