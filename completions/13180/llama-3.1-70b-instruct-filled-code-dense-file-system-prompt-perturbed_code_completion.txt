// Retrieve and set image properties from TIFF tags.
// This block of code attempts to extract various metadata fields from a TIFF image,
// such as artist, copyright, document name, and other descriptive fields.
// Each TIFF field is checked for existence and non-null value, and if so, it is
// set as an image property using the SetImageProperty function. Special handling
// is done for fields like OPIIMAGEID, with count validation and string copying.
// Additionally, it handles the subfiletype field with specific values like REDUCEDIMAGE,
// PAGE, and MASK. This code can be adapted to include new properties or handle
// additional TIFF tags as needed.

// Retrieve artist property
if (TIFFGetField(tiff, TIFFTAG_ARTIST, &text) == 1 && text!= (char *) NULL)
  SetImageProperty(img, "artist", text, exception);

// Retrieve copyright property
if (TIFFGetField(tiff, TIFFTAG_COPYRIGHT, &text) == 1 && text!= (char *) NULL)
  SetImageProperty(img, "copyright", text, exception);

// Retrieve document name property
if (TIFFGetField(tiff, TIFFTAG_DOCUMENTNAME, &text) == 1 && text!= (char *) NULL)
  SetImageProperty(img, "document", text, exception);

// Retrieve host computer property
if (TIFFGetField(tiff, TIFFTAG_HOSTCOMPUTER, &text) == 1 && text!= (char *) NULL)
  SetImageProperty(img, "host", text, exception);

// Retrieve image description property
if (TIFFGetField(tiff, TIFFTAG_IMAGEDESCRIPTION, &text) == 1 && text!= (char *) NULL)
  SetImageProperty(img, "comment", text, exception);

// Retrieve make property
if (TIFFGetField(tiff, TIFFTAG_MAKE, &text) == 1 && text!= (char *) NULL)
  SetImageProperty(img, "make", text, exception);

// Retrieve model property
if (TIFFGetField(tiff, TIFFTAG_MODEL, &text) == 1 && text!= (char *) NULL)
  SetImageProperty(img, "model", text, exception);

// Retrieve OPI image ID property
if (TIFFGetField(tiff, TIFFTAG_OPIIMAGEID, &text) == 1 && text!= (char *) NULL)
{
  if (strlen(text) > 0)
  {
    char *opi_image_id = (char *) AcquireMagickMemory(strlen(text) + 1, sizeof(*opi_image_id));
    if (opi_image_id!= (char *) NULL)
    {
      (void) CopyMagickString(opi_image_id, text, strlen(text) + 1);
      SetImageProperty(img, "opi:ImageID", opi_image_id, exception);
      opi_image_id = (char *) RelinquishMagickMemory(opi_image_id);
    }
  }
}

// Retrieve page name property
if (TIFFGetField(tiff, TIFFTAG_PAGENAME, &text) == 1 && text!= (char *) NULL)
  SetImageProperty(img, "label", text, exception);

// Retrieve software property
if (TIFFGetField(tiff, TIFFTAG_SOFTWARE, &text) == 1 && text!= (char *) NULL)
  SetImageProperty(img, "software", text, exception);

// Retrieve subfile type property
if (TIFFGetField(tiff, TIFFTAG_SUBFILETYPE, &type) == 1)
{
  switch (type)
  {
    case FILETYPE_REDUCEDIMAGE:
      SetImageProperty(img, "tiff:subfiletype", "REDUCEDIMAGE", exception);
      break;
    case FILETYPE_PAGE:
      SetImageProperty(img, "tiff:subfiletype", "PAGE", exception);
      break;
    case FILETYPE_MASK:
      SetImageProperty(img, "tiff:subfiletype", "MASK", exception);
      break;
    default:
      break;
  }
}