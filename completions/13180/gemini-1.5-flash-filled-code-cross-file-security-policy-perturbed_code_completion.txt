for (count=0; TIFFGetField(tiff,TIFFTAG_ARTIST,&text) != 0; count++)
  {
    length=(strlen(text)+1);
    if (length > MagickPathExtent)
      length=MagickPathExtent;
    (void) CopyMagickString(message,text,length);
    (void) SetImageProperty(img,"tiff:artist",message,exception);
  }
  for (count=0; TIFFGetField(tiff,TIFFTAG_COPYRIGHT,&text) != 0; count++)
  {
    length=(strlen(text)+1);
    if (length > MagickPathExtent)
      length=MagickPathExtent;
    (void) CopyMagickString(message,text,length);
    (void) SetImageProperty(img,"tiff:copyright",message,exception);
  }
  for (count=0; TIFFGetField(tiff,TIFFTAG_DOCUMENTNAME,&text) != 0; count++)
  {
    length=(strlen(text)+1);
    if (length > MagickPathExtent)
      length=MagickPathExtent;
    (void) CopyMagickString(message,text,length);
    (void) SetImageProperty(img,"tiff:document",message,exception);
  }
  for (count=0; TIFFGetField(tiff,TIFFTAG_IMAGEDESCRIPTION,&text) != 0; count++)
  {
    length=(strlen(text)+1);
    if (length > MagickPathExtent)
      length=MagickPathExtent;
    (void) CopyMagickString(message,text,length);
    (void) SetImageProperty(img,"comment",message,exception);
  }
  for (count=0; TIFFGetField(tiff,TIFFTAG_HOSTCOMPUTER,&text) != 0; count++)
  {
    length=(strlen(text)+1);
    if (length > MagickPathExtent)
      length=MagickPathExtent;
    (void) CopyMagickString(message,text,length);
    (void) SetImageProperty(img,"tiff:hostcomputer",message,exception);
  }
  for (count=0; TIFFGetField(tiff,TIFFTAG_MAKE,&text) != 0; count++)
  {
    length=(strlen(text)+1);
    if (length > MagickPathExtent)
      length=MagickPathExtent;
    (void) CopyMagickString(message,text,length);
    (void) SetImageProperty(img,"tiff:make",message,exception);
  }
  for (count=0; TIFFGetField(tiff,TIFFTAG_MODEL,&text) != 0; count++)
  {
    length=(strlen(text)+1);
    if (length > MagickPathExtent)
      length=MagickPathExtent;
    (void) CopyMagickString(message,text,length);
    (void) SetImageProperty(img,"tiff:model",message,exception);
  }
  for (count=0; TIFFGetField(tiff,TIFFTAG_PAGENAME,&text) != 0; count++)
  {
    length=(strlen(text)+1);
    if (length > MagickPathExtent)
      length=MagickPathExtent;
    (void) CopyMagickString(message,text,length);
    (void) SetImageProperty(img,"label",message,exception);
  }
  for (count=0; TIFFGetField(tiff,TIFFTAG_SOFTWARE,&text) != 0; count++)
  {
    length=(strlen(text)+1);
    if (length > MagickPathExtent)
      length=MagickPathExtent;
    (void) CopyMagickString(message,text,length);
    (void) SetImageProperty(img,"tiff:software",message,exception);
  }
  if (TIFFGetField(tiff,TIFFTAG_OPIIMAGEID,&count,&text) != 0)
    {
      if (count == 1)
        {
          length=(strlen(text)+1);
          if (length > MagickPathExtent)
            length=MagickPathExtent;
          (void) CopyMagickString(message,text,length);
          (void) SetImageProperty(img,"tiff:opiimageid",message,exception);
        }
    }
  if (TIFFGetField(tiff,TIFFTAG_DATETIME,&text) != 0)
    {
      length=(strlen(text)+1);
      if (length > MagickPathExtent)
        length=MagickPathExtent;
      (void) CopyMagickString(message,text,length);
      (void) SetImageProperty(img,"tiff:timestamp",message,exception);
    }
  if (TIFFGetField(tiff,TIFFTAG_SUBFILETYPE,&type) != 0)
    {
      if (type == FILETYPE_REDUCEDIMAGE)
        (void) SetImageProperty(img,"tiff:subfiletype","REDUCEDIMAGE",exception);
      else
        if (type == FILETYPE_PAGE)
          (void) SetImageProperty(img,"tiff:subfiletype","PAGE",exception);
        else
          if (type == FILETYPE_MASK)
            (void) SetImageProperty(img,"tiff:subfiletype","MASK",exception);
    }