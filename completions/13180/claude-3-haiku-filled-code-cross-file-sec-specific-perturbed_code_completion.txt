// <MASK>
// Retrieve and set image properties from TIFF tags.
char
  message[MagickPathExtent];

uint32
  count,
  length,
  type;

// Iterate through the TIFF tags and extract the relevant metadata fields
TIFFDirEntry *dir;
for (dir = TIFFGetDirEntry(tiff, TIFFTAG_ARTIST); dir != NULL; dir = TIFFGetNextDirEntry(dir)) {
  switch (dir->tdir_tag) {
    case TIFFTAG_ARTIST:
      if (TIFFGetField(tiff, TIFFTAG_ARTIST, &text) && text != NULL) {
        (void) SetImageProperty(img, "artist", text, exception);
      }
      break;
    case TIFFTAG_COPYRIGHT:
      if (TIFFGetField(tiff, TIFFTAG_COPYRIGHT, &text) && text != NULL) {
        (void) SetImageProperty(img, "copyright", text, exception);
      }
      break;
    case TIFFTAG_DOCUMENTNAME:
      if (TIFFGetField(tiff, TIFFTAG_DOCUMENTNAME, &text) && text != NULL) {
        (void) SetImageProperty(img, "document", text, exception);
      }
      break;
    // Handle other TIFF tags similarly
    default:
      break;
  }
}

// Handle the OPIIMAGEID tag separately, as it requires special handling
if (TIFFGetField(tiff, OPIIMAGEID, &count, &text) && text != NULL) {
  if (count > 0) {
    (void) SetImageProperty(img, "opiimageid", text, exception);
  }
}

// Handle the subfiletype field with specific values like REDUCEDIMAGE, PAGE, and MASK
uint16 subfiletype;
if (TIFFGetField(tiff, TIFFTAG_SUBFILETYPE, &subfiletype)) {
  switch (subfiletype) {
    case FILETYPE_REDUCEDIMAGE:
      (void) SetImageProperty(img, "tiff:subfiletype", "REDUCEDIMAGE", exception);
      break;
    case FILETYPE_PAGE:
      (void) SetImageProperty(img, "tiff:subfiletype", "PAGE", exception);
      break;
    case FILETYPE_MASK:
      (void) SetImageProperty(img, "tiff:subfiletype", "MASK", exception);
      break;
    default:
      break;
  }
}