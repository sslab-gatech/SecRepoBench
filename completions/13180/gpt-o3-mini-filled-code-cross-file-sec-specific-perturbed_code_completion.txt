if (TIFFGetField(tiff, TIFFTAG_ARTIST, &text) != 0 && text != (char *) NULL)
  (void) SetImageProperty(img, "tiff:artist", text, exception);
if (TIFFGetField(tiff, TIFFTAG_COPYRIGHT, &text) != 0 && text != (char *) NULL)
  (void) SetImageProperty(img, "tiff:copyright", text, exception);
if (TIFFGetField(tiff, TIFFTAG_DOCUMENTNAME, &text) != 0 && text != (char *) NULL)
  (void) SetImageProperty(img, "tiff:document", text, exception);
if (TIFFGetField(tiff, TIFFTAG_HOSTCOMPUTER, &text) != 0 && text != (char *) NULL)
  (void) SetImageProperty(img, "tiff:hostcomputer", text, exception);
if (TIFFGetField(tiff, TIFFTAG_DATETIME, &text) != 0 && text != (char *) NULL)
  (void) SetImageProperty(img, "tiff:timestamp", text, exception);
if (TIFFGetField(tiff, TIFFTAG_MAKE, &text) != 0 && text != (char *) NULL)
  (void) SetImageProperty(img, "tiff:make", text, exception);
if (TIFFGetField(tiff, TIFFTAG_MODEL, &text) != 0 && text != (char *) NULL)
  (void) SetImageProperty(img, "tiff:model", text, exception);
if (TIFFGetField(tiff, TIFFTAG_SOFTWARE, &text) != 0 && text != (char *) NULL)
  (void) SetImageProperty(img, "tiff:software", text, exception);
if (TIFFGetField(tiff, TIFFTAG_IMAGEDESCRIPTION, &text) != 0 && text != (char *) NULL)
  (void) SetImageProperty(img, "tiff:description", text, exception);

#if defined(TIFFTAG_OPIIMAGEID)
  {
    uint32 opi_count;
    if (TIFFGetField(tiff, TIFFTAG_OPIIMAGEID, &opi_count, &text) != 0 &&
        text != (char *) NULL)
    {
      /* Validate that the count does not exceed our buffer size */
      if (opi_count < MagickPathExtent)
      {
        (void) CopyMagickString(message, text, MagickPathExtent);
        (void) SetImageProperty(img, "tiff:opimageid", message, exception);
      }
    }
  }
#endif

if (TIFFGetField(tiff, TIFFTAG_SUBFILETYPE, &type) != 0)
{
  if (type & FILETYPE_REDUCEDIMAGE)
    (void) SetImageProperty(img, "tiff:subfiletype", "REDUCEDIMAGE", exception);
  else if (type & FILETYPE_PAGE)
    (void) SetImageProperty(img, "tiff:subfiletype", "PAGE", exception);
  else if (type & FILETYPE_MASK)
    (void) SetImageProperty(img, "tiff:subfiletype", "MASK", exception);
}