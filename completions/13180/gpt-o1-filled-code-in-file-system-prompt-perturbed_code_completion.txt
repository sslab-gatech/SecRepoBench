{
  char *text = (char *) NULL;
  uint32 subfiletype = 0;

  /*
    Retrieve standard TIFF string fields and assign them to matching
    Image properties or artifacts.
  */
  if (TIFFGetField(tiff, TIFFTAG_DOCUMENTNAME, &text) == 1)
    if ((text != (char *) NULL) && (*text != '\0'))
      (void) SetImageArtifact(img, "tiff:document", text, exception);

  if (TIFFGetField(tiff, TIFFTAG_HOSTCOMPUTER, &text) == 1)
    if ((text != (char *) NULL) && (*text != '\0'))
      (void) SetImageArtifact(img, "tiff:hostcomputer", text, exception);

  if (TIFFGetField(tiff, TIFFTAG_ARTIST, &text) == 1)
    if ((text != (char *) NULL) && (*text != '\0'))
      (void) SetImageArtifact(img, "tiff:artist", text, exception);

  if (TIFFGetField(tiff, TIFFTAG_DATETIME, &text) == 1)
    if ((text != (char *) NULL) && (*text != '\0'))
      (void) SetImageArtifact(img, "tiff:timestamp", text, exception);

  if (TIFFGetField(tiff, TIFFTAG_MAKE, &text) == 1)
    if ((text != (char *) NULL) && (*text != '\0'))
      (void) SetImageArtifact(img, "tiff:make", text, exception);

  if (TIFFGetField(tiff, TIFFTAG_MODEL, &text) == 1)
    if ((text != (char *) NULL) && (*text != '\0'))
      (void) SetImageArtifact(img, "tiff:model", text, exception);

  if (TIFFGetField(tiff, TIFFTAG_SOFTWARE, &text) == 1)
    if ((text != (char *) NULL) && (*text != '\0'))
      (void) SetImageArtifact(img, "tiff:software", text, exception);

  if (TIFFGetField(tiff, TIFFTAG_COPYRIGHT, &text) == 1)
    if ((text != (char *) NULL) && (*text != '\0'))
      (void) SetImageArtifact(img, "tiff:copyright", text, exception);

  /*
    The image comment (description) is stored as "comment" rather than "tiff:comment".
  */
  if (TIFFGetField(tiff, TIFFTAG_IMAGEDESCRIPTION, &text) == 1)
    if ((text != (char *) NULL) && (*text != '\0'))
      (void) SetImageProperty(img, "comment", text, exception);

  /*
    Page name (a.k.a. label in ImageMagick).
  */
  if (TIFFGetField(tiff, TIFFTAG_PAGENAME, &text) == 1)
    if ((text != (char *) NULL) && (*text != '\0'))
      (void) SetImageProperty(img, "label", text, exception);

  /*
    Subfile type handling for multi-page or reduced-image files.
  */
  if (TIFFGetField(tiff, TIFFTAG_SUBFILETYPE, &subfiletype) == 1)
  {
    if ((subfiletype & FILETYPE_REDUCEDIMAGE) != 0)
      (void) SetImageArtifact(img, "tiff:subfiletype", "REDUCEDIMAGE", exception);
    else if ((subfiletype & FILETYPE_PAGE) != 0)
      (void) SetImageArtifact(img, "tiff:subfiletype", "PAGE", exception);
    else if ((subfiletype & FILETYPE_MASK) != 0)
      (void) SetImageArtifact(img, "tiff:subfiletype", "MASK", exception);
  }

  /*
    OPIIMAGEID tag (32781) for OPI info; may or may not be present.
    It can contain a short array or string, so check count or validity
    before storing to the image artifact.
  */
#if defined(TIFFTAG_OPIIMAGEID)
  {
    uint32 count = 0;
    unsigned char *opi_id = (unsigned char *) NULL;
    if (TIFFGetField(tiff, TIFFTAG_OPIIMAGEID, &count, &opi_id) == 1)
    {
      /* Arbitrarily require at least 2 bytes to be valid. */
      if ((opi_id != (unsigned char *) NULL) && (count >= 2))
      {
        /* Store as a binary or ASCII artifact, whichever is appropriate. */
        (void) SetImageArtifact(img, "tiff:opi-image-id", (char *) opi_id, exception);
      }
    }
  }
#endif
}