{
    char *field_value = NULL;

    /*
      Retrieve various TIFF tags and set them as image properties if present.
    */
    if (TIFFGetField(tiff,TIFFTAG_DOCUMENTNAME,&field_value) == 1)
      if ((field_value != (char *) NULL) && (*field_value != '\0'))
        {
          (void) CopyMagickString(message,field_value,MagickPathExtent);
          (void) SetImageProperty(img,"tiff:document",message,exception);
        }
    if (TIFFGetField(tiff,TIFFTAG_HOSTCOMPUTER,&field_value) == 1)
      if ((field_value != (char *) NULL) && (*field_value != '\0'))
        {
          (void) CopyMagickString(message,field_value,MagickPathExtent);
          (void) SetImageProperty(img,"tiff:hostcomputer",message,exception);
        }
    if (TIFFGetField(tiff,TIFFTAG_ARTIST,&field_value) == 1)
      if ((field_value != (char *) NULL) && (*field_value != '\0'))
        {
          (void) CopyMagickString(message,field_value,MagickPathExtent);
          (void) SetImageProperty(img,"tiff:artist",message,exception);
        }
    if (TIFFGetField(tiff,TIFFTAG_DATETIME,&field_value) == 1)
      if ((field_value != (char *) NULL) && (*field_value != '\0'))
        {
          (void) CopyMagickString(message,field_value,MagickPathExtent);
          (void) SetImageProperty(img,"tiff:timestamp",message,exception);
        }
    if (TIFFGetField(tiff,TIFFTAG_MAKE,&field_value) == 1)
      if ((field_value != (char *) NULL) && (*field_value != '\0'))
        {
          (void) CopyMagickString(message,field_value,MagickPathExtent);
          (void) SetImageProperty(img,"tiff:make",message,exception);
        }
    if (TIFFGetField(tiff,TIFFTAG_MODEL,&field_value) == 1)
      if ((field_value != (char *) NULL) && (*field_value != '\0'))
        {
          (void) CopyMagickString(message,field_value,MagickPathExtent);
          (void) SetImageProperty(img,"tiff:model",message,exception);
        }
    if (TIFFGetField(tiff,TIFFTAG_SOFTWARE,&field_value) == 1)
      if ((field_value != (char *) NULL) && (*field_value != '\0'))
        {
          (void) CopyMagickString(message,field_value,MagickPathExtent);
          (void) SetImageProperty(img,"tiff:software",message,exception);
        }
    if (TIFFGetField(tiff,TIFFTAG_COPYRIGHT,&field_value) == 1)
      if ((field_value != (char *) NULL) && (*field_value != '\0'))
        {
          (void) CopyMagickString(message,field_value,MagickPathExtent);
          (void) SetImageProperty(img,"tiff:copyright",message,exception);
        }
    if (TIFFGetField(tiff,33423,&field_value) == 1)
      if ((field_value != (char *) NULL) && (*field_value != '\0'))
        {
          (void) CopyMagickString(message,field_value,MagickPathExtent);
          (void) SetImageProperty(img,"kodak-33423",message,exception);
        }
    if (TIFFGetField(tiff,36867,&field_value) == 1)
      if ((field_value != (char *) NULL) && (*field_value != '\0'))
        {
          (void) CopyMagickString(message,field_value,MagickPathExtent);
          (void) SetImageProperty(img,"kodak-36867",message,exception);
        }
    if (TIFFGetField(tiff,TIFFTAG_PAGENAME,&field_value) == 1)
      if ((field_value != (char *) NULL) && (*field_value != '\0'))
        {
          (void) CopyMagickString(message,field_value,MagickPathExtent);
          (void) SetImageProperty(img,"label",message,exception);
        }
    if (TIFFGetField(tiff,TIFFTAG_IMAGEDESCRIPTION,&field_value) == 1)
      if ((field_value != (char *) NULL) && (*field_value != '\0'))
        {
          (void) CopyMagickString(message,field_value,MagickPathExtent);
          (void) SetImageProperty(img,"comment",message,exception);
        }

    /*
      Retrieve and set subfiletype property if available.
    */
    {
      uint32 subfiletype = 0;
      if (TIFFGetField(tiff,TIFFTAG_SUBFILETYPE,&subfiletype) == 1)
        {
          if ((subfiletype & FILETYPE_REDUCEDIMAGE) != 0)
            (void) SetImageProperty(img,"tiff:subfiletype","REDUCEDIMAGE",exception);
          else if ((subfiletype & FILETYPE_PAGE) != 0)
            (void) SetImageProperty(img,"tiff:subfiletype","PAGE",exception);
          else if ((subfiletype & FILETYPE_MASK) != 0)
            (void) SetImageProperty(img,"tiff:subfiletype","MASK",exception);
          else
            (void) SetImageProperty(img,"tiff:subfiletype","none",exception);
        }
    }
  }