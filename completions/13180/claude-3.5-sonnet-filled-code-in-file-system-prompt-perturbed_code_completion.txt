// Retrieve and set image properties from TIFF tags.
// This block of code attempts to extract various metadata fields from a TIFF image,
// such as artist, copyright, document name, and other descriptive fields.
// Each TIFF field is checked for existence and non-null value, and if so, it is
// set as an image property using the SetImageProperty function. Special handling
// is done for fields like OPIIMAGEID, with count validation and string copying.
// Additionally, it handles the subfiletype field with specific values like REDUCEDIMAGE,
// PAGE, and MASK. This code can be adapted to include new properties or handle
// additional TIFF tags as needed.

char *text;
uint32 count;

if (TIFFGetField(tiff,TIFFTAG_ARTIST,&text) == 1)
  (void) SetImageProperty(image,"tiff:artist",text,exception);
if (TIFFGetField(tiff,TIFFTAG_COPYRIGHT,&text) == 1)
  (void) SetImageProperty(image,"tiff:copyright",text,exception);
if (TIFFGetField(tiff,TIFFTAG_DOCUMENTNAME,&text) == 1)
  (void) SetImageProperty(image,"tiff:document",text,exception);
if (TIFFGetField(tiff,TIFFTAG_HOSTCOMPUTER,&text) == 1)
  (void) SetImageProperty(image,"tiff:hostcomputer",text,exception);
if (TIFFGetField(tiff,TIFFTAG_IMAGEDESCRIPTION,&text) == 1)
  (void) SetImageProperty(image,"tiff:timestamp",text,exception);
if (TIFFGetField(tiff,TIFFTAG_MAKE,&text) == 1)
  (void) SetImageProperty(image,"tiff:make",text,exception);
if (TIFFGetField(tiff,TIFFTAG_MODEL,&text) == 1)
  (void) SetImageProperty(image,"tiff:model",text,exception);
if (TIFFGetField(tiff,TIFFTAG_OPIIMAGEID,&count,&text) == 1)
{
  if (count >= 1)
    (void) SetImageProperty(image,"tiff:image-id",text,exception);
}
if (TIFFGetField(tiff,TIFFTAG_PAGENAME,&text) == 1)
  (void) SetImageProperty(image,"label",text,exception);
if (TIFFGetField(tiff,TIFFTAG_SOFTWARE,&text) == 1)
  (void) SetImageProperty(image,"tiff:software",text,exception);
if (TIFFGetField(tiff,TIFFTAG_SUBFILETYPE,&count) == 1)
{
  if ((count & FILETYPE_REDUCEDIMAGE) != 0)
    (void) SetImageProperty(image,"tiff:subfiletype","REDUCEDIMAGE",exception);
  if ((count & FILETYPE_PAGE) != 0)
    (void) SetImageProperty(image,"tiff:subfiletype","PAGE",exception);
  if ((count & FILETYPE_MASK) != 0)
    (void) SetImageProperty(image,"tiff:subfiletype","MASK",exception);
}