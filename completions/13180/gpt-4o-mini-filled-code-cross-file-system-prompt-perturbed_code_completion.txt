// Iterate through the TIFF tags and set image properties accordingly.
  for (count = 0; count < TIFFNumberOfDirectories(tiff); count++)
  {
    TIFFSetDirectory(tiff, count);
    
    // Check and set the document name
    text = TIFFGetField(tiff, TIFFTAG_DOCUMENTNAME);
    if (text != NULL)
      SetImageProperty(img, "tiff:document", text, exception);
    
    // Check and set the artist
    text = TIFFGetField(tiff, TIFFTAG_ARTIST);
    if (text != NULL)
      SetImageProperty(img, "tiff:artist", text, exception);
    
    // Check and set the copyright
    text = TIFFGetField(tiff, TIFFTAG_COPYRIGHT);
    if (text != NULL)
      SetImageProperty(img, "tiff:copyright", text, exception);
    
    // Check and set the timestamp
    text = TIFFGetField(tiff, TIFFTAG_DATETIME);
    if (text != NULL)
      SetImageProperty(img, "tiff:timestamp", text, exception);
    
    // Check and set the make
    text = TIFFGetField(tiff, TIFFTAG_MAKE);
    if (text != NULL)
      SetImageProperty(img, "tiff:make", text, exception);
    
    // Check and set the model
    text = TIFFGetField(tiff, TIFFTAG_MODEL);
    if (text != NULL)
      SetImageProperty(img, "tiff:model", text, exception);
    
    // Check and set the software
    text = TIFFGetField(tiff, TIFFTAG_SOFTWARE);
    if (text != NULL)
      SetImageProperty(img, "tiff:software", text, exception);
    
    // Handle subfiletype
    uint16 subfiletype;
    if (TIFFGetField(tiff, TIFFTAG_SUBFILETYPE, &subfiletype))
    {
      if (subfiletype & FILETYPE_REDUCEDIMAGE)
        SetImageProperty(img, "tiff:subfiletype", "REDUCEDIMAGE", exception);
      else if (subfiletype & FILETYPE_PAGE)
        SetImageProperty(img, "tiff:subfiletype", "PAGE", exception);
      else if (subfiletype & FILETYPE_MASK)
        SetImageProperty(img, "tiff:subfiletype", "MASK", exception);
    }
  }