static MagickBooleanType
  WriteDPXImage(const ImageInfo *image_info,Image *image,ExceptionInfo *exception)
{
  // ... (previous code)

  // Fill in the masked region
  if (EOFBlob(image) != MagickFalse)
    ThrowFileException(exception,CorruptImageError,"UnexpectedEndOfFile",
      image->filename);
  if ((i+1) < (ssize_t) dpx.image.number_elements)
    {
      // Allocate next image structure.
      AcquireNextImage(image_info,image,exception);
      if (GetNextImageInList(image) == (Image *) NULL)
        {
          operationsuccess=MagickFalse;
          break;
        }
      image=SyncNextImageInList(image);
      operationsuccess=SetImageProgress(image,SaveImagesTag,TellBlob(image),
        GetBlobSize(image));
      if (operationsuccess == MagickFalse)
        break;
    }

  // ... (remaining code)
}