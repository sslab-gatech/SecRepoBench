unsigned int iBone = 0;
bool bQuota = true;
if (!ParseUnsignedInt(currentChar, &currentChar, iBone)) {
    LogErrorNoThrow("Unexpected EOF/EOL while parsing bone index");
    SMDI_PARSE_RETURN;
}
if (iBone >= asBones.size()) {
    LogErrorNoThrow("Bone index in nodes section is out of range");
    SMDI_PARSE_RETURN;
}
SMD::Bone& bone = asBones[iBone];

if ('\"' != *currentChar) {
    LogWarning("Bone name is expected to be enclosed in double quotation marks. ");
    bQuota = false;
} else {
    ++currentChar;
}

const char* szEnd = currentChar;
for (;;) {
    if (bQuota && '\"' == *szEnd) {
        iBone = (unsigned int)(szEnd - currentChar);
        ++szEnd;
        break;
    } else if (!bQuota && IsSpaceOrNewLine(*szEnd)) {
        iBone = (unsigned int)(szEnd - currentChar);
        break;
    } else if (!(*szEnd)) {
        LogErrorNoThrow("Unexpected EOF/EOL while parsing bone name");
        SMDI_PARSE_RETURN;
    }
    ++szEnd;
}
bone.mName = std::string(currentChar, iBone);
currentChar = szEnd;

// the only negative bone parent index that could occur is -1 AFAIK
if (!ParseSignedInt(currentChar, &currentChar, (int&)bone.iParent)) {
    LogErrorNoThrow("Unexpected EOF/EOL while parsing bone parent index. Assuming -1");
    SMDI_PARSE_RETURN;
}

// go to the beginning of the next line
SMDI_PARSE_RETURN;