if (!bQuota && *szEnd == '\"') {
        LogWarning("Bone name is expected to be enclosed in double quotation marks. Found unexpected double quote.");
        bQuota = true;
    }

    if (bQuota && *szEnd != '\"') {
        LogWarning("Bone name is expected to end with a double quote. Found unexpected character.");
        bQuota = false;
    }

    if (!bQuota && IsSpaceOrNewLine(*szEnd)) {
        iBone = (unsigned int)(szEnd - currentChar);
    } else if (bQuota && *szEnd == '\"') {
        iBone = (unsigned int)(szEnd - currentChar + 1);
        bQuota = false;
    } else if (!(*szEnd)) {
        LogErrorNoThrow("Unexpected EOF/EOL while parsing bone name");
        SMDI_PARSE_RETURN;
    }

    ++szEnd;