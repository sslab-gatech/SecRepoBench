// Initialize a variable to store the bone index.
unsigned int iBoneIndex = 0;

// Skip any spaces or line endings from the current position in the string.
if (!SkipSpacesAndLineEnd(currentChar, szCurrentOut)) {
    LogErrorNoThrow("Unexpected EOF/EOL while parsing bone index");
    SMDI_PARSE_RETURN;
}

// Parse an unsigned integer from the current position in the string to get the bone index.
if (!ParseUnsignedInt(*szCurrentOut, szCurrentOut, iBoneIndex)) {
    LogErrorNoThrow("Unexpected EOF/EOL while parsing bone index");
    SMDI_PARSE_RETURN;
}

// Check for parsing errors or if the parsed index is invalid, and handle these cases appropriately.
if (iBoneIndex >= mBones.size()) {
    LogErrorNoThrow("Invalid bone index");
    SMDI_PARSE_RETURN;
}

// If the parsed bone index is valid, ensure the list of bones is large enough to accommodate the index.
if (iBoneIndex >= mBones.size()) {
    mBones.resize(iBoneIndex + 1);
}

// Retrieve the bone object from the list using the parsed index.
SMD::Bone& bone = mBones[iBoneIndex];

// Set a flag to indicate if the bone name should be enclosed in double quotes.
bool bQuota = true;