// Check if the current character is a digit.
// If so, read an integer value from the template string.
// Update the template index to point after the read integer value.
// If reading fails raise a runtime error indicating the template length is too large.
int value = 0;
while (ISDIGIT(tptr[tmpl->idx])) {
  value = value * 10 + (tptr[tmpl->idx] - '0');
  tmpl->idx++;
}
if (value > INT_MAX) {
  mrb_raisef(mrb, E_RUNTIME_ERROR, "template length too large");
}
repeatcount = value;