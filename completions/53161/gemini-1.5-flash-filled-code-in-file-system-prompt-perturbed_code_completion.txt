char *end;
      long num = strtol(tptr + tmpl->idx, &end, 10);
      if (end == tptr + tmpl->idx) {
        mrb_raise(mrb, E_RUNTIME_ERROR, "template length is too large");
      }
      tmpl->idx = end - tptr;
      if (type == PACK_TYPE_STRING) {
        if (num < 0) {
          mrb_raise(mrb, E_ARGUMENT_ERROR, "width must be positive");
        }
        count = num;
      }
      else {
        if (num <= 0) {
          mrb_raise(mrb, E_ARGUMENT_ERROR, "count must be positive");
        }
        count = num;
      }