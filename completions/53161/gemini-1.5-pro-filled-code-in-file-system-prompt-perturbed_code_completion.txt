int i = 0, num = 0;
      while (ISDIGIT(tptr[tmpl->idx + i])) {
        // Convert the character to an integer.
        int digit = tptr[tmpl->idx + i] - '0';
        // Check for potential integer overflow.
        if (num > (INT_MAX - digit) / 10) {
          mrb_raise(mrb, E_RUNTIME_ERROR, "pack: too big repeat count");
        }
        num = num * 10 + digit;
        i++;
      }
      if (i > 0) {
        repeatcount = num;
        tmpl->idx += i;
      }