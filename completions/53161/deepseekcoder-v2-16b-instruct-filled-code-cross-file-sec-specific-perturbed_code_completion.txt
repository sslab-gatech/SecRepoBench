ch = tptr[tmpl->idx];
    if (ISDIGIT(ch)) {
      // Check if the current character is a digit.
      // If so, read an integer value from the template string.
      // Update the template index to point after the read integer value.
      // If reading fails raise a runtime error indicating the template length is too large.
      int digit_value = 0;
      while (ISDIGIT(ch)) {
        digit_value = digit_value * 10 + (ch - '0');
        tmpl->idx++;
        if (tmpl->idx >= tlen) {
          mrb_raisef(mrb, E_RUNTIME_ERROR, "mruby-pack: template length is too large");
        }
        ch = tptr[tmpl->idx];
      }
      // Update the template index to point after the read integer value.
      tmpl->idx++;
    } else {
      break;
    }