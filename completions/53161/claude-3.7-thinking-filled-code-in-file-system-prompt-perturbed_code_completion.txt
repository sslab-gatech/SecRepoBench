mrb_int n = 0;
do {
  if (n > MRB_INT_MAX / 10) {
    mrb_raise(mrb, E_RUNTIME_ERROR, "too big template length");
  }
  n = n * 10 + (ch - '0');
  if (++tmpl->idx >= tlen) break;
  ch = tptr[tmpl->idx];
} while (ISDIGIT(ch));
repeatcount = n;