mrb_int len = 0;
while (tmpl->idx < tlen && ISDIGIT(tptr[tmpl->idx])) {
  len = len * 10 + (tptr[tmpl->idx++] - '0');
}
if (len > INT_MAX) {
  mrb_raisef(mrb, E_RUNTIME_ERROR, "template length is too large");
}
repeatcount = len;