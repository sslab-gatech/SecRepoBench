static int
read_int_from_template(mrb_state *mrb, const char *tptr, mrb_int *valp) {
  char *endptr;
  mrb_int val = (mrb_int)strtol(tptr, &endptr, 10);
  if (endptr == tptr) {
    mrb_raisef(mrb, E_RUNTIME_ERROR, "invalid template length: %s", tptr);
  }
  *valp = val;
  return (int)(endptr - tptr);
}