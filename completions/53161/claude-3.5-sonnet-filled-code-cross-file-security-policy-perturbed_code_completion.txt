mrb_int n;
if (mrb_int_read(&n, tptr, &tmpl->idx, tlen) == MRB_INT_OVERFLOW) {
  mrb_raise(mrb, E_RUNTIME_ERROR, "template length too big");
}
if (n > INT_MAX) {
  mrb_raise(mrb, E_RUNTIME_ERROR, "repeat count too big");
}
repeatcount = (int)n;