tmpl->idx++;
      if (tmpl->idx >= tlen) {
        mrb_raisef(mrb, E_RUNTIME_ERROR, "template length is too large");
      }
      t = tptr[tmpl->idx];
      size = size * 10 + (ch - '0');