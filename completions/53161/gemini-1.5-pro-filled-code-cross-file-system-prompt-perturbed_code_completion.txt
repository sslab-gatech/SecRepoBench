int i = tmpl->idx;
      repeatcount = 0;
      while (ISDIGIT(ch)) {
        repeatcount = repeatcount * 10 + (ch - '0');
        ch = tptr[++i];
        if (i - tmpl->idx > MRB_INT_BIT/3) {
          mrb_raisef(mrb, E_RUNTIME_ERROR, "too big template length: %S", tmpl->str);
        }
      }
      tmpl->idx = i;