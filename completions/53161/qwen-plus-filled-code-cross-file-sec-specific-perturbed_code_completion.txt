if (ch == '0') {
  tmpl->idx++; // Skip leading zero
  continue;
}
repeatcount = 0;
while (tmpl->idx < tlen && ISDIGIT(tptr[tmpl->idx])) {
  repeatcount = repeatcount * 10 + (tptr[tmpl->idx] - '0');
  if (repeatcount > INT_MAX) {
    mrb_raisef(mrb, E_RUNTIME_ERROR, "template length too large");
  }
  tmpl->idx++;
}