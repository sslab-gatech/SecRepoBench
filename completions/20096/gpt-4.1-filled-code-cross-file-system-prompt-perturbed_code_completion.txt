#define CheckPathExtent(pad) \
  do { \
    if (((size_t) (p+pad) >= stroke_limit) || ((size_t) (q+pad) >= stroke_limit)) \
      { \
        size_t \
          new_limit = stroke_limit+pad+MaxStrokePad; \
        PointInfo \
          *new_path_p, *new_path_q; \
        new_path_p=(PointInfo *) ResizeQuantumMemory(path_p,new_limit,sizeof(*path_p)); \
        new_path_q=(PointInfo *) ResizeQuantumMemory(path_q,new_limit,sizeof(*path_q)); \
        if ((new_path_p == (PointInfo *) NULL) || (new_path_q == (PointInfo *) NULL)) \
          { \
            if (new_path_p != (PointInfo *) NULL) \
              new_path_p=(PointInfo *) RelinquishMagickMemory(new_path_p); \
            if (new_path_q != (PointInfo *) NULL) \
              new_path_q=(PointInfo *) RelinquishMagickMemory(new_path_q); \
            path_p=(PointInfo *) RelinquishMagickMemory(path_p); \
            path_q=(PointInfo *) RelinquishMagickMemory(path_q); \
            polygon_primitive=(PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive); \
            return((PrimitiveInfo *) NULL); \
          } \
        path_p=new_path_p; \
        path_q=new_path_q; \
        stroke_limit=new_limit; \
      } \
  } while (0)