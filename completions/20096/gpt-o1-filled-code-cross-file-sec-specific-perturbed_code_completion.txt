#define CheckPathExtent(additional) \
  do { \
    if ((((size_t)(p) + (size_t)(additional)) >= (stroke_limit + MaxStrokePad)) || \
        (((size_t)(q) + (size_t)(additional)) >= (stroke_limit + MaxStrokePad))) \
      { \
        /* Increase allocated memory to accommodate additional points */ \
        size_t new_limit = stroke_limit + (additional) + MaxStrokePad; \
        PointInfo *new_path_p = (PointInfo *) ResizeQuantumMemory(path_p, \
          new_limit, sizeof(*path_p)); \
        PointInfo *new_path_q = (PointInfo *) ResizeQuantumMemory(path_q, \
          new_limit, sizeof(*path_q)); \
        if ((new_path_p == (PointInfo *) NULL) || (new_path_q == (PointInfo *) NULL)) \
          { \
            if (new_path_p != (PointInfo *) NULL) \
              (void) RelinquishMagickMemory(new_path_p); \
            if (new_path_q != (PointInfo *) NULL) \
              (void) RelinquishMagickMemory(new_path_q); \
            path_p = (PointInfo *) RelinquishMagickMemory(path_p); \
            path_q = (PointInfo *) RelinquishMagickMemory(path_q); \
            polygon_primitive = (PrimitiveInfo *) RelinquishMagickMemory( \
              polygon_primitive); \
            return ((PrimitiveInfo *) NULL); \
          } \
        path_p = new_path_p; \
        path_q = new_path_q; \
        stroke_limit = new_limit - MaxStrokePad; \
      } \
  } while (0)