#define CheckPathExtent(pad) \
  if (((SIZE_MAX - (pad)) < p) || ((SIZE_MAX - (pad)) < q) || \
      (p + (pad) >= stroke_limit) || (q + (pad) >= stroke_limit)) \
    { \
      size_t new_limit; \
      PointInfo *new_p, *new_q; \
      if ((SIZE_MAX - (pad) - MaxStrokePad) < stroke_limit) \
        { \
          path_p = (PointInfo *) RelinquishMagickMemory(path_p); \
          path_q = (PointInfo *) RelinquishMagickMemory(path_q); \
          polygon_primitive = (PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive); \
          return((PrimitiveInfo *) NULL); \
        } \
      new_limit = stroke_limit + (pad) + MaxStrokePad; \
      new_p = (PointInfo *) ResizeQuantumMemory(path_p, \
        (size_t) new_limit, sizeof(*path_p)); \
      if (new_p == (PointInfo *) NULL) \
        { \
          path_p = (PointInfo *) RelinquishMagickMemory(path_p); \
          path_q = (PointInfo *) RelinquishMagickMemory(path_q); \
          polygon_primitive = (PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive); \
          return((PrimitiveInfo *) NULL); \
        } \
      path_p = new_p; \
      new_q = (PointInfo *) ResizeQuantumMemory(path_q, \
        (size_t) new_limit, sizeof(*path_q)); \
      if (new_q == (PointInfo *) NULL) \
        { \
          path_p = (PointInfo *) RelinquishMagickMemory(path_p); \
          path_q = (PointInfo *) RelinquishMagickMemory(path_q); \
          polygon_primitive = (PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive); \
          return((PrimitiveInfo *) NULL); \
        } \
      path_q = new_q; \
      stroke_limit = new_limit; \
    }