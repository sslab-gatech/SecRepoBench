#define CheckPathExtent(pad) \
  do { \
    if ((p+pad) >= (ssize_t) stroke_limit) { \
      size_t new_limit = stroke_limit + pad + MaxStrokePad; \
      path_p = (PointInfo *) ResizeQuantumMemory(path_p, new_limit, sizeof(*path_p)); \
      path_q = (PointInfo *) ResizeQuantumMemory(path_q, new_limit, sizeof(*path_q)); \
      if ((path_p == (PointInfo *) NULL) || (path_q == (PointInfo *) NULL)) { \
        if (path_p != (PointInfo *) NULL) \
          path_p = (PointInfo *) RelinquishMagickMemory(path_p); \
        if (path_q != (PointInfo *) NULL) \
          path_q = (PointInfo *) RelinquishMagickMemory(path_q); \
        polygon_primitive = (PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive); \
        return((PrimitiveInfo *) NULL); \
      } \
      stroke_limit = new_limit; \
    } \
  } while (0)