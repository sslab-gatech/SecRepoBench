#define CheckPathExtent(pad) \
  do { \
    size_t required_extent = (size_t) (p + q + (pad)); \
    size_t current_extent = stroke_limit + MaxStrokePad; \
    if (required_extent >= current_extent) { \
      size_t new_extent = current_extent + (pad) + 1024; \
      PointInfo *new_path_p, *new_path_q; \
      new_path_p = (PointInfo *) ResizeQuantumMemory(path_p, new_extent, sizeof(*path_p)); \
      new_path_q = (PointInfo *) ResizeQuantumMemory(path_q, new_extent, sizeof(*path_q)); \
      if ((new_path_p == (PointInfo *) NULL) || (new_path_q == (PointInfo *) NULL)) { \
        if (new_path_p != (PointInfo *) NULL) \
          new_path_p = (PointInfo *) RelinquishMagickMemory(new_path_p); \
        if (new_path_q != (PointInfo *) NULL) \
          new_path_q = (PointInfo *) RelinquishMagickMemory(new_path_q); \
        polygon_primitive = (PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive); \
        return((PrimitiveInfo *) NULL); \
      } \
      path_p = new_path_p; \
      path_q = new_path_q; \
      stroke_limit = new_extent - MaxStrokePad; \
    } \
  } while(0)