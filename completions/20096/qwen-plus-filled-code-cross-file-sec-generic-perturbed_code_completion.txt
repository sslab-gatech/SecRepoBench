#define CheckPathExtent(padding) \
  do { \
    if (((p + padding) > stroke_limit) || ((q + padding) > stroke_limit)) \
    { \
      size_t new_size = (size_t)(stroke_limit * 2 + MaxStrokePad); \
      PointInfo *temp_path_p = (PointInfo *) AcquireQuantumMemory(new_size, sizeof(*path_p)); \
      PointInfo *temp_path_q = (PointInfo *) AcquireQuantumMemory(new_size, sizeof(*path_q)); \
      if ((temp_path_p == NULL) || (temp_path_q == NULL)) \
      { \
        if (temp_path_p != NULL) \
          temp_path_p = (PointInfo *) RelinquishMagickMemory(temp_path_p); \
        if (temp_path_q != NULL) \
          temp_path_q = (PointInfo *) RelinquishMagickMemory(temp_path_q); \
        polygon_primitive = (PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive); \
        path_p = (PointInfo *) RelinquishMagickMemory(path_p); \
        path_q = (PointInfo *) RelinquishMagickMemory(path_q); \
        return (PrimitiveInfo *) NULL; \
      } \
      (void) memcpy(temp_path_p, path_p, stroke_limit * sizeof(*path_p)); \
      (void) memcpy(temp_path_q, path_q, stroke_limit * sizeof(*path_q)); \
      path_p = (PointInfo *) RelinquishMagickMemory(path_p); \
      path_q = (PointInfo *) RelinquishMagickMemory(path_q); \
      path_p = temp_path_p; \
      path_q = temp_path_q; \
      stroke_limit = new_size; \
    } \
  } while (0)