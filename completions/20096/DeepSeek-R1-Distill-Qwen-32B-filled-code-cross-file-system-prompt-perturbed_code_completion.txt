#define CheckPathExtent(PADDING) \
  if (p + PADDING >= (ssize_t) (stroke_limit + MaxStrokePad)) \
  { \
    size_t new_size = stroke_limit + MaxStrokePad + PADDING; \
    path_p = (PointInfo *) AcquireQuantumMemory(new_size, sizeof(*path_p)); \
    if (path_p == (PointInfo *) NULL) \
    { \
      path_p = (PointInfo *) RelinquishMagickMemory(path_p); \
      path_q = (PointInfo *) RelinquishMagickMemory(path_q); \
      polygon_primitive = (PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive); \
      return ((PrimitiveInfo *) NULL); \
    } \
    path_q = (PointInfo *) AcquireQuantumMemory(new_size, sizeof(*path_q)); \
    if (path_q == (PointInfo *) NULL) \
    { \
      path_p = (PointInfo *) RelinquishMagickMemory(path_p); \
      path_q = (PointInfo *) RelinquishMagickMemory(path_q); \
      polygon_primitive = (PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive); \
      return ((PrimitiveInfo *) NULL); \
    } \
    stroke_limit = new_size - MaxStrokePad; \
  }