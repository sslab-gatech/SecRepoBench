#define CheckPathExtent(padding) \
  if (((p + padding) >= stroke_limit) || ((q + padding) >= stroke_limit)) \
  { \
    size_t new_size = stroke_limit + padding + MaxStrokePad; \
    PointInfo *new_path_p = (PointInfo *) AcquireQuantumMemory(new_size, sizeof(*path_p)); \
    PointInfo *new_path_q = (PointInfo *) AcquireQuantumMemory(new_size, sizeof(*path_q)); \
    if (new_path_p == NULL || new_path_q == NULL) \
    { \
      if (new_path_p != NULL) \
        new_path_p = (PointInfo *) RelinquishMagickMemory(new_path_p); \
      if (new_path_q != NULL) \
        new_path_q = (PointInfo *) RelinquishMagickMemory(new_path_q); \
      polygon_primitive = (PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive); \
      path_p = (PointInfo *) RelinquishMagickMemory(path_p); \
      path_q = (PointInfo *) RelinquishMagickMemory(path_q); \
      return((PrimitiveInfo *) NULL); \
    } \
    (void) memcpy(new_path_p, path_p, p * sizeof(*path_p)); \
    (void) memcpy(new_path_q, path_q, q * sizeof(*path_q)); \
    path_p = (PointInfo *) RelinquishMagickMemory(path_p); \
    path_q = (PointInfo *) RelinquishMagickMemory(path_q); \
    path_p = new_path_p; \
    path_q = new_path_q; \
    stroke_limit = new_size; \
  }