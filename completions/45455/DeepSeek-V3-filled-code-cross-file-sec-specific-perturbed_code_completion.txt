ent = xmlParseStringEntityRef(ctxt, &ctxt->input->cur);
    if (ent == NULL)
        return;

    entity_checked_status = ent->checked;

    if ((ent->etype == XML_INTERNAL_PREDEFINED_ENTITY) ||
        (ent->etype == XML_INTERNAL_GENERAL_ENTITY)) {
        val = xmlStringDecodeEntities(ctxt, ent->content, 0, 0, 0, 0);
        if (val == NULL)
            return;
        if ((ctxt->sax != NULL) && (ctxt->sax->characters != NULL) &&
            (!ctxt->disableSAX))
            ctxt->sax->characters(ctxt->userData, val, xmlStrlen(val));
        xmlFree(val);
        return;
    }