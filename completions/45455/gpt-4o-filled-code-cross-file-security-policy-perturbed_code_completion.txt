ent = xmlParseStringEntityRef(ctxt, &ctxt->input->cur);
    if (ent == NULL) {
        xmlFatalErr(ctxt, XML_ERR_ENTITYREF_SEMICOL_MISSING, NULL);
        return;
    }

    if (ent->etype == XML_INTERNAL_PREDEFINED_ENTITY) {
        val = ent->content;
        if (val == NULL) return;
        if ((ctxt->sax != NULL) && (ctxt->sax->characters != NULL) &&
            (!ctxt->disableSAX))
            ctxt->sax->characters(ctxt->userData, val, xmlStrlen(val));
        return;
    }