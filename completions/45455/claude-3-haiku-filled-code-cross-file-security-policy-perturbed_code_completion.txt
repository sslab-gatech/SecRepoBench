// Parse the entity reference from the XML parser context.
ent = xmlParseStringEntityRef(ctxt, &RAW);

// Check if the entity is null and return if it is.
if (ent == NULL) {
    return;
}

// Store the entity's checked status for later use.
entity_checked_status = ent->checked;

// Handle the special case for predefined entities:
if (ent->etype == XML_INTERNAL_PREDEFINED_ENTITY) {
    val = ent->content;
    if (val == NULL) {
        return;
    }
    if ((ctxt->sax != NULL) && (ctxt->sax->characters != NULL) && (!ctxt->disableSAX)) {
        ctxt->sax->characters(ctxt->userData, val, xmlStrlen(val));
    }
    return;
}