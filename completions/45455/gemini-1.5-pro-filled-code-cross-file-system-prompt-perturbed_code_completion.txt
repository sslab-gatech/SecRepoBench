ent = xmlParseStringEntityRef(ctxt, &ctxt->input->cur);
    if (ent == NULL) {
	/*
	 * The entity was not defined, built a fake one to avoid
	 * problems in the tree navigation
	 */
	ent = xmlNewEntity(ctxt->myDoc, NULL, NULL, NULL, NULL, NULL);
	if (ent == NULL)
	    return;
	ent->etype = XML_INTERNAL_GENERAL_ENTITY;
    }
    entity_checked_status = ent->checked;

    /*
     * Handle the special case of predefined entities:
     *   - inline the entity content using the SAX character handler.
     */
    if (ent->etype == XML_INTERNAL_PREDEFINED_ENTITY) {
        val = ent->content;
        if ((ctxt->sax != NULL) && (ctxt->sax->characters != NULL) &&
            (!ctxt->disableSAX))
            ctxt->sax->characters(ctxt->userData, val, xmlStrlen(val));
        return;
    }