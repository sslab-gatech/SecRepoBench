// Parse the entity reference from the XML parser context.
    // Check if the entity is null and return if it is.
    // Store the entity's checked status for later use.
    // Handle the special case for predefined entities:
    //  - Retrieve the content of the entity.
    //  - Check if the content is null and return if it is.
    //  - Inline the entity content using the SAX character handler if available.
    ent = xmlParseStringEntityRef(ctxt, &str);
    if (ent == NULL) {
        return;
    }

    entity_checked_status = ent->checked;

    // Handle the special case for predefined entities
    if (ent->etype == XML_INTERNAL_PREDEFINED_ENTITY ||
        ent->etype == XML_EXTERNAL_PREDEFINED_ENTITY) {
        if (ent->content == NULL) {
            return;
        }
        if ((ctxt->sax != NULL) && (ctxt->sax->characters != NULL) &&
            (!ctxt->disableSAX)) {
            ctxt->sax->characters(ctxt->userData, ent->content, xmlStrlen(ent->content));
        }
        return;
    }

    // Check if the entity is null and return if it is.
    if (ent == NULL) {
        return;
    }

    // Store the entity's checked status for later use.
    entity_checked_status = ent->checked;

    // Handle the special case for predefined entities:
    //  - Retrieve the content of the entity.
    //  - Check if the content is null and return if it is.
    //  - Inline the entity content using the SAX character handler if available.
    if (ent->etype == XML_INTERNAL_PREDEFINED_ENTITY ||
        ent->etype == XML_EXTERNAL_PREDEFINED_ENTITY) {
        if (ent->content == NULL) {
            return;
        }
        if ((ctxt->sax != NULL) && (ctxt->sax->characters != NULL) &&
            (!ctxt->disableSAX)) {
            ctxt->sax->characters(ctxt->userData, ent->content, xmlStrlen(ent->content));
        }
        return;
    }