// Adjust the memory allocated for the parsed XML string to accommodate new content,
// ensuring that any necessary memory resizing or reallocation is handled properly.
// If the original memory block is not sufficient, allocate a new one and copy the
// existing content to it. Handle any memory allocation failures by throwing an
// appropriate error. Finally, ensure that the modified string is null-terminated.
if (extent > (size_t) (xml - xml_start))
  {
    xml=AcquireString(xml_start,extent);
    if (xml == (char *) NULL)
      ThrowFatalException(ResourceLimitFatalError,"MemoryAllocationFailed");
    (void) CopyMagickMemory(xml,xml_start,extent);
  }