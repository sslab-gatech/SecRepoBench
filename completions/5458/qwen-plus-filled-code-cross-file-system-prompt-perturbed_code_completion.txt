if (extent > strlen(xml_start))
{
  char *new_xml_start = (char *) ResizeQuantumMemory(xml_start, extent + length + 1, sizeof(*xml_start));
  if (new_xml_start == (char *) NULL)
    ThrowFatalException(ResourceLimitFatalError,"MemoryAllocationFailed");
  xml_start = new_xml_start;
}
else
{
  xml_start = (char *) AcquireQuantumMemory(extent + length + 1, sizeof(*xml_start));
  if (xml_start == (char *) NULL)
    ThrowFatalException(ResourceLimitFatalError,"MemoryAllocationFailed");
  (void) CopyMagickMemory(xml_start, q, offset);
}
xml_start[extent + length] = '\0';