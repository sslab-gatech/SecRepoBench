if (extent > (size_t)MaxTextExtent)
                      ThrowFatalException(ResourceLimitFatalError,"MemoryAllocationFailed");
                    if (xml_start != q)
                      xml_start=DestroyString(xml_start);
                    xml_start=(char *) AcquireQuantumMemory(extent+1,sizeof(*xml_start));
                    if (xml_start == (char *) NULL)
                      ThrowFatalException(ResourceLimitFatalError,"MemoryAllocationFailed");
                    q=xml_start;
                    (void) CopyMagickMemory(xml_start,q,(size_t) offset);
                    xml=xml_start+offset;
                    (void) CopyMagickMemory(xml+length,entity+1,strlen(entity)+1);