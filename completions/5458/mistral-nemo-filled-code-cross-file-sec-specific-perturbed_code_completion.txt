if (xml_start == q)
    xml_start = (char *) ResizeQuantumMemory(xml_start, extent, sizeof(*xml_start));
  else
    xml_start = (char *) ResizeQuantumMemory(xml_start, offset + length + strlen(entity) + 1, sizeof(*xml_start));
  if (xml_start == (char *) NULL)
    ThrowFatalException(ResourceLimitFatalError, "MemoryAllocationFailed");
  xml_start[offset + length] = '\0';
  (void) CopyMagickMemory(xml_start + offset, xml, length);
  (void) CopyMagickMemory(xml_start + offset + length, entity + 1, strlen(entity));