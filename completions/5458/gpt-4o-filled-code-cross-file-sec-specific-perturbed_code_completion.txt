if (extent > strlen(xml_start)) {
                      char *new_xml_start = (char *) realloc(xml_start, extent + 1);
                      if (new_xml_start == NULL) {
                        // Handle memory allocation failure
                        fprintf(stderr, "Memory allocation failed\n");
                        exit(EXIT_FAILURE);
                      }
                      xml_start = new_xml_start;
                    }
                    xml = xml_start + offset;
                    entity = strchr(xml, ';');
                    if (entity != NULL) {
                      (void) CopyMagickMemory(xml + length, entity + 1, strlen(entity));
                      xml[length + (entity - xml)] = '\0'; // Ensure null-termination
                    }