// Adjust the memory allocated for the parsed XML string to accommodate new content,
// ensuring that any necessary memory resizing or reallocation is handled properly.
// If the original memory block is not sufficient, allocate a new one and copy the
// existing content to it. Handle any memory allocation failures by throwing an
// appropriate error. Finally, ensure that the modified string is null-terminated.
extent=(size_t) (offset+length+strlen(entity));
xml=xml_start+offset;
if (xml == (char *) NULL)
  ThrowFatalException(ResourceLimitFatalError,"MemoryAllocationFailed");
if (extent > strlen(xml_start))
  {
    xml=(char *) ResizeQuantumMemory(xml_start,extent,sizeof(*xml_start));
    if (xml == (char *) NULL)
      ThrowFatalException(ResourceLimitFatalError,"MemoryAllocationFailed");
  }
(void) CopyMagickMemory(xml_start+offset,xml_start+offset+length,strlen(xml_start+offset+length));
(void) CopyMagickMemory(xml_start+offset+length,entity,strlen(entity));
xml_start[offset]=0;