char
                      *new_xml;

                    size_t
                      new_extent;

                    new_extent=extent+length+strlen(entities[i]);
                    new_xml=(char *) ResizeQuantumMemory(canonical_content,
                      new_extent,sizeof(*canonical_content));
                    if (new_xml == (char *) NULL)
                      return(canonical_content);
                    canonical_content=new_xml;
                    (void) CopyMagickMemory(canonical_content+offset,entities[i],
                      length);
                    (void) CopyMagickMemory(canonical_content+offset+length,
                      entity+1,strlen(entity));