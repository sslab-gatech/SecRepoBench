if (extent >= MagickPathExtent)
                      {
                        char
                          *reallocated_xml;

                        /*
                          Allocate more memory for the parsed XML string.
                        */
                        reallocated_xml=(char *) ResizeQuantumMemory(xml_start,extent + MagickPathExtent,
                                                                     sizeof(*xml_start));
                        if (reallocated_xml == (char *) NULL)
                          ThrowFatalException(ResourceLimitFatalError,"MemoryAllocationFailed");
                        if (reallocated_xml != xml_start)
                        {
                          /*
                            Relocate pointers to the new memory block.
                          */
                          offset=(ssize_t) (xml - xml_start);
                          xml_start=reallocated_xml;
                          xml=xml_start+offset;
                          entity=strchr(xml,';');
                        }

                      }
                    (void) CopyMagickMemory(xml+length,entity+1,strlen(entity)+1); // Null-terminate
                    (void) strncpy(xml,entities[i],length);