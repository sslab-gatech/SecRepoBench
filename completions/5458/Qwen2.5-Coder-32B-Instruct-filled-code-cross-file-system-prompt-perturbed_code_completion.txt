if ((length + strlen(xml_start) + strlen(entity)) > extent)
{
  extent = length + strlen(xml_start) + strlen(entity);
  xml_start = (char *) ResizeQuantumMemory(xml_start, extent, sizeof(*xml_start));
  if (xml_start == (char *) NULL)
    ThrowFatalException(ResourceLimitFatalError, "MemoryAllocationFailed");
  xml = xml_start + offset;
}