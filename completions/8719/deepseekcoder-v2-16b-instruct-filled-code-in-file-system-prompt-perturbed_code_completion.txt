Info *mng_info)
{
  ssize_t
    i;

  if (mng_info != (MngInfo *) NULL)
    {
#ifdef MNG_OBJECT_BUFFERS
      for (i=0; i < MNG_MAX_OBJECTS; i++)
        MngInfoDiscardObject(mng_info,i);
#endif
      if (mng_info->image != (Image *) NULL)
        mng_info->image=DestroyImage(mng_info->image);

      mng_info->image=DestroyString(mng_info->image);
      mng_info=DestroyString(mng_info);
    }

  return((MngInfo *) NULL);
}

static void MngInfoInitializeStruct(MngInfo *mng_info)
{
  ssize_t
    i;

  if (mng_info != (MngInfo *) NULL)
    {
#ifdef MNG_OBJECT_BUFFERS
      for (i=0; i < MNG_MAX_OBJECTS; i++)
        mng_info->ob[i]=(MngBuffer *) NULL;
#endif
      mng_info->image=(Image *) NULL;
      mng_info->page.width=0;
      mng_info->page.height=0;
      mng_info->adjoin=MagickFalse;
#ifndef PNG_READ_EMPTY_PLTE_SUPPORTED
      mng_info->bytes_in_read_buffer=0;
      mng_info->found_empty_plte=MagickFalse;
#endif
      mng_info->equal_backgrounds=MagickFalse;
      mng_info->equal_chrms=MagickFalse;
      mng_info->equal_gammas=MagickFalse;
#if defined(PNG_WRITE_EMPTY_PLTE_SUPPORTED) || \
    defined(PNG_MNG_FEATURES_SUPPORTED)
      mng_info->equal_palettes=MagickFalse;
#endif
      mng_info->equal_physs=MagickFalse;
      mng_info->equal_srgbs=MagickFalse;
      mng_info->framing_mode=0;
      mng_info->have_global_bkgd=MagickFalse;
      mng_info->have_global_chrm=MagickFalse;
      mng_info->have_global_gama=MagickFalse;
      mng_info->have_global_phys=MagickFalse;
      mng_info->have_global_sbit=MagickFalse;
      mng_info->have_global_srgb=MagickFalse;
      mng_info->have_saved_bkgd_index=MagickFalse;
      mng_info->have_write_global_chrm=MagickFalse;
      mng_info->have_write_global_gama=MagickFalse;
      mng_info->have_write_global_plte=MagickFalse;
      mng_info->have_write_global_srgb=MagickFalse;
      mng_info->need_fram=MagickFalse;
      mng_info->object_id=0;
      mng_info->old_framing_mode=0;
      mng_info->saved_bkgd_index=0;
      mng_info->new_number_colors=0;
      mng_info->image_found=0;
      mng_info->scenes_found=0;
      mng_info->clip.left=0;
      mng_info->clip.right=(ssize_t) PNG_UINT_31_MAX;
      mng_info->clip.top=0;
      mng_info->clip.bottom=(ssize_t) PNG_UINT_31_MAX;
      mng_info->frame.left=0;
      mng_info->frame.right=(ssize_t) PNG_UINT_31_MAX;
      mng_info->frame.top=0;
      mng_info->frame.bottom=(ssize_t) PNG_UINT_31_MAX;
      mng_info->image_box.left=0;
      mng_info->image_box.right=(ssize_t) PNG_UINT_31_MAX;
      mng_info->image_box.top=0;
      mng_info->image_box.bottom=(ssize_t) PNG_UINT_31_MAX;
      for (i=0; i < 256; i++)
        {
          mng_info->loop_count[i]=0;
          mng_info->loop_iteration[i]=0;
          mng_info->loop_jump[i]=0;
          mng_info->loop_active[i]=MagickFalse;
        }
      for (i=0; i < MNG_MAX_OBJECTS; i++)
        {
          mng_info->exists[i]=MagickFalse;
          mng_info->invisible[i]=MagickFalse;
          mng_info->viewable[i]=MagickFalse;
          mng_info->frozen[i]=MagickFalse;
          mng_info->x_off[i]=0;
          mng_info->y_off[i]=0;
          mng_info->object_clip[i].left=0;
          mng_info->object_clip[i].right=(ssize_t) PNG_UINT_31_MAX;
          mng_info->object_clip[i].top=0;
          mng_info->object_clip[i].bottom=(ssize_t) PNG_UINT_31_MAX;
        }
      mng_info->global_plte=(png_colorp) NULL;
      mng_info->global_sbit.red=0;
      mng_info->global_sbit.green=0;
      mng_info->global_sbit.blue=0;
      mng_info->global_gamma=1.0;
      mng_info->global_chrm.white_x=0.3127;
      mng_info->global_chrm.white_y=0.3290;
      mng_info->global_chrm.red_x=0.6400;
      mng_info->global_chrm.red_y=0.3300;
      mng_info->global_chrm.green_x=0.3000;
      mng_info->global_chrm.green_y=0.6000;
      mng_info->global_chrm.blue_x=0.1500;
      mng_info->global_chrm.blue_y=0.0600;
      mng_info->global_srgb_intent=PerceptualIntent;
      mng_info->global_plte_length=0;
      mng_info->global_trns_length=0;
      mng_info->global_x_pixels_per_unit=0;
      mng_info->global_y_pixels_per_unit=0;
      mng_info->mng_width=0;
      mng_info->mng_height=0;
      mng_info->ticks_per_second=0;
      mng_info->need_blob=MagickFalse;
      mng_info->IsPalette=0;
      mng_info->global_phys_unit_type=0;
      mng_info->basi_warning=0;
      mng_info->clon_warning=0;
      mng_info->dhdr_warning=0;
      mng_info->jhdr_warning=0;
      mng_info->magn_warning=0;
      mng_info->past_warning=0;
      mng_info->phyg_warning=0;
      mng_info->phys_warning=0;
      mng_info->sbit_warning=0;
      mng_info->show_warning=0;
      mng_info->mng_type=0;
      mng_info->write_mng=MagickFalse;
      mng_info->write_png_colortype=0;
      mng_info->write_png_depth=0;
      mng_info->write_png_compression_level=0;
      mng_info->write_png_compression_strategy=0;
      mng_info->write_png_compression_filter=0;
      mng_info->write_png8=MagickFalse;
      mng_info->write_png24=MagickFalse;
      mng_info->write_png32=MagickFalse;
      mng_info->write_png48=MagickFalse;
      mng_info->write_png64=MagickFalse;
#ifdef MNG_BASI_SUPPORTED
      mng_info->basi_width=0;
      mng_info->basi_height=0;
      mng_info->basi_depth=0;
      mng_info->basi_color_type=0;
      mng_info->basi_compression_method=0;
      mng_info->basi_filter_type=0;
      mng_info->basi_interlace_method=0;
      mng_info->basi_red=0;
      mng_info->basi_green=0;
      mng_info->basi_blue=0;
      mng_info->basi_alpha=0;
      mng_info->basi_viewable=0;
#endif
      mng_info->magn_first=0;
      mng_info->magn_last=0;
      mng_info->magn_mb=0;
      mng_info->magn_ml=0;
      mng_info->magn_mr=0;
      mng_info->magn_mt=0;
      mng_info->magn_mx=0;
      mng_info->magn_my=0;
      mng_info->magn_methx=0;
      mng_info->magn_methy=0;
      mng_info->mng_global_bkgd.red=0;
      mng_info->mng_global_bkgd.green=0;
      mng_info->mng_global_bkgd.blue=0;
      mng_info->mng_global_bkgd.opacity=QuantumRange;
      mng_info->ping_exclude_bKGD=MagickFalse;
      mng_info->ping_exclude_cHRM=MagickFalse;
      mng_info->ping_exclude_date=MagickFalse;
      mng_info->ping_exclude_eXIf=MagickFalse;
      mng_info->ping_exclude_EXIF=MagickFalse;
      mng_info->ping_exclude_gAMA=MagickFalse;
      mng_info->ping_exclude_iCCP=MagickFalse;
      mng_info->ping_exclude_oFFs=MagickFalse;
      mng_info->ping_exclude_pHYs=MagickFalse;
      mng_info->ping_exclude_sRGB=MagickFalse;
      mng_info->ping_exclude_tEXt=MagickFalse;
      mng_info->ping_exclude_tRNS=MagickFalse;
      mng_info->ping_exclude_caNv=MagickFalse;
      mng_info->ping_exclude_zCCP=MagickFalse;
      mng_info->ping_exclude_zTXt=MagickFalse;
      mng_info->ping_exclude_tIME=MagickFalse;
      mng_info->ping_preserve_colormap=MagickFalse;
      mng_info->ping_preserve_iCCP=MagickFalse;
    }
}

static void MngInfoInitialize(MngInfo *mng_info,Image *image)
{
  if (mng_info != (MngInfo *) NULL)
    {
      MngInfoInitializeStruct(mng_info);
      mng_info->image=image;
    }
}

static void MngInfoDestroy(MngInfo *mng_info)
{
  if (mng_info != (MngInfo *) NULL)
    {
      if (mng_info->image != (Image *) NULL)
        mng_info->image=DestroyImage(mng_info->image);

      mng_info=DestroyString(mng_info);
    }
}

static void MngInfoRead(MngInfo *mng_info,Image *image)
{
  if (mng_info != (MngInfo *) NULL)
    {
      MngInfoInitializeStruct(mng_info);
      mng_info->image=image;