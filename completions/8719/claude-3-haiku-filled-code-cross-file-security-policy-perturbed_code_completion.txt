// Read the next chunk from the MNG image file.
// Initialize the chunk type to a default error value and read its length.
// Log the event if logging is enabled, displaying the chunk type and length.
// Verify if the length is valid and handle errors accordingly.
// Prepare for reading the chunk data by initializing necessary pointers.

unsigned char chunk_type[5] = {0};
size_t chunk_length = ReadBlobMSBLong(image);

if (logging != MagickFalse)
{
    (void) LogMagickEvent(CoderEvent, GetMagickModule(),
                         "  Reading %c%c%c%c chunk, length=%.20g",
                         chunk_type[0], chunk_type[1], chunk_type[2], chunk_type[3],
                         (double)chunk_length);
}

if (chunk_length > GetBlobSize(image) - TellBlob(image))
{
    ThrowReaderException(CorruptImageError, "InsufficientImageDataInFile");
}

unsigned char *chunk_data = (unsigned char *)AcquireQuantumMemory(chunk_length, sizeof(*chunk_data));
if (chunk_data == (unsigned char *)NULL)
{
    ThrowReaderException(ResourceLimitError, "MemoryAllocationFailed");
}

if (ReadBlob(image, 4, chunk_type) != 4)
{
    chunk_data = (unsigned char *)RelinquishMagickMemory(chunk_data);
    ThrowReaderException(CorruptImageError, "InsufficientImageDataInFile");
}