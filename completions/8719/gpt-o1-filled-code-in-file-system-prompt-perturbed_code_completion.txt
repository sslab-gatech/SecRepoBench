/* Read the chunk length and type, log the event, and verify the length. */
{
  char type[MagickPathExtent];

  type[0] = '\0';
  (void) ConcatenateMagickString(type,"errr",MagickPathExtent);
  length = (size_t) ReadBlobMSBLong(image);  /* read the 4-byte chunk length */
  count = (size_t) ReadBlob(image,4,(unsigned char *) type);  /* read the 4-byte chunk type */

  /* If logging is enabled, record the chunk type and length. */
  if (logging != MagickFalse)
    (void) LogMagickEvent(CoderEvent,GetMagickModule(),
      "  Reading MNG chunk type %c%c%c%c, length: %.20g",
      type[0],type[1],type[2],type[3],(double) length);

  /* Validate length. */
  if (length > PNG_UINT_31_MAX || count == 0)
    {
      ThrowReaderException(CorruptImageError,"ImproperImageHeader");
    }
  if (length > GetBlobSize(image))
    {
      ThrowReaderException(CorruptImageError,"InsufficientImageDataInFile");
    }
}