// Read the next chunk from the MNG image file.
type[0]='\0';
(void) ConcatenateMagickString(type,"errr",MagickPathExtent);
length=(size_t) ReadBlobMSBLong(image);
count=(unsigned int) ReadBlob(image,4,(unsigned char *) type);

if (logging != MagickFalse)
  (void) LogMagickEvent(CoderEvent,GetMagickModule(),
    "  Reading MNG chunk type %c%c%c%c, length: %.20g",
    type[0],type[1],type[2],type[3],(double) length);

if (length > PNG_UINT_31_MAX || count == 0)
  {
    DestroyJNG(NULL,&color_image,&color_image_info,
      &alpha_image,&alpha_image_info);
    ThrowReaderException(CorruptImageError,"ImproperImageHeader");
  }
if (length > GetBlobSize(image))
  {
    DestroyJNG(NULL,&color_image,&color_image_info,
      &alpha_image,&alpha_image_info);
    ThrowReaderException(CorruptImageError,
      "InsufficientImageDataInFile");
  }

if (length != 0)
  {
    chunk=(unsigned char *) AcquireQuantumMemory(length,sizeof(*chunk));

    if (chunk == (unsigned char *) NULL)
      ThrowReaderException(ResourceLimitError,"MemoryAllocationFailed");

    for (i=0; i < (ssize_t) length; i++)
    {
      int
        c;

      c=ReadBlobByte(image);
      if (c == EOF)
        break;
      chunk[i]=(unsigned char) c;
    }
    for ( ; i < (ssize_t) length; i++)
      chunk[i]='\0';

    p=chunk;
  }

(void) ReadBlobMSBLong(image);  /* read crc word */