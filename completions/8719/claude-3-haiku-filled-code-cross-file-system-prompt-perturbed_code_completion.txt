// Read the next chunk from the MNG image file.
// Initialize the chunk type to a default error value and read its length.
// Log the event if logging is enabled, displaying the chunk type and length.
// Verify if the length is valid and handle errors accordingly.
// Prepare for reading the chunk data by initializing necessary pointers.

unsigned char *chunk_data = NULL;
size_t length = ReadBlobMSBLong(image);

if (logging != MagickFalse)
{
    (void) LogMagickEvent(CoderEvent, GetMagickModule(),
                         "    Reading %c%c%c%c chunk, length=%.20g",
                         type[0], type[1], type[2], type[3], (double)length);
}

if (length > GetBlobSize(image) - TellBlob(image))
{
    ThrowReaderException(CorruptImageError, "InsufficientImageDataInFile");
}

if (length != 0)
{
    chunk_data = (unsigned char *)AcquireQuantumMemory(length, sizeof(*chunk_data));
    if (chunk_data == (unsigned char *)NULL)
        ThrowReaderException(ResourceLimitError, "MemoryAllocationFailed");

    if (ReadBlob(image, length, chunk_data) != length)
    {
        chunk_data = (unsigned char *)RelinquishMagickMemory(chunk_data);
        ThrowReaderException(CorruptImageError, "InsufficientImageDataInFile");
    }
}