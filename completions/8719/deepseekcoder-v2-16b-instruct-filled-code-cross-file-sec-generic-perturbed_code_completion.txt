unsigned char
  *chunk_data;

// Read the next chunk from the MNG image file.
// Initialize the chunk type to a default error value and read its length.
// Log the event if logging is enabled, displaying the chunk type and length.
// Verify if the length is valid and handle errors accordingly.
// Prepare for reading the chunk data by initializing necessary pointers.
chunk_data = (unsigned char *) AcquireQuantumMemory(length, sizeof(*chunk_data));

if (chunk_data == (unsigned char *) NULL)
  ThrowReaderException(ResourceLimitError, "MemoryAllocationFailed");

for (i = 0; i < (ssize_t) length; i++)
{
  int
    c;

  c = ReadBlobByte(image);
  if (c == EOF)
  {
    chunk_data = (unsigned char *) RelinquishMagickMemory(chunk_data);
    ThrowReaderException(CorruptImageError, "InsufficientImageDataInFile");
  }
  chunk_data[i] = (unsigned char) c;
}

p = chunk_data;