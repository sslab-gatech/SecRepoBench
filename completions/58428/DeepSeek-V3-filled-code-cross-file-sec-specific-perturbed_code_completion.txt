if (unlikely (num_contours == 0))
    {
      contour_points.resize (0);
      return true;
    }

    unsigned int num_points = endPtsOfContours[num_contours - 1] + 1;
    unsigned int num_phantoms = 4;
    unsigned int total_points = num_points + num_phantoms;

    contour_points.resize (total_points);
    for (unsigned int i = 0; i < num_contours; i++)
    {
      unsigned int end_point = endPtsOfContours[i];
      if (unlikely (end_point >= num_points))
        return false;
      contour_points[end_point].is_end_point = true;
    }

    if (phantom_only)
      return true;