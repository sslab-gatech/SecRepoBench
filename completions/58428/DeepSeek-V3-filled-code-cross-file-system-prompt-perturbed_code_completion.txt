if (unlikely (!num_contours)) return true;

    contour_points.resize (endPtsOfContours[num_contours - 1] + 1 + (phantom_only ? 0 : 1));
    if (unlikely (contour_points.in_error ())) return false;

    unsigned prev_end = 0;
    for (unsigned i = 0; i < num_contours; i++)
    {
      unsigned end = endPtsOfContours[i];
      if (unlikely (end < prev_end)) return false;
      contour_points.arrayZ[end].is_end_point = true;
      prev_end = end + 1;
    }

    if (phantom_only) return true;