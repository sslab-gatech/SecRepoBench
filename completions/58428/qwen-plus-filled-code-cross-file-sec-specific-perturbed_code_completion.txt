// Initialize contour_points with the correct size and ensure all elements are zeroed out.
contour_points.resize (num_contours + 1, contour_point_t());

// Validate that the resize operation was successful.
if (unlikely (!contour_points.alloc_success())) return false;

// Initialize flags for each contour point to a default value (e.g., 0).
for (unsigned i = 0; i < contour_points.length; ++i)
{
  contour_points.arrayZ[i].flag = 0;
}

// Ensure endPtsOfContours is within valid range before proceeding.
if (unlikely (num_contours > endPtsOfContours.length)) return false;