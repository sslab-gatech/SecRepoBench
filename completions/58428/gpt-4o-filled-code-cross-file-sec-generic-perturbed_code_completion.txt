// Check if the number of contours is valid
    if (num_contours <= 0) return false;

    // Retrieve the end points of the contours from the header
    const HBUINT16 *endPts = &endPtsOfContours[0];

    // Validate the range of end points
    for (int i = 0; i < num_contours; ++i) {
        if (endPts[i] >= num_points) return false;
    }

    // Allocate memory for the contour points
    contour_points.resize(num_points + (phantom_only ? 0 : num_phantom_points));

    // Set the end points of each contour in the points array
    for (int i = 0; i < num_contours; ++i) {
        contour_points[endPts[i]].on_curve = true;
    }

    // If phantom_only is true, skip the process of reading the actual points
    if (phantom_only) return true;