if (num_contours == 0)
  return true; // Empty glyph, nothing to do

// Calculate the total number of points from the last contour end point
unsigned num_points = endPtsOfContours[num_contours - 1] + 1;

// Resize the contour_points vector to fit all points (including 4 phantom points)
if (unlikely (!contour_points.resize (num_points + 4))) return false;

// Initialize all points to zero
memset (contour_points.arrayZ, 0, contour_points.length * sizeof (contour_points.arrayZ[0]));

// Set contour end flags
for (int i = 0; i < num_contours; i++)
  contour_points[endPtsOfContours[i]].flag |= FLAG_CONTOUR_END;

// If phantom_only is true, return early without reading the actual points
if (phantom_only)
  return true;