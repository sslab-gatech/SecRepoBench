unsigned num_contours = header.numberOfContours;
    if (num_contours == 0) return false;

    const HBUINT16 *endPtsOfContours = &StructAtOffset<HBUINT16>(&bytes, GlyphHeader::static_size);
    if (unlikely((const char *)(endPtsOfContours + num_contours) > bytes.arrayZ + bytes.length))
      return false;

    unsigned num_points = endPtsOfContours[num_contours - 1] + 1;
    if (unlikely(num_points + 4 > contour_points.length))
      return false;

    contour_points.length = num_points + 4;

    for (unsigned i = 0; i < num_contours; i++)
      contour_points.arrayZ[endPtsOfContours[i]].on_curve = true;

    if (phantom_only)
    {
      contour_points.arrayZ[num_points + 0].x = 0;
      contour_points.arrayZ[num_points + 1].x = header.xMax - header.xMin;
      contour_points.arrayZ[num_points + 2].y = 0;
      contour_points.arrayZ[num_points + 3].y = header.yMax - header.yMin;
      return true;
    }