unsigned int num_contours = header.numberOfContours;
if (unlikely (!contour_points.resize (header.numberOfContours ? StructAtOffset<HBUINT16> (&bytes, GlyphHeader::static_size + (num_contours - 1) * HBUINT16::static_size) + 1 : 0)))
  return false;

for (unsigned int i = 0; i < num_contours; i++)
  contour_points.arrayZ[i].is_end_point = true;

contour_points.resize (contour_points.length + 4); /* Make room for phantom points. */

if (phantom_only)
  return true;

/* Skip instructions */
const HBUINT16 &instructionLength = StructAtOffset<HBUINT16> (&bytes, GlyphHeader::static_size + HBUINT16::static_size * num_contours);