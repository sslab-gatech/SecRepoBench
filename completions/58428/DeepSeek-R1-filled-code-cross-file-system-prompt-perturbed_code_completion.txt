if (num_contours == 0)
  return false;

int last_end = -1;
for (unsigned i = 0; i < num_contours; i++)
{
  unsigned end = endPtsOfContours[i];
  if (end <= last_end)
    return false;
  last_end = end;
}

unsigned num_actual_points = last_end + 1;
unsigned total_points = num_actual_points + 4;

if (!contour_points.resize (total_points))
  return false;

if (phantom_only)
  return true;