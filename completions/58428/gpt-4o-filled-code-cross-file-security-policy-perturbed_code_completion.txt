// Validate the number of contours
    if (num_contours < 0 || num_contours > endPtsOfContours.length) return false;

    // Calculate the total number of points
    unsigned total_points = endPtsOfContours[num_contours] + 1;
    if (phantom_only) {
        // If phantom_only, we only need space for phantom points
        total_points += 4; // typically 4 phantom points
    }

    // Allocate memory for contour points
    if (!contour_points.resize(total_points)) return false;

    // Initialize contour points
    for (unsigned i = 0; i < num_contours; i++) {
        unsigned end_point = endPtsOfContours[i];
        if (end_point >= total_points) return false;
        contour_points.arrayZ[end_point].on_curve = true;
    }

    // If phantom_only, skip reading actual points
    if (phantom_only) return true;