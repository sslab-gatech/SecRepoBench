if (num_contours == 0) return true;

unsigned int num_points = endPtsOfContours[num_contours - 1] + 1;
contour_points.resize (num_points);

unsigned int start_point = 0;
for (int i = 0; i < num_contours; i++)
{
  unsigned int end_point = endPtsOfContours[i];
  if (unlikely (end_point >= num_points)) return false;

  for (unsigned int j = start_point; j <= end_point; j++)
  {
    contour_points[j].is_end_point = (j == end_point);
  }
  start_point = end_point + 1;
}

if (phantom_only) return true;