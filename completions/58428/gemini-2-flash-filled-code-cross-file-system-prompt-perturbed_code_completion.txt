unsigned num_points = 0;
    for (unsigned i = 0; i < num_contours; i++)
      num_points += endPtsOfContours[i] + 1;

    contour_points.length = num_points;
    if (!contour_points.alloc (num_points + num_contours)) return false;

    unsigned k = 0;
    for (unsigned i = 0; i < num_contours; i++)
    {
      unsigned end_point = endPtsOfContours[i];
      contour_points.arrayZ[end_point + k].end_of_contour = true;
      for (unsigned j = 0; j <= end_point; j++)
	contour_points.arrayZ[j + k].end_of_contour = false;
      k += end_point + 1;
    }

    if (phantom_only)
      return true;

    /* Now read the flags and coordinates */