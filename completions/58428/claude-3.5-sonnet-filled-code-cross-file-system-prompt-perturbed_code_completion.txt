if (unlikely (num_contours > glyf_impl::PHANTOM_COUNT))
  return false;

unsigned int num_points = endPtsOfContours[num_contours];
if (unlikely (num_points > glyf_impl::POINTS_MAX))
  return false;

contour_points.resize (num_points + glyf_impl::PHANTOM_COUNT);

for (unsigned int i = 0; i < num_contours; i++)
{
  unsigned int ie = endPtsOfContours[i];
  if (unlikely (ie >= num_points))
    return false;
  contour_points[ie].is_end_point = true;
}

if (phantom_only)
  return true;