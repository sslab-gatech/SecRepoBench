// Calculate the total number of points in all contours.
    unsigned total_points = endPtsOfContours[num_contours - 1] + 1;
    if (unlikely (!total_points))
      return false;

    // Allocate space for points, including 4 phantom points.
    if (unlikely (!contour_points.resize (total_points + 4, false)))
      return false;

    contour_point_t* rec_points =
      contour_points.as_array ().sub_array (contour_points.length - (total_points + 4)).arrayZ;
    memset (rec_points, 0, (total_points + 4) * sizeof (rec_points[0]));

    // Mark the end points of each contour.
    for (unsigned i = 0; i < num_contours; i++)
      rec_points[endPtsOfContours[i]].flag |= FLAG_ON_CURVE;

    // If phantom_only is requested, skip reading actual data.
    if (phantom_only)
      return true;