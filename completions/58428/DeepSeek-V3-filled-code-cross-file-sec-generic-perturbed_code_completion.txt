if (phantom_only)
      return true;

    if (unlikely (!contour_points.resize (endPtsOfContours[num_contours - 1] + 1 + PHANTOM_COUNT)))
      return false;

    for (unsigned i = 0; i < num_contours; i++)
    {
      unsigned end = endPtsOfContours[i];
      if (unlikely (end >= contour_points.length - PHANTOM_COUNT))
        return false;
      contour_points.arrayZ[end].is_end_point = true;
    }