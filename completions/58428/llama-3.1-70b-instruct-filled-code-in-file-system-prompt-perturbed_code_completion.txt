unsigned int num_contours = header.numberOfContours;
contour_points.resize (num_contours + 1);
for (unsigned i = 0; i < num_contours; i++)
  contour_points[i] = StructAtOffset<HBUINT16> (&endPtsOfContours[i], 0);
contour_points[num_contours] = StructAtOffset<HBUINT16> (&endPtsOfContours[num_contours], 0);
if (unlikely (contour_points[num_contours] > bytes.length)) return false;

if (!phantom_only)
{
  contour_point_vector_t points;
  points.resize (contour_points[num_contours] + 1);
  if (!get_contour_points (points)) return false;
  contour_points = points;
}