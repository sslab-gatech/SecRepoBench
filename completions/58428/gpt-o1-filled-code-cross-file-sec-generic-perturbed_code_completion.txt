// Validate number of contours and compute total number of points
    if (num_contours > endPtsOfContours.length || (num_contours > 0 && endPtsOfContours[num_contours - 1] + 1 > endPtsOfContours[num_contours]))
      return false;

    unsigned total_points = 0;
    if (num_contours > 0)
      total_points = endPtsOfContours[num_contours - 1] + 1;

    // Allocate space for actual points + 4 phantom points
    contour_points.alloc (total_points + 4);

    // Initialize flags to zero for all points
    for (unsigned i = 0; i < contour_points.length; i++)
      contour_points.arrayZ[i].flag = 0;

    // If phantom_only is true, skip reading actual points
    if (phantom_only)
      return true;