if (num_contours > 0)
{
    if (unlikely (num_contours > endPtsOfContours.length))
        return false;
    unsigned int last_end = endPtsOfContours[num_contours - 1];
    unsigned int num_points = last_end + 1 + 4; // +4 for phantom points
    if (unlikely (!contour_points.resize (num_points)))
        return false;
}
else
{
    if (unlikely (!contour_points.resize (4)))
        return false;
}

if (phantom_only)
    return true;