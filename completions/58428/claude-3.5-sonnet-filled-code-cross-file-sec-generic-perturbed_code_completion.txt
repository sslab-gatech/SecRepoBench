if (unlikely (num_contours > contour_points.length)) return false;

unsigned int total_points = 0;
for (unsigned int i = 0; i < num_contours; i++)
{
  if (unlikely (endPtsOfContours[i] >= contour_points.length)) return false;
  total_points = endPtsOfContours[i] + 1;
}

if (unlikely (!contour_points.resize (total_points))) return false;

unsigned int start_point = 0;
for (unsigned int i = 0; i < num_contours; i++)
{
  unsigned int end_point = endPtsOfContours[i];
  contour_points[start_point].is_end_point = true;
  contour_points[end_point].is_end_point = true;
  start_point = end_point + 1;
}

if (phantom_only) return true;