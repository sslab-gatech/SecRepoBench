if (unlikely (num_contours > contour_points.length))
  return false;

unsigned int num_points = 0;
for (unsigned int i = 0; i < num_contours; i++)
{
  if (unlikely (endPtsOfContours[i] >= contour_points.length))
    return false;
  num_points = endPtsOfContours[i] + 1;
}

if (unlikely (!contour_points.resize (num_points)))
  return false;

unsigned int start_point = 0;
for (unsigned int i = 0; i < num_contours; i++)
{
  contour_points[endPtsOfContours[i]].is_end_point = true;
  start_point = endPtsOfContours[i] + 1;
}

if (phantom_only)
  return true;