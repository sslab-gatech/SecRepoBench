// Validate the number of contours and allocate memory for contour points
    if (num_contours == 0 || num_contours > MAX_CONTOURS) return false;
    contour_points.length = endPtsOfContours[num_contours - 1] + 1;
    if (contour_points.length > MAX_CONTOUR_POINTS) return false;
    contour_points.arrayZ = new contour_point_t[contour_points.length];
    if (!contour_points.arrayZ) return false;

    // Initialize contour points
    for (unsigned i = 0; i < contour_points.length; i++) {
        contour_points.arrayZ[i].flag = 0;
        contour_points.arrayZ[i].x = 0.0f;
        contour_points.arrayZ[i].y = 0.0f;
    }

    // If phantom_only is true, skip reading actual points
    if (phantom_only) return true;