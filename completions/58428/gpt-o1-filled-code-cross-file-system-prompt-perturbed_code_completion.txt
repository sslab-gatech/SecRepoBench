{
  // Retrieve total number of points from the last entry in endPtsOfContours.
  unsigned total_points = endPtsOfContours[num_contours] + 1;
  if (unlikely (!num_contours || total_points == 0))
    return false;

  // Allocate for all contour points plus four phantom points.
  contour_points.alloc (total_points + 4);
  contour_points.length = total_points + 4;

  // Initialize all points to zero.
  for (unsigned i = 0; i < total_points + 4; i++)
  {
    contour_points[i].x = 0;
    contour_points[i].y = 0;
    contour_points[i].flag = 0;
  }

  // Validate each contour's end point.
  for (unsigned i = 0; i < num_contours; i++)
  {
    if (unlikely (endPtsOfContours[i] >= total_points))
      return false;
  }

  // If phantom_only, skip reading the actual glyph points.
  if (phantom_only)
    return true;
}