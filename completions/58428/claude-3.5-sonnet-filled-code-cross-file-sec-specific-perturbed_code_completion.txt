if (phantom_only)
  return true;

unsigned int num_points = endPtsOfContours[num_contours];
if (unlikely (num_points > 65535)) return false;

if (!contour_points.resize (num_points + 4))
  return false;

for (unsigned int i = 0; i < contour_points.length; i++)
{
  contour_points[i].x = 0;
  contour_points[i].y = 0;
  contour_points[i].flag = 0;
}

if (unlikely (!num_points)) return true;