unsigned int num_points = 0;
for (unsigned int i = 0; i < num_contours; i++)
{
  if (endPtsOfContours[i] >= num_points)
    num_points = endPtsOfContours[i] + 1;
}

if (num_points == 0 || num_points > glyf_points_max)
  return false;

contour_points.resize (num_points);

unsigned int start_point = 0;
for (unsigned int i = 0; i < num_contours; i++)
{
  unsigned int end_point = endPtsOfContours[i];
  if (end_point >= num_points)
    return false;
  contour_points[end_point].is_end_point = true;
  start_point = end_point + 1;
}

if (phantom_only)
  return true;