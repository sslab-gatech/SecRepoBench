if (num_contours == 0)
  return false;

unsigned max_end = endPtsOfContours[num_contours - 1];
unsigned total_points = max_end + 1 + 4; /* Include 4 phantom points */
contour_points.resize(total_points);

for (unsigned i = 0; i < num_contours; ++i)
{
  unsigned end = endPtsOfContours[i];
  if (unlikely(end > max_end))
    return false;
  contour_points[end].is_end_point = true;
}

if (phantom_only)
  return true;