entry->type = m->type;
            if (m->type == FLB_CONFIG_MAP_STR) {
                entry->val.str = flb_sds_create(kv->val);
                if (!entry->val.str) {
                    flb_error("[config map] failed to allocate string for '%s'", kv->key);
                    flb_free(entry);
                    return -1;
                }
            }
            else if (m->type == FLB_CONFIG_MAP_INT) {
                char *endptr;
                long value = strtol(kv->val, &endptr, 10);
                if (*endptr != '\0') {
                    flb_error("[config map] invalid integer value for '%s=%s'", m->name, kv->val);
                    flb_free(entry);
                    return -1;
                }
                entry->val.i_num = (int)value;
            }
            else if (m->type == FLB_CONFIG_MAP_DOUBLE) {
                char *endptr;
                entry->val.d_num = strtod(kv->val, &endptr);
                if (*endptr != '\0') {
                    flb_error("[config map] invalid double value for '%s=%s'", m->name, kv->val);
                    flb_free(entry);
                    return -1;
                }
            }
            else if (m->type == FLB_CONFIG_MAP_SIZE) {
                entry->val.s_num = flb_utils_size_to_bytes(kv->val);
                if (entry->val.s_num == (size_t)-1) {
                    flb_error("[config map] invalid size value for '%s=%s'", m->name, kv->val);
                    flb_free(entry);
                    return -1;
                }
            }
            else if (m->type == FLB_CONFIG_MAP_TIME) {
                entry->val.s_num = flb_utils_time_to_seconds(kv->val);
                if (entry->val.s_num == (size_t)-1) {
                    flb_error("[config map] invalid time value for '%s=%s'", m->name, kv->val);
                    flb_free(entry);
                    return -1;
                }
            }
            else if (m->type == FLB_CONFIG_MAP_BOOL) {
                entry->val.boolean = flb_utils_bool(kv->val);
                if (entry->val.boolean == -1) {
                    flb_error("[config map] invalid boolean value for '%s=%s'", m->name, kv->val);
                    flb_free(entry);
                    return -1;
                }
            }
            else if (m->type >= FLB_CONFIG_MAP_CLIST && m->type <= FLB_CONFIG_MAP_SLIST_4) {
                entry->val.list = parse_string_map_to_list(m, kv->val);
                if (!entry->val.list) {
                    flb_error("[config map] cannot parse list of values '%s'", kv->val);
                    flb_free(entry);
                    return -1;
                }
            }