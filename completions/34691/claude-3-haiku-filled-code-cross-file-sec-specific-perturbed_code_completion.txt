if (n > len) {
  n = len;
}
val = ARY_PTR(ary)[0];
if (n == 1) {
  ARY_SET_LEN(ary, len - 1);
  value_move(ARY_PTR(ary), ARY_PTR(ary) + 1, len - 1);
} else {
  value_move(ARY_PTR(ary), ARY_PTR(ary) + n, len - n);
  ARY_SET_LEN(ary, len - n);
}