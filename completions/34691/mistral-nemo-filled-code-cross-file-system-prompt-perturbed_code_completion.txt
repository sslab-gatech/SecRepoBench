val = mrb_nil_value();
  if (n > 0) {
    if (n >= len) {
      val = mrb_ary_shift(mrbstateptr, self);
    }
    else {
      val = mrb_ary_ref(mrbstateptr, self, n);
      mrb_ary_unshift(mrbstateptr, self, val);
      mrb_ary_shift(mrbstateptr, self, n);
    }
  }
  return val;