if (n < 0) {
    n = len + n; // Convert negative index to positive
  }
  if (n > len) {
    n = len; // Adjust n to not exceed the length of the array
  }
  
  val = ary_subseq(mrb, ary, 0, n); // Get the first n elements
  ARY_SET_LEN(ary, len - n); // Update the length of the array

  // Shift remaining elements
  if (len > n) {
    mrb_value *ptr = ARY_PTR(ary);
    mrb_int size = len - n;

    while (size--) {
      *ptr = *(ptr + n);
      ++ptr;
    }
  }