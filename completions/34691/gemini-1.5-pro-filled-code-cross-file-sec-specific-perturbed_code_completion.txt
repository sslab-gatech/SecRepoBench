L_SHIFT:
  if (n < 0) {
    mrb_raisef(mrb, E_ARGUMENT_ERROR, "negative array size (or size too big)");
  }
  if (n > len) {
    n = len;
  }

  val = ary_subseq(mrb, ary, 0, n);

  if (len == n) {
    ARY_SET_LEN(ary, 0);
  }
  else {
    MEMMOVE(ARY_PTR(ary), ARY_PTR(ary) + n, mrb_value, len - n);
    ARY_SET_LEN(ary, len - n);
  }