if (n < 0) {
    n = len + n; // Convert negative index to positive
  }
  if (n < 0 || n > len) {
    return mrb_nil_value(); // Out of bounds check
  }
  
  val = ARY_PTR(ary)[0]; // Get the first element
  if (n > 0) {
    mrb_value *ptr = ARY_PTR(ary);
    mrb_int size = len - n;

    while (size--) {
      *ptr = *(ptr + n);
      ++ptr;
    }
    ARY_SET_LEN(ary, len - n);
  } else {
    ARY_SET_LEN(ary, len - 1);
    for (mrb_int i = 0; i < len - 1; i++) {
      ARY_PTR(ary)[i] = ARY_PTR(ary)[i + 1];
    }
  }