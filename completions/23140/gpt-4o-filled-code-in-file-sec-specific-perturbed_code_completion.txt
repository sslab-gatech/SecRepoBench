attr->name = persistent ? zend_string_dup(attribute, persistent) : zend_string_copy(attribute);
attr->lcname = zend_string_tolower(attr->name);
attr->offset = offset;
attr->argc = argc;
attr->argv = (argc > 0) ? pemalloc(sizeof(zval) * argc, persistent) : NULL;

zend_hash_next_index_insert_ptr(*attributes, attr);

return attr;