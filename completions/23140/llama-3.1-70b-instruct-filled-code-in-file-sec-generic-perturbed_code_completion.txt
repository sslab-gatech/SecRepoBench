attr->name = persistent? zend_string_dup(attribute) : zend_string_copy(attribute);
attr->lcname = zend_string_tolower_ex(attribute, 1);
attr->offset = offset;
attr->argc = argc;

for (uint32_t i = 0; i < argc; i++) {
    ZVAL_COPY(&attr->argv[i], &attribute->value);
}

zend_hash_add_ptr(*attributes, attr->lcname, attr);

return attr;