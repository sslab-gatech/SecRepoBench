// Set the attribute name by either copying or duplicating the given name based on persistence.
// Convert the attribute name to lowercase and store it.
// Assign the offset and argument count to the attribute structure.
// Insert the new attribute into the attributes hash table and return a pointer to it.
attr->name = zend_string_dup(attribute, persistent);
attr->lcname = zend_string_tolower(attribute);
attr->offset = offset;
attr->argc = argc;

zend_hash_add_ptr(*attributes, attr->lcname, attr);
return attr;