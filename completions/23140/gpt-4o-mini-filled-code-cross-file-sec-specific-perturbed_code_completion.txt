if (attr == NULL) {
		return NULL; // Handle memory allocation failure
	}

	attr->lcname = zend_string_tolower(attribute);
	attr->offset = offset;
	attr->argc = argc;

	if (zend_hash_index_add_ptr(*attributes, offset, attr) == NULL) {
		zend_string_release(attr->lcname); // Release the string if insertion fails
		pemalloc_free(attr); // Free the allocated attribute if insertion fails
		return NULL; // Handle insertion failure
	}

	return attr;