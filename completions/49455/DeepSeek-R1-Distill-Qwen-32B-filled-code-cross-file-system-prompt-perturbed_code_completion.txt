if (dimensions == NULL) return 0;

cmsUInt32Number product = 1;

for (cmsUInt32Number i = 0; i < b; i++) {

    if (dimensions[i] == 0) {

        return 0;

    }

    if (product > (CMS_MAX_LUT_SIZE / dimensions[i])) {

        return 0;

    }

    product *= dimensions[i];

}

return product;