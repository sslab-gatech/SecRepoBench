if (dimensions == NULL)
    return 0;  // Error: NULL array

cmsUInt32Number total = 1;
cmsUInt32Number i;

for (i = 0; i < b; i++) {
    // Handle zero dimensions
    if (dimensions[i] == 0)
        return 0;
    
    // Check for potential overflow
    if (total > ((cmsUInt32Number)(-1)) / dimensions[i])
        return 0;  // Would overflow
    
    total *= dimensions[i];
}

return total;