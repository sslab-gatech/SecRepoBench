{
    cmsUInt32Number i;
    cmsUInt32Number result = 1;

    if (dimensions == NULL) {
        return 0;
    }

    for (i = 0; i < b; i++) {
        if (dimensions[i] == 0) return 0;

        if ((cmsUInt64Number)result * (cmsUInt64Number)dimensions[i] > (cmsUInt64Number)0xFFFFFFFF) {
            return 0;  // Overflow
        }

        result *= dimensions[i];
    }

    return result;
}