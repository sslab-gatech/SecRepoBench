// Initialize a buffer to store formatted property values and a pointer for the value.
char buffer[MagickPathExtent];
char *value = (char *) NULL;

// Check if the pointer `p` is within the bounds of the EXIF data.
if ((p < exif_data) || (p > (exif_data+length-number_bytes)))
  break;

// If the format is not valid, break the loop.
if (format >= (sizeof(tag_bytes)/sizeof(*tag_bytes)))
  break;
if (format == 0)
  break;  /* corrupt EXIF */

// Reset the buffer and initialize the value pointer to NULL.
(void) memset(buffer,0,sizeof(buffer));
value = (char *) NULL;