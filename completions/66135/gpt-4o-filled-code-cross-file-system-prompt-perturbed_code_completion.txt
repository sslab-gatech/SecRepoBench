char buffer[MagickPathExtent];
char *value = NULL;

if ((p < exif_data) || (p > (exif_data + length - number_bytes)))
  break;

switch (format) {
  case EXIF_FMT_STRING:
  case EXIF_FMT_UNDEFINED:
    value = (char *) AcquireQuantumMemory((size_t) number_bytes + 1UL, sizeof(*value));
    if (value != (char *) NULL) {
      for (i = 0; i < (ssize_t) number_bytes; i++) {
        value[i] = '.';
        if ((isprint((int) p[i]) != 0) || (p[i] == '\0'))
          value[i] = (char) p[i];
      }
      value[i] = '\0';
    }
    break;
  default:
    break;
}