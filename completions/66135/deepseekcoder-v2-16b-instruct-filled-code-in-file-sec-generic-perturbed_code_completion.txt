buffer to hold the value.
          char
            buffer[MagickPathExtent];

          // Format the value according to the format.
          switch (format)
          {
            case EXIF_FMT_BYTE:
            case EXIF_FMT_SBYTE:
              if (number_bytes == 1)
                (void) FormatLocaleString(buffer,MagickPathExtent,"%d",
                  (int) *p);
              break;
            case EXIF_FMT_STRING:
              if (number_bytes > 0)
                (void) CopyMagickString(buffer,p,number_bytes);
              break;
            case EXIF_FMT_USHORT:
            case EXIF_FMT_SSHORT:
              if (number_bytes == 2)
                (void) FormatLocaleString(buffer,MagickPathExtent,"%d",
                  (int) ReadPropertyUnsignedShort(endian,p));
              break;
            case EXIF_FMT_ULONG:
            case EXIF_FMT_SLONG:
              if (number_bytes == 4)
                (void) FormatLocaleString(buffer,MagickPathExtent,"%ld",
                  ReadPropertySignedLong(endian,p));
              break;
            case EXIF_FMT_URATIONAL:
            case EXIF_FMT_SRATIONAL:
              if (number_bytes == 8)
                {
                  signed int
                    numerator,
                    denominator;

                  numerator=(ssize_t) ReadPropertySignedLong(endian,p);
                  denominator=(ssize_t) ReadPropertySignedLong(endian,p+4);
                  (void) FormatLocaleString(buffer,MagickPathExtent,"%ld/%ld",
                    numerator,denominator);
                }
              break;
            case EXIF_FMT_SINGLE:
              if (number_bytes == 4)
                (void) FormatLocaleString(buffer,MagickPathExtent,"%g",
                  ReadPropertySignedFloat(endian,p));
              break;
            case EXIF_FMT_DOUBLE:
              if (number_bytes == 8)
                (void) FormatLocaleString(buffer,MagickPathExtent,"%lg",
                  ReadPropertySignedDouble(endian,p));
              break;
            default:
              break;
          }
          if (all == 0)
            {
              (void) SetImageProperty((Image *) image,EXIFTag[i].description,
                buffer,exception);
            }
          else
            {
              if (all == 1)
                (void) SetImageProperty((Image *) image,buffer,
                  EXIFTag[i].description,exception);
              else
                (void) SetImageProperty((Image *) image,EXIFTag[i].description,
                  buffer,exception);
            }
        }
    }
    if (level < MaxDirectoryStack-1)
      {
        directory_stack[level+1].directory=directory;
        directory_stack[level+1].entry=entry;
        directory_stack[level+1].offset=offset;
        level++;
        if (length != 0)
          {
            offset=(ssize_t) ReadPropertySignedLong(endian,directory+2);
            if ((offset < 0) || (size_t) offset >= length)
              offset=0;
            directory=exif_data+offset;
          }
      }
  } while ((length != 0) && (level != 0));
  exif_resources=DestroySplayTree(exif_resources);
}

static void GetProfileProperty(const Image *image,const char *key,
  ExceptionInfo *exception)
{
  const StringInfo
    *profile;

  char
    *attribute;

  size_t
    length;

  profile=GetImageProfile(image,key);
  if (profile == (const StringInfo *) NULL)
    return;
  length=GetStringInfoLength(profile);
  if (length == 0)
    return;
  attribute=(char *) AcquireQuantumMemory(length+1,sizeof(*attribute));
  if (attribute == (char *) NULL)
    return;
  (void) CopyMagickString(attribute,GetStringInfoDatum(profile),length+1);
  (void) SetImageProperty((Image *) image,key,(const char *) attribute,
    exception);
  attribute=DestroyString(attribute);
}

static void GetXMPProperty(const Image *image,const char *key,
  ExceptionInfo *exception)
{
  char
    *attribute;

  const StringInfo
    *profile;

  profile=GetImageProfile(image,"xmp");
  if (profile == (const StringInfo *) NULL)
    return;
  attribute=(char *) AcquireQuantumMemory(GetStringInfoLength(profile)+1,
    sizeof(*attribute));
  if (attribute == (char *) NULL)
    return;
  (void) CopyMagickString(attribute,GetStringInfoDatum(profile),
    GetStringInfoLength(profile)+1);
  (void) SetImageProperty((Image *) image,key,(const char *) attribute,
    exception);
  attribute=DestroyString(attribute);
}

static void GetImageProperty(const Image *image,const char *key,
  ExceptionInfo *exception)
{
  char
    *attribute;

  size_t
    length;

  if (LocaleCompare(key,"exif:") == 0)
    {
      GetEXIFProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"iptc:") == 0)
    {
      GetIPTCProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"xmp:") == 0)
    {
      GetXMPProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"8bim:") == 0)
    {
      Get8BIMProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"svg:") == 0)
    {
      GetSVGProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"ps:") == 0)
    {
      GetPSProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"pdf:") == 0)
    {
      GetPDFProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"font:") == 0)
    {
      GetFontProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"xc:") == 0)
    {
      GetXCProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"jp2:") == 0)
    {
      GetJP2Property(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"openexr:") == 0)
    {
      GetOpenEXRProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"dpx:") == 0)
    {
      GetDPXProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"tiff:") == 0)
    {
      GetTIFFProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"pnm:") == 0)
    {
      GetPNMProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"jpeg:") == 0)
    {
      GetJPEGProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"png:") == 0)
    {
      GetPNGProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"gif:") == 0)
    {
      GetGIFProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"bmp:") == 0)
    {
      GetBMPProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"ico:") == 0)
    {
      GetICOProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"wbmp:") == 0)
    {
      GetWBMPProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"webp:") == 0)
    {
      GetWEBPProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"matte:") == 0)
    {
      GetMatteProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"comment:") == 0)
    {
      GetCommentProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"caption:") == 0)
    {
      GetCaptionProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"title:") == 0)
    {
      GetTitleProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"author:") == 0)
    {
      GetAuthorProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"copyright:") == 0)
    {
      GetCopyrightProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"software:") == 0)
    {
      GetSoftwareProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"datetime:") == 0)
    {
      GetDateTimeProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"description:") == 0)
    {
      GetDescriptionProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"format:") == 0)
    {
      GetFormatProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"source:") == 0)
    {
      GetSourceProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"language:") == 0)
    {
      GetLanguageProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"keywords:") == 0)
    {
      GetKeywordsProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"subject:") == 0)
    {
      GetSubjectProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"organization:") == 0)
    {
      GetOrganizationProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"profile:") == 0)
    {
      GetProfileProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"renderer:") == 0)
    {
      GetRendererProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"software:") == 0)
    {
      GetSoftwareProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"artist:") == 0)
    {
      GetArtistProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"credit:") == 0)
    {
      GetCreditProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"caption:") == 0)
    {
      GetCaptionProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"comment:") == 0)
    {
      GetCommentProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"title:") == 0)
    {
      GetTitleProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"software:") == 0)
    {
      GetSoftwareProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"datetime:") == 0)
    {
      GetDateTimeProperty(image,key,exception);
      return;
    }
  if (LocaleCompare(key,"description:") == 0)
    {
      GetDescriptionProperty(image,key,exception);
      return;
    }