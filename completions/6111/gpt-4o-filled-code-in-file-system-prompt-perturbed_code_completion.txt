/*
    Initialize hex values.
  */
  for (i=0; i < 256; i++)
    hex_digits[i]=(-1);
  for (i=0; i < 16; i++)
  {
    hex_digits[(int) HexDigits[i]]=i;
    hex_digits[(int) tolower((int) HexDigits[i])]=i;
  }
  /*
    Open image file.
  */
  image=AcquireImage(image_info,exception);
  status=OpenBlob(image_info,image,ReadBinaryBlobMode,exception);
  if (status == MagickFalse)
    {
      image=DestroyImageList(image);
      return((Image *) NULL);
    }
  (void) CopyMagickString(input_filename,image->filename,MagickPathExtent);
  filedescriptor=AcquireUniqueFileResource(postscript_filename);
  if (filedescriptor == -1)
    {
      ThrowFileException(exception,FileOpenError,"UnableToCreateTemporaryFile",
        postscript_filename);
      image=DestroyImageList(image);
      return((Image *) NULL);
    }
  (void) close(filedescriptor);
  /*
    Create Ghostscript control file.
  */
  read_info=CloneImageInfo(image_info);
  SetImageInfoBlob(read_info,(void *) NULL,0);
  (void) FormatLocaleString(command,MagickPathExtent,"-q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=0 -sDEVICE=pnmraw -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -r%gx%g -g%dx%d -sOutputFile=%.1024s -f%.1024s -c showpage -f%.1024s",
    (double) resolution.x,(double) resolution.y,(int) geometry.width,(int)
    geometry.height,postscript_filename,input_filename,input_filename);
  status=InvokePostscriptDelegate(MagickFalse,command,message,exception);
  if (status == MagickFalse)
    {
      (void) RelinquishUniqueFileResource(postscript_filename);
      image=DestroyImageList(image);
      return((Image *) NULL);
    }
  /*
    Read output from Ghostscript.
  */
  (void) CopyMagickString(read_info->filename,postscript_filename,
    MagickPathExtent);
  postscript_image=ReadPNMImage(read_info,exception);
  (void) RelinquishUniqueFileResource(postscript_filename);
  read_info=DestroyImageInfo(read_info);
  if (postscript_image == (Image *) NULL)
    {
      image=DestroyImageList(image);
      return((Image *) NULL);
    }