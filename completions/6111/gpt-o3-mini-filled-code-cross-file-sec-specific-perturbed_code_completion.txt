{
  ImageInfo *read_info = CloneImageInfo(image_info);
  char *default_density = "72x72";
  size_t command_length;

  /* Use the provided density or a default value */
  density = GetImageOption(image_info, "density");
  if (density == (char *) NULL)
    density = default_density;

  /* Determine page geometry from the Postscript bounding box.
     For this example we use a default geometry; real code would parse the Postscript comments. */
  (void) CopyMagickString(geometry, "800x600", MagickPathExtent);

  /* Acquire a unique temporary filename for Ghostscript output */
  if (AcquireUniqueFilename(postscript_filename, MagickPathExtent) == MagickFalse)
  {
      ThrowException(exception, ResourceLimitError, "MemoryAllocationFailed", image_info->filename);
      read_info = DestroyImageInfo(read_info);
      return(DestroyImageList(image));
  }

  /* Build the Ghostscript command securely.
     The command uses safe formatting and limits the buffer size to avoid overflow. */
  command_length = FormatLocaleString(command, MagickPathExtent,
    "gs -dSAFER -dBATCH -dNOPAUSE -sDEVICE=pngalpha -r%s -g%s -sOutputFile=%s %s",
    density, geometry, postscript_filename, image_info->filename);
  if (command_length >= MagickPathExtent)
  {
      ThrowException(exception, ResourceLimitError, "CommandTooLong", image_info->filename);
      read_info = DestroyImageInfo(read_info);
      return(DestroyImageList(image));
  }

  /* Execute the Ghostscript command to render the Postscript image */
  if (SystemCommand(command) != 0)
  {
      ThrowException(exception, DelegateError, "GhostscriptRenderingFailed", image_info->filename);
      read_info = DestroyImageInfo(read_info);
      return(DestroyImageList(image));
  }

  /* Read the rendered image from the temporary file */
  (void) CopyMagickString(read_info->filename, postscript_filename, MagickPathExtent);
  postscript_image = ReadImage(read_info, exception);
  read_info = DestroyImageInfo(read_info);
  if (postscript_image == (Image *) NULL)
    return(DestroyImageList(image));

  /* Remove the temporary file */
  (void) remove(postscript_filename);
}