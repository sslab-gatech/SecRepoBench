// Initialize a linked list to store profiles
  LinkedListInfo
    *profiles;

  profiles=NewLinkedList(0);

  // Read profiles from the image and add them to the list
  for (next=GetFirstImageInList(image); next != (Image *) NULL; )
  {
    if (next->profiles != (void *) NULL)
    {
      // Clone the profile and add to the list
      void *profile=CloneImageProfiles(next,image);
      if (profile != (void *) NULL)
        AppendValueToLinkedList(profiles,profile);
    }
    next=GetNextImageInList(next);
  }

  // Process each profile in the list
  ResetLinkedListIterator(profiles);
  void *profile;
  while ((profile=GetNextValueInLinkedList(profiles)) != (void *) NULL)
  {
    // Process the profile (e.g., apply it to the image)
    // ...

    // Free the profile after processing
    profile=RelinquishMagickMemory(profile);
  }

  // Clean up the linked list
  profiles=DestroyLinkedList(profiles,RelinquishMagickMemory);