if (k->via.str.size != slen || strncmp(k->via.str.ptr, time_key, k->via.str.size) != 0) {
    k = NULL;
    v = NULL;
    continue;
}

if (!k || !v) {
    msgpack_unpacked_destroy(&unpacked_data);
    return *out_size;
}