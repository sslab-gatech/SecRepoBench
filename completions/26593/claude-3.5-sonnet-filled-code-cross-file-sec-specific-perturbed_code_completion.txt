int val = 0;
int len = strlen(timestr);
char unit;

if (len > 0) {
    unit = timestr[len - 1];
    switch (unit) {
        case 'D':
        case 'd':
            val = atoi(timestr) * 86400;
            break;
        case 'H':
        case 'h':
            val = atoi(timestr) * 3600;
            break;
        case 'M':
        case 'm':
            val = atoi(timestr) * 60;
            break;
        default:
            val = atoi(timestr);
    }
} else {
    val = 0;
}