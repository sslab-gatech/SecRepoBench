int val = 0;
    int multiplier = 1;
    int len = strlen(timestr);

    if (len == 0) {
        return -1;
    }

    char unit = timestr[len - 1];
    if (unit == 'd' || unit == 'D') {
        multiplier = 86400; // 24 * 60 * 60
    }
    else if (unit == 'h' || unit == 'H') {
        multiplier = 3600; // 60 * 60
    }
    else if (unit == 'm' || unit == 'M') {
        multiplier = 60;
    }
    else if (isdigit(unit)) {
        unit = '\0'; // No unit, just a number
    }
    else {
        return -1; // Invalid unit
    }

    if (unit != '\0') {
        char *num_str = strndup(timestr, len - 1);
        if (!num_str) {
            return -1;
        }
        val = atoi(num_str);
        free(num_str);
    }
    else {
        val = atoi(timestr);
    }

    return val * multiplier;