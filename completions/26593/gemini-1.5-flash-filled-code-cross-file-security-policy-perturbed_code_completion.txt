long long val = 0;
    char unit = 0;
    long long num = 0;
    size_t len = strlen(timestr);
    if (len == 0) return 0;

    if (isdigit(timestr[len - 1])) {
        num = atoll(timestr);
    } else {
        unit = timestr[len - 1];
        timestr[len - 1] = '\0';
        num = atoll(timestr);
    }

    switch (unit) {
    case 'D':
    case 'd':
        val = num * 24 * 60 * 60;
        break;
    case 'H':
    case 'h':
        val = num * 60 * 60;
        break;
    case 'M':
    case 'm':
        val = num * 60;
        break;
    default:
        val = num;
        break;
    }