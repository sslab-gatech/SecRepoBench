int val;
    char *end;

    val = strtol(timestr, &end, 10);
    if (end == timestr || *end != '\0') {
        return -1;
    }

    switch (*end) {
        case 'D': case 'd':
            val *= 86400;
            break;
        case 'H': case 'h':
            val *= 3600;
            break;
        case 'M': case 'm':
            val *= 60;
            break;
        default:
            return val;
    }

    return val;