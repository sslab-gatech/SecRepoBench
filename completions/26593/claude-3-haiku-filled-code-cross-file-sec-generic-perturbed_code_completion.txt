int val = 0;
char unit = '\0';
int len = strlen(timestr);

if (len > 0) {
    char last_char = timestr[len - 1];
    if (last_char == 'D' || last_char == 'd') {
        unit = 'D';
        val = atoi(timestr);
        val *= 86400; // 1 day = 86400 seconds
    }
    else if (last_char == 'H' || last_char == 'h') {
        unit = 'H';
        val = atoi(timestr);
        val *= 3600; // 1 hour = 3600 seconds
    }
    else if (last_char == 'M' || last_char == 'm') {
        unit = 'M';
        val = atoi(timestr);
        val *= 60; // 1 minute = 60 seconds
    }
    else {
        val = atoi(timestr);
    }
}

return val;