int len = strlen(timestr);
    int val = 0;
    char time_unit;

    if (len == 0) {
        return -1;
    }

    time_unit = timestr[len - 1];
    if (!isdigit(time_unit)) {
        char *num_str = mk_string_copy_substr(timestr, 0, len -1);
        if (!num_str) {
            return -1;
        }

        val = atoi(num_str);
        flb_free(num_str);

        if (time_unit == 'D' || time_unit == 'd') {
            val *= 86400;
        } else if (time_unit == 'H' || time_unit == 'h') {
            val *= 3600;
        } else if (time_unit == 'M' || time_unit == 'm') {
            val *= 60;
        } else {
            return -1;
        }
    } else {
        val = atoi(timestr);
    }