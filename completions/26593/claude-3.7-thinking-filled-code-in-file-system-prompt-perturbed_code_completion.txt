int len;
    int val;
    char c;
    
    if (!timestr) {
        return -1;
    }
    
    len = strlen(timestr);
    if (len == 0) {
        return -1;
    }
    
    /* Get the numeric part */
    val = atoi(timestr);
    
    /* Check if there's a unit specified */
    c = timestr[len - 1];
    if (isdigit(c)) {
        /* No unit specified, assume seconds */
        return val;
    }
    
    /* Get the unit */
    c = toupper(c);
    
    /* Convert to seconds based on the unit */
    if (c == 'D') {
        val *= 86400; /* 60 * 60 * 24 */
    }
    else if (c == 'H') {
        val *= 3600;  /* 60 * 60 */
    }
    else if (c == 'M') {
        val *= 60;
    }
    else {
        /* Unknown unit */
        return -1;
    }