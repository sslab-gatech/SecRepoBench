int val = 0;
    long long num = 0;
    char *p;
    char *end;
    size_t len;

    if (!timestr) {
        return -1;
    }

    len = strlen(timestr);
    if (len == 0) {
        return -1;
    }

    errno = 0;
    num = strtoll(timestr, &end, 10);
    if ((errno == ERANGE && (num == LLONG_MAX || num == LLONG_MIN))
        || (errno != 0 && num == 0)) {
        flb_errno();
        return -1;
    }

    if (end == timestr) {
        return -1;
    }

    p = end;

    if (*p == 's' || *p == 'S') {
        val = (int) num;
    }
    else if (*p == 'm' || *p == 'M') {
        val = (int) num * 60;
    }
    else if (*p == 'h' || *p == 'H') {
        val = (int) num * 60 * 60;
    }
    else if (*p == 'd' || *p == 'D') {
        val = (int) num * 60 * 60 * 24;
    }
    else if (*p == '\0') {
        val = (int) num;
    }
    else {
        return -1;
    }