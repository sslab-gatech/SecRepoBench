int val = 0;
    char unit = '\0';
    int len = strlen(timestr);

    if (len > 0) {
        char last = timestr[len - 1];
        if (last == 'D' || last == 'd') {
            unit = 'D';
            val = atoi(timestr);
            val *= 86400; // 1 day = 86400 seconds
        }
        else if (last == 'H' || last == 'h') {
            unit = 'H';
            val = atoi(timestr);
            val *= 3600; // 1 hour = 3600 seconds
        }
        else if (last == 'M' || last == 'm') {
            unit = 'M';
            val = atoi(timestr);
            val *= 60; // 1 minute = 60 seconds
        }
        else {
            val = atoi(timestr);
        }
    }