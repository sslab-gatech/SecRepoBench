int val = 0;
    long multiplier = 1;
    char *p;
    size_t len;

    len = strlen(timestr);
    if (len == 0) {
        return -1;
    }

    p = (char *) timestr + len - 1;
    if (*p == 'd' || *p == 'D') {
        multiplier = 86400;
        *p = '\0';
    }
    else if (*p == 'h' || *p == 'H') {
        multiplier = 3600;
        *p = '\0';
    }
    else if (*p == 'm' || *p == 'M') {
        multiplier = 60;
        *p = '\0';
    }

    val = atoi(timestr);
    val *= multiplier;