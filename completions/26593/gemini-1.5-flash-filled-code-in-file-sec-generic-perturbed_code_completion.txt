int len;
    int64_t val = 0;
    char unit;
    char *p;

    len = strlen(timestr);
    if (len == 0) {
        return -1;
    }

    p = timestr + len -1;
    if (isalpha(*p)) {
        unit = *p;
        *p = '\0';
    }
    else {
        unit = '\0';
    }

    val = atoll(timestr);
    if (val < 0) {
        return -1;
    }

    switch (unit) {
    case 'D':
    case 'd':
        val *= 86400;
        break;
    case 'H':
    case 'h':
        val *= 3600;
        break;
    case 'M':
    case 'm':
        val *= 60;
        break;
    }