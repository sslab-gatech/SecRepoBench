int val = 0;
    int len = strlen(timestr);

    if (len == 0) {
        return -1; // Invalid input
    }

    char unit = timestr[len - 1];
    char *endptr;
    long num;

    // Check if the last character is a unit specifier
    if (unit == 'D' || unit == 'd' || unit == 'H' || unit == 'h' || unit == 'M' || unit == 'm') {
        char num_str[len]; // Create a buffer to hold the numeric part
        strncpy(num_str, timestr, len - 1);
        num_str[len - 1] = '\0'; // Null-terminate the string

        num = strtol(num_str, &endptr, 10);
        if (*endptr != '\0' || num < 0) {
            return -1; // Invalid numeric value
        }

        switch (unit) {
        case 'D':
        case 'd':
            val = num * 86400; // Days to seconds
            break;
        case 'H':
        case 'h':
            val = num * 3600; // Hours to seconds
            break;
        case 'M':
        case 'm':
            val = num * 60; // Minutes to seconds
            break;
        default:
            return -1; // Invalid unit
        }
    }
    else {
        // No unit specifier, assume the entire string is a number
        num = strtol(timestr, &endptr, 10);
        if (*endptr != '\0' || num < 0) {
            return -1; // Invalid numeric value
        }
        val = num; // Value is already in seconds
    }