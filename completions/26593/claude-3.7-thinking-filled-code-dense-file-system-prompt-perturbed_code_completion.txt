int val;
char *endptr;

if (!timestr || !*timestr) {
    return -1;
}

// Parse the numeric part
errno = 0;
val = (int) strtol(timestr, &endptr, 10);
if (errno == ERANGE || (errno != 0 && val == 0) || endptr == timestr) {
    return -1; // Error in conversion
}

// Check if there's a unit suffix
if (*endptr != '\0') {
    switch (*endptr) {
        case 'D':
        case 'd':
            val *= 86400; // Seconds in a day
            break;
        case 'H':
        case 'h':
            val *= 3600; // Seconds in an hour
            break;
        case 'M':
        case 'm':
            val *= 60; // Seconds in a minute
            break;
        default:
            // Invalid unit
            return -1;
    }
    
    // Ensure nothing follows the unit
    if (*(endptr + 1) != '\0') {
        return -1;
    }
}