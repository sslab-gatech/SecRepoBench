char *endptr;
long long seconds_val;
int multiplier = 1;

/* Reset errno and attempt conversion */
errno = 0;
seconds_val = strtoll(timestr, &endptr, 10);
if (timestr == endptr || errno != 0) {
    /* Conversion error: no digits found or overflow occurred */
    return -1;
}

/* Check for an optional time unit character */
if (*endptr != '\0') {
    /* Skip any whitespace between the number and the unit */
    while (isspace((unsigned char)*endptr)) {
        endptr++;
    }
    if (*endptr != '\0') {
        /* Process the unit letter, expecting days, hours, or minutes */
        switch (tolower((unsigned char)*endptr)) {
            case 'd':
                multiplier = 86400; /* 24 * 60 * 60 */
                break;
            case 'h':
                multiplier = 3600;  /* 60 * 60 */
                break;
            case 'm':
                multiplier = 60;
                break;
            default:
                /* Unknown unit: consider this an error */
                return -1;
        }
        endptr++;
        /* Any remaining non-space characters are invalid */
        while (*endptr != '\0') {
            if (!isspace((unsigned char)*endptr)) {
                return -1;
            }
            endptr++;
        }
    }
}

seconds_val *= multiplier;

/* Check for potential overflow when converting to int */
if (seconds_val > INT_MAX || seconds_val < INT_MIN) {
    return -1;
}

int val = (int) seconds_val;