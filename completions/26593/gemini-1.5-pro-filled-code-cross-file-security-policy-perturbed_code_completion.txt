int val = 0;
    long multiplier = 1;
    size_t len;

    if (!timestr) {
        return 0;
    }

    len = strlen(timestr);
    if (len == 0) {
        return 0;
    }

    if (timestr[len - 1] >= '0' && timestr[len - 1] <= '9') {
        val = atoi(timestr);
        return val;
    }

    /* Check time unit */
    switch (timestr[len - 1]) {
    case 'd':
    case 'D':
        multiplier *= 86400;
        break;
    case 'h':
    case 'H':
        multiplier *= 3600;
        break;
    case 'm':
    case 'M':
        multiplier *= 60;
        break;
    default:
        return -1;
    }

    timestr[len - 1] = '\0';
    val = atoi(timestr);
    val *= multiplier;