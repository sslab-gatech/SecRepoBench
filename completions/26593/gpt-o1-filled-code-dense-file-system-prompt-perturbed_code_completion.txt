int val = 0;
    long tmp;
    char *end = NULL;

    errno = 0;
    tmp = strtol(timestr, &end, 10);
    if ((errno == ERANGE && (tmp == LONG_MAX || tmp == LONG_MIN)) ||
        (errno != 0 && tmp == 0)) {
        flb_errno();
        return -1;
    }
    if (end == timestr) {
        /* No valid number found */
        return -1;
    }

    val = (int) tmp;

    /* Check for an optional unit specifier */
    if (*end != '\0') {
        switch (tolower((unsigned char)*end)) {
        case 'd':
            val *= 86400;  /* days to seconds */
            break;
        case 'h':
            val *= 3600;   /* hours to seconds */
            break;
        case 'm':
            val *= 60;     /* minutes to seconds */
            break;
        default:
            /* unrecognized unit, ignore */
            break;
        }
    }