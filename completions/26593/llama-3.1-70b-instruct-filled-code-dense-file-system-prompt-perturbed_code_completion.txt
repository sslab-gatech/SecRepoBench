int val = 0;
char unit = '\0';
char *end;

// Extract the numeric value and unit from the input string
errno = 0;
val = strtol(timestr, &end, 10);
if ((errno == ERANGE && (val == LONG_MAX || val == LONG_MIN))
    || (errno!= 0 && val == 0)) {
    flb_errno();
    return -1;
}
if (end!= timestr && *end!= '\0') {
    unit = *end;
}

// Convert the value to seconds based on the unit
switch (unit) {
    case 'D':
    case 'd':
        val *= 24 * 60 * 60;
        break;
    case 'H':
    case 'h':
        val *= 60 * 60;
        break;
    case 'M':
    case'm':
        val *= 60;
        break;
    default:
        // No unit specified, assume seconds
        break;
}

return val;