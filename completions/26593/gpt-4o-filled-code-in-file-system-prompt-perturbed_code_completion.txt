int val = 0;
    int multiplier = 1;
    int len = strlen(timestr);

    if (len == 0) {
        return -1;
    }

    char unit = timestr[len - 1];
    if (unit == 'd' || unit == 'D') {
        multiplier = 86400; // 24 * 60 * 60
    }
    else if (unit == 'h' || unit == 'H') {
        multiplier = 3600; // 60 * 60
    }
    else if (unit == 'm' || unit == 'M') {
        multiplier = 60;
    }
    else if (isdigit(unit)) {
        multiplier = 1;
    }
    else {
        return -1;
    }

    if (multiplier > 1) {
        char *end;
        val = strtol(timestr, &end, 10);
        if (*end != unit) {
            return -1;
        }
    }
    else {
        val = atoi(timestr);
    }

    val *= multiplier;