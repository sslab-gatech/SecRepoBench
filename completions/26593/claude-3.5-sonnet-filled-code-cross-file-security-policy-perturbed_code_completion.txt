int val = 0;
size_t len = strlen(timestr);

if (len == 0) {
    return 0;
}

char unit = timestr[len - 1];
int multiplier = 1;

switch (unit) {
    case 'D':
    case 'd':
        multiplier = 86400;
        break;
    case 'H':
    case 'h':
        multiplier = 3600;
        break;
    case 'M':
    case 'm':
        multiplier = 60;
        break;
    default:
        multiplier = 1;
        break;
}

if (multiplier > 1) {
    val = atoi(timestr) * multiplier;
} else {
    val = atoi(timestr);
}