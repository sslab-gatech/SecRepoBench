int val = 0;
    int multiplier = 1;
    char unit = timestr[flb_sds_len(timestr) - 1];

    switch (unit) {
        case 'D':
        case 'd':
            multiplier = 24 * 60 * 60;
            break;
        case 'H':
        case 'h':
            multiplier = 60 * 60;
            break;
        case 'M':
        case 'm':
            multiplier = 60;
            break;
        default:
            flb_error("Invalid time unit '%c'. Supported units are 'D', 'H', 'M'.", unit);
            return -1;
    }

    if (flb_sds_len(timestr) > 1) {
        val = atoi(timestr);
        if (val < 0) {
            flb_error("Invalid time value '%s'.", timestr);
            return -1;
        }
    } else {
        flb_error("Invalid time string '%s'.", timestr);
        return -1;
    }

    val *= multiplier;

    return val;
}