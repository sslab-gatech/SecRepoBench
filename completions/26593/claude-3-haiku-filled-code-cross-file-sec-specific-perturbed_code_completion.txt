char *endptr;
int val;

if (timestr[strlen(timestr) - 1] == 'D' || timestr[strlen(timestr) - 1] == 'd') {
    val = (int) strtol(timestr, &endptr, 10) * 86400;
}
else if (timestr[strlen(timestr) - 1] == 'H' || timestr[strlen(timestr) - 1] == 'h') {
    val = (int) strtol(timestr, &endptr, 10) * 3600;
}
else if (timestr[strlen(timestr) - 1] == 'M' || timestr[strlen(timestr) - 1] == 'm') {
    val = (int) strtol(timestr, &endptr, 10) * 60;
}
else {
    val = (int) strtol(timestr, &endptr, 10);
}