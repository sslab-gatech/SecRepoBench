int val;
double fval;
char *endptr;

if (!timestr) {
    return 0;
}

/* Convert string to double to handle fractions */
fval = strtod(timestr, &endptr);

/* Check if the string was converted successfully */
if (endptr == timestr) {
    return 0;  /* No conversion was performed */
}

/* Check if there's a unit suffix */
if (*endptr != '\0') {
    switch (*endptr) {
        case 'd':
        case 'D':
            fval *= 86400;  /* 24 hours * 60 minutes * 60 seconds */
            break;
        case 'h':
        case 'H':
            fval *= 3600;   /* 60 minutes * 60 seconds */
            break;
        case 'm':
        case 'M':
            fval *= 60;     /* 60 seconds */
            break;
        /* Default: If the suffix is not recognized, assume the value is already in seconds */
    }
}

/* Convert to integer (truncating any fractional part) */
val = (int)fval;