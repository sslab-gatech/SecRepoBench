HEVCFrame *ref = find_ref_idx(s, pictureordercount);

if (!ref)
    return AVERROR_INVALIDDATA;

// Check for overflow
if (list->nb_refs >= FF_ARRAY_ELEMS(s->DPB))
    return AVERROR_INVALIDDATA;

// Check for duplicates
for (int i = 0; i < list->nb_refs; i++) {
    if (list->list[i] == pictureordercount)
        return AVERROR_INVALIDDATA;
}