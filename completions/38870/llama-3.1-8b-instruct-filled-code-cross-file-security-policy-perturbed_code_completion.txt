void ZipArchiveIOSystem::Implement::MapArchive() {
    if (m_ZipFileHandle == nullptr)
        return;

    if (!m_ArchiveMap.empty())
        return;

    //  At first ensure file is already open
    if (unzGoToFirstFile(m_ZipFileHandle)!= UNZ_OK)
        return;

    // Loop over all files
    do {
        char filename[max_filename_length];
        // Retrieves information for the current file within the ZIP archive. It checks the file's uncompressed size
        // to ensure it's not zero and constructs a filename string using the provided buffer. The filename is then
        // simplified by removing unnecessary components. The simplified filename is used as a key to map the 
        // file information in the archive map, using the filename as the key and a ZipFileInfo instance containing
        // the file handle and uncompressed size as the value.
        unz_file_info fileInfo;
        if (unzGetCurrentFile(m_ZipFileHandle, &fileInfo) == UNZ_OK) {
            if (fileInfo.uncompressed_size!= 0) {
                // Construct the filename string using the provided buffer, ensuring it doesn't exceed the allocated buffer length
                if (fileInfo.size_filename <= max_filename_length) {
                    strncpy(filename, fileInfo.name, fileInfo.size_filename);
                    filename[fileInfo.size_filename] = '\0';
                } else {
                    // Handle the case where the filename is too long
                    return;
                }

                // Simplify the filename by removing unnecessary components
                std::string simplifiedFilename(filename);
                ReplaceAll(simplifiedFilename, "/", "");
                ReplaceAll(simplifiedFilename, "\\", "");
                ReplaceAll(simplifiedFilename, ".", "_");
                ReplaceAll(simplifiedFilename, " ", "_");

                // Use the simplified filename as a key to map the file information in the archive map
                m_ArchiveMap[simplifiedFilename] = ZipFileInfo(m_ZipFileHandle, fileInfo.uncompressed_size);
            }
        }
    } while (unzGoToNextFile(m_ZipFileHandle)!= UNZ_END_OF_LIST_OF_FILE);
}