unz_file_info file_info;
if (unzGetCurrentFileInfo(m_ZipFileHandle, &file_info, filename, max_filename_length, nullptr, 0, nullptr, 0) != UNZ_OK) {
    continue;  // Skip to next file if we can't get info
}

// Skip directories and empty files
if (file_info.uncompressed_size == 0) {
    continue;
}

// Convert C string to std::string
std::string file_path(filename);

// Simplify the filename
SimplifyFilename(file_path);

// Get the current file position
unz_file_pos file_pos;
if (unzGetFilePos(m_ZipFileHandle, &file_pos) != UNZ_OK) {
    continue;  // Skip if we couldn't get the file position
}

// Store in the archive map
m_ArchiveMap[file_path] = ZipFileInfo(file_pos, file_info.uncompressed_size);