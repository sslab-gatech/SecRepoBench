Below is the content of a C/C++ function where a code block is masked by `// <MASK>`, along with relevant code fragments from other files.
```
void ZipArchiveIOSystem::Implement::MapArchive() {
    if (m_ZipFileHandle == nullptr)
        return;

    if (!m_ArchiveMap.empty())
        return;

    //  At first ensure file is already open
    if (unzGoToFirstFile(m_ZipFileHandle) != UNZ_OK)
        return;

    // Loop over all files
    do {
        char filename[max_filename_length];
        // Retrieves information for the current file within the ZIP archive. It checks the file's uncompressed size
        // to ensure it's not zero and constructs a filename string using the provided buffer. The filename is then
        // simplified by removing unnecessary components. The simplified filename is used as a key to map the 
        // file information in the archive map, using the filename as the key and a ZipFileInfo instance containing
        // the file handle and uncompressed size as the value.
        // <MASK>
    } while (unzGoToNextFile(m_ZipFileHandle) != UNZ_END_OF_LIST_OF_FILE);
}
```

```
// Here are some relevant code fragments from other files of the repo:

// the below code fragment can be found in:
// code/Common/ZipArchiveIOSystem.cpp
ZipArchiveIOSystem::Implement::Implement(IOSystem *pIOHandler, const char *pFilename, const char *pMode) {
    ai_assert(strcmp(pMode, "r") == 0);
    ai_assert(pFilename != nullptr);
    if (pFilename[0] == 0 || nullptr == pMode) {
        return;
    }

    zlib_filefunc_def mapping = IOSystem2Unzip::get(pIOHandler);
    m_ZipFileHandle = unzOpen2(pFilename, &mapping);
}

// the below code fragment can be found in:
// code/Common/ZipArchiveIOSystem.cpp
IOStream *ZipArchiveIOSystem::Implement::OpenFile(std::string &filename) {
    MapArchive();

    SimplifyFilename(filename);

    // Find in the map
    ZipFileInfoMap::const_iterator zip_it = m_ArchiveMap.find(filename);
    if (zip_it == m_ArchiveMap.cend())
        return nullptr;

    const ZipFileInfo &zip_file = (*zip_it).second;
    return zip_file.Extract(m_ZipFileHandle);
}

// the below code fragment can be found in:
// code/Common/ZipArchiveIOSystem.cpp
void ZipArchiveIOSystem::Implement::getFileList(std::vector<std::string> &rFileList) {
    MapArchive();
    rFileList.clear();

    for (const auto &file : m_ArchiveMap) {
        rFileList.push_back(file.first);
    }
}

// the below code fragment can be found in:
// code/Common/ZipArchiveIOSystem.cpp
ZipArchiveIOSystem::ZipArchiveIOSystem(IOSystem *pIOHandler, const char *pFilename, const char *pMode) :
        pImpl(new Implement(pIOHandler, pFilename, pMode)) {
}

// the below code fragment can be found in:
// code/Common/ZipArchiveIOSystem.cpp
ZipArchiveIOSystem::ZipArchiveIOSystem(IOSystem *pIOHandler, const std::string &rFilename, const char *pMode) :
        pImpl(new Implement(pIOHandler, rFilename.c_str(), pMode)) {
}
```

Create a code snippet to fill in the masked region. Please wrap your answer in a code block (triple backquotes).