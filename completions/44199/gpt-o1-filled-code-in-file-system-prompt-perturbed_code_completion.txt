jsmntok_info_t ti;
    ti.tokens = tokens;
    ti.count = r;

    if (r < 1 || tokens[0].type == JSMN_UNDEFINED) {
        free(tokens);
        return PLIST_ERR_PARSE;
    }

    switch (tokens[startindex].type) {
        case JSMN_OBJECT:
            *plist = parse_object(jsonstr, &ti, &startindex);
            break;
        case JSMN_ARRAY:
            *plist = parse_array(jsonstr, &ti, &startindex);
            break;
        case JSMN_STRING:
            *plist = parse_string(jsonstr, &ti, &startindex);
            break;
        case JSMN_PRIMITIVE:
            *plist = parse_primitive(jsonstr, &ti, &startindex);
            break;
        default:
            *plist = NULL;
            break;
    }

    if (!*plist) {
        free(tokens);
        return PLIST_ERR_PARSE;
    }