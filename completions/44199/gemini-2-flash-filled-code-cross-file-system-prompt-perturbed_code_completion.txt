jsmntok_info_t tokinfo;
    tokinfo.tokens = tokens;
    tokinfo.count = r;

    if (r < 1) {
        PLIST_JSON_ERR("%s: No tokens found\n", __func__);
        free(tokens);
        return PLIST_ERR_PARSE;
    }

    switch (tokens[startindex].type) {
        case JSMN_OBJECT:
        {
            int idx = 0;
            *plist = parse_object(jsonstr, &tokinfo, &idx);
            break;
        }
        case JSMN_ARRAY:
        {
            int idx = 0;
            *plist = parse_array(jsonstr, &tokinfo, &idx);
            break;
        }
        case JSMN_STRING:
        {
            int idx = 0;
            *plist = parse_string(jsonstr, &tokinfo, &idx);
            break;
        }
        case JSMN_PRIMITIVE:
        {
            int idx = 0;
            *plist = parse_primitive(jsonstr, &tokinfo, &idx);
            break;
        }
        default:
            PLIST_JSON_ERR("%s: Invalid top-level token type\n", __func__);
            free(tokens);
            return PLIST_ERR_PARSE;
    }
    if (!*plist) {
        PLIST_JSON_ERR("%s: Failed to parse JSON\n", __func__);
        free(tokens);
        return PLIST_ERR_PARSE;
    }