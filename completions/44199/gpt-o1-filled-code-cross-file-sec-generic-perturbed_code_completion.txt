jsmntok_info_t ti;
    ti.tokens = tokens;
    ti.count = r;

    int idx = startindex;
    plist_t result = NULL;

    switch (tokens[idx].type) {
        case JSMN_OBJECT:
            result = parse_object(jsonstr, &ti, &idx);
            break;
        case JSMN_ARRAY:
            result = parse_array(jsonstr, &ti, &idx);
            break;
        case JSMN_STRING:
            result = parse_string(jsonstr, &ti, &idx);
            break;
        case JSMN_PRIMITIVE:
            result = parse_primitive(jsonstr, &ti, &idx);
            break;
        default:
            PLIST_JSON_ERR("%s: Unknown or unsupported top-level JSON token type\n", __func__);
            return PLIST_ERR_PARSE;
    }

    if (!result) {
        PLIST_JSON_ERR("%s: Failed to parse JSON at top-level\n", __func__);
        free(tokens);
        return PLIST_ERR_PARSE;
    }

    *plist = result;