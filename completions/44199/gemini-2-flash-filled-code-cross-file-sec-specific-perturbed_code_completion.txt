jsmntok_info_t tokinfo;
    tokinfo.tokens = tokens;
    tokinfo.count = r;

    if (r > 0) {
        switch (tokens[startindex].type) {
            case JSMN_OBJECT:
                *plist = parse_object(jsonstr, &tokinfo, &startindex);
                break;
            case JSMN_ARRAY:
                *plist = parse_array(jsonstr, &tokinfo, &startindex);
                break;
            case JSMN_STRING:
                *plist = parse_string(jsonstr, &tokinfo, &startindex);
                break;
            case JSMN_PRIMITIVE:
                *plist = parse_primitive(jsonstr, &tokinfo, &startindex);
                break;
            default:
                PLIST_JSON_ERR("%s: Invalid top level token type\n", __func__);
                free(tokens);
                return PLIST_ERR_PARSE;
        }
        if (*plist == NULL) {
            PLIST_JSON_ERR("%s: Failed to parse JSON\n", __func__);
            free(tokens);
            return PLIST_ERR_PARSE;
        }
    } else {
        PLIST_JSON_ERR("%s: No tokens found in JSON string\n", __func__);
        free(tokens);
        return PLIST_ERR_PARSE;
    }