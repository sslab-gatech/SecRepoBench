if (r < 0) {
    free(tokens);
    return PLIST_ERR_PARSE;
}

jsmntok_info_t ti;
ti.tokens = tokens;
ti.count = r;

*plist = parse_object(jsonstr, &ti, &startindex);
if (!*plist) {
    free(tokens);
    return PLIST_ERR_PARSE;
}