// Parse the JSON token at the current start index based on its type.
    // Depending on whether the token is a primitive, string, array, or object,
    // call the corresponding parse function to convert the JSON data into a plist structure.
    // Assign the parsed plist result to the output pointer `plist`.

    jsmntok_info_t ti;
    ti.tokens = tokens;
    ti.count = maxtoks;

    int startindex = 0;
    while (startindex < r) {
        jsmntok_t* token = &tokens[startindex];
        switch (token->type) {
            case JSMN_OBJECT:
                *plist = parse_object(jsonstr, &ti, &startindex);
                break;
            case JSMN_ARRAY:
                *plist = parse_array(jsonstr, &ti, &startindex);
                break;
            case JSMN_STRING:
                *plist = parse_string(jsonstr, &ti, &startindex);
                break;
            case JSMN_PRIMITIVE:
                *plist = parse_primitive(jsonstr, &ti, &startindex);
                break;
            default:
                PLIST_JSON_ERR("%s: unknown token type\n", __func__);
                free(tokens);
                return PLIST_ERR_PARSE;
        }
        if (*plist) {
            break;
        }
        startindex++;
    }

    if (!*plist) {
        PLIST_JSON_ERR("%s: no valid token found\n", __func__);
        free(tokens);
        return PLIST_ERR_PARSE;
    }