if (tokens[startindex].type == JSMN_OBJECT) {
        *plist = parse_object(jsonstr, tokens, &startindex);
    } else if (tokens[startindex].type == JSMN_ARRAY) {
        *plist = parse_array(jsonstr, tokens, &startindex);
    } else if (tokens[startindex].type == JSMN_STRING) {
        *plist = parse_string(jsonstr, tokens, &startindex);
    } else if (tokens[startindex].type == JSMN_PRIMITIVE) {
        *plist = parse_primitive(jsonstr, tokens, &startindex);
    } else {
        PLIST_JSON_ERR("%s: Unexpected token type\n", __func__);
        free(tokens);
        return PLIST_ERR_PARSE;
    }

    if (*plist == NULL) {
        PLIST_JSON_ERR("%s: Failed to parse JSON\n", __func__);
        free(tokens);
        return PLIST_ERR_PARSE;
    }