int startindex = 0;
while (startindex < r) {
    jsmntok_t *token = &tokens[startindex];
    switch (token->type) {
        case JSMN_OBJECT:
            *plist = parse_object(jsonstr, token, &startindex);
            break;
        case JSMN_ARRAY:
            *plist = parse_array(jsonstr, token, &startindex);
            break;
        case JSMN_STRING:
            *plist = parse_string(jsonstr, token, &startindex);
            break;
        case JSMN_PRIMITIVE:
            *plist = parse_primitive(jsonstr, token, &startindex);
            break;
        default:
            break;
    }
    if (!*plist) {
        free(tokens);
        return PLIST_ERR_PARSE;
    }
    startindex++;
}
free(tokens);
return PLIST_ERR_SUCCESS;