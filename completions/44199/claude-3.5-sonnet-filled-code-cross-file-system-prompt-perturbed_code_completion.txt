plist_t result = NULL;
if (tokens[startindex].type == JSMN_OBJECT) {
    result = parse_object(jsonstr, &(jsmntok_info_t){tokens, r}, &startindex);
} else if (tokens[startindex].type == JSMN_ARRAY) {
    result = parse_array(jsonstr, &(jsmntok_info_t){tokens, r}, &startindex);
} else if (tokens[startindex].type == JSMN_STRING) {
    result = parse_string(jsonstr, &(jsmntok_info_t){tokens, r}, &startindex);
} else if (tokens[startindex].type == JSMN_PRIMITIVE) {
    result = parse_primitive(jsonstr, &(jsmntok_info_t){tokens, r}, &startindex);
} else {
    PLIST_JSON_ERR("%s: Unexpected token type\n", __func__);
    free(tokens);
    return PLIST_ERR_PARSE;
}

if (!result) {
    free(tokens);
    return PLIST_ERR_PARSE;
}

*plist = result;