// Handle encoding errors encountered during XML parsing.
// Check if the input does not conform to UTF-8 encoding.
// Report an encoding error with details about the problematic bytes.
// Terminate the parsing process upon encountering this error.
encoding_error:
    if (ctxt->input->buf!= NULL && ctxt->input->buf->encoder!= NULL) {
        xmlCharEncodingInputCallback cb = ctxt->input->buf->encoder->input;
        if (cb!= NULL) {
            int ret = cb(ctxt->input->buf, ctxt->input->cur, ctxt->input->end);
            if (ret < 0) {
                xmlFatalErr(ctxt, XML_ERR_INVALID_ENCODING,
                            "Input is not proper UTF-8, indicate tree error\n");
                xmlHaltParser(ctxt);
            }
        }
    }