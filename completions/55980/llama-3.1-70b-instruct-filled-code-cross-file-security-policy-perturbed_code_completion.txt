// Handle encoding errors encountered during XML parsing.
// Check if the input does not conform to UTF-8 encoding.
// Report an encoding error with details about the problematic bytes.
// Terminate the parsing process upon encountering this error.
encoding_error:
    if (ctxt->input->buf!= NULL) {
        xmlParserInputBufferPtr in = ctxt->input->buf;
        if (in->encoder!= NULL) {
            xmlCharEncError(in, ctxt->input->cur, ctxt->input->end,
                            &ctxt->input->cur, NULL, NULL, NULL);
        }
    }
    xmlFatalErr(ctxt, XML_ERR_INVALID_ENCODING, NULL);
    xmlHaltParser(ctxt);
    if ((ctxt->sax) && (ctxt->sax->endDocument!= NULL))
        ctxt->sax->endDocument(ctxt->userData);
    ctxt->instate = XML_PARSER_EOF;
    return;