encoding_error:
    if (parserContext->errNo == XML_ERR_INVALID_ENCODING) {
        xmlFatalErr(parserContext, XML_ERR_INVALID_ENCODING, "Invalid encoding detected");
        xmlHaltParser(parserContext);
        return(0);
    }
    if (parserContext->input != NULL) {
        size_t error_pos = parserContext->input->cur - parserContext->input->base;
        xmlGenericError(xmlGenericErrorContext, "Encoding error at position %zu\n", error_pos);
    }
    return(0);