encoding_error:
    if (ctxt->input != NULL) {
        size_t error_pos = ctxt->input->cur - ctxt->input->base;
        xmlGenericError(xmlGenericErrorContext,
                        "Encoding error at position %zu\n", error_pos);
    }
    xmlHaltParser(ctxt);
    return(XML_ERR_INVALID_ENCODING);