// Handle encoding errors encountered during XML parsing.
// Check if the input does not conform to UTF-8 encoding.
// Report an encoding error with details about the problematic bytes.
// Terminate the parsing process upon encountering this error.
encoding_error:
    if (ctxt->instate == XML_PARSER_EOF)
        goto done;
    if (ctxt->sax!= NULL && ctxt->sax->encodingError!= NULL)
        ctxt->sax->encodingError(ctxt->userData, ctxt->input->cur, tmp);
    else if (ctxt->sax!= NULL && ctxt->sax->fatalError!= NULL)
        ctxt->sax->fatalError(ctxt->userData, ctxt->input->cur, tmp);
    else
        xmlFatalErr(ctxt, XML_ERR_INVALID_ENCODING, "encoding error\n");
    xmlHaltParser(ctxt);
    return(XML_ERR_INVALID_ENCODING);