encoding_error:
    if (ctxt->input->cur - ctxt->input->base < 4) {
        xmlFatalErr(ctxt, XML_ERR_INVALID_ENCODING, "Input is not UTF-8 encoded");
    } else {
        unsigned char c = ctxt->input->cur[-1];
        xmlFatalErrMsgInt(ctxt, XML_ERR_INVALID_ENCODING,
                          "Input is not UTF-8 encoded: invalid byte 0x%02X", c);
    }
    xmlHaltParser(ctxt);
    return(XML_ERR_INVALID_ENCODING);