encoding_error:
    xmlFatalErrMsgInt(ctxt, XML_ERR_INVALID_CHAR,
                      "invalid xmlChar value %d\n", c);
    if (ctxt->input != NULL)
        ctxt->input->cur += tmp;
    if (rep != NULL)
        xmlFree(rep);
    if (buf != NULL)
        xmlFree(buf);
    return(-tmp);