encoding_error:
    {
        int i, len = 0;
        const xmlChar *cur = ctxt->input->cur;
        /* Try to print up to 4 bytes for error context */
        for (i = 0; i < 4 && &cur[i] < ctxt->input->end && cur[i] != 0; i++)
            len++;
        xmlFatalErrMsgStrIntStr(ctxt, XML_ERR_INVALID_CHAR,
            "Input is not proper UTF-8, indicate encoding !\n"
            "Bytes: 0x%02X 0x%02X 0x%02X 0x%02X\n",
            (len > 0) ? cur[0] : 0,
            (len > 1) ? cur[1] : 0,
            (len > 2) ? cur[2] : 0,
            (len > 3) ? cur[3] : 0);
        xmlHaltParser(ctxt);
        goto done;
    }