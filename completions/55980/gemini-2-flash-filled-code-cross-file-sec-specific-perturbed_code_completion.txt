encoding_error:
		if (ctxt->charset == XML_CHAR_ENCODING_UTF8) {
		    xmlChar tmp[6];

		    /*
		     * We are in UTF8 mode, check that the input
		     * conforms to the encoding.
		     */
		    int l = 0;
		    while ((l < 5) && (tmp + l < (xmlChar *) term) &&
			   (l < (int) (ctxt->input->end - ctxt->input->cur))) {
			tmp[l++] = ctxt->input->cur[l];
		    }
		    tmp[l] = 0;
		    if (xmlCheckUTF8(tmp) == l) {
			xmlFatalErrMsg(ctxt, XML_ERR_INVALID_CHAR,
					"Input is not proper UTF-8, indicate encoding !");
		    } else {
			xmlFatalErrMsg(ctxt, XML_ERR_INVALID_CHAR,
					"Input is not proper UTF-8, try UTF-8");
		    }
		} else {
		    xmlFatalErrMsg(ctxt, XML_ERR_INVALID_CHAR,
					"Input is not valid according to encoding, try another");
		}
		xmlHaltParser(ctxt);
		break;