// Check if the offset has enough space for marker and length
if (offset + 1 >= trailer_len) {
    return BLOSC2_ERROR_DATA;
}

// Check content marker
if ((*content_marker & 0xffu) != 0xc6u) {  // Assumed marker value
    return BLOSC2_ERROR_DATA;
}

// Ensure we have enough space to read the content length
if (offset + 1 + 4 > trailer_len) {
    return BLOSC2_ERROR_DATA;
}

// Read the content length
int32_t content_len;
from_big(&content_len, content_marker + 1, sizeof(content_len));

// Validate content length
if (content_len < 0 || 
    offset + 1 + 4 + content_len > trailer_len) {
    return BLOSC2_ERROR_DATA;
}

// Store the content length in the metalayer structure
layer_metadata->content_len = content_len;