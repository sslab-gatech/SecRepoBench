if (DeviceLink == NULL) {
    cmsDeleteTransform(xform);
    return 0;
}

dwFlags |= cmsFLAGS_FORCE_CLUT;

cmsPipelineOptimize(DeviceLink, NULL, dwFlags);

// Proceeds to optimize the pipeline for color rendering using the _cmsOptimizePipeline function.
_cmsOptimizePipeline(DeviceLink, NULL, dwFlags);