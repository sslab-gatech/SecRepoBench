if (DeviceLink == NULL) {
                cmsDeleteTransform(xform);
                return 0; // Ensure we handle the error case
            }

            dwFlags |= cmsFLAGS_FORCE_CLUT;
            _cmsOptimizePipeline(ContextID, &DeviceLink, Intent, &OutputFormat, &InFrm, &dwFlags);