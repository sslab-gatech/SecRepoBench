if (rv) {
  // Validate the compound word against forbidden patterns and rules
  if ((checkcompoundrep && cpdrep_check(word, len)) || cpdwordpair_check(word, len)) {
    return NULL;
  }

  // Check if the compound word violates any forbidden word rules
  if (forbiddenword) {
    struct hentry* rv2 = lookup(word.c_str(), word.size());
    if (!rv2 && len <= word.size()) {
      rv2 = affix_check(word, 0, len);
    }
    if (rv2 && rv2->astr && TESTAFF(rv2->astr, forbiddenword, rv2->alen)) {
      return NULL;
    }
  }

  // Ensure the compound word adheres to the defined compound pattern table
  if (!checkcpdtable.empty() && scpd == 0 && cpdpat_check(word, i, rv_first, rv, is_affixed)) {
    return NULL;
  }

  // Check if the compound word violates any non-compound flags in suffix or prefix
  if ((pfx && pfx->getCont() && TESTAFF(pfx->getCont(), compoundforbidflag, pfx->getContLen())) ||
      (sfx && sfx->getCont() && TESTAFF(sfx->getCont(), compoundforbidflag, sfx->getContLen()))) {
    return NULL;
  }

  // If all checks pass, return the first valid compound word entry
  return rv_first;
}