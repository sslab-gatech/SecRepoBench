if (a) {
    if (a->type == GF_ISOM_BOX_TYPE_UNKNOWN) {
        if (((GF_UnknownBox *)a)->original_4cc == GF_ISOM_BOX_TYPE_UUID) {
            a->type = GF_ISOM_BOX_TYPE_UUID;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_UUID) {
        if (((GF_UUIDBox *)a)->internal_4cc) {
            a->type = ((GF_UUIDBox *)a)->internal_4cc;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_REFT) {
        if (((GF_TrackReferenceTypeBox *)a)->reference_type) {
            a->type = ((GF_TrackReferenceTypeBox *)a)->reference_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_REFI) {
        if (((GF_ItemReferenceTypeBox *)a)->reference_type) {
            a->type = ((GF_ItemReferenceTypeBox *)a)->reference_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_TRGT) {
        if (((GF_TrackGroupTypeBox *)a)->group_type) {
            a->type = ((GF_TrackGroupTypeBox *)a)->group_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_GRPT) {
        if (((GF_EntityToGroupTypeBox *)a)->grouping_type) {
            a->type = ((GF_EntityToGroupTypeBox *)a)->grouping_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_SGPD) {
        if (((GF_SampleGroupDescriptionBox *)a)->grouping_type) {
            a->type = ((GF_SampleGroupDescriptionBox *)a)->grouping_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a->type = ((GF_SampleTableBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STSD) {
        if (((GF_SampleDescriptionBox *)a)->handler_type) {
            a->type = ((GF_SampleDescriptionBox *)a)->handler_type;
        }
    }
    if (a->type == GF_ISOM_BOX_TYPE_STBL) {
        if (((GF_SampleTableBox *)a)->handler_type) {
            a-