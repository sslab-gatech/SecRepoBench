if (!a)
    return GF_OK;

if (container->size < a->size) {
    if (!skip_logs)
        gf_log(GF_LOG_WARNING, "Parent box (%.4s) size (%"PRIu64") is smaller than child box (%.4s) size (%"PRIu64")", (char*)&container->type, container->size, (char*)&a->type, a->size);
    container->size = 0;
} else {
    container->size -= a->size;
}

if (container->registry && container->registry->valid_child_fn) {
    if (!container->registry->valid_child_fn(container, a)) {
        if (!skip_logs)
            gf_log(GF_LOG_WARNING, "Box type (%.4s) is not a valid child of container type (%.4s)", (char*)&a->type, (char*)&container->type);
    }
}