if (!a) return GF_OK;

if (container->size < a->size) {
    if (!skip_logs) {
        GF_LOG(GF_LOG_WARNING, GF_LOG_CONTAINER, 
               ("[iso file] Box \"%s\" larger than container box\n", 
                gf_4cc_to_str(a->type)));
    }
    container->size = 0;
} else {
    container->size -= a->size;
}

// Validate if box is compatible with the container
if (container->registry && !skip_logs) {
    // Check parent box compatibility
    Bool valid = GF_FALSE;
    u32 i = 0;
    if (a->registry && a->registry->parent_types) {
        while (a->registry->parent_types[i]) {
            if (a->registry->parent_types[i] == parent_type) {
                valid = GF_TRUE;
                break;
            }
            i++;
        }
    } else {
        valid = GF_TRUE;
    }
    
    if (!valid) {
        GF_LOG(GF_LOG_WARNING, GF_LOG_CONTAINER, 
               ("[iso file] Box \"%s\" not valid in container \"%s\"\n", 
                gf_4cc_to_str(a->type), gf_4cc_to_str(parent_type)));
    }
}