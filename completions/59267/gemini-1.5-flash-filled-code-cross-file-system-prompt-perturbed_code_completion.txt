memset (uncompressed_data, 0, uncompressed_size);

    dataPtr  = inPtr;
    dataLeft = iSize;

    memcpy (counters, dataPtr, headerSize);
    dataPtr += headerSize;
    dataLeft -= headerSize;

    fromXdr (version, dataPtr);
    fromXdr (unknownUncompressedSize, dataPtr);
    fromXdr (unknownCompressedSize, dataPtr);
    fromXdr (acCompressedSize, dataPtr);
    fromXdr (dcCompressedBytes, dataPtr);
    fromXdr (rleCompressedSize, dataPtr);
    fromXdr (rleUncompressedSize, dataPtr);
    fromXdr (rleRawSize, dataPtr);
    fromXdr (totalAcUncompressedCount, dataPtr);
    fromXdr (totalDcUncompressedCount, dataPtr);
    fromXdr (acCompression, dataPtr);

    compressedSize = unknownCompressedSize + acCompressedSize +
                     dcCompressedBytes + rleCompressedSize;

    if (compressedSize > iSize) { return EXR_ERR_CORRUPT_CHUNK; }

    dataLeft -= compressedSize;

    outBufferSize = uncompressed_size;
    outBufferEnd  = (uint8_t*) uncompressed_data + outBufferSize;

    packedAcBufferEnd = (uint8_t*) me->_packedAcBuffer;
    packedDcBufferEnd = (uint8_t*) me->_packedDcBuffer;

    uint8_t* compressedUnknownBuf = (uint8_t*) dataPtr;
    uint8_t* compressedAcBuf     = compressedUnknownBuf + unknownCompressedSize;
    uint8_t* compressedDcBuf     = compressedAcBuf + acCompressedSize;
    uint8_t* compressedRleBuf    = compressedDcBuf + dcCompressedBytes;