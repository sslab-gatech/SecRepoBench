const uint8_t* compressedUnknownBuf;
const uint8_t* compressedAcBuf;
const uint8_t* compressedDcBuf;
const uint8_t* compressedRleBuf;

if (iSize < headerSize)
    return EXR_ERR_CORRUPT_CHUNK;

memset(uncompressed_data, 0, uncompressed_size);

for (int i = 0; i < NUM_SIZES_SINGLE; ++i)
{
    counters[i] = one_from_native64(((const uint64_t*)inPtr)[i]);
}

version = counters[0];
unknownUncompressedSize = counters[1];
unknownCompressedSize = counters[2];
acCompressedSize = counters[3];
dcCompressedBytes = counters[4];
rleCompressedSize = counters[5];
rleUncompressedSize = counters[6];
rleRawSize = counters[7];
totalAcUncompressedCount = counters[8];
totalDcUncompressedCount = counters[9];

compressedSize = headerSize + unknownCompressedSize + acCompressedSize + 
                 dcCompressedBytes + rleCompressedSize;

if (compressedSize > iSize)
    return EXR_ERR_CORRUPT_CHUNK;

dataPtr = inPtr + headerSize;
dataLeft = iSize - headerSize;

compressedUnknownBuf = dataPtr;
compressedAcBuf = compressedUnknownBuf + unknownCompressedSize;
compressedDcBuf = compressedAcBuf + acCompressedSize;
compressedRleBuf = compressedDcBuf + dcCompressedBytes;

outBufferEnd = (uint8_t*)uncompressed_data;
packedAcBufferEnd = (uint8_t*)me->_packedAcBuffer;
packedDcBufferEnd = (uint8_t*)me->_packedDcBuffer;

acCompression = (version == 2) ? STATIC_HUFFMAN : DEFLATE;