p=NULL;
  if (magic != (unsigned char *) NULL)
    {
      LockSemaphoreInfo(magic_cache_semaphore);
      p=SearchLinkedList(magic_cache,magic,size,exception);
      UnlockSemaphoreInfo(magic_cache_semaphore);
      if (p != (const MagicInfo *) NULL)
        return(p);
    }
  LockSemaphoreInfo(magic_list_semaphore);
  p=SearchLinkedList(magic_list,magic,size,exception);