if (magic == (const unsigned char *) NULL)
    {
      p = (const MagicInfo *) NULL;
    }
  else
    {
      LockSemaphoreInfo(magic_cache_semaphore);
      p = (const MagicInfo *) SearchLinkedList(magic_cache,magic,
        sizeof(unsigned char),CompareMagickInfoExtent);
      UnlockSemaphoreInfo(magic_cache_semaphore);
    }

  if (p == (const MagicInfo *) NULL)
    {
      LockSemaphoreInfo(magic_list_semaphore);
      p = (const MagicInfo *) SearchLinkedList(magic_list,magic,
        sizeof(unsigned char),CompareMagickInfoExtent);
      UnlockSemaphoreInfo(magic_list_semaphore);
    }