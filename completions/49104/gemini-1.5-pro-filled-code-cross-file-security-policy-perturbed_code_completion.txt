assert(exception != (ExceptionInfo *) NULL);
  if (magic_list == (LinkedListInfo *) NULL)
    InitializeMagickList(exception);
  if (IsMagicCacheInstantiated() == MagickFalse)
    return(NULL);
  p=(const MagicInfo *) NULL;
  if (magic != (const unsigned char *) NULL)
    {
      LockSemaphoreInfo(magic_cache_semaphore);
      p=(const MagicInfo *) GetValueFromLinkedList(magic_cache,magic,
        CompareMagicInfo);
      UnlockSemaphoreInfo(magic_cache_semaphore);
    }
  if (p == (const MagicInfo *) NULL)
    {
      LockSemaphoreInfo(magic_list_semaphore);
      p=(const MagicInfo *) GetValueFromLinkedList(magic_list,magic,
        CompareMagicInfo);
    }