assert(exception != (ExceptionInfo *) NULL);
  assert(magic_list != (LinkedListInfo *) NULL);
  if (magic == (unsigned char *) NULL)
    {
      p=(const MagicInfo *) NULL;
    }
  else
    {
      LockSemaphoreInfo(magic_cache_semaphore);
      p=SearchLinkedList(magic_cache,magic,size,exception);
      UnlockSemaphoreInfo(magic_cache_semaphore);
      if (p == (const MagicInfo *) NULL)
        {
          LockSemaphoreInfo(magic_list_semaphore);
          p=SearchLinkedList(magic_list,magic,size,exception);
          UnlockSemaphoreInfo(magic_list_semaphore);
        }
    }