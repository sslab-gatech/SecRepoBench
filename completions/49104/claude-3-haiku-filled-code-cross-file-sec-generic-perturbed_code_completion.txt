LockSemaphoreInfo(magic_list_semaphore);
p = GetMagicInfoList(magic,size,exception);
if (p != (const MagicInfo *) NULL)
  {
    LockSemaphoreInfo(magic_cache_semaphore);
    (void) InsertValueInSortedLinkedList(magic_cache,MagicInfoCompare,
      NULL,p);
    UnlockSemaphoreInfo(magic_cache_semaphore);
  }
UnlockSemaphoreInfo(magic_list_semaphore);