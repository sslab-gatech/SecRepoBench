if (exception != (ExceptionInfo *) NULL)
    exception->severity=UndefinedException;
  if (magic == (const unsigned char *) NULL)
    return((const MagicInfo *) NULL);
  if (IsMagicCacheInstantiated() == MagickFalse)
    return((const MagicInfo *) NULL);
  LockSemaphoreInfo(magic_cache_semaphore);
  p=(const MagicInfo *) GetValueFromLinkedList(magic_cache,CompareMagickInfoExtent,
    magic,size);
  UnlockSemaphoreInfo(magic_cache_semaphore);
  if (p != (const MagicInfo *) NULL)
    return(p);
  if (magic_list == (LinkedListInfo *) NULL)
    return((const MagicInfo *) NULL);
  LockSemaphoreInfo(magic_list_semaphore);
  p=(const MagicInfo *) GetValueFromLinkedList(magic_list,CompareMagickInfoExtent,
    magic,size);