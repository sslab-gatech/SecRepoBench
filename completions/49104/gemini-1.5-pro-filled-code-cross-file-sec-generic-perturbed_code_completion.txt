assert(exception != (ExceptionInfo *) NULL);
  if (magic == (const unsigned char *) NULL)
    return((const MagicInfo *) NULL);
  if (IsMagicCacheInstantiated() != MagickFalse)
    {
      LockSemaphoreInfo(magic_cache_semaphore);
      p=(const MagicInfo *) GetValueFromSinglyLinkedList(magic_cache,magic,
        CompareMagicInfo);
      UnlockSemaphoreInfo(magic_cache_semaphore);
      if (p != (const MagicInfo *) NULL)
        return(p);
    }
  if (magic_list_semaphore == (SemaphoreInfo *) NULL)
    ActivateSemaphoreInfo(&magic_list_semaphore);
  LockSemaphoreInfo(magic_list_semaphore);
  p=(const MagicInfo *) GetValueFromSinglyLinkedList(magic_list,magic,
    CompareMagicInfo);