LockSemaphoreInfo(magic_list_semaphore);
p=(const MagicInfo *) NULL;
if (magic!= (const unsigned char *) NULL)
  {
    if (IsMagicCacheInstantiated()!= MagickFalse)
      {
        LockSemaphoreInfo(magic_cache_semaphore);
        p=GetMagicInfoFromLinkedList(magic_cache,CompareMagickInfoExtent,magic);
        UnlockSemaphoreInfo(magic_cache_semaphore);
      }
  }
if (p == (const MagicInfo *) NULL)
  {
    p=GetMagicInfoFromLinkedList(magic_list,CompareMagickInfoExtent,magic);
  }