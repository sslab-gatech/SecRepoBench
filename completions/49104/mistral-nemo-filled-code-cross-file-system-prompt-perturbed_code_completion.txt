LockSemaphoreInfo(magic_cache_semaphore);
  p=FindValueInSortedLinkedList(magic_cache,CompareMagickInfoExtent,magic,size);
  if (p != (const MagicInfo *) NULL)
    {
      UnlockSemaphoreInfo(magic_cache_semaphore);
      return(p);
    }
  UnlockSemaphoreInfo(magic_cache_semaphore);

  LockSemaphoreInfo(magic_list_semaphore);
  p=FindValueInSortedLinkedList(magic_list,MagicCompare,magic,size);
  if (p != (const MagicInfo *) NULL)
    {
      UnlockSemaphoreInfo(magic_list_semaphore);
      return(p);
    }
  UnlockSemaphoreInfo(magic_list_semaphore);