if (prefix == NULL) {
    /*
     * Compare the names up to 'len' and ensure the entry's
     * name is null-terminated at that position.
     */
    if ((memcmp(entry->name, key_name, len) == 0) &&
        (entry->name[len] == 0)) {
        found = 1;
        break;
    }
} else {
    /*
     * Compare the qualified names (prefix:name).
     */
    if (xmlStrQEqual(prefix, key_name, entry->name)) {
        found = 1;
        break;
    }
}