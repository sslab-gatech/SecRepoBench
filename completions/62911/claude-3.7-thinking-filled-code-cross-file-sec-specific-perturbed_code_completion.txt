if (prefix == NULL) {
    if ((len < 0) && (xmlStrcmp(entry->name, key_name) == 0)) {
        found = 1;
        break;
    } else if ((len >= 0) && (xmlStrncmp(entry->name, key_name, len) == 0) && 
               (entry->name[len] == 0)) {
        found = 1;
        break;
    }
} else {
    if (xmlStrQNameCompare(prefix, key_name, entry->prefix, entry->name) == 0) {
        found = 1;
        break;
    }
}