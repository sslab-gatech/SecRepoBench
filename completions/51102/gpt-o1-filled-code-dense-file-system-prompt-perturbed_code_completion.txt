ctry = try_chars;
if (utf8) {
    std::vector<w_char> ckey_utf16;
    u8_u16(ckey_utf16, ckey);
    ckeyl = ckey_utf16.size();

    std::vector<w_char> ctry_utf16;
    u8_u16(ctry_utf16, ctry);
    ctryl = ctry_utf16.size();
} else {
    ckeyl = ckey.size();
    ctryl = ctry.size();
}