// Convert the `ckey` and given string to their UTF-16 representations if UTF-8 mode is enabled.
  // Assign their lengths to `ckeyl` and `ctryl`. Assign the given string to `ctry`.
  if (utf8) {
    std::vector<w_char> ckey_utf;
    u8_u16(ckey_utf, ckey);
    ckeyl = ckey_utf.size();

    std::vector<w_char> ctry_utf;
    u8_u16(ctry_utf, ctry);
    ctryl = ctry_utf.size();
  } else {
    ckeyl = ckey.length();
    ctryl = ctry.length();
  }