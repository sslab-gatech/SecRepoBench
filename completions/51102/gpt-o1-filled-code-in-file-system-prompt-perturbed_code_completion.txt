if (utf8) {
    // convert ckey to UTF-16
    u8_u16(ckey_utf, ckey.c_str());
    ckeyl = ckey_utf.size();
    // convert the given try_chars to UTF-16
    u8_u16(ctry_utf, try_chars.c_str());
    ctryl = ctry_utf.size();
} else {
    ckeyl = ckey.size();
    ctryl = try_chars.size();
}
// store the ASCII/UTF-8 version of try_chars
ctry = try_chars;