if (utf8) {
    std::vector<w_char> tmp;
    u8_u16(tmp, ckey);
    ckeyu = tmp;
    ckeyl = tmp.size();

    tmp.clear();
    u8_u16(tmp, try_chars);
    ctryu = tmp;
    ctryl = tmp.size();
  } else {
    ckeyl = strlen(ckey);
    ctry = try_chars;
    ctryl = try_chars.size();
  }