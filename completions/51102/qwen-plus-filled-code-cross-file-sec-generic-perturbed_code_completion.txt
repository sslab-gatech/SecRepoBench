if (utf8) {
    std::vector<w_char> ckeyw, ctryw;
    u8_u16(ckeyw, ckey);
    u8_u16(ctryw, try_chars);
    ckeyl = static_cast<int>(ckeyw.size());
    ctryl = static_cast<int>(ctryw.size());
    ctry = try_chars; // Store the given string as is
} else {
    ckeyl = static_cast<int>(ckey.size());
    ctryl = static_cast<int>(try_chars.size());
    ctry = try_chars; // Store the given string as is
}