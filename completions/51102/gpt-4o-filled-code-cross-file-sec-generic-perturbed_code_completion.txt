if (utf8) {
    std::vector<w_char> utf16_ckey;
    std::vector<w_char> utf16_ctry;
    u8_u16(utf16_ckey, ckey);
    u8_u16(utf16_ctry, try_chars);
    ckeyl = utf16_ckey.size();
    ctryl = utf16_ctry.size();
    ctry = try_chars;
  } else {
    ckeyl = ckey.size();
    ctryl = try_chars.size();
    ctry = try_chars;
  }