// Convert the `ckey` and given string to their UTF-16 representations if UTF-8 mode is enabled.
// Assign their lengths to `ckeyl` and `ctryl`. Assign the given string to `ctry`.
if (utf8) {
  std::vector<w_char> ckeyu, ctryu;
  int ckeyl = u8_u16(ckeyu, ckey);
  if (ckeyl < 0) {
    // handle error code
    return;
  }
  int ctryl = u8_u16(ctryu, ctry);
  if (ctryl < 0) {
    // handle error code
    return;
  }
  ckey = ckeyu;
  ctry = ctryu;
}
ckeyl = ckey.size();
ctryl = ctry.size();
ctry = ctry;