if (utf8) {
    std::vector<w_char> wckey;
    std::vector<w_char> wctry;
    u8_u16(wckey, ckey);
    u8_u16(wctry, try_chars);
    ckeyl = wckey.size();
    ctryl = wctry.size();
    ctry.assign(wctry.begin(), wctry.end());
  } else {
    ckeyl = ckey.size();
    ctryl = try_chars.size();
    ctry = try_chars;
  }