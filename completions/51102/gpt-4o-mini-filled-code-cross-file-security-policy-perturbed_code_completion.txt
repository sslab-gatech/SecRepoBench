std::vector<w_char> ckey_utf16;
std::vector<w_char> ctry_utf16;

int ckey_length = u8_u16(ckey_utf16, ckey);
if (ckey_length < 0 || ckey_length > MAX_BUFFER_SIZE) {
    // Handle error for ckey conversion failure
    return;
}
ckeyl = ckey_length;

int ctry_length = u8_u16(ctry_utf16, try_chars);
if (ctry_length < 0 || ctry_length > MAX_BUFFER_SIZE) {
    // Handle error for ctry conversion failure
    return;
}
ctryl = ctry_length;