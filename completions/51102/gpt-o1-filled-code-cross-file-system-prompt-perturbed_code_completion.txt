if (utf8) {
    std::vector<w_char> wkey;
    u8_u16(wkey, ckey);
    ckeyl = (unsigned int)wkey.size();

    std::vector<w_char> wtry;
    u8_u16(wtry, try_chars);
    ctryl = (unsigned int)wtry.size();
} else {
    ckeyl = (unsigned int)ckey.size();
    ctryl = (unsigned int)try_chars.size();
}
ctry = try_chars;