if (utf8) {
    // Convert ckey to UTF-16
    u8_u16(ckey_utf, ckey);
    ckeyl = ckey_utf.size();

    // Convert try_chars to UTF-16
    u8_u16(ctry_utf, try_chars);
    ctryl = ctry_utf.size();
  } else {
    // Assign ckey and try_chars directly
    ckeyl = ckey.size();
    ctryl = try_chars.size();
  }

  // Assign try_chars to ctry
  ctry = try_chars;