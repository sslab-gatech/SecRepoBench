errno = 0;
uint64_t uival = strtoull(str_val, &endp, 10);
if (errno == ERANGE) {
    PLIST_JSON_ERR("%s: numerical value out of range\n", __func__);
    return NULL;
}
if (endp && *endp == '.') {
    double dval = strtod(str_val, &endp);
    if (*endp != str_end) {
        PLIST_JSON_ERR("%s: invalid character(s) in real value\n", __func__);
        return NULL;
    }
    parsed_value = plist_new_real(dval);
} else {
    if (*endp != str_end) {
        PLIST_JSON_ERR("%s: invalid character(s) in integer value\n", __func__);
        return NULL;
    }
    if (uival > INT64_MAX) {
        parsed_value = plist_new_uint(uival);
    } else {
        int64_t ival = strtoll(str_val, &endp, 10);
        if (ival >= 0) {
            parsed_value = plist_new_uint((uint64_t)ival);
        } else {
            parsed_value = plist_new_int(ival);
        }
    }
}