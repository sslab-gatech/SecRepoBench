double num_val;
char* endp = NULL;

// Parse a numerical value from the JSON string, starting from the current token.
// If the value is an integer, create a new unsigned integer plist node.
// If the value is a floating-point number, create a new real plist node.
// If the value contains invalid characters for a number, log an error message.
num_val = strtod(str_val, &endp);
if (endp == str_val || *endp != '\0') {
    PLIST_JSON_ERR("%s: invalid number format '%.*s'\n", __func__, (int)str_len, str_val);
} else if (str_val == endp) {
    // It's an integer
    unsigned long int_val = strtoul(str_val, &endp, 10);
    if (endp == str_val || *endp != '\0') {
        PLIST_JSON_ERR("%s: invalid integer format '%.*s'\n", __func__, (int)str_len, str_val);
    } else {
        parsed_value = plist_new_uint(int_val);
    }
} else {
    // It's a floating-point number
    parsed_value = plist_new_real(num_val);
}