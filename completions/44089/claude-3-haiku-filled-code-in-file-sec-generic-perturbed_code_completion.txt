char* endp = NULL;
int64_t intval = 0;
double realval = 0.0;
if (str_val[0] == '-') {
    intval = strtoll(str_val, &endp, 10);
    if (endp == str_val) {
        PLIST_JSON_ERR("%s: invalid integer value '%.*s' encountered\n", __func__, (int)str_len, str_val);
        return NULL;
    }
    parsed_value = plist_new_uint(intval);
} else {
    realval = strtod(str_val, &endp);
    if (endp == str_val) {
        intval = strtoll(str_val, &endp, 10);
        if (endp != str_end) {
            PLIST_JSON_ERR("%s: invalid numerical value '%.*s' encountered\n", __func__, (int)str_len, str_val);
            return NULL;
        }
        parsed_value = plist_new_uint(intval);
    } else {
        parsed_value = plist_new_real(realval);
    }
}