double num_val;
char* endp = NULL;

// Parse a numerical value from the JSON string, starting from the current token.
num_val = strtod(str_val, &endp);

if (endp == str_val || *endp != '\0') {
    // Invalid characters found in the number
    PLIST_JSON_ERR("%s: invalid character in number\n", __func__);
    return NULL;
}

if (floor(num_val) == num_val) {
    // The value is an integer
    parsed_value = plist_new_uint(strtoull(str_val, &endp, 10));
} else {
    // The value is a floating-point number
    parsed_value = plist_new_real(num_val);
}