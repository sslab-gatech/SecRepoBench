if (str_val[0] == '-' || isdigit(str_val[0])) {
    char* endp = NULL;
    long long value = strtoll(str_val, &endp, 10);
    if (endp!= str_val && *endp == '\0') {
        if (str_val[str_len - 1] == '.') {
            double value_d = strtod(str_val, &endp);
            if (endp!= str_val && *endp == '\0') {
                parsed_value = plist_new_real(value_d);
            } else {
                PLIST_JSON_ERR("%s: invalid floating-point number '%.*s' encountered\n", __func__, (int)str_len, str_val);
            }
        } else {
            if (value >= 0 && value <= UINT32_MAX) {
                parsed_value = plist_new_uint((uint32_t)value);
            } else {
                parsed_value = plist_new_real((double)value);
            }
        }
    } else {
        PLIST_JSON_ERR("%s: invalid number '%.*s' encountered\n", __func__, (int)str_len, str_val);
    }
}