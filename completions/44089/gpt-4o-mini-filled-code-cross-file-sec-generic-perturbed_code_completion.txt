char* num_end = NULL;
        errno = 0; // Reset errno before strtol/strtod
        if (strchr(str_val, '.')) {
            // It's a floating-point number
            double float_value = strtod(str_val, &num_end);
            if (errno == ERANGE || num_end == str_val || *num_end != '\0') {
                PLIST_JSON_ERR("%s: invalid floating-point number '%.*s'\n", __func__, (int)str_len, str_val);
                return NULL;
            }
            parsed_value = plist_new_real(float_value);
        } else {
            // It's an integer
            long int_value = strtol(str_val, &num_end, 10);
            if (errno == ERANGE || num_end == str_val || *num_end != '\0') {
                PLIST_JSON_ERR("%s: invalid integer number '%.*s'\n", __func__, (int)str_len, str_val);
                return NULL;
            }
            parsed_value = plist_new_uint((uint64_t)int_value);
        }