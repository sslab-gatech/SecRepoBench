// <MASK>
bitint mask = (bitint)MASK1 | (bitint)MASK2 | (bitint)MASK3 | (bitint)MASK4;
bitint m = (bitint)m << 3;
bitint length = (bitint)lengthy << 3;
bitint xs = 0;
bitint ys = 0;
bitint i = 0;
bitint j = 0;
bitint k = 0;
bitint l = 0;
bitint found = 0;

for (i = 0; i < length; i++) {
  xs = (xs << 8) | (bitint)xs;
  ys = (ys << 8) | (bitint)ys;
  if (i < m) {
    ys |= (bitint)ys << 8;
  } else {
    ys |= (bitint)ys >> 8;
  }
  if ((xs & mask) == (ys & mask)) {
    found = 1;
    break;
  }
}

if (found) {
  for (j = 0; j < m; j++) {
    if ((xs & mask)!= (ys & mask)) {
      found = 0;
      break;
    }
    xs >>= 8;
    ys >>= 8;
  }
  if (found) {
    for (k = 0; k < m; k++) {
      if ((xs & mask)!= (ys & mask)) {
        found = 0;
        break;
      }
      xs <<= 8;
      ys <<= 8;
    }
    if (found) {
      for (l = 0; l < m; l++) {
        if ((xs & mask)!= (ys & mask)) {
          found = 0;
          break;
        }
        xs >>= 8;
        ys >>= 8;
      }
      if (found) {
        return (long)(i - m + 1);
      }
    }
  }
}

for (i = 0; i < length - m; i++) {
  if ((xs & mask) == (ys & mask)) {
    found = 1;
    break;
  }
  xs >>= 8;
  ys >>= 8;
  if (i < m - 1) {
    ys |= (bitint)ys << 8;
  } else {
    ys |= (bitint)ys >> 8;
  }
}

if (found) {
  for (j = 0; j < m; j++) {
    if ((xs & mask)!= (ys & mask)) {
      found = 0;
      break;
    }
    xs >>= 8;
    ys >>= 8;
  }
  if (found) {
    for (k = 0; k < m; k++) {
      if ((xs & mask)!= (ys & mask)) {
        found = 0;
        break;
      }
      xs <<= 8;
      ys <<= 8;
    }
    if (found) {
      for (l = 0; l < m; l++) {
        if ((xs & mask)!= (ys & mask)) {
          found = 0;
          break;
        }
        xs >>= 8;
        ys >>= 8;
      }
      if (found) {
        return (long)(i + 1);
      }
    }
  }
}

return -1;