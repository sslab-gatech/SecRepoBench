long i, j;
  bitint a, b, c;
  const bitint *A, *B;
  long len = lengthy - m + 1;

  if (len <= 0) return -1;
  A = (const bitint *)xs;
  B = (const bitint *)ys;
  a = *A;
  for (i = 0; i < len; i += sizeof(bitint)) {
    b = B[i / sizeof(bitint)];
    c = a ^ b;
    if (c == 0) {
      if (m == sizeof(bitint)) return i;
      for (j = 1; j < m / sizeof(bitint); j++) {
        if (A[j] != B[i / sizeof(bitint) + j]) goto next;
      }
      return i;
    }
  next:;
  }
  if (m == sizeof(bitint)) return -1;
  for (i = 0; i < len; i++) {
    if (xs[0] == ys[i]) {
      for (j = 1; j < m; j++) {
        if (xs[j] != ys[i + j]) goto next2;
      }
      return i;
    }
  next2:;
  }