long i, j;
  bitint c, block;

  if (lengthy < m) return -1;

  c = *(unsigned char *)xs;
  block = MASK1 * c;

  for (j = 0; j <= lengthy - m; ++j) {
    if (ys[j] == c) {
      for (i = 1; i < m; ++i) {
        if (ys[j+i] != xs[i]) {
          goto nextchar;
        }
      }
      return (mrb_int)j;
    }
nextchar:;
  }