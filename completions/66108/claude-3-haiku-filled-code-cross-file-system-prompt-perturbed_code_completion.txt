//ready to send packet
if (sync[0] == 0xFF && sync[1] >= 0xE0 && sync[1] <= 0xEF) {
    size = gf_mp3_frame_size(ctx->hdr);
    if (size > remain) {
        GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] truncated frame of size %u (remains %d)\n", size, remain-offsetskipped));
        break;
    }
    ctx->is_sync = GF_TRUE;
} else {
    GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] invalid frame header at offset %d - trying to resync\n", offsetskipped));
    ctx->is_sync = GF_FALSE;
    bytes_to_drop = 1;
    goto drop_byte;
}