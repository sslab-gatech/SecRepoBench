size = gf_mp3_get_frame_size(ctx->hdr, remain - offsetskipped);
if (!size) {
    GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] invalid frame header detected, resyncing\n"));
    goto drop_byte;
}

/* Check synchronization: the byte immediately after the frame should be 0xFF.
   If not, verify whether an ID3v1 tag ("TAG") is present instead. */
if (offsetskipped + size < remain) {
    u8 next_byte = start[offsetskipped + size];
    if (next_byte != 0xFF) {
        if ((remain - (offsetskipped + size) >= 3) &&
            (start[offsetskipped + size] == 'T') &&
            (start[offsetskipped + size + 1] == 'A') &&
            (start[offsetskipped + size + 2] == 'G'))
        {
            skip_id3v1 = GF_TRUE;
        } else {
            GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] warning: unsynchronized frame, attempting resync\n"));
            goto drop_byte;
        }
    }
}