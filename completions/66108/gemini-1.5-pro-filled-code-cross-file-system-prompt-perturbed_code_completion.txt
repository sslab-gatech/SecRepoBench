size = gf_mp3_frame_size(ctx->hdr);

		if (remain < offsetskipped + size + 1) {
			if (!is_eos) {
				break;
			}
			skip_id3v1 = GF_FALSE;
		} else if ((sync[size] != 0xFF) || (((sync[size+1] & 0xE0) != 0xE0) && !strncmp((const char*)sync+size, "TAG", 3)) ) {
			if (!strncmp((const char*)sync+size, "TAG", 3)) {
				skip_id3v1 = GF_TRUE;
			} else if (is_eos) {
				GF_LOG(GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid frame at EOS - skipping last %d bytes\n", remain));
				remain = 0;
				break;
			} else {
				GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] invalid frame detected - resyncing\n"));
				bytes_to_drop = offsetskipped + 1;
				goto drop_byte;
			}
		}