size = gf_mp3_frame_length(ctx->hdr);
    if (!size) {
        GF_LOG(GF_LOG_ERROR, GF_LOG_MEDIA, ("[MP3Dmx] Unable to determine frame size, resyncing...\n"));
        goto drop_byte;
    }
    if (offsetskipped + size < remain) {
        u8 next_byte = *(sync + size);
        if (next_byte != 0xFF) {
            if ((remain - (offsetskipped + size) >= 3) &&
                (sync[size] == 'T') && (sync[size+1] == 'A') && (sync[size+2] == 'G'))
            {
                skip_id3v1 = GF_TRUE;
            } else {
                GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] Invalid synchronization: expected 0xFF after frame, got 0x%X. Resynchronizing...\n", next_byte));
                goto drop_byte;
            }
        }
    } else if (!is_eos) {
        /* Not enough data to validate the sync byte, wait for more data */
        break;
    }