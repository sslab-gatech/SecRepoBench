// Check if the packet is ready to be sent.
// Ensure synchronization by examining if the byte after the frame is 0xFF.
// If the subsequent bytes indicate an ID3v1 tag ("TAG"), set a flag to skip it.
// Otherwise, log a warning or debug message about the invalid frame and attempt to resync.
u8 *probe = sync + size;
u32 probe_size = remain - offsetskipped - size;
if (probe_size>3) {
    if (probe[0]==0xFF) {
        if ((probe_size>=4) && (probe[1]==0x49) && (probe[2]==0x44) && (probe[3]==0x33)) {
            skip_id3v1 = GF_TRUE;
        }
    } else {
        GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] invalid frame of size %u\n", size));
        //attempt to resync
        ctx->resume_from = (u32) (sync - ctx->mp3_buffer + 1);
        break;
    }
}
size = gf_mp3_get_frame_size(ctx->hdr);