if (*(sync + size) == 0xFF) {
    // Ensure synchronization by confirming the byte after the frame is 0xFF.
    if (remain >= size + 4 && memcmp(sync + size, "TAG", 3) == 0) {
        skip_id3v1 = GF_TRUE;
        GF_LOG(GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] Skipping ID3v1 tag.\n"));
    } else {
        GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] Invalid frame detected, attempting to resync.\n"));
        // Move start pointer to next possible sync word
        start += offsetskipped + 1;
        remain -= offsetskipped + 1;
        continue;
    }
} else {
    GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] Frame not properly synchronized, attempting to resync.\n"));
    // Move start pointer to next possible sync word
    start += offsetskipped + 1;
    remain -= offsetskipped + 1;
    continue;
}

size = gf_mp3_frame_size(ctx->hdr);
if (!size) {
    GF_LOG(GF_LOG_ERROR, GF_LOG_MEDIA, ("[MP3Dmx] Error: Invalid MP3 frame size.\n"));
    break;
}