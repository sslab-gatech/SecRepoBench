// Check if the packet is ready to be sent.
// Ensure synchronization by examining if the byte after the frame is 0xFF.
// If the subsequent bytes indicate an ID3v1 tag ("TAG"), set a flag to skip it.
// Otherwise, log a warning or debug message about the invalid frame and attempt to resync.
sync = start + offsetskipped;
if (remain >= offsetskipped + 4 && sync[0] == 0xFF && sync[1] >= 0xE0 && sync[1] <= 0xFF) {
    size = gf_mp3_frame_size(ctx->hdr);
    skip_id3v1 = (remain >= offsetskipped + 128 && !memcmp(sync + size, "TAG", 3));
    if (!skip_id3v1) {
        GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] Invalid frame at offset %d, attempting to resync\n", offsetskipped));
    }
} else {
    GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] Could not find valid frame header at offset %d, attempting to resync\n", offsetskipped));
    bytes_to_drop = 1;
    goto drop_byte;
}