size = gf_mp3_frame_size(ctx->hdr);
if (!size || (offsetskipped + size > remain)) {
    GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] invalid or incomplete MP3 frame header\n"));
    break;
}

/* 
 * Check the byte(s) following this frame for proper sync. 
 * - If the next byte is 0xFF, we assume the next frame is in sync. 
 * - If the next three bytes are 'TAG', then it's an ID3v1 tag; set skip_id3v1. 
 * - Otherwise, log a warning and break to attempt resync.
 */
if ((offsetskipped + size) < remain) {
    if (sync[size] == 0xFF) {
        /* Likely synced frame, do nothing */
    } else if (((offsetskipped + size + 2) < remain) &&
               (sync[size] == 'T') && (sync[size + 1] == 'A') && (sync[size + 2] == 'G')) {
        skip_id3v1 = GF_TRUE;
    } else {
        GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 frame - attempting to resync\n"));
        break;
    }
}