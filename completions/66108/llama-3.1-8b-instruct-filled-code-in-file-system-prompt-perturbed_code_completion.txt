if (offsetskipped + size > remain) {
	GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] truncated frame of size %u (remains %d)\n", size, remain-offsetskipped));
	break;
}
dst_pck = gf_filter_pck_new_alloc(ctx->opid, size, &output);
if (!dst_pck) break;
memcpy(output, sync, size);

gf_filter_pck_set_cts(dst_pck, ctx->cts);
if (ctx->timescale && (ctx->timescale!=ctx->sr))
	gf_filter_pck_set_duration(dst_pck, (u32) gf_timestamp_rescale(nb_samp, ctx->sr, ctx->timescale) );
else
	gf_filter_pck_set_duration(dst_pck, nb_samp);
gf_filter_pck_set_sap(dst_pck, GF_FILTER_SAP_1);
gf_filter_pck_set_framing(dst_pck, GF_TRUE, GF_TRUE);

if (ctx->byte_offset!= GF_FILTER_NO_BO) {
	gf_filter_pck_set_byte_offset(dst_pck, ctx->byte_offset + offsetskipped);
}

gf_filter_pck_send(dst_pck);