size = gf_mp3_frame_size(ctx->hdr);

		if (remain < offsetskipped + size + 1) {
			if (!is_eos) return GF_OK;
			GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] truncated frame!\n"));
			size = remain - offsetskipped;
		}
		if (sync[size]==0xFF) {
			u32 tag_start = sync[size+1] & 0xFF;
			if ((tag_start==('T' & 0xFF)) && (remain > offsetskipped + size + 3) && (sync[size+2]=='A') && (sync[size+3]=='G')) {
				skip_id3v1 = GF_TRUE;
			}
		} else if (remain > offsetskipped + size + 1) {
			GF_LOG(GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] Invalid frame, next byte not 0xFF, attempting to resync\n"));
			ctx->is_sync = GF_FALSE;
			goto drop_byte;
		} else if (!is_eos) {
			return GF_OK;
		}