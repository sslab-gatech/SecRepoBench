if (ctx->hdr->sync == 0xFF) {
	// Sync byte is 0xFF, packet is ready to be sent.
	mp3_dmx_check_pid(filter, ctx);
} else {
	// Sync byte is not 0xFF, packet is not ready to be sent.
	// Attempt to resync by moving the start pointer one byte forward and decreasing the remain count.
	start++;
	remain--;
	if (remain) {
		ctx->hdr = gf_mp3_get_next_header_mem(start, remain, &offsetskipped);
		if (ctx->hdr && ctx->hdr->sync == 0xFF) {
			// Resync successful, continue processing the packet.
			mp3_dmx_check_pid(filter, ctx);
		} else {
			// Resync failed, log a warning or debug message and break the loop.
			GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] Failed to resync after invalid frame\n"));
			break;
		}
	} else {
		// Remain count is 0, no more data to process.
		break;
	}
}