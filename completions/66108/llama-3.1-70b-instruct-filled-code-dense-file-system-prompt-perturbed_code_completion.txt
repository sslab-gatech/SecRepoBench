if ((sync[1] & 0xF0)!= 0xFA) {
    if (ctx->is_sync) {
        GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
        ctx->is_sync = GF_FALSE;
    }
    ctx->nb_frames = 0;
    goto drop_byte;
}
if (!ctx->is_sync) {
    GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
    ctx->is_sync = GF_FALSE;
    ctx->nb_frames = 0;
    goto drop_byte;
}
if (ctx->is_sync && (sync[1] & 0xF0)!= 0xFA) {
    GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
    ctx->is_sync = GF_FALSE;
    ctx->nb_frames = 0;
    goto drop_byte;
}
if (ctx->is_sync && (sync[1] & 0xF0) == 0xFA) {
    if (sync[2] == 0xFF) {
        GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
        ctx->is_sync = GF_FALSE;
        ctx->nb_frames = 0;
        goto drop_byte;
    }
}
if (ctx->is_sync && (sync[1] & 0xF0) == 0xFA && sync[2]!= 0xFF) {
    if (ctx->nb_frames == 0) {
        GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
        ctx->is_sync = GF_FALSE;
        ctx->nb_frames = 0;
        goto drop_byte;
    }
}
if (ctx->is_sync && (sync[1] & 0xF0) == 0xFA && sync[2]!= 0xFF && ctx->nb_frames!= 0) {
    if (ctx->nb_frames == 1) {
        GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
        ctx->is_sync = GF_FALSE;
        ctx->nb_frames = 0;
        goto drop_byte;
    }
}
if (ctx->is_sync && (sync[1] & 0xF0) == 0xFA && sync[2]!= 0xFF && ctx->nb_frames!= 0 && ctx->nb_frames!= 1) {
    if (ctx->nb_frames == 2) {
        GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
        ctx->is_sync = GF_FALSE;
        ctx->nb_frames = 0;
        goto drop_byte;
    }
}
if (ctx->is_sync && (sync[1] & 0xF0) == 0xFA && sync[2]!= 0xFF && ctx->nb_frames!= 0 && ctx->nb_frames!= 1 && ctx->nb_frames!= 2) {
    if (ctx->nb_frames == 3) {
        GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
        ctx->is_sync = GF_FALSE;
        ctx->nb_frames = 0;
        goto drop_byte;
    }
}
if (ctx->is_sync && (sync[1] & 0xF0) == 0xFA && sync[2]!= 0xFF && ctx->nb_frames!= 0 && ctx->nb_frames!= 1 && ctx->nb_frames!= 2 && ctx->nb_frames!= 3) {
    if (ctx->nb_frames == 4) {
        GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
        ctx->is_sync = GF_FALSE;
        ctx->nb_frames = 0;
        goto drop_byte;
    }
}
if (ctx->is_sync && (sync[1] & 0xF0) == 0xFA && sync[2]!= 0xFF && ctx->nb_frames!= 0 && ctx->nb_frames!= 1 && ctx->nb_frames!= 2 && ctx->nb_frames!= 3 && ctx->nb_frames!= 4) {
    if (ctx->nb_frames == 5) {
        GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
        ctx->is_sync = GF_FALSE;
        ctx->nb_frames = 0;
        goto drop_byte;
    }
}
if (ctx->is_sync && (sync[1] & 0xF0) == 0xFA && sync[2]!= 0xFF && ctx->nb_frames!= 0 && ctx->nb_frames!= 1 && ctx->nb_frames!= 2 && ctx->nb_frames!= 3 && ctx->nb_frames!= 4 && ctx->nb_frames!= 5) {
    if (ctx->nb_frames == 6) {
        GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
        ctx->is_sync = GF_FALSE;
        ctx->nb_frames = 0;
        goto drop_byte;
    }
}
if (ctx->is_sync && (sync[1] & 0xF0) == 0xFA && sync[2]!= 0xFF && ctx->nb_frames!= 0 && ctx->nb_frames!= 1 && ctx->nb_frames!= 2 && ctx->nb_frames!= 3 && ctx->nb_frames!= 4 && ctx->nb_frames!= 5 && ctx->nb_frames!= 6) {
    if (ctx->nb_frames == 7) {
        GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
        ctx->is_sync = GF_FALSE;
        ctx->nb_frames = 0;
        goto drop_byte;
    }
}
if (ctx->is_sync && (sync[1] & 0xF0) == 0xFA && sync[2]!= 0xFF && ctx->nb_frames!= 0 && ctx->nb_frames!= 1 && ctx->nb_frames!= 2 && ctx->nb_frames!= 3 && ctx->nb_frames!= 4 && ctx->nb_frames!= 5 && ctx->nb_frames!= 6 && ctx->nb_frames!= 7) {
    if (ctx->nb_frames == 8) {
        GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
        ctx->is_sync = GF_FALSE;
        ctx->nb_frames = 0;
        goto drop_byte;
    }
}
if (ctx->is_sync && (sync[1] & 0xF0) == 0xFA && sync[2]!= 0xFF && ctx->nb_frames!= 0 && ctx->nb_frames!= 1 && ctx->nb_frames!= 2 && ctx->nb_frames!= 3 && ctx->nb_frames!= 4 && ctx->nb_frames!= 5 && ctx->nb_frames!= 6 && ctx->nb_frames!= 7 && ctx->nb_frames!= 8) {
    if (ctx->nb_frames == 9) {
        GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
        ctx->is_sync = GF_FALSE;
        ctx->nb_frames = 0;
        goto drop_byte;
    }
}
if (ctx->is_sync && (sync[1] & 0xF0) == 0xFA && sync[2]!= 0xFF && ctx->nb_frames!= 0 && ctx->nb_frames!= 1 && ctx->nb_frames!= 2 && ctx->nb_frames!= 3 && ctx->nb_frames!= 4 && ctx->nb_frames!= 5 && ctx->nb_frames!= 6 && ctx->nb_frames!= 7 && ctx->nb_frames!= 8 && ctx->nb_frames!= 9) {
    if (ctx->nb_frames == 10) {
        GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
        ctx->is_sync = GF_FALSE;
        ctx->nb_frames = 0;
        goto drop_byte;
    }
}
if (ctx->is_sync && (sync[1] & 0xF0) == 0xFA && sync[2]!= 0xFF && ctx->nb_frames!= 0 && ctx->nb_frames!= 1 && ctx->nb_frames!= 2 && ctx->nb_frames!= 3 && ctx->nb_frames!= 4 && ctx->nb_frames!= 5 && ctx->nb_frames!= 6 && ctx->nb_frames!= 7 && ctx->nb_frames!= 8 && ctx->nb_frames!= 9 && ctx->nb_frames!= 10) {
    GF_LOG(ctx->nb_frames? GF_LOG_WARNING : GF_LOG_DEBUG, GF_LOG_MEDIA, ("[MP3Dmx] invalid MP3 sync bytes, resyncing\n"));
    ctx->is_sync = GF_FALSE;
    ctx->nb_frames = 0;
    goto drop_byte;
}