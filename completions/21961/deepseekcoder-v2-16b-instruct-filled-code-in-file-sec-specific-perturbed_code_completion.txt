tiff,TIFFTAG_ORIENTATION,&orientation,sans) == 1)
      {
        image->orientation=(size_t) orientation;
        if (image->orientation == 3 || image->orientation == 4)
          {
            image->page.width=image->rows;
            image->page.height=image->columns;
          }
        else
          {
            image->page.width=image->columns;
            image->page.height=image->rows;
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PAGENUMBER,&pages,sans) == 1)
      {
        image->page.x=(ssize_t) pages;
        image->page.y=(ssize_t) 0;
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SUBFILETYPE,&value,sans) == 1)
      {
        if ((value & FILETYPE_REDUCEDIMAGE) != 0)
          (void) SetImageProperty(image,"tiff:subfiletype","reducedimage",
            exception);
        if ((value & FILETYPE_PAGE) != 0)
          (void) SetImageProperty(image,"tiff:subfiletype","page",exception);
        if ((value & FILETYPE_MASK) != 0)
          (void) SetImageProperty(image,"tiff:subfiletype","mask",exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SAMPLESPERPIXEL,&samples_per_pixel,sans) == 1)
      {
        image->number_channels=samples_per_pixel;
        if (image->number_channels == 1)
          SetImageColorspace(image,GRAYColorspace,exception);
        if (image->number_channels == 3)
          SetImageColorspace(image,RGBColorspace,exception);
        if (image->number_channels == 4)
          SetImageColorspace(image,CMYKColorspace,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PLANARCONFIG,&interlace,sans) == 1)
      {
        if (interlace == PLANARCONFIG_SEPARATE)
          image->interlace=PlaneInterlace;
        else
          image->interlace=NoInterlace;
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_COMPRESSION,&compress_tag,sans) == 1)
      {
        if (compress_tag == COMPRESSION_ADOBE_DEFLATE)
          (void) SetImageProperty(image,"tiff:compression","deflate",exception);
        if (compress_tag == COMPRESSION_LZW)
          (void) SetImageProperty(image,"tiff:compression","lzw",exception);
        if (compress_tag == COMPRESSION_PACKBITS)
          (void) SetImageProperty(image,"tiff:compression","packbits",exception);
        if (compress_tag == COMPRESSION_ZSTD)
          (void) SetImageProperty(image,"tiff:compression","zstd",exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PREDICTOR,&value,sans) == 1)
      {
        if (value == PREDICTOR_HORIZONTAL)
          (void) SetImageProperty(image,"tiff:predictor","horizontal",
            exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_GRAYRESPONSEUNIT,&units,sans) == 1)
      {
        if (units == RESUNIT_CENTIMETER)
          (void) SetImageProperty(image,"tiff:gray-units","cm",exception);
        if (units == RESUNIT_INCH)
          (void) SetImageProperty(image,"tiff:gray-units","in",exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_GRAYRESPONSECURVE,&chromaticity,sans) == 1)
      {
        if (chromaticity != (float *) NULL)
          {
            (void) SetImageProperty(image,"tiff:gray-response-0",
              FormatLocaleString(NULL,0,"%.20g",chromaticity[0]),exception);
            (void) SetImageProperty(image,"tiff:gray-response-1",
              FormatLocaleString(NULL,0,"%.20g",chromaticity[1]),exception);
            (void) SetImageProperty(image,"tiff:gray-response-2",
              FormatLocaleString(NULL,0,"%.20g",chromaticity[2]),exception);
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_YCBCRCOEFFICIENTS,&chromaticity,sans) == 1)
      {
        if (chromaticity != (float *) NULL)
          {
            (void) SetImageProperty(image,"tiff:y-cb-cr-coeffs",
              FormatLocaleString(NULL,0,"%.20g %.20g %.20g",chromaticity[0],
              chomaticity[1],chromaticity[2]),exception);
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_REFERENCEBLACKWHITE,&chromaticity,sans) == 1)
      {
        if (chromaticity != (float *) NULL)
          {
            (void) SetImageProperty(image,"tiff:reference-black-white",
              FormatLocaleString(NULL,0,"%.20g %.20g",chromaticity[0],
              chomaticity[1]),exception);
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_TRANSFERFUNCTION,&chromaticity,sans) == 1)
      {
        if (chromaticity != (float *) NULL)
          {
            (void) SetImageProperty(image,"tiff:transfer-function",
              FormatLocaleString(NULL,0,"%.20g %.20g %.20g %.20g",chromaticity[0],
              chomaticity[1],chromaticity[2],chromaticity[3]),exception);
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SOFTWARE,&value,sans) == 1)
      {
        (void) SetImageProperty(image,"tiff:software",
          FormatLocaleString(NULL,0,"%u",value),exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_ARTIST,&value,sans) == 1)
      {
        (void) SetImageProperty(image,"tiff:artist",value,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_COPYRIGHT,&value,sans) == 1)
      {
        (void) SetImageProperty(image,"tiff:copyright",value,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_DATETIME,&value,sans) == 1)
      {
        (void) SetImageProperty(image,"tiff:timestamp",value,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_DOCUMENTNAME,&value,sans) == 1)
      {
        (void) SetImageProperty(image,"tiff:document",value,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_HOSTCOMPUTER,&value,sans) == 1)
      {
        (void) SetImageProperty(image,"tiff:hostcomputer",value,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_IMAGEDESCRIPTION,&value,sans) == 1)
      {
        (void) SetImageProperty(image,"comment",value,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_MAKE,&value,sans) == 1)
      {
        (void) SetImageProperty(image,"tiff:make",value,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_MODEL,&value,sans) == 1)
      {
        (void) SetImageProperty(image,"tiff:model",value,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_OPIIMAGEID,&count,&value) == 1)
      {
        (void) SetImageProperty(image,"tiff:image-id",value,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PAGENAME,&value,sans) == 1)
      {
        (void) SetImageProperty(image,"label",value,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_XMLPACKET,&count,&value) == 1)
      {
        (void) SetImageProperty(image,"xmp:xmp",value,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,34118,&count,&value) == 1)
      {
        (void) SetImageProperty(image,"tiff:kodak-33423",value,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,37724,&count,&value) == 1)
      {
        (void) SetImageProperty(image,"tiff:kodak-37724",value,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SUBFILETYPE,&value,sans) == 1)
      {
        if ((value & FILETYPE_REDUCEDIMAGE) != 0)
          (void) SetImageProperty(image,"tiff:subfiletype","reducedimage",
            exception);
        if ((value & FILETYPE_PAGE) != 0)
          (void) SetImageProperty(image,"tiff:subfiletype","page",exception);
        if ((value & FILETYPE_MASK) != 0)
          (void) SetImageProperty(image,"tiff:subfiletype","mask",exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_EXIFIFD,&offset) == 1)
      {
        if (offset != 0)
          TIFFGetEXIFProperties(tiff,image,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_RICHTIFFIPTC,&count,&value) == 1)
      {
        if (value != 0)
          TIFFGetEXIFProperties(tiff,image,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PHOTOSHOP,&count,&value) == 1)
      {
        if (value != 0)
          TIFFReadPhotoshopLayers(image_info,image,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_RICHDITMAP,&count,&value) == 1)
      {
        if (value != 0)
          (void) SetImageProperty(image,"tiff:rich-data",
            "DITHERTRANSFER",exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_STONITS,&value,sans) == 1)
      {
        if (value != 0)
          (void) SetImageProperty(image,"tiff:stonits",
            FormatLocaleString(NULL,0,"%u",value),exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_CFAPATTERN,&value,sans) == 1)
      {
        if (value != 0)
          (void) SetImageProperty(image,"tiff:cfapattern",
            FormatLocaleString(NULL,0,"%u",value),exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_MAKERNOTE,&count,&value) == 1)
      {
        if (value != 0)
          (void) SetImageProperty(image,"tiff:makernote",
            FormatLocaleString(NULL,0,"%u",value),exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_USERCOMMENT,&count,&value) == 1)
      {
        if (value != 0)
          (void) SetImageProperty(image,"tiff:usercomment",
            FormatLocaleString(NULL,0,"%u",value),exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SUBSECTIME,&value,sans) == 1)
      {
        if (value != 0)
          (void) SetImageProperty(image,"tiff:subsec-time",
            FormatLocaleString(NULL,0,"%u",value),exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SUBSECTIMEORIGINAL,&value,sans) == 1)
      {
        if (value != 0)
          (void) SetImageProperty(image,"tiff:subsec-time-original",
            FormatLocaleString(NULL,0,"%u",value),exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SUBSECTIMEDIGITIZED,&value,sans) == 1)
      {
        if