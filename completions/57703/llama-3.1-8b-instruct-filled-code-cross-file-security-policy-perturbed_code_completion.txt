if (is_generational(gc)) {
  /* disable generational mode */
  gc->generational = FALSE;
  /* reset the state */
  gc->sweeps = NULL;
  gc->gray_list = NULL;
  gc->atomic_gray_list = NULL;
  gc->live = 0;
  gc->live_after_mark = 0;
  gc->threshold = 0;
  gc->majorgc_old_threshold = 0;
  gc->full = FALSE;
  gc->iterating = FALSE;
  gc->disabled = FALSE;
  /* perform incremental sweep and finish */
  incremental_sweep_phase(mrbstateptr, gc, MRB_HEAP_PAGE_SIZE);
  incremental_gc_finish(mrbstateptr, gc);
  /* re-enable generational mode */
  gc->generational = TRUE;
}