static void
clear_all_old(mrb_state *mrbstateptr, mrb_gc *gc)
{
  mrb_assert(is_generational(gc));
  if (gc->full) {
    /* finish the half baked GC */
    incremental_gc_finish(mrbstateptr, gc);
  }
  // This block handles the transition of all live objects, including old ones, to the white color during garbage collection. 
  // The generational mode is temporarily disabled to reset the state, allowing the incremental sweep and finish processes 
  // to occur. After completing the sweep, the generational mode is re-enabled to continue with the generational garbage collection process.
  // <MASK>
  gc->atomic_gray_list = gc->gray_list = NULL;
  gc->generational = FALSE;
  gc->full = FALSE;
  gc->threshold = (gc->live_after_mark/100) * gc->interval_ratio;
  gc->majorgc_old_threshold = gc->live_after_mark/100 * MAJOR_GC_INC_RATIO;
  gc->state = MRB_GC_STATE_ROOT;
  root_scan_phase(mrbstateptr, gc);
  flip_white_part(gc);
  gc->state = MRB_GC_STATE_MARK;
  gc->generational = TRUE;
}