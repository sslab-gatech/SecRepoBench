mrb_bool old_generational = gc->generational;
gc->generational = FALSE;  /* temporarily disable generational mode */

/* Finish the current GC cycle if we're in the middle of one */
if (gc->state != MRB_GC_STATE_ROOT) {
  incremental_gc_finish(mrbstateptr, gc);
}

/* Restore generational mode */
gc->generational = old_generational;