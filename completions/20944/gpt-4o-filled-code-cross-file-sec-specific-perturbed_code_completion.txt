// Retrieve the 'head' table from the face
      const head_table_t *head_table = (const head_table_t *)hb_face_reference_table(faceptr, HB_TAG('h','e','a','d'));
      if (!head_table) return; // Exit if head table is not found

      // Check format values
      if (head_table->magicNumber != 0x5F0F3CF5) return; // Exit if magic number is incorrect

      // Determine the short_offset based on the indexToLocFormat from the 'head' table
      bool short_offset = head_table->indexToLocFormat == 0;

      // Reference the 'loca' and 'glyf' tables from the face
      const loca_table_t *loca_table = (const loca_table_t *)hb_face_reference_table(faceptr, HB_TAG('l','o','c','a'));
      const glyf_table_t *glyf_table = (const glyf_table_t *)hb_face_reference_table(faceptr, HB_TAG('g','l','y','f'));
      if (!loca_table || !glyf_table) return; // Exit if loca or glyf table is not found

      // Calculate num_glyphs using the length of the loca_table, adjusting for offset format
      unsigned int loca_length = hb_face_get_table_length(faceptr, HB_TAG('l','o','c','a'));
      unsigned int num_glyphs = short_offset ? (loca_length / 2) : (loca_length / 4);

      // Store the calculated values in the face structure
      faceptr->short_offset = short_offset;
      faceptr->num_glyphs = num_glyphs;
      faceptr->loca_table = loca_table;
      faceptr->glyf_table = glyf_table;