unsigned int loca_len = hb_sanitize_context_get_length (faceptr->sanitizer, &faceptr->loca_table);
      unsigned int glyf_len = hb_sanitize_context_get_length (faceptr->sanitizer, &faceptr->glyf_table);

      if (unlikely (!loca_len || !glyf_len))
        return;

      faceptr->num_glyphs = loca_len / (faceptr->short_offset ? 2 : 4) - 1;

      if (faceptr->num_glyphs > 0x3FFFFFFF) /* HB_OT_MAX_GLYPHS */
        faceptr->num_glyphs = 0x3FFFFFFF; /* HB_OT_MAX_GLYPHS */