face = faceptr;
short_offset = (hb_face_get_index_to_loc_format (face) == 0)? 2 : 4;
head = hb_sanitize_context_t ().reference_table<head> (face);
if (unlikely (head->indexToLocFormat!= 0 && head->indexToLocFormat!= 1))
  return;
loca_table = hb_sanitize_context_t ().reference_table<loca> (face);
glyf_table = hb_sanitize_context_t ().reference_table<glyf> (face);
num_glyphs = (loca_table->glyphOffsets[loca_table->numGlyphs].offset - short_offset) / short_offset;