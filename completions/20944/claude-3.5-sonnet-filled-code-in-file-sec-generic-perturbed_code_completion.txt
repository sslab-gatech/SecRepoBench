face = faceptr;
const OT::head &head = *face->table.head;
if (head.indexToLocFormat > 1 || head.glyphDataFormat != 0)
  return;

short_offset = 0 == head.indexToLocFormat;
loca_table = face->table.loca.get_blob ();
glyf_table = face->table.glyf.get_blob ();
num_glyphs = loca_table.get_length () / (short_offset ? 2 : 4) - 1;