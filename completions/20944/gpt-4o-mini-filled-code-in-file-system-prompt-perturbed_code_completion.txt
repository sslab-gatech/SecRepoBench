face = faceptr;
      hb_blob_t *head_blob = hb_sanitize_context_t ().reference_table<head> (face);
      if (unlikely (!head_blob)) return;

      head *head_table = (head *) hb_blob_get_data_writable (head_blob, nullptr);
      short_offset = head_table->indexToLocFormat == 0;
      hb_blob_destroy (head_blob);

      loca_table = hb_sanitize_context_t ().reference_table<loca> (face);
      glyf_table = hb_sanitize_context_t ().reference_table<glyf> (face);

      num_glyphs = short_offset ? ((const HBUINT16 *) loca_table->dataZ.arrayZ)[face->table.hmtx->num_glyphs] : ((const HBUINT32 *) loca_table->dataZ.arrayZ)[face->table.hmtx->num_glyphs];