/* Initialize internal variables and tables for the font face.
   Set initial values for short_offset, num_glyphs, loca_table, and glyf_table.
   Assign the input face to the face member variable.
   Retrieve the 'head' table from the face and check format values.
   If format values indicate an unknown format, exit without further processing.
   Determine the short_offset based on the indexToLocFormat from the 'head' table.
   Reference the 'loca' and 'glyf' tables from the face using a sanitize context.
   Calculate num_glyphs using the length of the loca_table, adjusting for offset format. */
void init (hb_face_t *faceptr)
{
  face = faceptr;
  hb_sanitize_context_t c (face);
  loca_table = c.reference_table<loca> ();
  glyf_table = c.reference_table<glyf> ();
  const head *head_table = face->table.head;
  if (head_table->indexToLocFormat != 0 && head_table->indexToLocFormat != 1)
    return;
  short_offset = head_table->indexToLocFormat == 0;
  num_glyphs = short_offset ? (loca_table->dataZ.arrayZ[loca_table->dataZ.len ()] + 1) / 2 : loca_table->dataZ.arrayZ[loca_table->dataZ.len ()];
}