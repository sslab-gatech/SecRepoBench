face = faceptr;
short_offset = (hb_face_get_table_format(face, HB_OT_TAG_head) == 1)? 2 : 0;
loca_table = hb_sanitize_context_create (face, HB_OT_TAG_loca, &num_loca);
glyf_table = hb_sanitize_context_create (face, HB_OT_TAG_glyf, &num_glyf);
num_glyphs = (short_offset == 2)? (num_loca / 2) - 1 : num_loca - 1;