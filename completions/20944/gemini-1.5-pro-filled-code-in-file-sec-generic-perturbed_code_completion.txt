face = faceptr;

      unsigned int loca_format = face->table.head->indexToLocFormat;
      short_offset = loca_format == 0;

      hb_blob_t *glyf_blob = hb_sanitize_context_t ().reference_table<glyf> (face);
      hb_blob_t *loca_blob = hb_sanitize_context_t ().reference_table<loca> (face);

      glyf_table = hb_blob_get_ptr (glyf_blob);
      loca_table = hb_blob_get_ptr (loca_blob);

      hb_blob_destroy (glyf_blob);
      hb_blob_destroy (loca_blob);

      if (unlikely (loca_format > 1))
	return;

      num_glyphs = loca_table.get_length () / (short_offset ? 2 : 4) - 1;