if (!num_glyphs)
        return;

      face = faceptr;
      head = face->reference_table<OT::head> (face);
      if (head->indexToLocFormat > 1 || head->glyphDataFormat != 0)
        return;

      short_offset = head->indexToLocFormat == 0;
      hb_sanitize_context_t c;
      loca_table = c.reference_table<OT::loca> (face);
      glyf_table = c.reference_table<OT::glyf> (face);

      num_glyphs = hb_max (1u, loca_table.get_length () / (short_offset ? 2 : 4)) - 1;