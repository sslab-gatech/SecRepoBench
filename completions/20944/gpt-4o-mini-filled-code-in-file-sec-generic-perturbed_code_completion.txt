face = faceptr;
      hb_blob_t *head_blob = hb_sanitize_context_t ().reference_table<head> (face);
      if (unlikely (!head_blob)) return;

      head *head_table = (head *) hb_blob_get_data_writable (head_blob, nullptr);
      short_offset = head_table->indexToLocFormat == 0;
      loca_table = hb_blob_create (nullptr, 0, HB_MEMORY_MODE_WRITABLE, nullptr, free);
      glyf_table = hb_blob_create (nullptr, 0, HB_MEMORY_MODE_WRITABLE, nullptr, free);

      if (short_offset)
        num_glyphs = (hb_blob_get_length (loca_table) / sizeof (HBUINT16)) - 1;
      else
        num_glyphs = (hb_blob_get_length (loca_table) / sizeof (HBUINT32)) - 1;

      hb_blob_destroy (head_blob);