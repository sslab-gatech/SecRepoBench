// Assign the input face to the face member variable
      this->face = faceptr;

      // Retrieve the 'head' table from the face
      const head_table_t *head = (const head_table_t *) face->reference_table(HB_OT_TAG_head);
      if (!head) return; // Exit if the 'head' table is not found

      // Check format values in the 'head' table
      if (head->magicNumber != 0x5F0F3CF5 || head->indexToLocFormat > 1) {
        face->destroy_table(HB_OT_TAG_head);
        return; // Exit if format values indicate an unknown format
      }

      // Determine the short_offset based on indexToLocFormat
      this->short_offset = head->indexToLocFormat == 0;

      // Release the 'head' table after use
      face->destroy_table(HB_OT_TAG_head);

      // Reference the 'loca' and 'glyf' tables from the face
      this->loca_table = face->reference_table(HB_OT_TAG_loca);
      this->glyf_table = face->reference_table(HB_OT_TAG_glyf);

      // Ensure both tables are valid
      if (!this->loca_table || !this->glyf_table) {
        if (this->loca_table) face->destroy_table(HB_OT_TAG_loca);
        if (this->glyf_table) face->destroy_table(HB_OT_TAG_glyf);
        return; // Exit if either table is invalid
      }

      // Calculate num_glyphs using the length of the loca_table
      unsigned int loca_length = this->loca_table->length;
      if (this->short_offset) {
        this->num_glyphs = loca_length / 2 - 1;
      } else {
        this->num_glyphs = loca_length / 4 - 1;
      }