face = faceptr;
const hb_ot_head_table_t *head = hb_ot_head_table_get(face);
if (head->format != 0 && head->format != 1) {
    return; // Unknown format, exit
}
short_offset = (head->indexToLocFormat == 0) ? 0 : 1;
loca_table = hb_ot_loca_table_get(face, short_offset);
glyf_table = hb_ot_glyf_table_get(face);
num_glyphs = (short_offset == 0) ? (loca_table->length / sizeof(uint16_t)) - 1 : (loca_table->length / sizeof(uint32_t)) - 1;