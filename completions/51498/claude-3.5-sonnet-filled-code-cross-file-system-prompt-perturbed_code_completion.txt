if (!checkcpdtable.empty()) {
  for (size_t j = 0; j < checkcpdtable.size(); j++) {
    if (isRevSubset(checkcpdtable[j].pattern2.c_str(), st.c_str() + i - 1, i)) {
      std::string p1 = checkcpdtable[j].pattern1;
      std::string p2 = checkcpdtable[j].pattern2;
      if (p1.size() <= i && p2.size() <= st.size() - i &&
          st.compare(0, p1.size(), p1) == 0 &&
          st.compare(i, p2.size(), p2) == 0) {
        st.replace(0, p1.size(), checkcpdtable[j].pattern3);
        st.replace(i - p1.size() + checkcpdtable[j].pattern3.size(),
                   p2.size(), checkcpdtable[j].pattern4);
        i = i - p1.size() + checkcpdtable[j].pattern3.size() +
            checkcpdtable[j].pattern4.size();
        len = st.size();
        soldi = i;
        oldlen = len;
        oldcmin = cmin;
        oldcmax = cmax;
        setcminmax(&cmin, &cmax, st.c_str(), len);
        break;
      }
    }
  }
}