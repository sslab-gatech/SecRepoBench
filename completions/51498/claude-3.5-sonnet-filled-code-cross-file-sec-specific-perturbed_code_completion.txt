if (!checkcpdtable.empty()) {
    for (size_t j = 0; j < checkcpdtable.size(); ++j) {
        if (isRevSubset(checkcpdtable[j].pattern2, st.c_str() + i, len - i) &&
            isRevSubset(checkcpdtable[j].pattern1, st.c_str(), i)) {
            std::string newword = checkcpdtable[j].pattern3;
            size_t p3_len = newword.size();
            if (p3_len) {
                size_t p1_len = strlen(checkcpdtable[j].pattern1);
                size_t p2_len = strlen(checkcpdtable[j].pattern2);
                st.replace(i - p1_len, p1_len + p2_len, newword);
                i += p3_len - p1_len;
                len += p3_len - (p1_len + p2_len);
                cmax = len;
            }
            soldi = i;
            oldlen = len;
            oldcmin = cmin;
            oldcmax = cmax;
            setcminmax(&cmin, &cmax, st.c_str(), len);
            break;
        }
    }
}