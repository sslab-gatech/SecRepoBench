if (!checkcpdtable.empty()) {
    for (size_t j = 0; j < checkcpdtable.size(); j++) {
        if (i + checkcpdtable[j].pattern.size() <= st.size()) {
            if (st.compare(i, checkcpdtable[j].pattern.size(), checkcpdtable[j].pattern) == 0) {
                size_t remaining = st.size() - i - checkcpdtable[j].pattern.size();
                if (i + checkcpdtable[j].pattern.size() + checkcpdtable[j].pattern2.size() <= st.size()) {
                    st.replace(i, checkcpdtable[j].pattern.size() + checkcpdtable[j].pattern2.size(),
                               checkcpdtable[j].pattern3);
                    len = st.size();
                    if (i + 1 < len) {
                        i++;
                    }
                    cmax = len;
                    soldi = i;
                    oldlen = len;
                    oldcmin = cmin;
                    oldcmax = cmax;
                    scpd = j + 1;
                    break;
                }
            }
        }
    }
}