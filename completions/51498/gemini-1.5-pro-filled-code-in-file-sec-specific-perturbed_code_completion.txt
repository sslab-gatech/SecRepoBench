if (!checkcpdtable.empty() && !simplifiedcpd && scpd < checkcpdtable.size()) {
  size_t cplen = checkcpdtable[scpd].pattern3.size();
  if (cplen != 0 && i + cplen <= len &&
      strncmp(st.c_str() + i, checkcpdtable[scpd].pattern3.c_str(), cplen) == 0) {
    soldi = i;
    oldcmin = cmin;
    oldcmax = cmax;
    oldlen = len;
    st.replace(i, cplen, checkcpdtable[scpd].pattern);
    len = st.size();
    setcminmax(&cmin, &cmax, st.c_str(), len);
    i = (checkcpdtable[scpd].pattern.empty()) ? i : i - 1;
  } else {
    scpd++;
    continue;
  }
} else {
  scpd++;
}