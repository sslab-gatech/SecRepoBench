// Check if there is an active compound pattern processing.
// Find a matching pattern in the compound pattern table.
// If a match is found, replace parts of the string 'st' with new patterns
// as specified in the compound pattern table.
// Update the indices and length parameters to reflect the changes made
// to the string 'st'.
// Adjust character minimum and maximum values for further processing.

int cpdpat_found = 0;
for (size_t j = 0; j < checkcpdtable.size(); ++j) {
    if (checkcpdtable[j].pattern && isRevSubset(checkcpdtable[j].pattern, st.c_str() + i, cmax - i)) {
        cpdpat_found = 1;
        size_t plen = strlen(checkcpdtable[j].pattern);
        st.replace(i, plen, checkcpdtable[j].replacement);
        len = st.size();
        cmax = cmax - plen + strlen(checkcpdtable[j].replacement);
        i += strlen(checkcpdtable[j].replacement) - 1;
        break;
    }
}

if (!cpdpat_found) {
    st[i] = ch;
}