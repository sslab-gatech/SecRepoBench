// Check if there is an active compound pattern processing.
        if (!checkcpdtable.empty() && scpd < checkcpdtable.size()) {
          const CpdTableEntry& cpdentry = checkcpdtable[scpd];
          if (cpdentry.pattern && cpdentry.pattern[0] != '\0') {
            size_t patlen = strlen(cpdentry.pattern);
            if (i >= patlen && strncmp(st.c_str() + i - patlen, cpdentry.pattern, patlen) == 0) {
              // Found a matching pattern, replace parts of the string 'st'
              st.replace(i - patlen, patlen, cpdentry.replacement);
              // Update indices and length parameters
              i = i - patlen + cpdentry.replacement.size();
              len = st.size();
              // Adjust character minimum and maximum values
              setcminmax(&cmin, &cmax, st.c_str(), len);
            }
          }
        }