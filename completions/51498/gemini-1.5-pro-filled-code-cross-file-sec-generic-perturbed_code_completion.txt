if (!checkcpdtable.empty() && !onlycpdrule) {
  for (scpd = 0; scpd < checkcpdtable.size(); scpd++) {
    if (checkcpdtable[scpd].cpat.empty())
      continue;
    if (i > 0 && compound_word[i - 1] == checkcpdtable[scpd].cpat[0] &&
        !strncmp(compound_word.c_str() + i, checkcpdtable[scpd].cpat.c_str() + 1,
                 checkcpdtable[scpd].cpat.size() - 1)) {
      soldi = i;
      oldlen = len;
      oldcmin = cmin;
      oldcmax = cmax;
      st.replace(i - 1, checkcpdtable[scpd].cpat.size(),
                 checkcpdtable[scpd].rpat);
      len = st.size();
      setcminmax(&cmin, &cmax, st.c_str(), len);
      if (utf8) {
        int j = i - 1;
        for (; j < cmin; j++) {
          if ((st[j] & 0xc0) != 0x80)
            break;
        }
        i = j;
      } else {
        i = i - 1;
      }
      break;
    }
  }
}