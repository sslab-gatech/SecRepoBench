if (!checkcpdtable.empty() && !onlycpdrule) {
  for (size_t j = 0; j < checkcpdtable.size(); j++) {
    if (checkcpdtable[j].cpat.empty())
      continue;
    int patmatch = cpdpat_check(st.c_str(), i, NULL, NULL, 0, &checkcpdtable[j]);
    if (patmatch == 1) {
      // store old values
      soldi = i;
      oldlen = len;
      oldcmin = cmin;
      oldcmax = cmax;

      // replace a part of compound word with a new pattern
      st.replace(i, checkcpdtable[j].striplen, checkcpdtable[j].cpat);

      // update indices and length parameters
      i += checkcpdtable[j].patlen - checkcpdtable[j].striplen;
      len = st.size();

      // adjust character minimum and maximum values
      setcminmax(&cmin, &cmax, st.c_str(), len);

      scpd = j + 1;
      break;
    } else if (patmatch == -1) {
      return NULL;
    }
  }
}