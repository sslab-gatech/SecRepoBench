if (ret != NULL) {
    // If an existing ID is found, update the attribute and ID structure
    if (ret->attr != NULL)
        ret->attr->atype = 0;
    ret->attr = attribute;
    ret->lineno = xmlGetLineNo(attribute->parent);
    attribute->atype = XML_ATTRIBUTE_ID;
    attribute->id = ret;
    return(1);
}