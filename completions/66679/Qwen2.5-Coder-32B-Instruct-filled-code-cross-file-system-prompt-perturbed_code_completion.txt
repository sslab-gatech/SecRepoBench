{
    if (ret->attr != NULL) {
        ret->attr->atype = XML_ATTRIBUTE_CDATA; // Clear the previous ID association
        ret->attr->id = NULL;
    }
    ret->attr = attribute; // Establish new link
    attribute->atype = XML_ATTRIBUTE_ID;
    if (!streaming)
        attribute->id = ret;
    if (id != NULL)
        *id = ret;
    return(1);
}