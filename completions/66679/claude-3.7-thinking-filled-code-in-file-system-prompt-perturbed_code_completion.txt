{
    /* 
     * If we found an existing ID with this value, update its attribute.
     * First, clear the ID reference from the old attribute if there is one.
     */
    if (ret->attr != NULL)
        ret->attr->id = NULL;
    
    /* Link the ID to the new attribute */
    ret->attr = attribute;
    
    /* Mark the attribute as being an ID type */
    attribute->atype = XML_ATTRIBUTE_ID;
    
    /* Link the attribute back to the ID */
    if (!streaming)
        attribute->id = ret;
    
    /* Return 1 to indicate we're using an existing ID */
    return(1);
}