{
    if (ret->attr && ret->attr->id == ret) {
        /* Clear any previous association of this ID with another attribute */
        ret->attr->id = NULL;
        ret->attr->atype = XML_ATTRIBUTE_NONE;
    }
    /* Establish the new link between this ID and the current attribute */
    ret->attr = attribute;
    attribute->id = ret;
    attribute->atype = XML_ATTRIBUTE_ID;

    /* If requested, return the updated ID pointer */
    if (id != NULL)
        *id = ret;

    return(1);
}