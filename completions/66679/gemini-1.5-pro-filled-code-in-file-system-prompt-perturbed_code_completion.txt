{
            if (attr != NULL) {
                xmlErrValidNode(ctxt, attr->parent, XML_DTD_ID_REDEFINED,
                    "ID %s already defined\n", value, NULL, NULL);
                if (attr->id != NULL && attr->id != ret) {
                    attr->id->attr = NULL;
                }
                attr->id = ret;
            }
            ret->attr = attribute;
            ret->lineno = xmlGetLineNo(attribute->parent);
            if (id != NULL)
                *id = ret;
            return (0);
        }