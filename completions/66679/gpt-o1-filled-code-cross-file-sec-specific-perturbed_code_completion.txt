{
    xmlAttrPtr oldAttr = ret->attr;
    if (oldAttr != NULL && oldAttr->id == ret) {
        oldAttr->id = NULL;
        oldAttr->atype = 0;
    }
    ret->attr = attribute;
    attribute->id = ret;
    attribute->atype = XML_ATTRIBUTE_ID;

    if (id != NULL)
        *id = ret;
    return(1);
}