{
    xmlAttrPtr oldAttr = ret->attr;

    if (oldAttr != NULL) {
        oldAttr->atype = XML_ATTRIBUTE_DECLARED; // Reset the attribute type if it was previously an ID
        oldAttr->id = NULL; // Clear the association with the ID
    }

    ret->attr = (xmlAttrPtr) attribute;
    attribute->atype = XML_ATTRIBUTE_ID;
    attribute->id = ret;

    return(1);
}