{
    /* The previously parsed node is used as the first dictionary key.
       It must be a string. */
    plist_t first_key_node = *plist;
    if (first_key_node->data->type != PLIST_STRING) {
        plist_free(first_key_node);
        err = PLIST_ERR_PARSE;
        return err;
    }
    /* Create a new dictionary to hold key/value pairs. */
    plist_t dict = plist_new_dict();

    /* Skip the '=' character and any following whitespace. */
    ctx.pos++; 
    parse_skip_ws(&ctx);

    /* Parse the value corresponding to the first key. */
    plist_t value = NULL;
    if (node_from_openstep(&ctx, &value) != PLIST_ERR_SUCCESS || !value) {
        plist_free(first_key_node);
        plist_free(dict);
        err = PLIST_ERR_PARSE;
        return err;
    }
    /* Insert the first key/value pair into the dictionary.
       The dictionary insertion function is assumed to take ownership
       of the key string from the node. */
    plist_dict_insert_item(dict, first_key_node->data->strval, value);
    plist_free(first_key_node);  /* free the key node container */

    parse_skip_ws(&ctx);
    /* Continue parsing additional key/value pairs, if any.
       Pairs are expected to be separated by semicolons. */
    while (ctx.pos < ctx.end && *ctx.pos == ';') {
        /* Skip the semicolon and any whitespace. */
        ctx.pos++;
        parse_skip_ws(&ctx);

        /* Parse the next key. */
        plist_t keynode = NULL;
        if (node_from_openstep(&ctx, &keynode) != PLIST_ERR_SUCCESS || !keynode) {
            plist_free(dict);
            err = PLIST_ERR_PARSE;
            return err;
        }
        if (keynode->data->type != PLIST_STRING) {
            plist_free(keynode);
            plist_free(dict);
            err = PLIST_ERR_PARSE;
            return err;
        }

        parse_skip_ws(&ctx);
        if (ctx.pos >= ctx.end || *ctx.pos != '=') {
            plist_free(keynode);
            plist_free(dict);
            err = PLIST_ERR_PARSE;
            return err;
        }
        /* Skip '=' and any following whitespace */
        ctx.pos++;
        parse_skip_ws(&ctx);

        /* Parse the value for this key */
        plist_t valnode = NULL;
        if (node_from_openstep(&ctx, &valnode) != PLIST_ERR_SUCCESS || !valnode) {
            plist_free(keynode);
            plist_free(dict);
            err = PLIST_ERR_PARSE;
            return err;
        }
        /* Insert the key/value pair into the dictionary */
        plist_dict_insert_item(dict, keynode->data->strval, valnode);
        plist_free(keynode);

        parse_skip_ws(&ctx);
    }
    /* Replace the original node with the newly built dictionary. */
    *plist = dict;
}