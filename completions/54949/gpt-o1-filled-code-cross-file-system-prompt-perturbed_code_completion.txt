{
    /* Attempt to parse the remaining input as a dictionary of strings */
    plist_t dict = plist_new_dict();
    while (ctx.pos < ctx.end && !ctx.err) {
        parse_skip_ws(&ctx);
        if (ctx.pos >= ctx.end) {
            break;
        }

        /* parse the key (string) */
        plist_t key = NULL;
        int suberr = node_from_openstep(&ctx, &key);
        if (suberr != 0 || !key) {
            plist_free(dict);
            plist_free(*plist);
            *plist = NULL;
            err = PLIST_ERR_PARSE;
            break;
        }

        parse_skip_ws(&ctx);
        /* check for '=' */
        if (ctx.pos >= ctx.end || *ctx.pos != '=') {
            plist_free(key);
            plist_free(dict);
            plist_free(*plist);
            *plist = NULL;
            err = PLIST_ERR_PARSE;
            break;
        }
        ctx.pos++;

        /* parse the value (string) */
        parse_skip_ws(&ctx);
        plist_t val = NULL;
        suberr = node_from_openstep(&ctx, &val);
        if (suberr != 0 || !val) {
            plist_free(key);
            plist_free(dict);
            plist_free(*plist);
            *plist = NULL;
            err = PLIST_ERR_PARSE;
            break;
        }

        /* skip optional ';' */
        parse_skip_ws(&ctx);
        if (ctx.pos < ctx.end && *ctx.pos == ';') {
            ctx.pos++;
        }

        /* insert key-value pair into the dictionary */
        char* keystr = NULL;
        plist_get_string_val(key, &keystr);
        if (!keystr) {
            plist_free(val);
            plist_free(key);
            plist_free(dict);
            plist_free(*plist);
            *plist = NULL;
            err = PLIST_ERR_PARSE;
            break;
        }
        plist_dict_set_item(dict, keystr, val);
        free(keystr);
        plist_free(key);
    }

    if (!err && !ctx.err) {
        plist_free(*plist);
        *plist = dict;
    } else if (!err) {
        /* set error if ctx.err was triggered during parsing */
        plist_free(dict);
        plist_free(*plist);
        *plist = NULL;
        err = PLIST_ERR_PARSE;
    }
}