// Attempt to parse the data as a dictionary of 'strings'.
// If parsing fails, free the allocated plist and set an error code.
// If parsing succeeds, assign the newly created dictionary to the plist.
int err = plist_from_xml(ctx.pos, ctx.end - ctx.pos, plist);
if (err != PLIST_ERR_SUCCESS) {
    plist_free(*plist);
    *plist = NULL;
    return PLIST_ERR_PARSE;
}