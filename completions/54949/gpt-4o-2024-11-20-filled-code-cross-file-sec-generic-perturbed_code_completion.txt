{
            plist_t dict = plist_new_dict();
            plist_t key = NULL;
            plist_t value = NULL;

            while (ctx.pos < ctx.end && *ctx.pos != ';') {
                parse_skip_ws(&ctx);

                // Parse key
                int key_err = node_from_openstep(&ctx, &key);
                if (key_err != 0 || !key || key->type != PLIST_STRING) {
                    plist_free(dict);
                    plist_free(key);
                    plist_free(value);
                    *plist = NULL;
                    return PLIST_ERR_PARSE;
                }

                parse_skip_ws(&ctx);

                // Expect '='
                if (ctx.pos >= ctx.end || *ctx.pos != '=') {
                    plist_free(dict);
                    plist_free(key);
                    plist_free(value);
                    *plist = NULL;
                    return PLIST_ERR_PARSE;
                }
                ctx.pos++;

                parse_skip_ws(&ctx);

                // Parse value
                int value_err = node_from_openstep(&ctx, &value);
                if (value_err != 0 || !value) {
                    plist_free(dict);
                    plist_free(key);
                    plist_free(value);
                    *plist = NULL;
                    return PLIST_ERR_PARSE;
                }

                // Add key-value pair to dictionary
                plist_dict_set_item(dict, key->data->strval, value);

                // Free key as it is now owned by the dictionary
                plist_free(key);
                key = NULL;

                parse_skip_ws(&ctx);

                // Expect ',' or ';'
                if (ctx.pos < ctx.end && *ctx.pos == ',') {
                    ctx.pos++;
                } else if (ctx.pos < ctx.end && *ctx.pos == ';') {
                    break;
                } else {
                    plist_free(dict);
                    plist_free(value);
                    *plist = NULL;
                    return PLIST_ERR_PARSE;
                }
            }

            if (ctx.pos >= ctx.end || *ctx.pos != ';') {
                plist_free(dict);
                *plist = NULL;
                return PLIST_ERR_PARSE;
            }

            ctx.pos++; // Skip the ';'
            *plist = dict;
        }