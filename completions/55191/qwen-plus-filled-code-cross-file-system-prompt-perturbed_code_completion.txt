// Validate if the current segment of the word is acceptable for compounding.
(rv && ((compoundflag && TESTAFF(rv->astr, compoundflag, rv->alen)) ||
        (compoundbegin && !wordnum && TESTAFF(rv->astr, compoundbegin, rv->alen)) ||
        (compoundmiddle && wordnum && TESTAFF(rv->astr, compoundmiddle, rv->alen)) ||
        (!defcpdtable.empty() && onlycpdrule &&
         defcpd_check(&words, wnum, rv, rwords, 0))) &&
    !(TESTAFF(rv->astr, forbiddenword, rv->alen) || TESTAFF(rv->astr, needaffix, rv->alen)))