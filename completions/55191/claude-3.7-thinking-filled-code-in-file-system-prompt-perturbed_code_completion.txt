(rv && (
    checked_prefix || 
    (words && words[wnum]) ||
    (compoundflag && TESTAFF(rv->astr, compoundflag, rv->alen)) ||
    ((oldwordnum == 0) && compoundbegin && TESTAFF(rv->astr, compoundbegin, rv->alen)) ||
    ((oldwordnum > 0) && compoundmiddle && TESTAFF(rv->astr, compoundmiddle, rv->alen))
) &&
!((checkcompoundtriple && !words && (word[char_index-1] == word[char_index]) && 
   (((char_index > 1) && (word[char_index-1] == word[char_index-2])) || 
    ((char_index < word.size()-1) && (word[char_index-1] == word[char_index+1])))) ||
  (!checkcpdtable.empty() && !words && cpdpat_check(word, char_index, rv_first, rv, affixed)) ||
  (checkcompoundcase && !words && cpdcase_check(word, char_index))))