(rv &&
  (
    (compoundflag && !words && !onlycpdrule &&
     TESTAFF(rv->astr, compoundflag, rv->alen)) ||
    (compoundbegin && !wordnum && !onlycpdrule &&
     TESTAFF(rv->astr, compoundbegin, rv->alen)) ||
    (compoundmiddle && wordnum && !words && !onlycpdrule &&
     TESTAFF(rv->astr, compoundmiddle, rv->alen)) ||
    (!defcpdtable.empty() && onlycpdrule &&
     ((!words && !wordnum &&
       defcpd_check(&words, wnum, rv, rwords, 0)) ||
      (words && defcpd_check(&words, wnum, rv, rwords, 0))))
  ) &&
  (
    (scpd == 0) ||
    (checkcpdtable[scpd - 1].cond == FLAG_NULL) ||
    TESTAFF(rv->astr, checkcpdtable[scpd - 1].cond, rv->alen)
  )
)