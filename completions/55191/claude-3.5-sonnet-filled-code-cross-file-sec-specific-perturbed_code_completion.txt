(rv && (
    // Check if the word is acceptable as a compound word
    (compoundflag && TESTAFF(rv->astr, compoundflag, rv->alen)) ||
    // Check if it's the first word and has the compound begin flag
    (!wordnum && compoundbegin && TESTAFF(rv->astr, compoundbegin, rv->alen)) ||
    // Check if it's not the first word and has the compound middle flag
    (wordnum && compoundmiddle && TESTAFF(rv->astr, compoundmiddle, rv->alen)) ||
    // Check against the compound pattern table if it exists
    (!defcpdtable.empty() && defcpd_check(&words, wnum, rv, rwords, 0))
) &&
// Ensure the word doesn't violate any compound patterns
(!checkcpdtable.empty() && scpd == 0 || !cpdpat_check(word, char_index, rv, NULL, affixed)) &&
// Check if the word doesn't create a forbidden compound triple
(!checkcompoundtriple || !checkcompoundtriple || !striple ||
 (word.size() >= char_index + 1 && word[char_index] != word[char_index-1])) &&
// Verify the capitalization is correct
(!checkcompoundcase || !cpdcase_check(word, char_index)))