(rv && (
    // Check if the word is acceptable as a compound word
    (compoundflag && TESTAFF(rv->astr, compoundflag, rv->alen)) ||
    // Check if it's the first word and has the compound begin flag
    (!wordnum && compoundbegin && TESTAFF(rv->astr, compoundbegin, rv->alen)) ||
    // Check if it's not the first word and has the compound middle flag
    (wordnum && compoundmiddle && TESTAFF(rv->astr, compoundmiddle, rv->alen)) ||
    // Check against the compound pattern table if it's not empty
    (!defcpdtable.empty() && defcpd_check(&words, wnum, rv, rwords, 0))
) &&
// Ensure the word doesn't violate any compound patterns
(!checkcpdtable.empty() && scpd == 0 || !cpdpat_check(word, char_index, rv, NULL, affixed)) &&
// Check if the word doesn't contain a forbidden compound triple
(!checkcompoundtriple || !striple || checkedstriple || !word.compare(char_index - 1, 3, word, char_index, 3)) &&
// Ensure the word doesn't violate case restrictions
(!checkcompoundcase || !cpdcase_check(word, char_index)))