(rv &&
  // must not be a forbidden word, needaffix, or onlyupcase, or nosuggest (if is_sug)
  !(rv->astr && (TESTAFF(rv->astr, forbiddenword, rv->alen) ||
                 TESTAFF(rv->astr, needaffix, rv->alen) ||
                 TESTAFF(rv->astr, ONLYUPCASEFLAG, rv->alen) ||
                 (is_sug && nosuggest && TESTAFF(rv->astr, nosuggest, rv->alen))))
  // must not have compoundforbidflag in prefix or suffix
  && !((pfx && pfx->getCont() && TESTAFF(pfx->getCont(), compoundforbidflag, pfx->getContLen())) ||
       (sfx && sfx->getCont() && TESTAFF(sfx->getCont(), compoundforbidflag, sfx->getContLen())))
  // must not have compoundend in prefix or suffix if not checked_prefix
  && !(compoundend && !checked_prefix && !hu_mov_rule &&
       ((pfx && pfx->getCont() && TESTAFF(pfx->getCont(), compoundend, pfx->getContLen())) ||
        (sfx && sfx->getCont() && TESTAFF(sfx->getCont(), compoundend, sfx->getContLen()))))
  // must not have compoundmiddle in prefix or suffix if wordnum==0 and not checked_prefix
  && !(compoundmiddle && wordnum == 0 && !checked_prefix && !hu_mov_rule &&
       ((pfx && pfx->getCont() && TESTAFF(pfx->getCont(), compoundmiddle, pfx->getContLen())) ||
        (sfx && sfx->getCont() && TESTAFF(sfx->getCont(), compoundmiddle, sfx->getContLen()))))
  // must not violate triple letter rule
  && !(simplifiedtriple && char_index > 1 && char_index < word.size() &&
       word[char_index - 1] == word[char_index - 2] && word[char_index - 1] == word[char_index])
  // must not violate CHECKCOMPOUNDPATTERN
  && (checkcpdtable.empty() || scpd != 0 ||
      (char_index < word.size() && !cpdpat_check(word, char_index, rv, NULL, affixed)))
  // must not violate cpdwordpair_check
  && !(cpdwordpair_check(word, len))
  // must not violate checkcompoundrep
  && !(checkcompoundrep && cpdrep_check(word, len))
)