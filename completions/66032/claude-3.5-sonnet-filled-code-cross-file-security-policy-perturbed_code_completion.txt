while (probelength && strchr("\n\r\t ", (char) probe_data[0])) {
    probe_data++;
    probelength--;
}

// Skip XML declaration if present
if (probelength > 5 && !strncmp((const char *)probe_data, "<?xml", 5)) {
    const char *end = my_strstr(probe_data, "?>", probelength);
    if (end) {
        u32 skip_len = (u32)(end - (const char *)probe_data) + 2;
        probe_data += skip_len;
        probelength -= skip_len;
    }
}

// Skip DOCTYPE declaration if present
if (probelength > 9 && !strncmp((const char *)probe_data, "<!DOCTYPE", 9)) {
    const char *end = my_strstr(probe_data, ">", probelength);
    if (end) {
        u32 skip_len = (u32)(end - (const char *)probe_data) + 1;
        probe_data += skip_len;
        probelength -= skip_len;
    }
}

// Skip comments if present
while (probelength > 4 && !strncmp((const char *)probe_data, "<!--", 4)) {
    const char *end = my_strstr(probe_data, "-->", probelength);
    if (end) {
        u32 skip_len = (u32)(end - (const char *)probe_data) + 3;
        probe_data += skip_len;
        probelength -= skip_len;
    } else {
        break;
    }
}

// Strip leading whitespace again
while (probelength && strchr("\n\r\t ", (char) probe_data[0])) {
    probe_data++;
    probelength--;
}