// Strip leading whitespace and newline characters from the probe_data.
while (probelength > 0 && strchr("\n\r\t ", (char)probe_data[0])) {
    probe_data++;
    probelength--;
}

// Remove XML-specific components such as DOCTYPE declarations, XML headers, and comments.
if (probelength >= 5 && !strncmp(probe_data, "<?xml", 5)) {
    const char *end_of_header = my_strstr(probe_data, "?>", probelength);
    if (end_of_header) {
        u32 header_length = (u32)(end_of_header - (char *)probe_data + 2);
        probe_data += header_length;
        probelength -= header_length;
    }
}

// Strip DOCTYPE declaration
if (probelength >= 8 && !strncmp(probe_data, "<!DOCTYPE", 9)) {
    const char *end_of_doctype = my_strstr(probe_data, ">", probelength);
    if (end_of_doctype) {
        u32 doctype_length = (u32)(end_of_doctype - (char *)probe_data + 1);
        probe_data += doctype_length;
        probelength -= doctype_length;
    }
}

// Strip XML comments
while (probelength >= 4 && !strncmp(probe_data, "<!--", 4)) {
    const char *end_of_comment = my_strstr(probe_data, "-->", probelength);
    if (end_of_comment) {
        u32 comment_length = (u32)(end_of_comment - (char *)probe_data + 3);
        probe_data += comment_length;
        probelength -= comment_length;
    } else {
        break;
    }
}