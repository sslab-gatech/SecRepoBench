// Strip leading whitespace and newline characters from the probe_data
	while (probelength && probe_data[0] && strchr("\n\r\t ", (char)probe_data[0])) {
		probe_data++;
		probelength--;
	}

	// Check if the remaining data starts with an XML declaration
	if (probelength >= 5 && !strncmp((char *)probe_data, "<?xml", 5)) {
		// Skip the XML declaration
		const char *xml_end = my_strstr(probe_data, "?>", probelength);
		if (xml_end) {
			probelength -= (u32)(xml_end - (char *)probe_data + 2);
			probe_data = (u8 *)(xml_end + 2);
		}
	}

	// Remove any DOCTYPE declarations
	if (probelength >= 9 && !strncmp((char *)probe_data, "<!DOCTYPE", 9)) {
		const char *doctype_end = my_strstr(probe_data, ">", probelength);
		if (doctype_end) {
			probelength -= (u32)(doctype_end - (char *)probe_data + 1);
			probe_data = (u8 *)(doctype_end + 1);
		}
	}

	// Remove XML comments
	while (probelength >= 4 && !strncmp((char *)probe_data, "<!--", 4)) {
		const char *comment_end = my_strstr(probe_data, "-->", probelength);
		if (comment_end) {
			probelength -= (u32)(comment_end - (char *)probe_data + 3);
			probe_data = (u8 *)(comment_end + 3);
		} else {
			// Malformed comment, stop processing
			break;
		}
	}