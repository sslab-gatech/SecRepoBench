// Strip leading whitespace and newline characters from the probe_data.
// Continue processing the probe_data to remove XML-specific components, such as DOCTYPE declarations, XML headers, and comments.
if (res) {
    // Remove XML declaration
    if (my_strstr(probe_data, "<?xml", probelength)) {
        const char *end_xml_decl = my_strstr(probe_data, "?>", probelength);
        if (end_xml_decl) {
            probelength -= (u32) (end_xml_decl - (char*)probe_data + 2);
            probe_data = end_xml_decl + 2;
        }
    }

    // Remove DOCTYPE declaration
    if (my_strstr(probe_data, "<!DOCTYPE", probelength)) {
        const char *end_doctype_decl = my_strstr(probe_data, ">", probelength);
        if (end_doctype_decl) {
            probelength -= (u32) (end_doctype_decl - (char*)probe_data + 1);
            probe_data = end_doctype_decl + 1;
        }
    }

    // Remove XML comments
    while (1) {
        const char *start_comment = my_strstr(probe_data, "<!--", probelength);
        if (!start_comment) break;
        const char *end_comment = my_strstr(start_comment, "-->", probelength - (u32) (start_comment - (char*)probe_data));
        if (!end_comment) break;
        probelength -= (u32) (end_comment - (char*)probe_data + 3);
        probe_data = end_comment + 3;
    }
}