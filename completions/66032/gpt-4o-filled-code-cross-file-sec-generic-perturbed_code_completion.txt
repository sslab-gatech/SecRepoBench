// Strip leading whitespace and newline characters from the probe_data.
while (probelength && probe_data[0] && strchr("\n\r\t ", (char) probe_data[0])) {
    probe_data++;
    probelength--;
}
if (!probelength) {
    if (dst) gf_free(dst);
    *score = GF_FPROBE_NOT_SUPPORTED;
    return NULL;
}

// Continue processing the probe_data to remove XML-specific components, such as DOCTYPE declarations, XML headers, and comments.
while (probelength > 0) {
    // Check for XML declaration
    if (!strncmp(probe_data, "<?xml", 5)) {
        const char *end_decl = my_strstr(probe_data, "?>", probelength);
        if (!end_decl) break;
        probelength -= (u32)(end_decl - (char*)probe_data + 2);
        probe_data = end_decl + 2;
        continue;
    }

    // Check for DOCTYPE declaration
    if (!strncmp(probe_data, "<!DOCTYPE", 9)) {
        const char *end_decl = my_strstr(probe_data, ">", probelength);
        if (!end_decl) break;
        probelength -= (u32)(end_decl - (char*)probe_data + 1);
        probe_data = end_decl + 1;
        continue;
    }

    // Check for comments
    if (!strncmp(probe_data, "<!--", 4)) {
        const char *end_comment = my_strstr(probe_data, "-->", probelength);
        if (!end_comment) break;
        probelength -= (u32)(end_comment - (char*)probe_data + 3);
        probe_data = end_comment + 3;
        continue;
    }

    // If none of the above, break the loop
    break;
}