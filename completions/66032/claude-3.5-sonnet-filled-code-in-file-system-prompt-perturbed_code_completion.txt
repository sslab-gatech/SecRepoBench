while (probelength && strchr("\n\r\t ", (char) probe_data[0])) {
    probe_data++;
    probelength--;
}
if (!probelength) goto exit;

const char *first_word = probe_data;
u32 word_len = 0;
while (word_len < probelength && !strchr("\n\r\t ", (char) probe_data[word_len])) {
    word_len++;
}

if (!strncmp(first_word, "#VRML", 5)) {
    mime_type = "model/vrml";
    goto exit;
} else if (!strncmp(first_word, "#X3D", 4)) {
    mime_type = "model/x3d+vrml";
    goto exit;
} else if (!strncmp(first_word, "<?xml", 5)) {
    // XML document, continue processing
} else if (first_word[0] == '<') {
    // Possible XML element, continue processing
} else {
    // Not XML or VRML, check for BT format
    const char *bt_keywords[] = {"InitialObjectDescriptor", "EXTERNPROTO", "PROTO", "Group", "OrderedGroup", "Layer2D", "Layer3D"};
    for (int i = 0; i < sizeof(bt_keywords) / sizeof(bt_keywords[0]); i++) {
        if (!strncmp(first_word, bt_keywords[i], strlen(bt_keywords[i]))) {
            mime_type = "application/x-bt";
            goto exit;
        }
    }
    // If we reach here, it's not a recognized format
    goto exit;
}