// Strip leading whitespace and newline characters from the probe_data.
while (probelength && probe_data[0] && strchr("\n\r\t ", (char) probe_data[0])) {
    probe_data++;
    probelength--;
}

// Continue processing the probe_data to remove XML-specific components, such as DOCTYPE declarations, XML headers, and comments.
if (probelength && probe_data[0] == '<') {
    // Skip XML declaration
    if (probelength > 1 && probe_data[1] == '?') {
        const char *end = my_strstr(probe_data, "?>", probelength);
        if (end) {
            probe_data = (u8 *) end + 2;
            probelength -= (u32) ((char *) end - (char *) probe_data) + 2;
        }
    }

    // Skip DOCTYPE declaration
    if (probelength && probe_data[0] == '<' && probe_data[1] == '!') {
        const char *end = my_strstr(probe_data, ">", probelength);
        if (end) {
            probe_data = (u8 *) end + 1;
            probelength -= (u32) ((char *) end - (char *) probe_data) + 1;
        }
    }

    // Skip XML comments
    while (probelength && probe_data[0] == '<' && probe_data[1] == '!' && probe_data[2] == '-' && probe_data[3] == '-') {
        const char *end = my_strstr(probe_data, "-->", probelength);
        if (end) {
            probe_data = (u8 *) end + 3;
            probelength -= (u32) ((char *) end - (char *) probe_data) + 3;
        } else {
            break;
        }
    }
}