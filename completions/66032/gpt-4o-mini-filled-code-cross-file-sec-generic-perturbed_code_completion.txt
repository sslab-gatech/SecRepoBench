// Remove XML declaration if present
	if (probelength >= 5 && !strncmp((const char *)probe_data, "<?xml", 5)) {
		const char *end = my_strstr(probe_data, "?>", probelength);
		if (end) {
			probe_data = end + 2; // Move past the XML declaration
			probelength -= (u32)(end - (char *)probe_data);
		}
	}

	// Remove DOCTYPE declaration if present
	const char *doctype = my_strstr(probe_data, "<!DOCTYPE", probelength);
	if (doctype) {
		const char *end = my_strstr(doctype, ">", probelength);
		if (end) {
			probe_data = end + 1; // Move past the DOCTYPE declaration
			probelength -= (u32)(end - (char *)probe_data);
		}
	}

	// Remove comments
	char *comment_start = my_strstr(probe_data, "<!--", probelength);
	while (comment_start) {
		char *comment_end = my_strstr(comment_start, "-->", probelength);
		if (comment_end) {
			// Shift the probe_data to remove the comment
			memmove((char *)comment_start, comment_end + 3, probelength - (u32)(comment_end - (char *)probe_data) - 3);
			probelength -= (u32)(comment_end - (char *)probe_data) + 3;
		} else {
			break; // No closing comment tag found
		}
		comment_start = my_strstr(probe_data, "<!--", probelength);
	}