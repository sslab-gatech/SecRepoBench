//probe_data is now the first element of the document, if XML
//we should refine by getting the xmlns attribute value rather than searching for its value...
const char *xmlns = NULL;
const char *start = probe_data;
const char *end = probe_data + probelength;
while (start < end) {
    if (strncmp(start, "xmlns=", 6) == 0) {
        start += 6;
        if (*start == '"') {
            start++;
            const char *next = strchr(start, '"');
            if (next) {
                xmlns = gf_strdup_until(start, next);
            }
        } else if (*start == '\'') {
            start++;
            const char *next = strchr(start, '\'');
            if (next) {
                xmlns = gf_strdup_until(start, next);
            }
        }
        break;
    }
    start++;
}

if (xmlns) {
    if (strstr(xmlns, "http://www.w3.org/1999/XSL/Transform")) {
        mime_type = "application/xslt+xml";
    } else if (strstr(xmlns, "http://www.w3.org/2000/svg")) {
        mime_type = "image/svg+xml";
    } else if (strstr(xmlns, "urn:mpeg:mpeg4:xmta:schema:2002")) {
        mime_type = "application/x-xmt";
    } else if (strstr(xmlns, "http://www.web3d.org/specifications/x3d-3.0.xsd")) {
        mime_type = "model/x3d+xml";
    }
    gf_free((void*)xmlns);
}