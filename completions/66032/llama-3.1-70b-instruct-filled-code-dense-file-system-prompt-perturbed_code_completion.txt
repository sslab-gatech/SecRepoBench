// Strip leading whitespace and newline characters from the probe_data.
while (probelength && probe_data[0] && strchr("\n\r\t ", (char) probe_data[0])) {
    probe_data ++;
    probelength--;
}

// Continue processing the probe_data to remove XML-specific components, such as DOCTYPE declarations, XML headers, and comments.
while (1) {
    // Skip XML comments
    if (probelength >= 4 &&!strncmp(probe_data, "<!--", 4)) {
        const char *end_comment = my_strstr(probe_data, "-->", probelength);
        if (end_comment) {
            probelength -= (u32) (end_comment - (char*) probe_data + 3);
            probe_data = end_comment + 3;
        } else {
            break;
        }
    }
    // Skip XML DOCTYPE declarations
    else if (probelength >= 9 &&!strncmp(probe_data, "<!DOCTYPE", 9)) {
        const char *end_doctype = my_strstr(probe_data, ">", probelength);
        if (end_doctype) {
            probelength -= (u32) (end_doctype - (char*) probe_data + 1);
            probe_data = end_doctype + 1;
        } else {
            break;
        }
    }
    // Skip XML headers
    else if (probelength >= 5 &&!strncmp(probe_data, "<?xml", 5)) {
        const char *end_header = my_strstr(probe_data, "?>", probelength);
        if (end_header) {
            probelength -= (u32) (end_header - (char*) probe_data + 2);
            probe_data = end_header + 2;
        } else {
            break;
        }
    }
    // Skip whitespace
    else if (probelength && probe_data[0] && strchr("\n\r\t ", (char) probe_data[0])) {
        probe_data ++;
        probelength--;
    }
    // If none of the above, break the loop
    else {
        break;
    }
}