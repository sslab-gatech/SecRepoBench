{
  char *old_str = *((char **)old);
  if (old_str)
  {
    free(old_str);
    old_str = NULL;
  }

  /* For fixed-length strings (TFv), allocate 'f->size' bytes,
     ensure null-termination, and copy up to 'f->size - 1'. */
  {
    char *new_str = (char *)calloc(f->size, sizeof(char));
    if (!new_str)
      return; /* Allocation failed, cannot proceed. */

    /* TODO: Optionally handle UTF-8 -> wide character conversion if needed. */

    strncpy(new_str, (const char *)value, f->size - 1);
    new_str[f->size - 1] = '\0';

    *((char **)old) = new_str;
  }
}