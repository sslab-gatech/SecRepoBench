{
          char *newstring = NULL;
          if (versiontype < R_13b1)
            {
              newstring = malloc (f->size + 1);
              memcpy (newstring, value, f->size);
              newstring[f->size] = 0; // force null termination
            }
          else if (is_utf8 && f->is_string)
            {
              newstring = dwg_utf8_to_wcs ((const char *)value);
            }
          else if (f->is_string)
            {
              size_t len = strlen ((char*)value);
              newstring = malloc (len + 1);
              memcpy (newstring, value, len + 1);
            }
          if (newstring)
            {
              if (*(char**)old)
                free (*(char**)old);
              *(char**)old = newstring;
            }
          else
            memcpy (old, value, sizeof (char*));
        }