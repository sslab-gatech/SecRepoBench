{
  size_t len = strlen ((const char*)value);
  if (len >= f->size - 1)
    {
      len = f->size - 1;
    }
  char *new_str = malloc (f->size);
  if (!new_str)
    {
      // Handle memory allocation failure
      return;
    }
  memcpy (new_str, value, len);
  new_str[len] = '\0';
  if (*(char**)old)
    free (*(char**)old);
  *(char**)old = new_str;
}