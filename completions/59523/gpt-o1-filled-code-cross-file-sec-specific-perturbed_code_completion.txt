{
  /* Free any previously allocated memory */
  if (*(char**)old)
  {
    free(*(char**)old);
    *(char**)old = NULL;
  }

  /* Prepare to copy the new string */
  const char *src_str = *(const char**)value;
  size_t src_len = strlen(src_str);
  size_t max_len = (f->size > 0) ? f->size - 1 : 0;

  /*
   * Allocate memory based on the field's size (fixed-length).
   * Use calloc to ensure the buffer is zero-initialized,
   * preventing any uninitialized memory issues.
   */
  char *dst_str = (char*)calloc(f->size, sizeof(char));
  if (!dst_str)
  {
    /* Handle allocation failure (return or log, as needed) */
    return;
  }

  /*
   * For ASCII strings, copy up to max_len characters.
   * If the input string is large, clamp to avoid buffer overflows.
   */
  if (max_len > 0 && src_len > 0)
  {
    if (src_len > max_len)
      src_len = max_len;
    memcpy(dst_str, src_str, src_len);
  }

  /* Ensure the buffer is null-terminated */
  dst_str[src_len] = '\0';

  /* Update the pointer in 'old' with the newly allocated string */
  *(char**)old = dst_str;
}