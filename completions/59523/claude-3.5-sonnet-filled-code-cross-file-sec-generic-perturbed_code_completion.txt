if (f->size)
{
    char *new_str = (char *)calloc(f->size + 1, 1);
    if (!new_str)
    {
        // Handle memory allocation failure
        return;
    }
    strncpy(new_str, *(char **)value, f->size);
    new_str[f->size] = '\0';
    *(char **)old = new_str;
}
else if (dwg->header.version >= R_13b1 && !strEQc(f->type, "TF"))
{
    if (is_utf8)
    {
        BITCODE_TU wstr = bit_utf8_to_TU((char *)value, 0);
        if (!wstr)
        {
            // Handle conversion failure
            return;
        }
        *(BITCODE_TU *)old = wstr;
    }
    else
    {
        size_t len = strlen((char *)value) + 1;
        BITCODE_TU wstr = (BITCODE_TU)calloc(len, sizeof(BITCODE_TU));
        if (!wstr)
        {
            // Handle memory allocation failure
            return;
        }
        for (size_t i = 0; i < len; i++)
            wstr[i] = ((char *)value)[i];
        *(BITCODE_TU *)old = wstr;
    }
}
else
{
    char *new_str = strdup(*(char **)value);
    if (!new_str)
    {
        // Handle memory allocation failure
        return;
    }
    *(char **)old = new_str;
}