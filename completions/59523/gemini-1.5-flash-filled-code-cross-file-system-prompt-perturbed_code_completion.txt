size_t len = strlen ((const char*)value) + 1;
        char *p = malloc (len);
        if (!p)
          {
            LOG_ERROR ("malloc failed");
            return;
          }
        memcpy (p, value, len);
        memcpy (old, &p, sizeof (char*));
      else if (strEQc (f->type, "TF"))
        {
          // Allocate memory and copy the string from 'value' to a new memory block.
          // Handle both fixed-length and dynamically allocated strings.
          // For ASCII strings with specific DWG versions, allocate memory based on
          // the length of the input string and copy it accordingly.
          // For wide character strings, convert UTF-8 encoded strings to a wide character format
          // if necessary, and allocate memory for the wide string before copying it.
          // If the field type is not TF and DWG version conditions are met, perform these conversions.
          // In all cases, update the pointer in 'old' to the newly allocated string memory,
          // ensuring the previous memory is freed to avoid memory leaks.
          len = strlen ((const char*)value) + 1;
          char *p = malloc (len);
          if (!p)
            {
              LOG_ERROR ("malloc failed");
              return;
            }
          memcpy (p, value, len);
          memcpy (old, &p, sizeof (char*));
        }
      else if (is_utf8 && f->is_string)
        {
          // Convert UTF-8 to wide character string and allocate memory accordingly.
          size_t wlen = strlen ((const char*)value) + 1;
          wchar_t *wp = malloc (wlen * sizeof (wchar_t));
          if (!wp)
            {
              LOG_ERROR ("malloc failed");
              return;
            }
          mbstowcs (wp, (const char*)value, wlen);
          memcpy (old, &wp, sizeof (wchar_t*));
        }
      else
        memcpy (old, value, f->size);