{
    size_t len = strlen(*(char**)value);
    char *new_str = (char*)malloc(len + 1);
    if (new_str)
    {
        strcpy(new_str, *(char**)value);
        *(char**)old = new_str;
    }
}
else if (strEQc(f->type, "TF"))
{
    if (versiontype < R_2007 || !is_utf8)
    {
        size_t len = strlen(*(char**)value);
        char *new_str = (char*)malloc(len + 1);
        if (new_str)
        {
            strcpy(new_str, *(char**)value);
            *(char**)old = new_str;
        }
    }
    else
    {
        BITCODE_TU wstr = bit_utf8_to_TU(*(char**)value);
        if (wstr)
        {
            size_t len = (wcslen(wstr) + 1) * sizeof(BITCODE_TU);
            BITCODE_TU new_wstr = (BITCODE_TU)malloc(len);
            if (new_wstr)
            {
                wcscpy(new_wstr, wstr);
                *(BITCODE_TU*)old = new_wstr;
            }
            free(wstr);
        }
    }
}