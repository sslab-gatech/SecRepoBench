{
            char *newstr = malloc (f->size);
            if (!newstr)
                return; // TODO: error handling
            strncpy (newstr, *(char**)value, f->size - 1);
            newstr[f->size - 1] = 0;
            *(char**)old = newstr;
        }
      else if (versiontype == DWG_VERSION_AC1015 || versiontype == DWG_VERSION_AC1018)
        {
            if (f->size == sizeof (char*))
                *(char**)old = strdup (*(char**)value);
            else if (f->size == sizeof (wchar_t*))
                {
                    if (is_utf8)
                        *(wchar_t**)old = dwg_utf8_to_wcs (*(char**)value);
                    else
                        *(wchar_t**)old = wcsdup (*(wchar_t**)value);
                }
        }
      else if (!strEQc (f->type, "TF"))
        {
            if (f->size == sizeof (char*))
                *(char**)old = strdup (*(char**)value);
            else if (f->size == sizeof (wchar_t*))
                {
                    if (is_utf8)
                        *(wchar_t**)old = dwg_utf8_to_wcs (*(char**)value);
                    else
                        *(wchar_t**)old = wcsdup (*(wchar_t**)value);
                }
        }
      else
        *(char**)old = *(char**)value; // just copy the ptr
    }