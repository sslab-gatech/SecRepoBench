{
    size_t len = strlen(*(char**)value);
    char *new_str = malloc(len + 1);
    if (new_str)
    {
        memcpy(new_str, *(char**)value, len + 1);
        *(char**)old = new_str;
    }
}
else if (!strEQc(f->type, "TF") &&
         (versiontype <= R_2007 || (versiontype >= R_2010 && versiontype <= R_2018)))
{
    if (is_utf8)
    {
        BITCODE_TU wstr = bit_utf8_to_TU((char*)value);
        if (wstr)
        {
            size_t wlen = (wcslen(wstr) + 1) * sizeof(BITCODE_TU);
            BITCODE_TU new_wstr = malloc(wlen);
            if (new_wstr)
            {
                memcpy(new_wstr, wstr, wlen);
                *(BITCODE_TU*)old = new_wstr;
            }
            free(wstr);
        }
    }
    else
    {
        size_t len = strlen((char*)value);
        char *new_str = malloc(len + 1);
        if (new_str)
        {
            memcpy(new_str, (char*)value, len + 1);
            *(char**)old = new_str;
        }
    }
}