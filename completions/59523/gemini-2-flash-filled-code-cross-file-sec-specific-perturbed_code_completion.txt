{
        if (strEQc (f->type, "TFv"))
          {
            size_t len = strlen (*(char**)value);
            char *str = (char*)malloc (f->size);
            if (!str)
              return;
            memset (str, 0, f->size);
            strncpy (str, *(char**)value, f->size - 1); // Ensure null termination
            memcpy (old, &str, sizeof (char*));
          }
        else if (f->is_string && versiontype < R_13b1)
          {
            size_t len = strlen (*(char**)value);
            char *str = (char*)malloc (len + 1);
            if (!str)
              return;
            strcpy (str, *(char**)value);
            memcpy (old, &str, sizeof (char*));
          }
        else if (f->is_string && is_utf8)
          {
            size_t wlen = mbstowcs (NULL, *(char**)value, 0);
            if (wlen == (size_t)-1)
              {
                // Handle error, invalid UTF-8 sequence
                return;
              }
            wchar_t *wstr = (wchar_t*)malloc ((wlen + 1) * sizeof (wchar_t));
            if (!wstr)
              return;
            mbstowcs (wstr, *(char**)value, wlen + 1);
            memcpy (old, &wstr, sizeof (wchar_t*));
          }
        else
          {
            size_t len = strlen (*(char**)value);
            char *str = (char*)malloc (len + 1);
            if (!str)
              return;
            strcpy (str, *(char**)value);
            memcpy (old, &str, sizeof (char*));
          }
    }