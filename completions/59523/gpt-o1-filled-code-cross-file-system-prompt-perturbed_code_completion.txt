{
  char **oldptr = (char **)old;
  if (*oldptr)
    free(*oldptr);

  /* Allocate memory for a fixed-length string using the field's size. */
  size_t needed = f->size;
  char *newptr = (char *)malloc(needed);
  if (!newptr)
    return;

  /* Initialize the allocated memory and copy the string with null-termination. */
  memset(newptr, 0, needed);
  strncpy(newptr, (const char *)value, needed - 1);

  /* Update the pointer in 'old' to the newly allocated string. */
  *oldptr = newptr;
}