size_t len = strlen (*(char**)value) + 1;
        char *new_str = (char*)malloc (len);
        if (!new_str)
          {
            // Handle memory allocation failure appropriately.  Perhaps log an error and return.
            return; // Or throw an exception, depending on error handling strategy.
          }
        memcpy (new_str, *(char**)value, len);
        memcpy (old, &new_str, sizeof (char*));
      else if (strEQc (f->type, "TF") || (f->is_string && versiontype < R_13b1))
        {
          // Handle ASCII strings for older DWG versions.
          size_t len = strlen (*(char**)value) + 1;
          char *new_str = (char*)malloc (len);
          if (!new_str)
            {
              // Handle memory allocation failure.
              return; // Or throw an exception.
            }
          memcpy (new_str, *(char**)value, len);
          memcpy (old, &new_str, sizeof (char*));
        }
      else if (f->is_string && is_utf8)
        {
          // Handle UTF-8 strings.  Convert to wide characters if necessary.
          size_t len = strlen (*(char**)value) + 1;
          wchar_t *new_wstr = (wchar_t*)malloc (len * sizeof (wchar_t));
          if (!new_wstr)
            {
              // Handle memory allocation failure.
              return; // Or throw an exception.
            }
          mbstowcs (new_wstr, *(char**)value, len);
          memcpy (old, &new_wstr, sizeof (wchar_t*));
        }
      else
        memcpy (old, value, f->size);