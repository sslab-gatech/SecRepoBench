int digit;
      if (ch >= '0' && ch <= '9')
          digit = ch - '0';
      else if (ch >= 'A' && ch <= 'F')
          digit = ch - 'A' + 10;
      else if (ch >= 'a' && ch <= 'f')
          digit = ch - 'a' + 10;
      else
          return FP_VAL;

      int idx = j >> 2;
      int bit = (j & 3) << 2;
      fpnumber->dp[idx] |= ((fp_digit)digit) << bit;

      if (bit == 28) {
          j = 0;
          k++;
          if (k >= FP_SIZE)
              return FP_VAL;
      } else {
          j++;
      }