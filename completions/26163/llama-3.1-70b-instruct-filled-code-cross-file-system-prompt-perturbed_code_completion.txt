if ((ch >= '0') && (ch <= '9')) {
    ch = ch - '0';
} else if ((ch >= 'A') && (ch <= 'F')) {
    ch = ch - 'A' + 10;
} else if ((ch >= 'a') && (ch <= 'f')) {
    ch = ch - 'a' + 10;
} else {
    return FP_VAL;
}

k = (i % (int)sizeof(fp_digit) * 2);
if (k == 0) {
    j++;
}

fpnumber->dp[j] = (fpnumber->dp[j] << 4) | (fp_digit)ch;
if (j >= FP_SIZE) {
    return FP_VAL;
}