{
    fp_digit val;

    if (ch >= '0' && ch <= '9') {
        val = (fp_digit)(ch - '0');
    } else if (ch >= 'A' && ch <= 'F') {
        val = (fp_digit)(ch - 'A' + 10);
    } else if (ch >= 'a' && ch <= 'f') {
        val = (fp_digit)(ch - 'a' + 10);
    } else {
        return FP_VAL;
    }

    fpnumber->dp[k] |= (val << (4 * j));
    j++;
    if (j == (DIGIT_BIT / 4)) {
        j = 0;
        k++;
        if (k >= FP_SIZE) {
            return FP_VAL;
        }
        fpnumber->dp[k] = 0;
    }
}