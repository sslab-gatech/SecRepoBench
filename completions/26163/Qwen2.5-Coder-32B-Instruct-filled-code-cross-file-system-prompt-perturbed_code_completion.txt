if (ch >= '0' && ch <= '9') {
          ch -= '0';
      } else if (ch >= 'A' && ch <= 'F') {
          ch -= 'A' - 10;
      } else if (ch >= 'a' && ch <= 'f') {
          ch -= 'a' - 10;
      } else {
          return FP_VAL; // Invalid character
      }

      if (ch >= 16) {
          return FP_VAL; // Character out of range for base 16
      }

      for (k = 0; k < DIGIT_BIT; k += 4) {
          if (j >= FP_SIZE) {
              return FP_VAL; // Exceeds maximum size
          }
          fpnumber->dp[j] |= (ch << k);
          if (k == 12) {
              j++;
          }
      }