if (ch >= '0' && ch <= '9') {
        ch -= '0';
    } else if (ch >= 'a' && ch <= 'f') {
        ch -= 'a' - 10;
    } else if (ch >= 'A' && ch <= 'F') {
        ch -= 'A' - 10;
    } else {
        return FP_INVAL; // Invalid character
    }

    int digit_index = k + j;
    if (digit_index >= FP_SIZE) {
        return FP_OVERFLOW; // Number too large
    }

    fpnumber->dp[digit_index] |= (fp_digit)(ch << (4 * (i % 4)));

    if (i % 4 == 0) {
        j++;
    }
    k++;