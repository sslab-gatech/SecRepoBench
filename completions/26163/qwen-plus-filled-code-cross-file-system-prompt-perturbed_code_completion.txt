if (ch >= '0' && ch <= '9') {
    ch -= '0';
} else if (ch >= 'A' && ch <= 'F') {
    ch = ch - 'A' + 10;
} else if (ch >= 'a' && ch <= 'f') {
    ch = ch - 'a' + 10;
} else {
    return FP_VAL; // Invalid character
}

j += 4; // Increase bit position by 4 for each hexadecimal digit

// Determine the array index based on the current bit position
int idx = j / DIGIT_BIT;

if (idx >= FP_SIZE) {
    return FP_VAL; // Exceeded maximum size
}

// Update the corresponding digit in dp with the decoded value
fpnumber->dp[idx] |= (fp_digit)(ch << (j % DIGIT_BIT));