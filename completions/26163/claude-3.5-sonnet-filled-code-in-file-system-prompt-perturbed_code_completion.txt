int digit_value;
      if (ch >= '0' && ch <= '9')
          digit_value = ch - '0';
      else if (ch >= 'A' && ch <= 'F')
          digit_value = ch - 'A' + 10;
      else if (ch >= 'a' && ch <= 'f')
          digit_value = ch - 'a' + 10;
      else
          return FP_VAL;

      int idx = (j >> 2);
      int shift = (j & 3) << 2;
      fpnumber->dp[idx] |= ((fp_digit)digit_value) << shift;
      j++;

      if (j == DIGIT_BIT) {
          j = 0;
          k++;
          if (k >= FP_SIZE)
              return FP_VAL;
      }