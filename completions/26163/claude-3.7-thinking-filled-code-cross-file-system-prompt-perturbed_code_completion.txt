// Convert hexadecimal character to its numeric value
int digit;
if (ch >= '0' && ch <= '9') {
    digit = ch - '0';
} else if (ch >= 'A' && ch <= 'F') {
    digit = ch - 'A' + 10;
} else if (ch >= 'a' && ch <= 'f') {
    digit = ch - 'a' + 10;
} else {
    return FP_VAL; // Invalid character
}

// Check if we need to move to the next element in the dp array
if (j >= DIGIT_BIT) {
    j = 0;
    k++;
    if (k >= FP_SIZE) {
        return FP_VAL; // Overflow
    }
}

// Set the appropriate bits in the dp array
fpnumber->dp[k] |= ((fp_digit)digit) << j;
j += 4; // Each hex digit is 4 bits