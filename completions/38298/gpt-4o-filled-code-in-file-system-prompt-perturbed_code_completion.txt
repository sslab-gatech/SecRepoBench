if (head < 0) {
    head += arraylength;
    if (head < 0) goto out_of_range;
}
tail = head + len;
if (head > ARY_MAX_SIZE || tail > ARY_MAX_SIZE) goto out_of_range;
if (len > arraylength - head) {
    len = arraylength - head;
}