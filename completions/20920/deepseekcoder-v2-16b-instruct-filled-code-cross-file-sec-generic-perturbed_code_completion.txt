// Check if the TIFF file is byte-swapped and, if so, swap the byte order of the IPTC profile data.
    // Read the IPTC profile into the image.
    if (TIFFIsByteSwapped(tiff)) {
        uint32 temp_length = length;
        uint8 *temp_profile = (uint8 *)profile;
        for (uint32 i = 0; i < temp_length; i++) {
            temp_profile[i] = ((uint8 *)profile)[temp_length - i - 1];
        }
        profile = (unsigned char *)temp_profile;
    }

    // Read the IPTC profile into the image.
    status = ReadIPTCProfile(img, profile, (ssize_t)length, exception);