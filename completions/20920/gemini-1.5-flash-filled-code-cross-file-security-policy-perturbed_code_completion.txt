size_t buffer_size;
      unsigned char *iptc_profile;

      if (length > 0) {
        buffer_size = length;
        iptc_profile = (unsigned char *) malloc(buffer_size);
        if (iptc_profile == NULL) {
          /* Handle memory allocation failure */
          return MagickFalse;
        }
        memcpy(iptc_profile, profile, length);
        status = ReadProfile(img, "iptc", iptc_profile, (ssize_t)length, exception);
        free(iptc_profile);
      }