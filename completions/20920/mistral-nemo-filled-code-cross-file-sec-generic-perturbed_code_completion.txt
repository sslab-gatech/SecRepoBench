if (profile != (unsigned char *) NULL)
    {
      StringInfo
        *iptc_profile;

      iptc_profile=(StringInfo *) GetImageProfile(image,"8bim");
      if (iptc_profile != (StringInfo *) NULL)
        {
          ConcatenateStringInfo(iptc_profile,profile);
          profile=DestroyStringInfo(profile);
        }
      else
        {
          status=SetImageProfile(image,"8bim",profile,exception);
          profile=DestroyStringInfo(profile);
          if (status == MagickFalse)
            {
              (void) ThrowMagickException(exception,GetMagickModule(),
                ResourceLimitError,"MemoryAllocationFailed","`%s'",image->filename);
              return(MagickFalse);
            }
        }
    }
  else
    {
      (void) ThrowMagickException(exception,GetMagickModule(),
        CorruptImageError,"ImproperImageHeader","`%s'",image->filename);
      return(MagickFalse);
    }