// Check if the TIFF file is byte-swapped and, if so, swap the byte order of the IPTC profile data.
    // Read the IPTC profile into the image.
    if (TIFFIsByteSwapped(tiff)) {
        uint32 temp_length = length;
        unsigned char *temp_profile = (unsigned char *)malloc(length);
        if (temp_profile == NULL) {
            ThrowTIFFException(ResourceLimitError, "MemoryAllocationFailed");
        }
        memcpy(temp_profile, profile, length);
        for (uint32 i = 0; i < temp_length; i += 2) {
            profile[i] = temp_profile[temp_length - i - 2];
            profile[i + 1] = temp_profile[temp_length - i - 1];
        }
        free(temp_profile);
    }

    // Read the IPTC profile into the image.
    status = ReadIPTCProfile(image, profile, length);
    if (status == MagickFalse) {
        ThrowTIFFException(ResourceLimitError, "Failed to read IPTC profile");
    }