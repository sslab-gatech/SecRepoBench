if ((TIFFGetField(tiff,TIFFTAG_RICHTIFFIPTC,&length,&profile) == 1) &&
    (profile != (unsigned char *) NULL))
{
  // Check if the TIFF file is byte-swapped
  if (TIFFIsByteSwapped(tiff))
  {
    // Swap the byte order of the IPTC profile data
    TIFFSwabArrayOfLong((uint32 *) profile, (unsigned long) length);
  }
  
  // Read the IPTC profile into the image
  status=ReadProfile(img,"iptc",profile,(ssize_t) length,exception);
}