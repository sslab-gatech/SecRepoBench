#if defined(TIFFTAG_RICHTIFFIPTC)
  if ((TIFFGetField(tiff,TIFFTAG_RICHTIFFIPTC,&length,&profile) == 1) &&
      (profile!= (unsigned char *) NULL))
    {
      // Check if the TIFF file is byte-swapped and, if so, swap the byte order of the IPTC profile data.
      // Read the IPTC profile into the image.
      if (TIFFIsBigEndian(tiff) == 0)
      {
        // Swap the byte order of the IPTC profile data.
        unsigned char *temp = (unsigned char *) RelinquishVirtualMemory(profile);
        if (temp!= (unsigned char *) NULL)
        {
          size_t i;
          for (i = 0; i < length; i++)
          {
            unsigned char c = temp[i];
            temp[i] = temp[length - 1 - i];
            temp[length - 1 - i] = c;
          }
          profile = AcquireVirtualMemory(length, sizeof(unsigned char));
          if (profile!= (unsigned char *) NULL)
          {
            unsigned char *p = (unsigned char *) GetVirtualMemoryBlob(profile);
            for (i = 0; i < length; i++)
            {
              p[i] = temp[i];
            }
            RelinquishVirtualMemory(temp);
          }
        }
      }
      status = ReadProfile(img, "iptc", profile, (ssize_t) length, exception);
      if (status == MagickFalse)
      {
        TIFFClose(tiff);
        return MagickFalse;
      }
    }
#endif