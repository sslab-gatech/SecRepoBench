// Check if the TIFF file is byte-swapped and, if so, swap the byte order of the IPTC profile data.
if (TIFFIsByteSwapped(tiff) != 0)
{
  uint32
    swapped_length = length;

  unsigned char
    *swapped_profile = AcquireQuantumMemory(swapped_length, sizeof(unsigned char));

  if (swapped_profile == (unsigned char *) NULL)
    {
      TIFFClose(tiff);
      ThrowReaderException(ResourceLimitError, "MemoryAllocationFailed");
    }

  for (size_t i = 0; i < swapped_length; ++i)
    swapped_profile[i] = profile[(swapped_length - 1) - i];

  // Use the swapped profile instead of the original one when reading the IPTC profile.
  status = ReadProfile(img, "iptc", swapped_profile, (ssize_t) swapped_length, exception);

  swapped_profile = RelinquishMagickMemory(swapped_profile);
}
else
{
  // If not byte-swapped, directly read the IPTC profile using the provided data.
  status = ReadProfile(img, "iptc", profile, (ssize_t) length, exception);
}