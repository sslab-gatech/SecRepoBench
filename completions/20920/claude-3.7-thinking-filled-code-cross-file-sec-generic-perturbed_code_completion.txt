if (TIFFIsByteSwapped(tiff) != 0)
{
  // TIFF file is byte-swapped relative to the machine
  for (ssize_t i = 0; i < (ssize_t) length; i+=2)
  {
    if (i < ((ssize_t) length - 1))
    {
      unsigned char temp = profile[i];
      profile[i] = profile[i+1];
      profile[i+1] = temp;
    }
  }
}
// Read the IPTC profile into the image.
status=ReadProfile(img,"iptc",profile,(ssize_t) length,exception);