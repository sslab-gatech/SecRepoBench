#if defined(TIFFTAG_RICHTIFFIPTC)
  if ((TIFFGetField(tiff,TIFFTAG_RICHTIFFIPTC,&length,&profile) == 1) &&
      (profile!= (unsigned char *) NULL))
    {
      // Check if the TIFF file is byte-swapped and, if so, swap the byte order of the IPTC profile data.
      // Read the IPTC profile into the image.
      if (TIFFIsBigEndian(tiff) == 0)
      {
        // Swap the byte order of the IPTC profile data.
        unsigned char *swapped_profile = (unsigned char *) RelinquishMagickMemory(profile);
        if (swapped_profile!= (unsigned char *) NULL)
        {
          size_t i;
          for (i = 0; i < length; i++)
          {
            unsigned char temp = swapped_profile[i];
            swapped_profile[i] = swapped_profile[length - 1 - i];
            swapped_profile[length - 1 - i] = temp;
          }
          profile = swapped_profile;
        }
      }
      status = ReadProfile(img, "iptc", profile, (ssize_t) length, exception);
      if (status == MagickFalse)
      {
        TIFFClose(tiff);
        return MagickFalse;
      }
    }
#endif