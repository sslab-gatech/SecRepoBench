// Check if the IPTC profile data is valid and read it into the image.
      if (length > 0)
      {
        StringInfo *iptc_profile = BlobToStringInfo(profile, length);
        if (iptc_profile != (StringInfo *) NULL)
        {
          status = SetImageProfile(img, "iptc", iptc_profile, exception);
          iptc_profile = DestroyStringInfo(iptc_profile);
          if (status == MagickFalse)
          {
            (void) ThrowMagickException(exception, GetMagickModule(),
              ResourceLimitError, "MemoryAllocationFailed", "`%s'", img->filename);
            return MagickFalse;
          }
        }
        else
        {
          (void) ThrowMagickException(exception, GetMagickModule(),
            ResourceLimitError, "MemoryAllocationFailed", "`%s'", img->filename);
          return MagickFalse;
        }
      }