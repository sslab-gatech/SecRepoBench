#if defined(TIFFTAG_RICHTIFFIPTC)
  if ((TIFFGetField(tiff,TIFFTAG_RICHTIFFIPTC,&length,&profile) == 1) &&
      (profile!= (unsigned char *) NULL))
    {
      // Check if the TIFF file is byte-swapped and, if so, swap the byte order of the IPTC profile data.
      // Read the IPTC profile into the image.
      if (TIFFIsBigEndian(tiff) == 0)
        {
          unsigned char
            *temp;

          temp=(unsigned char *) AcquireQuantumMemory(length,sizeof(*temp));
          if (temp == (unsigned char *) NULL)
            ThrowTIFFException(ResourceLimitError,"MemoryAllocationFailed");
          (void) memcpy(temp,profile,length);
          (void) TIFFSetField(tiff,TIFFTAG_RICHTIFFIPTC,temp,length);
          temp=(unsigned char *) RelinquishMagickMemory(temp);
        }
      status=ReadProfile(img,"iptc",profile,(ssize_t) length,exception);
    }
#endif