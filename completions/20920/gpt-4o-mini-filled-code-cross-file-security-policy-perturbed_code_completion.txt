// Allocate memory for the IPTC profile
      StringInfo *iptc_profile = BlobToStringInfo((const void *) NULL, length);
      if (iptc_profile == (StringInfo *) NULL)
        {
          (void) ThrowMagickException(exception,GetMagickModule(),
            ResourceLimitError,"MemoryAllocationFailed","`%s'",img->filename);
          return MagickFalse;
        }
      // Read the IPTC profile data
      p = GetStringInfoDatum(iptc_profile);
      for (i = 0; i < (ssize_t) length; i++)
      {
        int c = GetCharacter(tiff);
        if (c == EOF)
          break;
        *p++ = (unsigned char) c;
      }
      if (i != (ssize_t) length)
        {
          iptc_profile = DestroyStringInfo(iptc_profile);
          (void) ThrowMagickException(exception,GetMagickModule(),
            CorruptImageError,"InsufficientImageDataInFile","`%s'",img->filename);
          return MagickFalse;
        }
      // Set the IPTC profile to the image
      status = SetImageProfile(img, "iptc", iptc_profile, exception);
      iptc_profile = DestroyStringInfo(iptc_profile);
      if (status == MagickFalse)
        {
          (void) ThrowMagickException(exception,GetMagickModule(),
            ResourceLimitError,"MemoryAllocationFailed","`%s'",img->filename);
          return MagickFalse;
        }