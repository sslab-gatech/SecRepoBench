{
	zval *storage;
	storage = var_tmp_var(&var_hash);
	if (!php_var_unserialize(storage, &p, s + buf_len, &var_hash) || Z_TYPE_P(storage) != IS_ARRAY) {
		goto outexcept;
	}
	{
		zval *entry;
		HashTable *storage_ht = Z_ARRVAL_P(storage);
		ZEND_HASH_FOREACH_VAL(storage_ht, entry) {
			zval *obj, *inf;

			if (Z_TYPE_P(entry) != IS_ARRAY) {
				goto outexcept;
			}
			obj = zend_hash_index_find(Z_ARRVAL_P(entry), 0);
			inf = zend_hash_index_find(Z_ARRVAL_P(entry), 1);
			if (!obj || Z_TYPE_P(obj) != IS_OBJECT) {
				goto outexcept;
			}
			spl_object_storage_attach(intern, obj, inf);
		} ZEND_HASH_FOREACH_END();
	}
	zval_ptr_dtor(storage);
}