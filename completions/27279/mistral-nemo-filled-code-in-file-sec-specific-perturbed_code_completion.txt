/* <MASK> */
    if (c->resp.data) {
        flb_free(c->resp.data);
    }
    c->resp.data = flb_malloc(c->resp.data_size_max);
    if (!c->resp.data) {
        flb_errno();
        return NULL;
    }
    c->resp.data_size = c->resp.data_size_max;
    c->resp.data_len = 0;

    if (c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->flags |= FLB_IO_TLS;
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        ret = proxy_parse(c->proxy.address, c);
        if (ret == -1) {
            flb_error("[http_client] cannot parse proxy address");
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP) {
        c->flags |= FLB_HTTP_11;
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->flags |= FLB_IO_TLS;
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->flags |= FLB_HTTP_PROXY;
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP) {
        c->flags |= FLB_HTTP_PROXY_HTTP;
    }
    else if (c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->flags |= FLB_HTTP_PROXY_HTTPS;
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.port = c->proxy.port == 0 ? 80 : c->proxy.port;
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.port = c->proxy.port == 0 ? 443 : c->proxy.port;
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (c->proxy.type == FLB_HTTP_PROXY_HTTP || c->proxy.type == FLB_HTTP_PROXY_HTTPS) {
        c->proxy.host = flb_sds_create(c->proxy.host);