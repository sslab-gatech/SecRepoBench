c->resp.data = flb_calloc(1, FLB_HTTP_DATA_SIZE_MAX);
if (!c->resp.data) {
    flb_errno();
    flb_free(buf);
    flb_free(c);
    return NULL;
}

if (proxy_address) {
    c->proxy.host = flb_strdup(proxy_address);
    if (!c->proxy.host) {
        flb_errno();
        flb_free(buf);
        flb_free(c->resp.data);
        flb_free(c);
        return NULL;
    }
}