if (host) {
        c->host = flb_strdup(host);
        if (!c->host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    if (proxy_address) {
        c->proxy.host = flb_strdup(proxy_address);
        if (!c->proxy.host) {
            flb_errno();
            flb_http_client_destroy(c);
            return NULL;
        }

        /* Parse proxy address */
        ret = flb_http_proxy_parse(c->proxy.host, &c->proxy.host, &c->proxy.port);
        if (ret != 0) {
            flb_error("[http_client] invalid proxy address: %s", proxy_address);
            flb_http_client_destroy(c);
            return NULL;
        }
    }

    c->resp.data = flb_malloc(FLB_HTTP_DATA_SIZE_MAX);