// Allocate memory for the response data buffer with a predefined maximum size.
// Check if a proxy is specified and parse its data, updating the client
// structure accordingly. Handle the case where proxy parsing fails.
if (proxy_address) {
    // Parse proxy data
    flb_sds_t proxy_host = flb_sds_new(proxy_address);
    flb_sds_t proxy_port = flb_sds_new(proxy_address);
    size_t proxy_port_len = 0;

    // Check if proxy address is in the format "host:port"
    if (flb_sds_strrchr(proxy_host, ':')) {
        proxy_port = flb_sds_substr(proxy_host, flb_sds_strrchr(proxy_host, ':') + 1);
        proxy_port_len = flb_sds_len(proxy_port);
    }

    // Update client structure
    c->proxy.host = flb_sds_new(proxy_host);
    c->proxy.port = flb_sds_new(proxy_port);
    c->proxy.port_len = proxy_port_len;

    // Free temporary proxy data
    flb_sds_destroy(proxy_host);
    flb_sds_destroy(proxy_port);
}
else {
    // No proxy specified, allocate default response data buffer
    c->resp.data = flb_calloc(1, FLB_HTTP_DATA_SIZE_MAX);
    if (!c->resp.data) {
        flb_errno();
        flb_http_client_destroy(c);
        return NULL;
    }
    c->resp.data_len  = 0;
    c->resp.data_size = FLB_HTTP_DATA_SIZE_MAX;
    c->resp.data_size_max = FLB_HTTP_DATA_SIZE_MAX;
}