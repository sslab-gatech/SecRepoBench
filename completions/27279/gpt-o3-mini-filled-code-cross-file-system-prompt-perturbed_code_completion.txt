if (proxy_address) {
    /* Parse the proxy address, expecting the format "host:port" */
    char *p_proxy;
    char *tmp;
    int proxy_port = 8080; /* default port if not specified */

    tmp = flb_strdup(proxy_address);
    if (!tmp) {
        flb_errno();
        flb_http_client_destroy(c);
        return NULL;
    }
    p_proxy = strchr(tmp, ':');
    if (p_proxy) {
        *p_proxy = '\0';
        proxy_port = atoi(p_proxy + 1);
    }
    c->proxy.host = tmp;
    c->proxy.port = proxy_port;
}
else {
    c->proxy.host = NULL;
    c->proxy.port = 0;
}

/* Allocate response data buffer */
c->resp.data = flb_malloc(FLB_HTTP_DATA_SIZE_MAX);