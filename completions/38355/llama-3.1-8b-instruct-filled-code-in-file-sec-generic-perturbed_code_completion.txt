bool sanitize (hb_sanitize_context_t *c) const
{
  TRACE_SANITIZE (this);
  if (unlikely (!(c->check_struct (this) && get_subtables<TSubTable> ().sanitize (c, this, get_type ()))))
    return_trace (false);

  // Check if the type is an Extension and edit_count is zero.
  // If so, ensure that all subtables of the Extension lookup have the same type.
  // If any subtable has a different type, return false, indicating a failure.
  if (get_type () == HB_OT_TAG_EXTN && edit_count == 0)
  {
    unsigned int count = get_subtable_count ();
    for (unsigned int i = 0; i < count; i++)
    {
      if (get_subtable<TSubTable> (i).get_type ()!= get_type ())
        return_trace (false);
    }
  }

  return_trace (true);
}