{
    char c = *p1;
    *p1 = *--p2;
    *p2 = c;
    p1++;
  }

  return mrb_obj_value(p_str);
}

MRB_API mrb_value
mrb_str_format(mrb_state *mrb, mrb_value str, mrb_value fmt)
{
  mrb_value *argv;
  mrb_int argc;
  mrb_value result = mrb_str_new_lit(mrb, "");
  mrb_value tmp = mrb_str_new_lit(mrb, "");

  argc = mrb_get_args(mrb, "*", &argv);
  mrb_str_format(mrb, result, fmt, argc, argv);
  mrb_str_cat(mrb, result, RSTRING_PTR(tmp), RSTRING_LEN(tmp));
  return result;
}

MRB_API mrb_value
mrb_str_format(mrb_state *mrb, mrb_value str, mrb_value fmt, mrb_int argc, mrb_value *argv)
{
  mrb_value *p = argv;
  mrb_value *end = argv + argc;
  mrb_int i;
  mrb_int len;
  mrb_int pos;
  mrb_int width;
  mrb_int prec;
  mrb_int fill;
  mrb_int base;
  mrb_int flags;
  mrb_value val;
  mrb_value tmp;
  mrb_value str2;
  mrb_value str3;
  mrb_int str3len;
  mrb_value str4;
  mrb_value str5;
  mrb_value str6;
  mrb_value str7;
  mrb_value str8;
  mrb_value str9;
  mrb_value str10;
  mrb_value str11;
  mrb_value str12;
  mrb_value str13;
  mrb_value str14;
  mrb_value str15;
  mrb_value str16;
  mrb_value str17;
  mrb_value str18;
  mrb_value str19;
  mrb_value str20;
  mrb_value str21;
  mrb_value str22;
  mrb_value str23;
  mrb_value str24;
  mrb_value str25;
  mrb_value str26;
  mrb_value str27;
  mrb_value str28;
  mrb_value str29;
  mrb_value str30;
  mrb_value str31;
  mrb_value str32;
  mrb_value str33;
  mrb_value str34;
  mrb_value str35;
  mrb_value str36;
  mrb_value str37;
  mrb_value str38;
  mrb_value str39;
  mrb_value str40;
  mrb_value str41;
  mrb_value str42;
  mrb_value str43;
  mrb_value str44;
  mrb_value str45;
  mrb_value str46;
  mrb_value str47;
  mrb_value str48;
  mrb_value str49;
  mrb_value str50;
  mrb_value str51;
  mrb_value str52;
  mrb_value str53;
  mrb_value str54;
  mrb_value str55;
  mrb_value str56;
  mrb_value str57;
  mrb_value str58;
  mrb_value str59;
  mrb_value str60;
  mrb_value str61;
  mrb_value str62;
  mrb_value str63;
  mrb_value str64;
  mrb_value str65;
  mrb_value str66;
  mrb_value str67;
  mrb_value str68;
  mrb_value str69;
  mrb_value str70;
  mrb_value str71;
  mrb_value str72;
  mrb_value str73;
  mrb_value str74;
  mrb_value str75;
  mrb_value str76;
  mrb_value str77;
  mrb_value str78;
  mrb_value str79;
  mrb_value str80;
  mrb_value str81;
  mrb_value str82;
  mrb_value str83;
  mrb_value str84;
  mrb_value str85;
  mrb_value str86;
  mrb_value str87;
  mrb_value str88;
  mrb_value str89;
  mrb_value str90;
  mrb_value str91;
  mrb_value str92;
  mrb_value str93;
  mrb_value str94;
  mrb_value str95;
  mrb_value str96;
  mrb_value str97;
  mrb_value str98;
  mrb_value str99;
  mrb_value str100;
  mrb_value str101;
  mrb_value str102;
  mrb_value str103;
  mrb_value str104;
  mrb_value str105;
  mrb_value str106;
  mrb_value str107;
  mrb_value str108;
  mrb_value str109;
  mrb_value str110;
  mrb_value str111;
  mrb_value str112;
  mrb_value str113;
  mrb_value str114;
  mrb_value str115;
  mrb_value str116;
  mrb_value str117;
  mrb_value str118;
  mrb_value str119;
  mrb_value str120;
  mrb_value str121;
  mrb_value str122;
  mrb_value str123;
  mrb_value str124;
  mrb_value str125;
  mrb_value str126;
  mrb_value str127;
  mrb_value str128;
  mrb_value str129;
  mrb_value str130;
  mrb_value str131;
  mrb_value str132;
  mrb_value str133;
  mrb_value str134;
  mrb_value str135;
  mrb_value str136;
  mrb_value str137;
  mrb_value str138;
  mrb_value str139;
  mrb_value str140;
  mrb_value str141;
  mrb_value str142;
  mrb_value str143;
  mrb_value str144;
  mrb_value str145;
  mrb_value str146;
  mrb_value str147;
  mrb_value str148;
  mrb_value str149;
  mrb_value str150;
  mrb_value str151;
  mrb_value str152;
  mrb_value str153;
  mrb_value str154;
  mrb_value str155;
  mrb_value str156;
  mrb_value str157;
  mrb_value str158;
  mrb_value str159;
  mrb_value str160;
  mrb_value str161;
  mrb_value str162;
  mrb_value str163;
  mrb_value str164;
  mrb_value str165;
  mrb_value str166;
  mrb_value str167;
  mrb_value str168;
  mrb_value str169;
  mrb_value str170;
  mrb_value str171;
  mrb_value str172;
  mrb_value str173;
  mrb_value str174;
  mrb_value str175;
  mrb_value str176;
  mrb_value str177;
  mrb_value str178;
  mrb_value str179;
  mrb_value str180;
  mrb_value str181;
  mrb_value str182;
  mrb_value str183;
  mrb_value str184;
  mrb_value str185;
  mrb_value str186;
  mrb_value str187;
  mrb_value str188;
  mrb_value str189;
  mrb_value str190;
  mrb_value str191;
  mrb_value str192;
  mrb_value str193;
  mrb_value str194;
  mrb_value str195;
  mrb_value str196;
  mrb_value str197;
  mrb_value str198;
  mrb_value str199;
  mrb_value str200;
  mrb_value str201;
  mrb_value str202;
  mrb_value str203;
  mrb_value str204;
  mrb_value str205;
  mrb_value str206;
  mrb_value str207;
  mrb_value str208;
  mrb_value str209;
  mrb_value str210;
  mrb_value str211;
  mrb_value str212;
  mrb_value str213;
  mrb_value str214;
  mrb_value str215;
  mrb_value str216;
  mrb_value str217;
  mrb_value str218;
  mrb_value str219;
  mrb_value str220;
  mrb_value str221;
  mrb_value str222;
  mrb_value str223;
  mrb_value str224;
  mrb_value str225;
  mrb_value str226;
  mrb_value str227;
  mrb_value str228;
  mrb_value str229;
  mrb_value str230;
  mrb_value str231;
  mrb_value str232;
  mrb_value str233;
  mrb_value str234;
  mrb_value str235;
  mrb_value str236;
  mrb_value str237;
  mrb_value str238;
  mrb_value str239;
  mrb_value str240;
  mrb_value str241;
  mrb_value str242;
  mrb_value str243;
  mrb_value str244;
  mrb_value str245;
  mrb_value str246;
  mrb_value str247;
  mrb_value str248;
  mrb_value str249;
  mrb_value str250;
  mrb_value str251;
  mrb_value str252;
  mrb_value str253;
  mrb_value str254;
  mrb_value str255;
  mrb_value str256;
  mrb_value str257;
  mrb_value str258;
  mrb_value str259;
  mrb_value str260;
  mrb_value str261;
  mrb_value str262;
  mrb_value str263;
  mrb_value str264;
  mrb_value str265;
  mrb_value str266;
  mrb_value str267;
  mrb_value str268;
  mrb_value str269;
  mrb_value str270;
  mrb_value str271;
  mrb_value str272;
  mrb_value str273;
  mrb_value str274;
  mrb_value str275;
  mrb_value str276;
  mrb_value str277;
  mrb_value str278;
  mrb_value str279;
  mrb_value str280;
  mrb_value str281;
  mrb_value str282;
  mrb_value str283;
  mrb_value str284;
  mrb_value str285;
  mrb_value str286;
  mrb_value str287;
  mrb_value str288;
  mrb_value str289;
  mrb_value str290;
  mrb_value str291;
  mrb_value str292;
  mrb_value str293;
  mrb_value str294;
  mrb_value str295;
  mrb_value str296;
  mrb_value str297;
  mrb_value str298;
  mrb_value str299;
  mrb_value str300;
  mrb_value str301;
  mrb_value str302;
  mrb_value str303;
  mrb_value str304;
  mrb_value str305;
  mrb_value str306;
  mrb_value str307;
  mrb_value str308;
  mrb_value str309;
  mrb_value str310;
  mrb_value str311;
  mrb_value str312;
  mrb_value str313;
  mrb_value str314;
  mrb_value str315;
  mrb_value str316;
  mrb_value str317;
  mrb_value str318;
  mrb_value str319;
  mrb_value str320;
  mrb_value str321;
  mrb_value str322;
  mrb_value str323;
  mrb_value str324;
  mrb_value str325;
  mrb_value str326;
  mrb_value str327;
  mrb_value str328;
  mrb_value str329;
  mrb_value str330;
  mrb_value str331;
  mrb_value str332;
  mrb_value str333;
  mrb_value str334;
  mrb_value str335;
  mrb_value str336;
  mrb_value str337;
  mrb_value str338;
  mrb_value str339;
  mrb_value str340;
  mrb_value str341;
  mrb_value str342;
  mrb_value str343;
  mrb_value str344;
  mrb_value str345;
  mrb_value str346;
  mrb_value str347;
  mrb_value str348;
  mrb_value str349;
  mrb_value str350;
  mrb_value str351;
  mrb_value str352;
  mrb_value str353;
  mrb_value str354;
  mrb_value str355;
  mrb_value str356;
  mrb_value str357;
  mrb_value str358;
  mrb_value str359;
  mrb_value str360;
  mrb_value str361;
  mrb_value str362;
  mrb_value str363;
  mrb_value str364;
  mrb_value str365;
  mrb_value str366;
  mrb_value str367;
  mrb_value str368;
  mrb_value str369;
  mrb_value str370;
  mrb_value str371;
  mrb_value str372;
  mrb_value str373;
  mrb_value str374;
  mrb_value str375;
  mrb_value str376;
  mrb_value str377;
  mrb_value str378;
  mrb_value str379;
  mrb_value str380;
  mrb_value str381;
  mrb_value str382;
  mrb_value str383;
  mrb_value str384;
  mrb_value str385;
  mrb_value str386;
  mrb_value str387;
  mrb_value str388;
  mrb_value str389;
  mrb_value str390;
  mrb_value str391;
  mrb_value str392;
  mrb_value str393;
  mrb_value str394;
  mrb_value str395;
  mrb_value str396;
  mrb_value str397;
  mrb_value str398;
  mrb_value str399;
  mrb_value str400;
  mrb_value str401;
  mrb_value str402;
  mrb_value str403;
  mrb_value str404;
  mrb_value str405;
  mrb_value str406;
  mrb_value str407;
  mrb_value str408;
  mrb_value str409;
  mrb_value str410;
  mrb_value str411;
  mrb_value str412;
  mrb_value str413;
  mrb_value str414;
  mrb_value str415;
  mrb_value str416;
  mrb_value str417;
  mrb_value str418;
  mrb_value str419;
  mrb_value str420;
  mrb_value str421;
  mrb_value str422;
  mrb_value str423;
  mrb_value str424;
  mrb_value str425;
  mrb_value str426;
  mrb_value str427;
  mrb_value str428;
  mrb_value str429;
  mrb_value str430;
  mrb_value str431;
  mrb_value str432;
  mrb_value str433;
  mrb_value str434;
  mrb_value str435;
  mrb_value str436;
  mrb_value str437;
  mrb_value str438;
  mrb_value str439;
  mrb_value str440;
  mrb_value str441;
  mrb_value str442;
  mrb_value str443;
  mrb_value str444;
  mrb_value str445;
  mrb_value str446;
  mrb_value str447;
  mrb_value str448;
  mrb_value str449;
  mrb_value str450;
  mrb_value str451;
  mrb_value str452;
  mrb_value str453;
  mrb_value str454;
  mrb_value str455;
  mrb_value str456;
  mrb_value str457;
  mrb_value str458;
  mrb_value str459;
  mrb_value str460;
  mrb_value str461;
  mrb_value str462;
  mrb_value str463;
  mrb_value str464;
  mrb_value str465;
  mrb_value str466;
  mrb_value str467;
  mrb_value str468;
  mrb_value str