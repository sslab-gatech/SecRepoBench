char *n, *p, *pend;
char buf[BUFSIZ];

n = buf;
while (ISSPACE(*char_buffer)) {
  char_buffer++;
  len--;
}

if (len >= 2 && char_buffer[0] == '0' && (char_buffer[1] == 'x' || char_buffer[1] == 'X')) {
  char_buffer += 2;
  len -= 2;
  p = buf;
  pend = buf + len;
  while (len > 0 && isxdigit(*char_buffer)) {
    if (*char_buffer != '_') {
      *p++ = *char_buffer;
    }
    char_buffer++;
    len--;
  }
}
else {
  p = buf;
  pend = buf + len;
  while (len > 0 && isdigit(*char_buffer)) {
    if (*char_buffer != '_') {
      *p++ = *char_buffer;
    }
    char_buffer++;
    len--;
  }
}
goto nocopy;