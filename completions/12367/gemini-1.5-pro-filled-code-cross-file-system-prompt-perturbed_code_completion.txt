if (avctx->codec_id == AV_CODEC_ID_HYMT) {
        if (buf_size < 12 || buf[buf_size - 1] != 1)
            return AVERROR_INVALIDDATA;

        nb_slices = buf[buf_size - 2];
        if (nb_slices > (buf_size - 12) / 8)
            return AVERROR_INVALIDDATA;

        slice_height = AV_RL32(buf + buf_size - 12);
        if (slice_height * nb_slices != height)
            return AVERROR_INVALIDDATA;

        slices_info_offset = buf_size - 12 - nb_slices * 8;
    } else {
        nb_slices = 1;
        slice_height = height;
    }