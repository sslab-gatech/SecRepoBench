if (avctx->codec_id == AV_CODEC_ID_HYMT) {
        nb_slices = (buf_size - table_size) / (width * height / 8);
        slice_height = height / nb_slices;
        slices_info_offset = 0; // Adjust as necessary for slice info offset
    } else {
        nb_slices = 1;
        slice_height = height;
        slices_info_offset = 0; // No slices for other codec IDs
    }

    if (nb_slices < 1 || slice_height <= 0 || (buf_size - table_size) < nb_slices * (width * height / 8)) {
        return AVERROR_INVALIDDATA;
    }