if (avctx->codec_id == AV_CODEC_ID_HYMT) {
        nb_slices = (buf_size - table_size) / (width * height / 8);
        slice_height = height / nb_slices;
        slices_info_offset = table_size;
        
        if (nb_slices < 1 || slice_height <= 0 || (slices_info_offset + nb_slices * 8) > buf_size) {
            return AVERROR_INVALIDDATA;
        }
    } else {
        nb_slices = 1;
        slice_height = height;
        slices_info_offset = 0;
    }