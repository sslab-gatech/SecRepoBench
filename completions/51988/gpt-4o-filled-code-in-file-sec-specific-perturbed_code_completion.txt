if (utf8) {
    std::vector<w_char> w;
    u8_u16(w, word);
    if (index > 0 && index < w.size()) {
      w_char prev = w[index - 1];
      w_char next = w[index];
      if ((prev == u8_tolower(prev) || next == u8_tolower(next)) &&
          (prev == u8_toupper(prev) || next == u8_toupper(next)) &&
          prev != '-' && next != '-') {
        return 1;
      }
    }
  } else {
    if (index > 0 && index < (int)strlen(word)) {
      char prev = word[index - 1];
      char next = word[index];
      if ((prev == tolower(prev) || next == tolower(next)) &&
          (prev == toupper(prev) || next == toupper(next)) &&
          prev != '-' && next != '-') {
        return 1;
      }
    }
  }