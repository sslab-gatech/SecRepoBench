if (!word || !word[index] || !word[index+1])
    return 0;
  
  if (word[index] == '-' || word[index+1] == '-')
    return 0;
  
  if (utf8) {
    std::vector<w_char> wc;
    utf8_to_utf16(wc, word);
    
    if (index >= static_cast<int>(wc.size()) - 1)
      return 0;
    
    // Check if either character is uppercase
    // Assuming uppercase characters remain unchanged when converted to uppercase
    w_char u1 = wc[index];
    w_char u2 = wc[index+1];
    
    w_char up1 = u1;
    w_char up2 = u2;
    
    to_upper_utf16(up1);
    to_upper_utf16(up2);
    
    if ((u1.h == up1.h && u1.l == up1.l) || (u2.h == up2.h && u2.l == up2.l))
      return 1;
  } else {
    // For ASCII, check if either character is uppercase
    unsigned char c1 = (unsigned char)word[index];
    unsigned char c2 = (unsigned char)word[index+1];
    
    if (c1 == toupper(c1) || c2 == toupper(c2))
      return 1;
  }
  
  return 0;