// Ensure the input word and index are valid
if (!word || index < 0 || word[index] == '\0' || word[index + 1] == '\0') {
    return 0;
}

// Check if the characters are hyphens
if (word[index] == '-' || word[index + 1] == '-') {
    return 0;
}

// Convert the characters to uppercase
unsigned char c1 = static_cast<unsigned char>(word[index]);
unsigned char c2 = static_cast<unsigned char>(word[index + 1]);

// Handle UTF-8 characters if necessary
if (utf8) {
    w_char u1, u2;
    int len1 = u8_u16(&u1, word + index);
    int len2 = u8_u16(&u2, word + index + len1);
    if (len1 == 0 || len2 == 0) {
        return 0;
    }
    if (u1.ucs4 == '-' || u2.ucs4 == '-') {
        return 0;
    }
    w_char upper1 = u1;
    w_char upper2 = u2;
    mkallupper(&upper1, langnum);
    mkallupper(&upper2, langnum);
    if (u1.ucs4 == upper1.ucs4 || u2.ucs4 == upper2.ucs4) {
        return 1;
    }
} else {
    // Non-UTF-8 case
    unsigned char upper1 = mytoupper(c1);
    unsigned char upper2 = mytoupper(c2);
    if (c1 == upper1 || c2 == upper2) {
        return 1;
    }
}

return 0;