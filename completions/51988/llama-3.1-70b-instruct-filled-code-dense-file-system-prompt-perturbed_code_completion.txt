// Check if the two characters at specified positions in the word form a valid case pair.
// If the word is in UTF-8 format, convert the characters to a Unicode representation.
// Determine if either of the characters remains unchanged when converted to uppercase,
// indicating they are already uppercase.
// Ensure neither character is a hyphen ('-').
// If the conditions are met, return 1 to indicate a match is found.

int len1 = utf8? utf8len(word + index) : 1;
int len2 = utf8? utf8len(word + index + len1) : 1;

if (len1 > 0 && len2 > 0) {
  // Convert characters to uppercase
  wchar_t c1 = utf8? utf8toucs(word + index) : *word;
  wchar_t c2 = utf8? utf8toucs(word + index + len1) : *(word + len1);

  // Check if either character is already uppercase
  if (towupper(c1) == c1 || towupper(c2) == c2) {
    return 0;
  }

  // Check if either character is a hyphen
  if (c1 == L'-' || c2 == L'-') {
    return 0;
  }

  // If all conditions are met, return 1
  return 1;
}

return 0;