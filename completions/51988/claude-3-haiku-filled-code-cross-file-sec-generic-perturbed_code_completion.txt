// <MASK>
int len = strlen(word);
if (len < 2) {
  return 0;
}

// Convert the characters at the specified positions to Unicode
w_char c1, c2;
if (utf8) {
  u8_u16(word + index, 2, &c1, 1);
  u8_u16(word + index + 1, 2, &c2, 1);
} else {
  c1.l = word[index];
  c1.h = 0;
  c2.l = word[index + 1];
  c2.h = 0;
}

// Check if either character is a hyphen
if (c1.l == '-' || c2.l == '-') {
  return 0;
}

// Check if either character remains unchanged when converted to uppercase
if ((c1.l == toupper(c1.l) && c1.h == 0) || (c2.l == toupper(c2.l) && c2.h == 0)) {
  return 1;
}

return 0;