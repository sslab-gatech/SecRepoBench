if (utf8) {
    w_char c1, c2;
    int i = u8_u16(&c1, word, index);
    int j = u8_u16(&c2, word, index + i);
    if ((c1 == c2) && (c1 != '-') && (c2 != '-') &&
        ((c1 == unicodetoupper(c1)) || (c2 == unicodetoupper(c2)))) {
      return 1;
    }
  } else {
    if ((isupper((unsigned char)word[index]) ||
         isupper((unsigned char)word[index + 1])) &&
        (word[index] != '-') && (word[index + 1] != '-') &&
        (tolower((unsigned char)word[index]) ==
         tolower((unsigned char)word[index + 1]))) {
      return 1;
    }
  }