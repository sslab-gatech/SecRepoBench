// <MASK>
char colorspace[MagickPathExtent];
MagickBooleanType icc_color;

// Extract the colorspace name from the input string
for (i=0; color_name[i] != '(' && color_name[i] != '\0'; i++)
  colorspace[i] = color_name[i];
colorspace[i] = '\0';

// Check if the color is an ICC profile color
if (LocaleNCompare(colorspace, "device-", 7) == 0)
{
  (void) CopyMagickString(colorspace, colorspace+7, MagickPathExtent);
  scale = (double) QuantumRange;
  icc_color = MagickTrue;
}
else if (LocaleCompare(colorspace, "icc-color") == 0)
{
  register ssize_t j;
  (void) CopyMagickString(colorspace, color_name+i+2, MagickPathExtent);
  for (j=0; colorspace[j] != '\0'; j++)
    if (colorspace[j] == ',')
      break;
  colorspace[j--] = '\0';
  i += j + 3;
  scale = (double) QuantumRange;
  icc_color = MagickTrue;
}