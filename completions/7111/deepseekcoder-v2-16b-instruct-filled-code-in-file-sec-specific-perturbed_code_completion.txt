(image,"tiff:sampling-factor",
                 sampling_factor,exception);
             }
         }
#endif
         break;
      }
      case COMPRESSION_LZW: image->compression=LZWCompression; break;
      case COMPRESSION_ADOBE_DEFLATE: image->compression=ZipCompression; break;
      case COMPRESSION_PACKBITS: image->compression=RLECompression; break;
      case COMPRESSION_THUNDERSCAN: image->compression=Group3Compression; break;
      case COMPRESSION_IT8CTPAD: image->compression=IT8CTPADCompression; break;
      case COMPRESSION_IT8LW: image->compression=IT8LWCompression; break;
      case COMPRESSION_IT8MP: image->compression=IT8MPCompression; break;
      case COMPRESSION_IT8BL: image->compression=IT8BLCompression; break;
      case COMPRESSION_PIXARFILM: image->compression=PixarFilmCompression; break;
      case COMPRESSION_PIXARLOG: image->compression=PixarLogCompression; break;
      case COMPRESSION_DEFLATE: image->compression=DeflateCompression; break;
      case COMPRESSION_ADOBE_LZW: image->compression=LZWCompression; break;
      case COMPRESSION_PREDICTOR:
      {
        image->compression=JPEGCompression;
        break;
      }
      case COMPRESSION_SGILOG: image->compression=LogLuvCompression; break;
      case COMPRESSION_SGILOG24: image->compression=LogLuvCompression; break;
      case COMPRESSION_JP2000: image->compression=JPEG2000Compression; break;
      default:
      {
        TIFFClose(tiff);
        ThrowReaderException(CoderError,"UnknownCompression");
      }
    }
    if (image->debug != MagickFalse)
      (void) LogMagickEvent(CoderEvent,GetMagickModule(),"Compression: %s",
        GetCompressionInfo(image->compression,exception));
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_ROWSPERSTRIP,&rows_per_strip) != 1)
      rows_per_strip=height;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PAGENUMBER,&pages) == 1)
      {
        image->page.x=(ssize_t) pages;
        image->page.y=(ssize_t) (pages/256);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SUBFILETYPE,&value) == 1)
      {
        if (value & FILETYPE_REDUCEDIMAGE)
          (void) SetImageProperty(image,"tiff:subfiletype","reducedimage",
            exception);
        if (value & FILETYPE_PAGE)
          (void) SetImageProperty(image,"tiff:subfiletype","page",exception);
        if (value & FILETYPE_MASK)
          (void) SetImageProperty(image,"tiff:subfiletype","mask",exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_ORIENTATION,&value) == 1)
      {
        if (value == ORIENTATION_TOPLEFT)
          (void) SetImageProperty(image,"tiff:orientation","top-left",
            exception);
        if (value == ORIENTATION_TOPRIGHT)
          (void) SetImageProperty(image,"tiff:orientation","top-right",
            exception);
        if (value == ORIENTATION_BOTRIGHT)
          (void) SetImageProperty(image,"tiff:orientation","bottom-right",
            exception);
        if (value == ORIENTATION_BOTLEFT)
          (void) SetImageProperty(image,"tiff:orientation","bottom-left",
            exception);
        if (value == ORIENTATION_LEFTTOP)
          (void) SetImageProperty(image,"tiff:orientation","left-top",
            exception);
        if (value == ORIENTATION_RIGHTTOP)
          (void) SetImageProperty(image,"tiff:orientation","right-top",
            exception);
        if (value == ORIENTATION_RIGHTBOT)
          (void) SetImageProperty(image,"tiff:orientation","right-bottom",
            exception);
        if (value == ORIENTATION_LEFTBOT)
          (void) SetImageProperty(image,"tiff:orientation","left-bottom",
            exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SAMPLESPERPIXEL,&items_in_pix) != 1)
      items_in_pix=1;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_BITSPERSAMPLE,&bits_per_sample) != 1)
      bits_per_sample=8;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SAMPLEFORMAT,&sample_format) != 1)
      sample_format=SAMPLEFORMAT_UINT;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_MINSAMPLEVALUE,&min_sample_value) != 1)
      min_sample_value=0;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_MAXSAMPLEVALUE,&max_sample_value) != 1)
      max_sample_value=255;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_EXTRASAMPLES,&extra_samples,
      &sample_info) == 1)
      {
        for (i=0; i < (ssize_t) extra_samples; i++)
        {
          switch (sample_info[i])
          {
            case EXTRASAMPLE_ASSOCALPHA:
            case EXTRASAMPLE_UNASSALPHA:
            {
              image->alpha_trait=BlendPixelTrait;
              break;
            }
            default:
            {
              break;
            }
          }
        }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_YCBCRSUBSAMPLING,&value,&value) == 1)
      {
        if ((value == 2) && (value == 2))
          {
            image->colorspace=YCbCrColorspace;
            (void) SetImageProperty(image,"tiff:ycbcr-subsampling","2x2",
              exception);
          }
        else
          {
            image->colorspace=RGBColorspace;
            (void) SetImageProperty(image,"tiff:ycbcr-subsampling","unknown",
              exception);
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_RESOLUTIONUNIT,&units) == 1)
      {
        if (units == RESUNIT_INCH)
          image->units=InchResolution;
        if (units == RESUNIT_CENTIMETER)
          image->units=CentimeterResolution;
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_XRESOLUTION,&x_resolution) == 1)
      image->resolution.x=x_resolution;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_YRESOLUTION,&y_resolution) == 1)
      image->resolution.y=y_resolution;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PAGENUMBER,&pages) == 1)
      {
        image->page.x=(ssize_t) pages;
        image->page.y=(ssize_t) (pages/256);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SUBFILETYPE,&value) == 1)
      {
        if (value & FILETYPE_REDUCEDIMAGE)
          (void) SetImageProperty(image,"tiff:subfiletype","reducedimage",
            exception);
        if (value & FILETYPE_PAGE)
          (void) SetImageProperty(image,"tiff:subfiletype","page",exception);
        if (value & FILETYPE_MASK)
          (void) SetImageProperty(image,"tiff:subfiletype","mask",exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_ORIENTATION,&value) == 1)
      {
        if (value == ORIENTATION_TOPLEFT)
          (void) SetImageProperty(image,"tiff:orientation","top-left",
            exception);
        if (value == ORIENTATION_TOPRIGHT)
          (void) SetImageProperty(image,"tiff:orientation","top-right",
            exception);
        if (value == ORIENTATION_BOTRIGHT)
          (void) SetImageProperty(image,"tiff:orientation","bottom-right",
            exception);
        if (value == ORIENTATION_BOTLEFT)
          (void) SetImageProperty(image,"tiff:orientation","bottom-left",
            exception);
        if (value == ORIENTATION_LEFTTOP)
          (void) SetImageProperty(image,"tiff:orientation","left-top",
            exception);
        if (value == ORIENTATION_RIGHTTOP)
          (void) SetImageProperty(image,"tiff:orientation","right-top",
            exception);
        if (value == ORIENTATION_RIGHTBOT)
          (void) SetImageProperty(image,"tiff:orientation","right-bottom",
            exception);
        if (value == ORIENTATION_LEFTBOT)
          (void) SetImageProperty(image,"tiff:orientation","left-bottom",
            exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_WHITEPOINT,&chromaticity) == 1)
      {
        if (chromaticity != (float *) NULL)
          {
            image->chromaticity.white_point.x=chromaticity[0];
            image->chromaticity.white_point.y=chromaticity[1];
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PRIMARYCHROMATICITIES,&chromaticity) == 1)
      {
        if (chromaticity != (float *) NULL)
          {
            image->chromaticity.red_primary.x=chromaticity[0];
            image->chromaticity.red_primary.y=chromaticity[1];
            image->chromaticity.green_primary.x=chromaticity[2];
            image->chromaticity.green_primary.y=chromaticity[3];
            image->chromaticity.blue_primary.x=chromaticity[4];
            image->chromaticity.blue_primary.y=chromaticity[5];
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_YCBCRSUBSAMPLING,&value,&value) == 1)
      {
        if ((value == 2) && (value == 2))
          {
            image->colorspace=YCbCrColorspace;
            (void) SetImageProperty(image,"tiff:ycbcr-subsampling","2x2",
              exception);
          }
        else
          {
            image->colorspace=RGBColorspace;
            (void) SetImageProperty(image,"tiff:ycbcr-subsampling","unknown",
              exception);
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_RESOLUTIONUNIT,&units) == 1)
      {
        if (units == RESUNIT_INCH)
          image->units=InchResolution;
        if (units == RESUNIT_CENTIMETER)
          image->units=CentimeterResolution;
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_XRESOLUTION,&x_resolution) == 1)
      image->resolution.x=x_resolution;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_YRESOLUTION,&y_resolution) == 1)
      image->resolution.y=y_resolution;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PAGENUMBER,&pages) == 1)
      {
        image->page.x=(ssize_t) pages;
        image->page.y=(ssize_t) (pages/256);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SUBFILETYPE,&value) == 1)
      {
        if (value & FILETYPE_REDUCEDIMAGE)
          (void) SetImageProperty(image,"tiff:subfiletype","reducedimage",
            exception);
        if (value & FILETYPE_PAGE)
          (void) SetImageProperty(image,"tiff:subfiletype","page",exception);
        if (value & FILETYPE_MASK)
          (void) SetImageProperty(image,"tiff:subfiletype","mask",exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_ORIENTATION,&value) == 1)
      {
        if (value == ORIENTATION_TOPLEFT)
          (void) SetImageProperty(image,"tiff:orientation","top-left",
            exception);
        if (value == ORIENTATION_TOPRIGHT)
          (void) SetImageProperty(image,"tiff:orientation","top-right",
            exception);
        if (value == ORIENTATION_B