(CoderEvent,GetMagickModule(),
                 "JPEG sampling factor: %s",sampling_factor);
             }
         }
#endif
         break;
      }
      case COMPRESSION_LZW: image->compression=LZWCompression; break;
      case COMPRESSION_ADOBE_DEFLATE: image->compression=ZipCompression; break;
      case COMPRESSION_PACKBITS: image->compression=RLECompression; break;
      case COMPRESSION_THUNDERSCAN: image->compression=Group3Compression; break;
      case COMPRESSION_IT8CTPAD: image->compression=ITUCCompression; break;
      case COMPRESSION_IT8LW: image->compression=ITUWCompression; break;
      case COMPRESSION_IT8MP: image->compression=ITUMCCompression; break;
      case COMPRESSION_IT8BL: image->compression=ITUBCompression; break;
      case COMPRESSION_PIXARFILM: image->compression=PixarFilmCompression; break;
      case COMPRESSION_PIXARLOG: image->compression=PixarLogCompression; break;
      case COMPRESSION_DEFLATE: image->compression=ZipCompression; break;
      case COMPRESSION_ADOBE_LZW: image->compression=LZWCompression; break;
      case COMPRESSION_PREDICTOR: image->compression=JPEGCompression; break;
      case COMPRESSION_SGILOG: image->compression=SGILOGCompression; break;
      case COMPRESSION_SGILOG24: image->compression=SGILOG24Compression; break;
      case COMPRESSION_JP2000: image->compression=JPEG2000Compression; break;
      default:
      {
        TIFFClose(tiff);
        ThrowReaderException(CoderError,"UnknownCompression");
      }
    }
    if (image->debug != MagickFalse)
      (void) LogMagickEvent(CoderEvent,GetMagickModule(),"Compression: %s",
        GetCompressionInfo(image->compression,exception));
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_ROWSPERSTRIP,&rows_per_strip) != 1)
      rows_per_strip=height;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PAGENUMBER,&pages) == 1)
      {
        image->page.x=0;
        image->page.y=0;
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_ORIENTATION,&orientation) == 1)
      image->orientation=(OrientationType) orientation;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SAMPLESPERPIXEL,&items_in_pix) != 1)
      items_in_pix=3;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_BITSPERSAMPLE,&bits_per_sample) != 1)
      bits_per_sample=8;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PLANARCONFIG,&interlace) != 1)
      interlace=PLANARCONFIG_CONTIG;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PHOTOMETRIC,&photometric) != 1)
      photometric=PHOTOMETRIC_RGB;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SAMPLEFORMAT,&sample_format) != 1)
      sample_format=SAMPLEFORMAT_UINT;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_MINSAMPLEVALUE,&min_sample_value) != 1)
      min_sample_value=0;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_MAXSAMPLEVALUE,&max_sample_value) != 1)
      max_sample_value=255;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_EXTRASAMPLES,&extra_samples,&sample_info) == 1)
      {
        for (i=0; i < (ssize_t) extra_samples; i++)
        {
          if (sample_info[i] == EXTRASAMPLE_ASSOCALPHA)
            image->alpha_trait=BlendPixelTrait;
          if (sample_info[i] == EXTRASAMPLE_UNASSALPHA)
            image->alpha_trait=CopyPixelTrait;
        }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SAMPLESPERPIXEL,&items_in_pix) != 1)
      items_in_pix=3;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_BITSPERSAMPLE,&bits_per_sample) != 1)
      bits_per_sample=8;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PLANARCONFIG,&interlace) != 1)
      interlace=PLANARCONFIG_CONTIG;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PHOTOMETRIC,&photometric) != 1)
      photometric=PHOTOMETRIC_RGB;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SAMPLEFORMAT,&sample_format) != 1)
      sample_format=SAMPLEFORMAT_UINT;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_MINSAMPLEVALUE,&min_sample_value) != 1)
      min_sample_value=0;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_MAXSAMPLEVALUE,&max_sample_value) != 1)
      max_sample_value=255;
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_EXTRASAMPLES,&extra_samples,&sample_info) == 1)
      {
        for (i=0; i < (ssize_t) extra_samples; i++)
        {
          if (sample_info[i] == EXTRASAMPLE_ASSOCALPHA)
            image->alpha_trait=BlendPixelTrait;
          if (sample_info[i] == EXTRASAMPLE_UNASSALPHA)
            image->alpha_trait=CopyPixelTrait;
        }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_YCBCRSUBSAMPLING,&horizontal,
        &vertical) == 1)
      {
        image->y_resolution=(double) horizontal;
        image->x_resolution=(double) vertical;
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_RESOLUTIONUNIT,&units) == 1)
      {
        if (units == RESUNIT_INCH)
          image->units=PixelsPerInchResolution;
        if (units == RESUNIT_CENTIMETER)
          image->units=PixelsPerCentimeterResolution;
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_XPOSITION,&x_position) == 1)
      image->page.x=(ssize_t) ceil(x_position*image->resolution.x-0.5);
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_YPOSITION,&y_position) == 1)
      image->page.y=(ssize_t) ceil(y_position*image->resolution.y-0.5);
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_ORIENTATION,&orientation) == 1)
      image->orientation=(OrientationType) orientation;
    if (TIFFGetField(tiff,TIFFTAG_WHITEPOINT,&chromaticity) == 1)
      {
        if (chromaticity != (float *) NULL)
          {
            image->chromaticity.white_point.x=chromaticity[0];
            image->chromaticity.white_point.y=chromaticity[1];
          }
      }
    if (TIFFGetField(tiff,TIFFTAG_PRIMARYCHROMATICITIES,&chromaticity) == 1)
      {
        if (chromaticity != (float *) NULL)
          {
            image->chromaticity.red_primary.x=chromaticity[0];
            image->chromaticity.red_primary.y=chromaticity[1];
            image->chromaticity.green_primary.x=chromaticity[2];
            image->chromaticity.green_primary.y=chromaticity[3];
            image->chromaticity.blue_primary.x=chromaticity[4];
            image->chromaticity.blue_primary.y=chromaticity[5];
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_YCBCRSUBSAMPLING,&horizontal,
        &vertical) == 1)
      {
        image->ycbcr_subsampling.x=horizontal;
        image->ycbcr_subsampling.y=vertical;
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_REFERENCEBLACKWHITE,&chromaticity) == 1)
      {
        if (chromaticity != (float *) NULL)
          {
            image->chromaticity.black_point.x=chromaticity[0];
            image->chromaticity.black_point.y=chromaticity[1];
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_TRANSFERFUNCTION,&chromaticity) == 1)
      {
        if (chromaticity != (float *) NULL)
          {
            image->chromaticity.red_primary.x=chromaticity[0];
            image->chromaticity.red_primary.y=chromaticity[1];
            image->chromaticity.green_primary.x=chromaticity[2];
            image->chromaticity.green_primary.y=chromaticity[3];
            image->chromaticity.blue_primary.x=chromaticity[4];
            image->chromaticity.blue_primary.y=chromaticity[5];
          }
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SOFTWARE,&text) == 1)
      (void) SetImageProperty(image,"tiff:software",text,exception);
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_DATETIME,&text) == 1)
      (void) SetImageProperty(image,"tiff:timestamp",text,exception);
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_ARTIST,&text) == 1)
      (void) SetImageProperty(image,"tiff:artist",text,exception);
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_COPYRIGHT,&text) == 1)
      (void) SetImageProperty(image,"tiff:copyright",text,exception);
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_DOCUMENTNAME,&text) == 1)
      (void) SetImageProperty(image,"tiff:document",text,exception);
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_HOSTCOMPUTER,&text) == 1)
      (void) SetImageProperty(image,"tiff:hostcomputer",text,exception);
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_IMAGEDESCRIPTION,&text) == 1)
      (void) SetImageProperty(image,"comment",text,exception);
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_MAKE,&text) == 1)
      (void) SetImageProperty(image,"tiff:make",text,exception);
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_MODEL,&text) == 1)
      (void) SetImageProperty(image,"tiff:model",text,exception);
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_OPIIMAGEID,&count,&text) == 1)
      {
        if (count >= MagickPathExtent)
          count=MagickPathExtent-1;
        (void) CopyMagickString(message,text,count+1);
        (void) SetImageProperty(image,"tiff:image-id",message,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_PAGENAME,&text) == 1)
      (void) SetImageProperty(image,"label",text,exception);
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SOFTWARE,&text) == 1)
      (void) SetImageProperty(image,"tiff:software",text,exception);
    if (TIFFGetFieldDefaulted(tiff,33423,&count,&text) == 1)
      {
        if (count >= MagickPathExtent)
          count=MagickPathExtent-1;
        (void) CopyMagickString(message,text,count+1);
        (void) SetImageProperty(image,"tiff:kodak-33423",message,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,36867,&count,&text) == 1)
      {
        if (count >= MagickPathExtent)
          count=MagickPathExtent-1;
        (void) CopyMagickString(message,text,count+1);
        (void) SetImageProperty(image,"tiff:kodak-36867",message,exception);
      }
    if (TIFFGetFieldDefaulted(tiff,TIFFTAG_SUBFILETYPE,&type) ==