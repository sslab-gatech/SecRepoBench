tiff_pixels = (unsigned char *) AcquireQuantumMemory((size_t) (image->columns * image->rows * (bits_per_sample / 8)), sizeof(*tiff_pixels));
    if (tiff_pixels == (unsigned char *) NULL)
    {
        ThrowTIFFException(ResourceLimitError, "MemoryAllocationFailed");
    }