int64_t tend;
  size_t start, end;
  int ret;

  if (!filter)
    return 1;

  start = filter->blockstartpos;
  tend = (int64_t)start + (int64_t)filter->blocklength;
  if (filters->lastend > start)
  {
    start = filters->lastend;
    tend = (int64_t)start + (int64_t)filter->blocklength;
  }

  if (tend > (int64_t)rar->buffer.size)
  {
    ret = archive_read_data_block(archivereadptr, (void *)&rar->buffer, tend);
    if (ret != ARCHIVE_OK)
      return 0;
  }