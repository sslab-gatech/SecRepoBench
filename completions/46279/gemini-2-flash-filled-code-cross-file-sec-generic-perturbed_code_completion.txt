int64_t tend;
  size_t start, end;
  int ret;
  uint32_t lastfilteraddress;
  uint32_t lastfilterlength;

  if (!filters || !filter)
    return 0;

  start = (size_t)filter->blockstartpos;
  tend = (int64_t)start + filter->blocklength;

  if (tend > ARCHIVE_READ_MAX_LOOKAHEAD)
    filter->blockstartpos = ARCHIVE_READ_MAX_LOOKAHEAD;

  if (archive_read_ahead(archivereadptr, (size_t)tend) != ARCHIVE_OK)
    return 0;