// <MASK>
if (!filters || !filter)
  return 0;

start = (size_t)filter->blockstartpos;
tend = (int64_t)(start + filter->blocklength);

filters->filterstart = start;
ret = archive_read_consume(archivereadptr, tend - archivereadptr->position);
if (ret < 0)
  return 0;