int64_t tend;
  size_t start, end;
  int ret;
  uint64_t lastfilteraddress, lastfilterlength;

  if (!filters || !filter)
    return 0;

  start = filter->blockstartpos;
  tend = start + filter->blocklength;
  if (tend > filters->maxread)
  {
    ret = archive_read_data_extend(archivereadptr, (size_t)tend);
    if (ret != ARCHIVE_OK)
      return 0;
    filters->maxread = tend;
  }