int64_t tend;
  size_t start = filter->blockstartpos;
  int ret;

  if (!filter)
    return 1;

  tend = filter->blockstartpos + filter->blocklength;
  if (filters->lastend > start)
    start = filters->lastend;
  if (archive_read_get_bytes_in_buffer(archivereadptr) < tend - start)
  {
    ret = archive_read_ahead(archivereadptr, tend - start, NULL);
    if (ret != ARCHIVE_OK)
      return 0;
  }