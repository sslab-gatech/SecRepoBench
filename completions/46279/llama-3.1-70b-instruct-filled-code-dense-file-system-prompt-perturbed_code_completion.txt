if (!filters->stack ||!filter)
  return 0;
start = filter->blockstartpos;
tend = start + filter->blocklength;
if (tend > filters->lastend)
  if (!archive_read_data_block(archivereadptr, NULL, tend - filters->lastend, &tend))
    return 0;