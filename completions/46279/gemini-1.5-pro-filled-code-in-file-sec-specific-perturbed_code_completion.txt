size_t start, end;
  int ret;
  uint32_t lastfilteraddress, lastfilterlength;
  int64_t tend;

  if (!filter)
  {
    filters->filterstart = INT64_MAX;
    return 1;
  }

  start = filter->blockstartpos;
  tend = start + filter->blocklength;
  if (filters->stack->next)
    tend = filters->stack->next->blockstartpos;