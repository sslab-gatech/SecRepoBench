int64_t tend;
  size_t start, end;
  int ret;
  uint32_t lastfilteraddress, lastfilterlength;

  if (!filter)
    return 0;

  start = filter->blockstartpos;
  tend = start + filter->blocklength;

  if (tend > filters->maxreadahead)
    filters->maxreadahead = tend;
  filter->blockstartpos = UINT32_MAX;
  ret = archive_read_ahead(archivereadptr, filters->maxreadahead, &tend);
  if (filter == NULL || filter != filters->stack)
      return 0;