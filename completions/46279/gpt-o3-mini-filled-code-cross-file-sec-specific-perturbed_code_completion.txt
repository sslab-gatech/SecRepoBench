if (!filters || !filter)
	return 0;

int64_t start = filter->blockstartpos;
int64_t tend;
int64_t desired_end = start + filter->blocklength;

/* Invalidate the current filterâ€™s start position */
filter->blockstartpos = INT64_MAX;

/* Attempt to expand the archive read buffer up to the desired end position.
   archive_read_ahead returns a pointer to the available data if successful;
   if it returns NULL, we mark tend as an error by setting it to -1. */
if (archive_read_ahead(archivereadptr, (size_t)(desired_end - start), NULL) == NULL)
	tend = -1;
else
	tend = desired_end;