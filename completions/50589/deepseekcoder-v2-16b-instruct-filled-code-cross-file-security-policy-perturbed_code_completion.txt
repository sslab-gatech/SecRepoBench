// Check if the cache is empty and needs to be refilled
    if (m_cache.empty()) {
        if (!readNextBlock()) {
            return false;
        }
    }

    // Read the next line from the cache
    size_t start = 0;
    size_t end = 0;
    bool foundEndOfLine = false;

    while (end < m_cache.size()) {
        if (m_cache[end] == '\n') {
            foundEndOfLine = true;
            break;
        }
        ++end;
    }

    if (foundEndOfLine) {
        line.assign(m_cache.begin() + start, m_cache.begin() + end);
        m_cachePos = end + 1; // Move past the end-of-line character
    } else {
        // If no end-of-line character is found, take the remaining cache content
        line.assign(m_cache.begin() + start, m_cache.end());
        m_cachePos = m_cache.size(); // Mark the cache as fully consumed
    }

    // Resize the cache if necessary to accommodate longer lines
    if (line.size() > m_cache.size()) {
        m_cache.resize(line.size());
    }

    return true;
}