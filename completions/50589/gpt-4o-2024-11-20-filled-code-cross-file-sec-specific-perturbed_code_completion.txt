line.clear();

    while (true) {
        // Check if the cache is exhausted
        if (m_cachePos >= m_cache.size()) {
            if (!readNextBlock()) {
                // End of stream reached
                return !line.empty(); // Return true if we have read any data, false otherwise
            }
        }

        // Read characters from the cache
        T currentChar = m_cache[m_cachePos++];
        
        // Check for end-of-line characters
        if (currentChar == '\n') {
            return true; // Line successfully read
        } else if (currentChar != '\r') {
            // Add character to the line buffer (skip '\r')
            line.push_back(currentChar);
        }
    }