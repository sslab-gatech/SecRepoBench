line.clear();
    while (true) {
        if (m_cachePos >= m_cacheSize) {
            if (!readNextBlock()) {
                // End of stream reached
                if (!line.empty()) {
                    // Return the last line if any data was read
                    return true;
                }
                return false;
            }
        }

        T currentChar = m_cache[m_cachePos++];

        if (currentChar == '\n' || currentChar == '\r') {
            // Skip consecutive end-of-line characters
            while (m_cachePos < m_cacheSize && (m_cache[m_cachePos] == '\n' || m_cache[m_cachePos] == '\r')) {
                m_cachePos++;
            }
            return true;
        } else {
            line.push_back(currentChar);
        }
    }