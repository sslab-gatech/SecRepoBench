if (0 != m_cachePos) {
        line.insert(line.end(), m_cache.begin() + m_cachePos, m_cache.end());
        m_cachePos = 0;
    } else {
        if (!readNextBlock()) {
            return false;
        }

        line.insert(line.end(), m_cache.begin(), m_cache.end());
    }

    size_t newlinePos = line.find('\n');
    if (newlinePos != std::string::npos) {
        line.erase(newlinePos);
        return true;
    }

    return !line.empty();