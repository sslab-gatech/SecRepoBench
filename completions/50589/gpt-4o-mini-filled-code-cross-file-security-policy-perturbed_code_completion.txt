line.clear();
    while (true) {
        if (m_cachePos >= m_cache.size()) {
            if (!readNextBlock()) {
                return !line.empty(); // Return true if any data was read
            }
            m_cachePos = 0;
        }

        // Skip any end-of-line characters
        while (m_cachePos < m_cache.size() && (m_cache[m_cachePos] == '\n' || m_cache[m_cachePos] == '\r')) {
            ++m_cachePos;
        }

        // Read characters until we hit a newline or the end of the buffer
        while (m_cachePos < m_cache.size() && m_cache[m_cachePos] != '\n' && m_cache[m_cachePos] != '\r') {
            line.push_back(m_cache[m_cachePos]);
            ++m_cachePos;
        }

        // If we read any characters, return true
        if (!line.empty()) {
            return true;
        }
    }