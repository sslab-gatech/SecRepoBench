if (m_cachePos < m_cache.size()) {
        line = std::vector<T>(m_cache.begin() + m_cachePos, m_cache.end());
        m_cachePos = m_cache.size();
        return true;
    }

    if (!readNextBlock()) {
        return false;
    }

    m_cachePos = 0;
    line = std::vector<T>(m_cache.begin(), m_cache.end());
    return true;