line.clear();
    while (true) {
        if (m_cachePos >= m_cacheSize) {
            if (!readNextBlock()) {
                return !line.empty(); // Return true if we have read any data
            }
        }

        if (IsLineEnd(m_cache[m_cachePos])) {
            ++m_cachePos; // Skip the end-of-line character
            if (!line.empty()) {
                break; // End of line reached
            }
            continue; // If line is still empty, keep reading
        }

        line.push_back(m_cache[m_cachePos]);
        ++m_cachePos;

        if (line.size() >= m_cacheSize) {
            line.resize(line.size() * 2); // Resize if needed
        }
    }

    return true;