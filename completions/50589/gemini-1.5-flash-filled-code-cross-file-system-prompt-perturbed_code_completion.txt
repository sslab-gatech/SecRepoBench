if (m_cachePos >= m_cache.size()) {
        if (!readNextBlock()) {
            return false;
        }
    }

    size_t i = m_cachePos;
    while (i < m_cache.size() && m_cache[i] != '\n') {
        ++i;
    }

    if (i == m_cachePos) {
        // No data was read
        return false;
    }

    line.resize(i - m_cachePos);
    std::copy(m_cache.begin() + m_cachePos, m_cache.begin() + i, line.begin());
    m_cachePos = i + 1;

    return true;