line.clear();
    T ch;
    while (true) {
        if (m_cachePos >= m_cache.size()) {
            if (!readNextBlock()) {
                return !line.empty(); // Return true if we have read any data
            }
            m_cachePos = 0;
        }

        ch = m_cache[m_cachePos++];
        if (ch == '\n') {
            break; // End of line
        }
        if (ch != '\r') { // Skip carriage return
            line.push_back(ch);
        }
    }
    return true;