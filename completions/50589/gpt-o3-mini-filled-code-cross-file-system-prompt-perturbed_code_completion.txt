line.clear();
while (true) {
    if (m_cachePos >= m_cache.size()) {
        if (!readNextBlock()) {
            // If we've reached EOF and haven't accumulated any characters, return false.
            // Otherwise, return true because we have a complete line.
            return !line.empty();
        }
    }
    for (; m_cachePos < m_cache.size(); ++m_cachePos) {
        T c = m_cache[m_cachePos];
        if (c == '\n') {
            // Skip the EOL character and advance the position.
            ++m_cachePos;
            return true;
        }
        // Optionally, skip carriage returns.
        if (c == '\r') {
            continue;
        }
        // Append the current character to the line.
        line.push_back(c);
    }
}