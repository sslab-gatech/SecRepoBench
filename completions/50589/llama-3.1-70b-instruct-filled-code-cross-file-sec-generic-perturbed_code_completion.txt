bool readNextLine = true;
while (readNextLine) {
    // Check if there's a cached line
    if (0!= m_cachePos) {
        // Extract the cached line
        line = std::vector<T>(m_cache.begin() + m_cachePos, m_cache.end());
        m_cachePos = 0;
        return true;
    }

    // Read the next block
    if (!readNextBlock()) {
        return false;
    }

    // Find the end of the line
    size_t eolPos = std::find(m_cache.begin(), m_cache.end(), '\n') - m_cache.begin();
    if (eolPos!= m_cache.size()) {
        // Extract the line
        line = std::vector<T>(m_cache.begin(), m_cache.begin() + eolPos);
        // Update the cache position
        m_cachePos = eolPos + 1;
        return true;
    } else {
        // Line is not complete, read the next block
        readNextLine = true;
    }
}