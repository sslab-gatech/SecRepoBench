if (m_cachePos >= m_cache.size()) {
        if (!readNextBlock()) {
            return false;
        }
    }

    size_t i = m_cachePos;
    while (i < m_cache.size()) {
        if (m_cache[i] == '\n') {
            line.assign(m_cache.begin() + m_cachePos, m_cache.begin() + i);
            m_cachePos = i + 1;
            return true;
        }
        ++i;
    }

    line.assign(m_cache.begin() + m_cachePos, m_cache.end());
    m_cachePos = m_cache.size();
    return line.size() > 0;