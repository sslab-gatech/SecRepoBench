def fill_masked_region(image, mask, color):
    """
    Fill the masked region of an image with a given color.

    :param image: The input image.
    :param mask: The mask image.
    :param color: The color to fill the masked region with.
    :return: The modified image.
    """
    # Get the extent of the image and mask
    image_extent = GetImageExtent(image)
    mask_extent = GetImageExtent(mask)

    # Check if the image and mask have the same extent
    if image_extent != mask_extent:
        raise ValueError("Image and mask must have the same extent")

    # Get the pixel queues of the image and mask
    image_pixel_queue = GetAuthenticPixelQueue(image)
    mask_pixel_queue = GetAuthenticPixelQueue(mask)

    # Iterate over each pixel in the image and mask
    for x in range(image_extent):
        for y in range(image_extent):
            # Check if the pixel in the mask is opaque
            if GetPixelAlpha(mask, mask_pixel_queue) == OpaqueAlpha:
                # If the pixel in the mask is opaque, fill the corresponding pixel in the image with the given color
                SetPixelRed(image, color.red, image_pixel_queue)
                SetPixelGreen(image, color.green, image_pixel_queue)
                SetPixelBlue(image, color.blue, image_pixel_queue)
            # Move to the next pixel in the image and mask
            image_pixel_queue += GetPixelChannels(image)
            mask_pixel_queue += GetPixelChannels(mask)

    # Return the modified image
    return image