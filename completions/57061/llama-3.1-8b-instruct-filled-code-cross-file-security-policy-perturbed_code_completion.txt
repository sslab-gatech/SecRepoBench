tmp = (xsltStepOpPtr) xmlRealloc(comp->steps, comp->maxStep * 2 *
                                 sizeof(xsltStepOp));
if (tmp == NULL) {
    xsltGenericError(xsltGenericErrorContext,
                     "xsltCompMatchAdd: memory re-allocation failure.\n");
    if (parserCtx->ctxt!= NULL) {
        xsltFreeExtraCtxt(parserCtx->ctxt, comp->steps[comp->nbStep - 1].previousExtra);
        xsltFreeExtraCtxt(parserCtx->ctxt, comp->steps[comp->nbStep - 1].indexExtra);
        xsltFreeExtraCtxt(parserCtx->ctxt, comp->steps[comp->nbStep - 1].lenExtra);
    } else {
        xsltFreeExtra(parserCtx->style, comp->steps[comp->nbStep - 1].previousExtra);
        xsltFreeExtra(parserCtx->style, comp->steps[comp->nbStep - 1].indexExtra);
        xsltFreeExtra(parserCtx->style, comp->steps[comp->nbStep - 1].lenExtra);
    }
    if (comp->steps[comp->nbStep - 1].comp!= NULL) {
        xsltXPathFree(comp->steps[comp->nbStep - 1].comp);
    }
    comp->steps[comp->nbStep - 1].previousExtra = NULL;
    comp->steps[comp->nbStep - 1].indexExtra = NULL;
    comp->steps[comp->nbStep - 1].lenExtra = NULL;
    comp->steps[comp->nbStep - 1].comp = NULL;
    comp->nbStep--;
    return(-1);
}
comp->steps = tmp;
comp->maxStep *= 2;