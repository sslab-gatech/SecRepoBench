// Reset the tracking variables.
  if (soldi != 0) {
    i = soldi;
    soldi = 0;
    len = oldlen;
    cmin = oldcmin;
    cmax = oldcmax;
  }
  scpd++;

  // Roll back to the previously saved state if needed, otherwise, restore
  // characters in the buffer to maintain integrity of the word being processed.
  if (scpd > checkcpdtable.size()) {
    i = oldcmin;
    len = oldlen;
    cmin = oldcmin;
    cmax = oldcmax;
    st = oldst;
  } else {
    st[i] = ch;
  }