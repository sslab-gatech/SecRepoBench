// Reset the tracking variables.
  if (soldi != 0) {
    i = soldi;
    soldi = 0;
    len = oldlen;
    cmin = oldcmin;
    cmax = oldcmax;
  }
  scpd++;

  // Roll back to the previously saved state if needed, otherwise, restore
  // characters in the buffer to maintain integrity of the word being processed.
  if (scpd > checkcpdtable.size()) {
    scpd = 0;
    st = word;
    len = word.size();
    setcminmax(&cmin, &cmax, st.c_str(), len);
    cmax = len - cpdmin + 1;
  } else {
    st.replace(i, std::string::npos, checkcpdtable[scpd - 1].pattern);
    soldi = i;
    i += checkcpdtable[scpd - 1].pattern.size();
    st.replace(i, std::string::npos, checkcpdtable[scpd - 1].pattern2);
    st.replace(i + checkcpdtable[scpd - 1].pattern2.size(), std::string::npos,
               word.substr(soldi + checkcpdtable[scpd - 1].pattern3.size()));
    len += checkcpdtable[scpd - 1].pattern.size() +
           checkcpdtable[scpd - 1].pattern2.size() -
           checkcpdtable[scpd - 1].pattern3.size();
    cmax = len - cpdmin + 1;
  }