// Reset the tracking variables.
// Roll back to the previously saved state if needed, otherwise, restore 
// characters in the buffer to maintain integrity of the word being processed.
if (oldwords!= words) {
  for (int i = 0; i < wnum; i++) {
    hentry* temp = words[i];
    words[i] = oldwords[i];
    oldwords[i] = temp;
  }
}
if (oldcmin!= cmin || oldcmax!= cmax || oldlen!= len) {
  setcminmax(&cmin, &cmax, word.c_str(), len);
}