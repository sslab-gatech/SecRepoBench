Iterator iter = iterator;
while (++iter)
{
  hb_codepoint_t gid = (*iter).first;
  unsigned klass = (*iter).second;
  if (gid != prev_gid + 1 || klass != prev_klass)
  {
    range_rec.last = prev_gid;
    record = c->copy (range_rec);
    if (unlikely (!record)) return_trace (false);
    num_ranges++;
    range_rec.first = gid;
    range_rec.value = klass;
  }
  prev_gid = gid;
  prev_klass = klass;
}
range_rec.last = prev_gid;
rangeRecord.len = num_ranges;
c->sort (rangeRecord);
return_trace (true);