for (auto it = ++iterator; it; ++it) {
      if ((*it).second != prev_klass || (*it).first != range_rec.last + 1) {
	range_rec.last = prev_gid;
	record = c->copy (range_rec);
	if (unlikely (!record)) return_trace (false);
	num_ranges++;
	range_rec.first = (*it).first;
	range_rec.last = (*it).first;
	range_rec.value = (*it).second;
      }
      prev_gid = (*it).first;
      prev_klass = (*it).second;
    }
    range_rec.last = prev_gid;
    rangeRecord.len = num_ranges;
    classFormat = 2;
    return_trace (true);