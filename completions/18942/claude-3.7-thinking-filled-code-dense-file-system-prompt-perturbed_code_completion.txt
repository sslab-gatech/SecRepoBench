{
  // Handle error recovery for loops by cleaning up loop variables
  // and resetting the loop depth to zero. If an error occurs while
  // parsing an inner loop, the cleanup will propagate to the outer
  // loops.
  
  // Clean up variables at the current depth and propagate to outer loops.
  loop_vars_cleanup(compiler->loop_depth);
  
  // Reset loop depth to 0, effectively saying there are no active loops.
  compiler->loop_depth = 0;
  
  // Initialize the frame for local variables in the current loop context.
  // This is necessary because we're about to set up a new loop at depth 0.
  int var_frame = _yr_compiler_get_var_frame(compiler);
  
  // Set up the necessary variables for the new loop context at depth 0.
  compiler->loop[compiler->loop_depth].vars_internal_count = 3;
  compiler->loop[compiler->loop_depth].vars_count = 0;
}