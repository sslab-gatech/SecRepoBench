{
        // Cleanup loop variables and reset loop depth
        loop_vars_cleanup(compiler->loop_depth);
        compiler->loop_depth = 0;

        // Initialize the frame for local variables in the current loop context
        int var_frame = _yr_compiler_get_var_frame(compiler);

        // Set up necessary variables and ensure loop nesting limits are respected
        if (compiler->loop_depth >= YR_MAX_LOOP_NESTING)
        {
          yr_compiler_set_error_extra_info(compiler, "too many nested loops");
          fail_if_error(ERROR_LOOP_NESTING_LIMIT_EXCEEDED);
        }

        // Initialize internal variables for the loop
        yr_parser_emit_with_arg(
            yyscanner, OP_CLEAR_M, var_frame + 0, NULL, NULL);

        yr_parser_emit_with_arg(
            yyscanner, OP_CLEAR_M, var_frame + 1, NULL, NULL);

        yr_parser_emit_with_arg(
            yyscanner, OP_CLEAR_M, var_frame + 2, NULL, NULL);
      }