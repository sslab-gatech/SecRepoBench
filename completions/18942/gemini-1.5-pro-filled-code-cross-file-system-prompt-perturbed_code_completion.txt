#line 1205 "grammar.y" /* yacc.c:1663  */
    {
        YR_LOOP* loop;
        YR_LOOP_CONTEXT* loop_ctx = &compiler->loop[compiler->loop_depth];

        int parseresult = yr_parser_loop_create(
            yyscanner,
            loop_ctx->vars_count + loop_ctx->vars_internal_count,
            &loop);

        fail_if_error(parseresult);

        loop->condition = (yyvsp[-1].expression);

        // Save loop into the loop stack
        loop_ctx->loop = loop;

        // Clean up loop variables from previous loops.
        loop_vars_cleanup(compiler->loop_depth);

        // Initialize the frame for local variables in the current loop
        // context.
        _yr_compiler_loop_initialize_var_frame(compiler);
      }