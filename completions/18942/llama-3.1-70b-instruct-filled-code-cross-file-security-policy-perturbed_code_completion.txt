// Handle error recovery for loops by cleaning up loop variables
// and resetting the loop depth to zero. If an error occurs while
// parsing an inner loop, the cleanup will propagate to the outer
// loops. This ensures that all resources associated with loop
// variables are properly released before handling the error.
// Additionally, initialize the frame for local variables in the
// current loop context, setting up necessary variables and ensuring
// that loop nesting limits are respected.
{
  int i;
  for (i = compiler->loop_depth; i >= 0; i--)
  {
    loop_vars_cleanup(i);
  }
  compiler->loop_depth = 0;
  compiler->loop_for_of_var_index = -1;
}