{
    // Clean up all loop variables and reset loop depth.
    while (compiler->loop_depth > 0)
    {
        loop_vars_cleanup(compiler->loop_depth - 1);
        compiler->loop_depth--;
    }
    
    // Reset any "for of" loop index.
    compiler->loop_for_of_var_index = -1;
    
    // Initialize the frame for local variables in the global context.
    int var_frame = _yr_compiler_get_var_frame(compiler);
    fail_if_error(yr_parser_emit_with_arg(yyscanner, OP_CLEAR_M, var_frame, NULL, NULL));
}