for (i=0; i<ptr->nb_entries; i++) {
    GF_TrunEntry *p = &ptr->samples[i];

    if (ptr->flags & GF_ISOM_TRUN_DURATION) {
        p->Duration = gf_bs_read_u32(bs);
        trun_size += 4;
    }
    if (ptr->flags & GF_ISOM_TRUN_SIZE) {
        p->size = gf_bs_read_u32(bs);
        trun_size += 4;
    }
    if (ptr->flags & GF_ISOM_TRUN_FLAGS) {
        p->flags = gf_bs_read_u32(bs);
        trun_size += 4;
    }
    if (ptr->flags & GF_ISOM_TRUN_CTS_OFFSET) {
        p->CTS_Offset = gf_bs_read_u32(bs);
        trun_size += 4;
    }
    ISOM_DECREASE_SIZE(ptr, trun_size);
}