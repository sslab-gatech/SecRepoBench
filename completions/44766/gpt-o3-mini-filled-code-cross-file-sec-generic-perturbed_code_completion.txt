if (memcmp(&data[index], "esds", 4) == 0) {
    GF_BitStream *sub_bs = gf_bs_new();
    if (sub_bs) {
        /* Initialize the new bitstream to read from the located data region */
        gf_bs_init_data(sub_bs, &data[index], size - index, GF_FALSE);
        /* Set a cookie on the new bitstream to suppress logging */
        gf_bs_set_cookie(sub_bs, gf_bs_get_cookie(bs) | GF_ISOM_BS_COOKIE_QT_CONV);
        
        /* If an ESDS box already exists, remove it from the parent's child list and free it */
        {
            GF_Box *old_esds = gf_isom_box_find_child(s->child_boxes, GF_ISOM_BOX_TYPE_ESDS);
            if (old_esds) {
                gf_list_remove(s->child_boxes, old_esds);
                gf_isom_box_delete(old_esds);
            }
        }
        
        /* Parse a new ESDS box from the bitstream */
        {
            GF_Box *esdsBox = NULL;
            GF_Err parseErr = gf_isom_box_parse(&esdsBox, sub_bs);
            if (parseErr == GF_OK && esdsBox && esdsBox->type == GF_ISOM_BOX_TYPE_ESDS) {
                gf_list_add(s->child_boxes, esdsBox);
            } else {
                if (esdsBox)
                    gf_isom_box_delete(esdsBox);
            }
        }
        
        gf_bs_delete(sub_bs);
    }
    break;
}