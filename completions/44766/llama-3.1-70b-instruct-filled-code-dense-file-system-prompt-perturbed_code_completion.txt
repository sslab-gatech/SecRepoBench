if (data[index] == 'E' && data[index+1] == 'S' && data[index+2] == 'D' && data[index+3] == 'S') {
    GF_BitStream *esds_bs = gf_bs_new();
    gf_bs_set_cookie(esds_bs, GF_LOG_SUPPRESS);
    gf_bs_set_buffer(esds_bs, data + index, size - index);
    GF_Box *esds_box = gf_isom_box_new(GF_ISOM_BOX_TYPE_ESDS);
    GF_Err e = gf_isom_box_read(esds_box, esds_bs);
    if (e) {
        gf_bs_delete(esds_bs);
        gf_isom_box_delete(esds_box);
        continue;
    }
    GF_Box *old_esds_box = gf_isom_box_find_child(s->child_boxes, GF_ISOM_BOX_TYPE_ESDS);
    if (old_esds_box) {
        gf_isom_box_array_remove(s->child_boxes, old_esds_box);
        gf_isom_box_delete(old_esds_box);
    }
    gf_isom_box_array_add(s->child_boxes, esds_box);
    gf_bs_delete(esds_bs);
}